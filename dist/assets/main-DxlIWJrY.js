var w0=Object.defineProperty;var S0=(n,t,e)=>t in n?w0(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var et=(n,t,e)=>(S0(n,typeof t!="symbol"?t+"":t,e),e);import{c as xd,L as oh,D as wf,p as Tl,g as T0}from"./manager-Cw-VX6TE.js";import{M as A0,C as k0,c as ah}from"./grid-DetXoWVd.js";var Qe="top",yn="bottom",xn="right",tn="left",zc="auto",ho=[Qe,yn,xn,tn],ir="start",Kr="end",Sm="clippingParents",lh="viewport",Vr="popper",Tm="reference",_d=ho.reduce(function(n,t){return n.concat([t+"-"+ir,t+"-"+Kr])},[]),ch=[].concat(ho,[zc]).reduce(function(n,t){return n.concat([t,t+"-"+ir,t+"-"+Kr])},[]),Am="beforeRead",km="read",Dm="afterRead",Cm="beforeMain",Im="main",Om="afterMain",Mm="beforeWrite",Lm="write",Pm="afterWrite",Rm=[Am,km,Dm,Cm,Im,Om,Mm,Lm,Pm];function di(n){return n?(n.nodeName||"").toLowerCase():null}function _n(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function sr(n){var t=_n(n).Element;return n instanceof t||n instanceof Element}function Dn(n){var t=_n(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function uh(n){if(typeof ShadowRoot>"u")return!1;var t=_n(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function D0(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},s=t.attributes[e]||{},r=t.elements[e];!Dn(r)||!di(r)||(Object.assign(r.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function C0(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var s=t.elements[i],r=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]),a=o.reduce(function(l,d){return l[d]="",l},{});!Dn(s)||!di(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}const dh={name:"applyStyles",enabled:!0,phase:"write",fn:D0,effect:C0,requires:["computeStyles"]};function oi(n){return n.split("-")[0]}var Ks=Math.max,yc=Math.min,Jr=Math.round;function Ed(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Nm(){return!/^((?!chrome|android).)*safari/i.test(Ed())}function Zr(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var i=n.getBoundingClientRect(),s=1,r=1;t&&Dn(n)&&(s=n.offsetWidth>0&&Jr(i.width)/n.offsetWidth||1,r=n.offsetHeight>0&&Jr(i.height)/n.offsetHeight||1);var o=sr(n)?_n(n):window,a=o.visualViewport,l=!Nm()&&e,d=(i.left+(l&&a?a.offsetLeft:0))/s,f=(i.top+(l&&a?a.offsetTop:0))/r,p=i.width/s,v=i.height/r;return{width:p,height:v,top:f,right:d+p,bottom:f+v,left:d,x:d,y:f}}function hh(n){var t=Zr(n),e=n.offsetWidth,i=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:i}}function Bm(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&uh(e)){var i=t;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function $i(n){return _n(n).getComputedStyle(n)}function I0(n){return["table","td","th"].indexOf(di(n))>=0}function bs(n){return((sr(n)?n.ownerDocument:n.document)||window.document).documentElement}function qc(n){return di(n)==="html"?n:n.assignedSlot||n.parentNode||(uh(n)?n.host:null)||bs(n)}function Sf(n){return!Dn(n)||$i(n).position==="fixed"?null:n.offsetParent}function O0(n){var t=/firefox/i.test(Ed()),e=/Trident/i.test(Ed());if(e&&Dn(n)){var i=$i(n);if(i.position==="fixed")return null}var s=qc(n);for(uh(s)&&(s=s.host);Dn(s)&&["html","body"].indexOf(di(s))<0;){var r=$i(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function $a(n){for(var t=_n(n),e=Sf(n);e&&I0(e)&&$i(e).position==="static";)e=Sf(e);return e&&(di(e)==="html"||di(e)==="body"&&$i(e).position==="static")?t:e||O0(n)||t}function fh(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function aa(n,t,e){return Ks(n,yc(t,e))}function M0(n,t,e){var i=aa(n,t,e);return i>e?e:i}function Fm(){return{top:0,right:0,bottom:0,left:0}}function $m(n){return Object.assign({},Fm(),n)}function Vm(n,t){return t.reduce(function(e,i){return e[i]=n,e},{})}var L0=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,$m(typeof t!="number"?t:Vm(t,ho))};function P0(n){var t,e=n.state,i=n.name,s=n.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,a=oi(e.placement),l=fh(a),d=[tn,xn].indexOf(a)>=0,f=d?"height":"width";if(!(!r||!o)){var p=L0(s.padding,e),v=hh(r),y=l==="y"?Qe:tn,E=l==="y"?yn:xn,w=e.rects.reference[f]+e.rects.reference[l]-o[l]-e.rects.popper[f],T=o[l]-e.rects.reference[l],O=$a(r),R=O?l==="y"?O.clientHeight||0:O.clientWidth||0:0,j=w/2-T/2,$=p[y],V=R-v[f]-p[E],X=R/2-v[f]/2+j,C=aa($,X,V),Z=l;e.modifiersData[i]=(t={},t[Z]=C,t.centerOffset=C-X,t)}}function R0(n){var t=n.state,e=n.options,i=e.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||Bm(t.elements.popper,s)&&(t.elements.arrow=s))}const Hm={name:"arrow",enabled:!0,phase:"main",fn:P0,effect:R0,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Qr(n){return n.split("-")[1]}var N0={top:"auto",right:"auto",bottom:"auto",left:"auto"};function B0(n,t){var e=n.x,i=n.y,s=t.devicePixelRatio||1;return{x:Jr(e*s)/s||0,y:Jr(i*s)/s||0}}function Tf(n){var t,e=n.popper,i=n.popperRect,s=n.placement,r=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,d=n.adaptive,f=n.roundOffsets,p=n.isFixed,v=o.x,y=v===void 0?0:v,E=o.y,w=E===void 0?0:E,T=typeof f=="function"?f({x:y,y:w}):{x:y,y:w};y=T.x,w=T.y;var O=o.hasOwnProperty("x"),R=o.hasOwnProperty("y"),j=tn,$=Qe,V=window;if(d){var X=$a(e),C="clientHeight",Z="clientWidth";if(X===_n(e)&&(X=bs(e),$i(X).position!=="static"&&a==="absolute"&&(C="scrollHeight",Z="scrollWidth")),X=X,s===Qe||(s===tn||s===xn)&&r===Kr){$=yn;var it=p&&X===V&&V.visualViewport?V.visualViewport.height:X[C];w-=it-i.height,w*=l?1:-1}if(s===tn||(s===Qe||s===yn)&&r===Kr){j=xn;var ut=p&&X===V&&V.visualViewport?V.visualViewport.width:X[Z];y-=ut-i.width,y*=l?1:-1}}var ft=Object.assign({position:a},d&&N0),pt=f===!0?B0({x:y,y:w},_n(e)):{x:y,y:w};if(y=pt.x,w=pt.y,l){var It;return Object.assign({},ft,(It={},It[$]=R?"0":"",It[j]=O?"0":"",It.transform=(V.devicePixelRatio||1)<=1?"translate("+y+"px, "+w+"px)":"translate3d("+y+"px, "+w+"px, 0)",It))}return Object.assign({},ft,(t={},t[$]=R?w+"px":"",t[j]=O?y+"px":"",t.transform="",t))}function F0(n){var t=n.state,e=n.options,i=e.gpuAcceleration,s=i===void 0?!0:i,r=e.adaptive,o=r===void 0?!0:r,a=e.roundOffsets,l=a===void 0?!0:a,d={placement:oi(t.placement),variation:Qr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Tf(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Tf(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const ph={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:F0,data:{}};var Al={passive:!0};function $0(n){var t=n.state,e=n.instance,i=n.options,s=i.scroll,r=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=_n(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&d.forEach(function(f){f.addEventListener("scroll",e.update,Al)}),a&&l.addEventListener("resize",e.update,Al),function(){r&&d.forEach(function(f){f.removeEventListener("scroll",e.update,Al)}),a&&l.removeEventListener("resize",e.update,Al)}}const gh={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:$0,data:{}};var V0={left:"right",right:"left",bottom:"top",top:"bottom"};function Zl(n){return n.replace(/left|right|bottom|top/g,function(t){return V0[t]})}var H0={start:"end",end:"start"};function Af(n){return n.replace(/start|end/g,function(t){return H0[t]})}function mh(n){var t=_n(n),e=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:e,scrollTop:i}}function vh(n){return Zr(bs(n)).left+mh(n).scrollLeft}function z0(n,t){var e=_n(n),i=bs(n),s=e.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var d=Nm();(d||!d&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+vh(n),y:l}}function q0(n){var t,e=bs(n),i=mh(n),s=(t=n.ownerDocument)==null?void 0:t.body,r=Ks(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Ks(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+vh(n),l=-i.scrollTop;return $i(s||e).direction==="rtl"&&(a+=Ks(e.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function bh(n){var t=$i(n),e=t.overflow,i=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+s+i)}function zm(n){return["html","body","#document"].indexOf(di(n))>=0?n.ownerDocument.body:Dn(n)&&bh(n)?n:zm(qc(n))}function la(n,t){var e;t===void 0&&(t=[]);var i=zm(n),s=i===((e=n.ownerDocument)==null?void 0:e.body),r=_n(i),o=s?[r].concat(r.visualViewport||[],bh(i)?i:[]):i,a=t.concat(o);return s?a:a.concat(la(qc(o)))}function wd(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function j0(n,t){var e=Zr(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function kf(n,t,e){return t===lh?wd(z0(n,e)):sr(t)?j0(t,e):wd(q0(bs(n)))}function U0(n){var t=la(qc(n)),e=["absolute","fixed"].indexOf($i(n).position)>=0,i=e&&Dn(n)?$a(n):n;return sr(i)?t.filter(function(s){return sr(s)&&Bm(s,i)&&di(s)!=="body"}):[]}function W0(n,t,e,i){var s=t==="clippingParents"?U0(n):[].concat(t),r=[].concat(s,[e]),o=r[0],a=r.reduce(function(l,d){var f=kf(n,d,i);return l.top=Ks(f.top,l.top),l.right=yc(f.right,l.right),l.bottom=yc(f.bottom,l.bottom),l.left=Ks(f.left,l.left),l},kf(n,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function qm(n){var t=n.reference,e=n.element,i=n.placement,s=i?oi(i):null,r=i?Qr(i):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(s){case Qe:l={x:o,y:t.y-e.height};break;case yn:l={x:o,y:t.y+t.height};break;case xn:l={x:t.x+t.width,y:a};break;case tn:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var d=s?fh(s):null;if(d!=null){var f=d==="y"?"height":"width";switch(r){case ir:l[d]=l[d]-(t[f]/2-e[f]/2);break;case Kr:l[d]=l[d]+(t[f]/2-e[f]/2);break}}return l}function to(n,t){t===void 0&&(t={});var e=t,i=e.placement,s=i===void 0?n.placement:i,r=e.strategy,o=r===void 0?n.strategy:r,a=e.boundary,l=a===void 0?Sm:a,d=e.rootBoundary,f=d===void 0?lh:d,p=e.elementContext,v=p===void 0?Vr:p,y=e.altBoundary,E=y===void 0?!1:y,w=e.padding,T=w===void 0?0:w,O=$m(typeof T!="number"?T:Vm(T,ho)),R=v===Vr?Tm:Vr,j=n.rects.popper,$=n.elements[E?R:v],V=W0(sr($)?$:$.contextElement||bs(n.elements.popper),l,f,o),X=Zr(n.elements.reference),C=qm({reference:X,element:j,strategy:"absolute",placement:s}),Z=wd(Object.assign({},j,C)),it=v===Vr?Z:X,ut={top:V.top-it.top+O.top,bottom:it.bottom-V.bottom+O.bottom,left:V.left-it.left+O.left,right:it.right-V.right+O.right},ft=n.modifiersData.offset;if(v===Vr&&ft){var pt=ft[s];Object.keys(ut).forEach(function(It){var Nt=[xn,yn].indexOf(It)>=0?1:-1,xt=[Qe,yn].indexOf(It)>=0?"y":"x";ut[It]+=pt[xt]*Nt})}return ut}function Y0(n,t){t===void 0&&(t={});var e=t,i=e.placement,s=e.boundary,r=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,d=l===void 0?ch:l,f=Qr(i),p=f?a?_d:_d.filter(function(E){return Qr(E)===f}):ho,v=p.filter(function(E){return d.indexOf(E)>=0});v.length===0&&(v=p);var y=v.reduce(function(E,w){return E[w]=to(n,{placement:w,boundary:s,rootBoundary:r,padding:o})[oi(w)],E},{});return Object.keys(y).sort(function(E,w){return y[E]-y[w]})}function X0(n){if(oi(n)===zc)return[];var t=Zl(n);return[Af(n),t,Af(t)]}function G0(n){var t=n.state,e=n.options,i=n.name;if(!t.modifiersData[i]._skip){for(var s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,d=e.padding,f=e.boundary,p=e.rootBoundary,v=e.altBoundary,y=e.flipVariations,E=y===void 0?!0:y,w=e.allowedAutoPlacements,T=t.options.placement,O=oi(T),R=O===T,j=l||(R||!E?[Zl(T)]:X0(T)),$=[T].concat(j).reduce(function(Te,Ae){return Te.concat(oi(Ae)===zc?Y0(t,{placement:Ae,boundary:f,rootBoundary:p,padding:d,flipVariations:E,allowedAutoPlacements:w}):Ae)},[]),V=t.rects.reference,X=t.rects.popper,C=new Map,Z=!0,it=$[0],ut=0;ut<$.length;ut++){var ft=$[ut],pt=oi(ft),It=Qr(ft)===ir,Nt=[Qe,yn].indexOf(pt)>=0,xt=Nt?"width":"height",bt=to(t,{placement:ft,boundary:f,rootBoundary:p,altBoundary:v,padding:d}),Ct=Nt?It?xn:tn:It?yn:Qe;V[xt]>X[xt]&&(Ct=Zl(Ct));var Ee=Zl(Ct),qt=[];if(r&&qt.push(bt[pt]<=0),a&&qt.push(bt[Ct]<=0,bt[Ee]<=0),qt.every(function(Te){return Te})){it=ft,Z=!1;break}C.set(ft,qt)}if(Z)for(var be=E?3:1,en=function(Ae){var te=$.find(function(nn){var sn=C.get(nn);if(sn)return sn.slice(0,Ae).every(function(at){return at})});if(te)return it=te,"break"},Ve=be;Ve>0;Ve--){var qe=en(Ve);if(qe==="break")break}t.placement!==it&&(t.modifiersData[i]._skip=!0,t.placement=it,t.reset=!0)}}const jm={name:"flip",enabled:!0,phase:"main",fn:G0,requiresIfExists:["offset"],data:{_skip:!1}};function Df(n,t,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-t.height-e.y,right:n.right-t.width+e.x,bottom:n.bottom-t.height+e.y,left:n.left-t.width-e.x}}function Cf(n){return[Qe,xn,yn,tn].some(function(t){return n[t]>=0})}function K0(n){var t=n.state,e=n.name,i=t.rects.reference,s=t.rects.popper,r=t.modifiersData.preventOverflow,o=to(t,{elementContext:"reference"}),a=to(t,{altBoundary:!0}),l=Df(o,i),d=Df(a,s,r),f=Cf(l),p=Cf(d);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:f,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":p})}const Um={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:K0};function J0(n,t,e){var i=oi(n),s=[tn,Qe].indexOf(i)>=0?-1:1,r=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[tn,xn].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function Z0(n){var t=n.state,e=n.options,i=n.name,s=e.offset,r=s===void 0?[0,0]:s,o=ch.reduce(function(f,p){return f[p]=J0(p,t.rects,r),f},{}),a=o[t.placement],l=a.x,d=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d),t.modifiersData[i]=o}const Wm={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Z0};function Q0(n){var t=n.state,e=n.name;t.modifiersData[e]=qm({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const yh={name:"popperOffsets",enabled:!0,phase:"read",fn:Q0,data:{}};function tx(n){return n==="x"?"y":"x"}function ex(n){var t=n.state,e=n.options,i=n.name,s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,d=e.rootBoundary,f=e.altBoundary,p=e.padding,v=e.tether,y=v===void 0?!0:v,E=e.tetherOffset,w=E===void 0?0:E,T=to(t,{boundary:l,rootBoundary:d,padding:p,altBoundary:f}),O=oi(t.placement),R=Qr(t.placement),j=!R,$=fh(O),V=tx($),X=t.modifiersData.popperOffsets,C=t.rects.reference,Z=t.rects.popper,it=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,ut=typeof it=="number"?{mainAxis:it,altAxis:it}:Object.assign({mainAxis:0,altAxis:0},it),ft=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,pt={x:0,y:0};if(X){if(r){var It,Nt=$==="y"?Qe:tn,xt=$==="y"?yn:xn,bt=$==="y"?"height":"width",Ct=X[$],Ee=Ct+T[Nt],qt=Ct-T[xt],be=y?-Z[bt]/2:0,en=R===ir?C[bt]:Z[bt],Ve=R===ir?-Z[bt]:-C[bt],qe=t.elements.arrow,Te=y&&qe?hh(qe):{width:0,height:0},Ae=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Fm(),te=Ae[Nt],nn=Ae[xt],sn=aa(0,C[bt],Te[bt]),at=j?C[bt]/2-be-sn-te-ut.mainAxis:en-sn-te-ut.mainAxis,se=j?-C[bt]/2+be+sn+nn+ut.mainAxis:Ve+sn+nn+ut.mainAxis,En=t.elements.arrow&&$a(t.elements.arrow),zi=En?$==="y"?En.clientTop||0:En.clientLeft||0:0,ue=(It=ft==null?void 0:ft[$])!=null?It:0,qi=Ct+at-ue-zi,mi=Ct+se-ue,wn=aa(y?yc(Ee,qi):Ee,Ct,y?Ks(qt,mi):qt);X[$]=wn,pt[$]=wn-Ct}if(a){var Ss,vi=$==="x"?Qe:tn,Ts=$==="x"?yn:xn,rn=X[V],Pn=V==="y"?"height":"width",As=rn+T[vi],ji=rn-T[Ts],Un=[Qe,tn].indexOf(O)!==-1,ks=(Ss=ft==null?void 0:ft[V])!=null?Ss:0,Wn=Un?As:rn-C[Pn]-Z[Pn]-ks+ut.altAxis,gr=Un?rn+C[Pn]+Z[Pn]-ks-ut.altAxis:ji,Ui=y&&Un?M0(Wn,rn,gr):aa(y?Wn:As,rn,y?gr:ji);X[V]=Ui,pt[V]=Ui-rn}t.modifiersData[i]=pt}}const Ym={name:"preventOverflow",enabled:!0,phase:"main",fn:ex,requiresIfExists:["offset"]};function nx(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function ix(n){return n===_n(n)||!Dn(n)?mh(n):nx(n)}function sx(n){var t=n.getBoundingClientRect(),e=Jr(t.width)/n.offsetWidth||1,i=Jr(t.height)/n.offsetHeight||1;return e!==1||i!==1}function rx(n,t,e){e===void 0&&(e=!1);var i=Dn(t),s=Dn(t)&&sx(t),r=bs(t),o=Zr(n,s,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&((di(t)!=="body"||bh(r))&&(a=ix(t)),Dn(t)?(l=Zr(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=vh(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function ox(n){var t=new Map,e=new Set,i=[];n.forEach(function(r){t.set(r.name,r)});function s(r){e.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&s(l)}}),i.push(r)}return n.forEach(function(r){e.has(r.name)||s(r)}),i}function ax(n){var t=ox(n);return Rm.reduce(function(e,i){return e.concat(t.filter(function(s){return s.phase===i}))},[])}function lx(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function cx(n){var t=n.reduce(function(e,i){var s=e[i.name];return e[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}var If={placement:"bottom",modifiers:[],strategy:"absolute"};function Of(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function jc(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,i=e===void 0?[]:e,s=t.defaultOptions,r=s===void 0?If:s;return function(a,l,d){d===void 0&&(d=r);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},If,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],v=!1,y={state:f,setOptions:function(O){var R=typeof O=="function"?O(f.options):O;w(),f.options=Object.assign({},r,f.options,R),f.scrollParents={reference:sr(a)?la(a):a.contextElement?la(a.contextElement):[],popper:la(l)};var j=ax(cx([].concat(i,f.options.modifiers)));return f.orderedModifiers=j.filter(function($){return $.enabled}),E(),y.update()},forceUpdate:function(){if(!v){var O=f.elements,R=O.reference,j=O.popper;if(Of(R,j)){f.rects={reference:rx(R,$a(j),f.options.strategy==="fixed"),popper:hh(j)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(ut){return f.modifiersData[ut.name]=Object.assign({},ut.data)});for(var $=0;$<f.orderedModifiers.length;$++){if(f.reset===!0){f.reset=!1,$=-1;continue}var V=f.orderedModifiers[$],X=V.fn,C=V.options,Z=C===void 0?{}:C,it=V.name;typeof X=="function"&&(f=X({state:f,options:Z,name:it,instance:y})||f)}}}},update:lx(function(){return new Promise(function(T){y.forceUpdate(),T(f)})}),destroy:function(){w(),v=!0}};if(!Of(a,l))return y;y.setOptions(d).then(function(T){!v&&d.onFirstUpdate&&d.onFirstUpdate(T)});function E(){f.orderedModifiers.forEach(function(T){var O=T.name,R=T.options,j=R===void 0?{}:R,$=T.effect;if(typeof $=="function"){var V=$({state:f,name:O,instance:y,options:j}),X=function(){};p.push(V||X)}})}function w(){p.forEach(function(T){return T()}),p=[]}return y}}var ux=jc(),dx=[gh,yh,ph,dh],hx=jc({defaultModifiers:dx}),fx=[gh,yh,ph,dh,Wm,jm,Ym,Hm,Um],xh=jc({defaultModifiers:fx});const Xm=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Om,afterRead:Dm,afterWrite:Pm,applyStyles:dh,arrow:Hm,auto:zc,basePlacements:ho,beforeMain:Cm,beforeRead:Am,beforeWrite:Mm,bottom:yn,clippingParents:Sm,computeStyles:ph,createPopper:xh,createPopperBase:ux,createPopperLite:hx,detectOverflow:to,end:Kr,eventListeners:gh,flip:jm,hide:Um,left:tn,main:Im,modifierPhases:Rm,offset:Wm,placements:ch,popper:Vr,popperGenerator:jc,popperOffsets:yh,preventOverflow:Ym,read:km,reference:Tm,right:xn,start:ir,top:Qe,variationPlacements:_d,viewport:lh,write:Lm},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const ns=new Map,Mu={set(n,t,e){ns.has(n)||ns.set(n,new Map);const i=ns.get(n);if(!i.has(t)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(t,e)},get(n,t){return ns.has(n)&&ns.get(n).get(t)||null},remove(n,t){if(!ns.has(n))return;const e=ns.get(n);e.delete(t),e.size===0&&ns.delete(n)}},px=1e6,gx=1e3,Sd="transitionend",Gm=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),n),mx=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),vx=n=>{do n+=Math.floor(Math.random()*px);while(document.getElementById(n));return n},bx=n=>{if(!n)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(n);const i=Number.parseFloat(t),s=Number.parseFloat(e);return!i&&!s?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*gx)},Km=n=>{n.dispatchEvent(new Event(Sd))},Ri=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),hs=n=>Ri(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(Gm(n)):null,fo=n=>{if(!Ri(n)||n.getClientRects().length===0)return!1;const t=getComputedStyle(n).getPropertyValue("visibility")==="visible",e=n.closest("details:not([open])");if(!e)return t;if(e!==n){const i=n.closest("summary");if(i&&i.parentNode!==e||i===null)return!1}return t},fs=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",Jm=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const t=n.getRootNode();return t instanceof ShadowRoot?t:null}return n instanceof ShadowRoot?n:n.parentNode?Jm(n.parentNode):null},xc=()=>{},Va=n=>{n.offsetHeight},Zm=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Lu=[],yx=n=>{document.readyState==="loading"?(Lu.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Lu)t()}),Lu.push(n)):n()},In=()=>document.documentElement.dir==="rtl",Ln=n=>{yx(()=>{const t=Zm();if(t){const e=n.NAME,i=t.fn[e];t.fn[e]=n.jQueryInterface,t.fn[e].Constructor=n,t.fn[e].noConflict=()=>(t.fn[e]=i,n.jQueryInterface)}})},an=(n,t=[],e=n)=>typeof n=="function"?n(...t):e,Qm=(n,t,e=!0)=>{if(!e){an(n);return}const s=bx(t)+5;let r=!1;const o=({target:a})=>{a===t&&(r=!0,t.removeEventListener(Sd,o),an(n))};t.addEventListener(Sd,o),setTimeout(()=>{r||Km(t)},s)},_h=(n,t,e,i)=>{const s=n.length;let r=n.indexOf(t);return r===-1?!e&&i?n[s-1]:n[0]:(r+=e?1:-1,i&&(r=(r+s)%s),n[Math.max(0,Math.min(r,s-1))])},xx=/[^.]*(?=\..*)\.|.*/,_x=/\..*/,Ex=/::\d+$/,Pu={};let Mf=1;const tv={mouseenter:"mouseover",mouseleave:"mouseout"},wx=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ev(n,t){return t&&`${t}::${Mf++}`||n.uidEvent||Mf++}function nv(n){const t=ev(n);return n.uidEvent=t,Pu[t]=Pu[t]||{},Pu[t]}function Sx(n,t){return function e(i){return Eh(i,{delegateTarget:n}),e.oneOff&&J.off(n,i.type,t),t.apply(n,[i])}}function Tx(n,t,e){return function i(s){const r=n.querySelectorAll(t);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return Eh(s,{delegateTarget:o}),i.oneOff&&J.off(n,s.type,t,e),e.apply(o,[s])}}function iv(n,t,e=null){return Object.values(n).find(i=>i.callable===t&&i.delegationSelector===e)}function sv(n,t,e){const i=typeof t=="string",s=i?e:t||e;let r=rv(n);return wx.has(r)||(r=n),[i,s,r]}function Lf(n,t,e,i,s){if(typeof t!="string"||!n)return;let[r,o,a]=sv(t,e,i);t in tv&&(o=(E=>function(w){if(!w.relatedTarget||w.relatedTarget!==w.delegateTarget&&!w.delegateTarget.contains(w.relatedTarget))return E.call(this,w)})(o));const l=nv(n),d=l[a]||(l[a]={}),f=iv(d,o,r?e:null);if(f){f.oneOff=f.oneOff&&s;return}const p=ev(o,t.replace(xx,"")),v=r?Tx(n,e,o):Sx(n,o);v.delegationSelector=r?e:null,v.callable=o,v.oneOff=s,v.uidEvent=p,d[p]=v,n.addEventListener(a,v,r)}function Td(n,t,e,i,s){const r=iv(t[e],i,s);r&&(n.removeEventListener(e,r,!!s),delete t[e][r.uidEvent])}function Ax(n,t,e,i){const s=t[e]||{};for(const[r,o]of Object.entries(s))r.includes(i)&&Td(n,t,e,o.callable,o.delegationSelector)}function rv(n){return n=n.replace(_x,""),tv[n]||n}const J={on(n,t,e,i){Lf(n,t,e,i,!1)},one(n,t,e,i){Lf(n,t,e,i,!0)},off(n,t,e,i){if(typeof t!="string"||!n)return;const[s,r,o]=sv(t,e,i),a=o!==t,l=nv(n),d=l[o]||{},f=t.startsWith(".");if(typeof r<"u"){if(!Object.keys(d).length)return;Td(n,l,o,r,s?e:null);return}if(f)for(const p of Object.keys(l))Ax(n,l,p,t.slice(1));for(const[p,v]of Object.entries(d)){const y=p.replace(Ex,"");(!a||t.includes(y))&&Td(n,l,o,v.callable,v.delegationSelector)}},trigger(n,t,e){if(typeof t!="string"||!n)return null;const i=Zm(),s=rv(t),r=t!==s;let o=null,a=!0,l=!0,d=!1;r&&i&&(o=i.Event(t,e),i(n).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),d=o.isDefaultPrevented());const f=Eh(new Event(t,{bubbles:a,cancelable:!0}),e);return d&&f.preventDefault(),l&&n.dispatchEvent(f),f.defaultPrevented&&o&&o.preventDefault(),f}};function Eh(n,t={}){for(const[e,i]of Object.entries(t))try{n[e]=i}catch{Object.defineProperty(n,e,{configurable:!0,get(){return i}})}return n}function Pf(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function Ru(n){return n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Ni={setDataAttribute(n,t,e){n.setAttribute(`data-bs-${Ru(t)}`,e)},removeDataAttribute(n,t){n.removeAttribute(`data-bs-${Ru(t)}`)},getDataAttributes(n){if(!n)return{};const t={},e=Object.keys(n.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of e){let s=i.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),t[s]=Pf(n.dataset[i])}return t},getDataAttribute(n,t){return Pf(n.getAttribute(`data-bs-${Ru(t)}`))}};let Ha=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const i=Ri(e)?Ni.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...Ri(e)?Ni.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[i,s]of Object.entries(e)){const r=t[i],o=Ri(r)?"element":mx(r);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${s}".`)}}};const kx="5.3.3";class jn extends Ha{constructor(t,e){super(),t=hs(t),t&&(this._element=t,this._config=this._getConfig(e),Mu.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Mu.remove(this._element,this.constructor.DATA_KEY),J.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,i=!0){Qm(t,e,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Mu.get(hs(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return kx}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Nu=n=>{let t=n.getAttribute("data-bs-target");if(!t||t==="#"){let e=n.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>Gm(e)).join(","):null},vt={find(n,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,n))},findOne(n,t=document.documentElement){return Element.prototype.querySelector.call(t,n)},children(n,t){return[].concat(...n.children).filter(e=>e.matches(t))},parents(n,t){const e=[];let i=n.parentNode.closest(t);for(;i;)e.push(i),i=i.parentNode.closest(t);return e},prev(n,t){let e=n.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(n,t){let e=n.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(n){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,n).filter(e=>!fs(e)&&fo(e))},getSelectorFromElement(n){const t=Nu(n);return t&&vt.findOne(t)?t:null},getElementFromSelector(n){const t=Nu(n);return t?vt.findOne(t):null},getMultipleElementsFromSelector(n){const t=Nu(n);return t?vt.find(t):[]}},Uc=(n,t="hide")=>{const e=`click.dismiss${n.EVENT_KEY}`,i=n.NAME;J.on(document,e,`[data-bs-dismiss="${i}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),fs(this))return;const r=vt.getElementFromSelector(this)||this.closest(`.${i}`);n.getOrCreateInstance(r)[t]()})},Dx="alert",Cx="bs.alert",ov=`.${Cx}`,Ix=`close${ov}`,Ox=`closed${ov}`,Mx="fade",Lx="show";class Wc extends jn{static get NAME(){return Dx}close(){if(J.trigger(this._element,Ix).defaultPrevented)return;this._element.classList.remove(Lx);const e=this._element.classList.contains(Mx);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),J.trigger(this._element,Ox),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=Wc.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Uc(Wc,"close");Ln(Wc);const Px="button",Rx="bs.button",Nx=`.${Rx}`,Bx=".data-api",Fx="active",Rf='[data-bs-toggle="button"]',$x=`click${Nx}${Bx}`;class Yc extends jn{static get NAME(){return Px}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Fx))}static jQueryInterface(t){return this.each(function(){const e=Yc.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}J.on(document,$x,Rf,n=>{n.preventDefault();const t=n.target.closest(Rf);Yc.getOrCreateInstance(t).toggle()});Ln(Yc);const Vx="swipe",po=".bs.swipe",Hx=`touchstart${po}`,zx=`touchmove${po}`,qx=`touchend${po}`,jx=`pointerdown${po}`,Ux=`pointerup${po}`,Wx="touch",Yx="pen",Xx="pointer-event",Gx=40,Kx={endCallback:null,leftCallback:null,rightCallback:null},Jx={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class _c extends Ha{constructor(t,e){super(),this._element=t,!(!t||!_c.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Kx}static get DefaultType(){return Jx}static get NAME(){return Vx}dispose(){J.off(this._element,po)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),an(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Gx)return;const e=t/this._deltaX;this._deltaX=0,e&&an(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(J.on(this._element,jx,t=>this._start(t)),J.on(this._element,Ux,t=>this._end(t)),this._element.classList.add(Xx)):(J.on(this._element,Hx,t=>this._start(t)),J.on(this._element,zx,t=>this._move(t)),J.on(this._element,qx,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Yx||t.pointerType===Wx)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Zx="carousel",Qx="bs.carousel",ys=`.${Qx}`,av=".data-api",t_="ArrowLeft",e_="ArrowRight",n_=500,jo="next",Rr="prev",Hr="left",Ql="right",i_=`slide${ys}`,Bu=`slid${ys}`,s_=`keydown${ys}`,r_=`mouseenter${ys}`,o_=`mouseleave${ys}`,a_=`dragstart${ys}`,l_=`load${ys}${av}`,c_=`click${ys}${av}`,lv="carousel",kl="active",u_="slide",d_="carousel-item-end",h_="carousel-item-start",f_="carousel-item-next",p_="carousel-item-prev",cv=".active",uv=".carousel-item",g_=cv+uv,m_=".carousel-item img",v_=".carousel-indicators",b_="[data-bs-slide], [data-bs-slide-to]",y_='[data-bs-ride="carousel"]',x_={[t_]:Ql,[e_]:Hr},__={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},E_={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class za extends jn{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=vt.findOne(v_,this._element),this._addEventListeners(),this._config.ride===lv&&this.cycle()}static get Default(){return __}static get DefaultType(){return E_}static get NAME(){return Zx}next(){this._slide(jo)}nextWhenVisible(){!document.hidden&&fo(this._element)&&this.next()}prev(){this._slide(Rr)}pause(){this._isSliding&&Km(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){J.one(this._element,Bu,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){J.one(this._element,Bu,()=>this.to(t));return}const i=this._getItemIndex(this._getActive());if(i===t)return;const s=t>i?jo:Rr;this._slide(s,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&J.on(this._element,s_,t=>this._keydown(t)),this._config.pause==="hover"&&(J.on(this._element,r_,()=>this.pause()),J.on(this._element,o_,()=>this._maybeEnableCycle())),this._config.touch&&_c.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of vt.find(m_,this._element))J.on(i,a_,s=>s.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(Hr)),rightCallback:()=>this._slide(this._directionToOrder(Ql)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),n_+this._config.interval))}};this._swipeHelper=new _c(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=x_[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=vt.findOne(cv,this._indicatorsElement);e.classList.remove(kl),e.removeAttribute("aria-current");const i=vt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(kl),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const i=this._getActive(),s=t===jo,r=e||_h(this._getItems(),i,s,this._config.wrap);if(r===i)return;const o=this._getItemIndex(r),a=y=>J.trigger(this._element,y,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(a(i_).defaultPrevented||!i||!r)return;const d=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const f=s?h_:d_,p=s?f_:p_;r.classList.add(p),Va(r),i.classList.add(f),r.classList.add(f);const v=()=>{r.classList.remove(f,p),r.classList.add(kl),i.classList.remove(kl,p,f),this._isSliding=!1,a(Bu)};this._queueCallback(v,i,this._isAnimated()),d&&this.cycle()}_isAnimated(){return this._element.classList.contains(u_)}_getActive(){return vt.findOne(g_,this._element)}_getItems(){return vt.find(uv,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return In()?t===Hr?Rr:jo:t===Hr?jo:Rr}_orderToDirection(t){return In()?t===Rr?Hr:Ql:t===Rr?Ql:Hr}static jQueryInterface(t){return this.each(function(){const e=za.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}J.on(document,c_,b_,function(n){const t=vt.getElementFromSelector(this);if(!t||!t.classList.contains(lv))return;n.preventDefault();const e=za.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");if(i){e.to(i),e._maybeEnableCycle();return}if(Ni.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});J.on(window,l_,()=>{const n=vt.find(y_);for(const t of n)za.getOrCreateInstance(t)});Ln(za);const w_="collapse",S_="bs.collapse",qa=`.${S_}`,T_=".data-api",A_=`show${qa}`,k_=`shown${qa}`,D_=`hide${qa}`,C_=`hidden${qa}`,I_=`click${qa}${T_}`,Fu="show",qr="collapse",Dl="collapsing",O_="collapsed",M_=`:scope .${qr} .${qr}`,L_="collapse-horizontal",P_="width",R_="height",N_=".collapse.show, .collapse.collapsing",Ad='[data-bs-toggle="collapse"]',B_={parent:null,toggle:!0},F_={parent:"(null|element)",toggle:"boolean"};class wa extends jn{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const i=vt.find(Ad);for(const s of i){const r=vt.getSelectorFromElement(s),o=vt.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return B_}static get DefaultType(){return F_}static get NAME(){return w_}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(N_).filter(a=>a!==this._element).map(a=>wa.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||J.trigger(this._element,A_).defaultPrevented)return;for(const a of t)a.hide();const i=this._getDimension();this._element.classList.remove(qr),this._element.classList.add(Dl),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Dl),this._element.classList.add(qr,Fu),this._element.style[i]="",J.trigger(this._element,k_)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||J.trigger(this._element,D_).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Va(this._element),this._element.classList.add(Dl),this._element.classList.remove(qr,Fu);for(const s of this._triggerArray){const r=vt.getElementFromSelector(s);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Dl),this._element.classList.add(qr),J.trigger(this._element,C_)};this._element.style[e]="",this._queueCallback(i,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Fu)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=hs(t.parent),t}_getDimension(){return this._element.classList.contains(L_)?P_:R_}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Ad);for(const e of t){const i=vt.getElementFromSelector(e);i&&this._addAriaAndCollapsedClass([e],this._isShown(i))}}_getFirstLevelChildren(t){const e=vt.find(M_,this._config.parent);return vt.find(t,this._config.parent).filter(i=>!e.includes(i))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const i of t)i.classList.toggle(O_,!e),i.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const i=wa.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}}J.on(document,I_,Ad,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const t of vt.getMultipleElementsFromSelector(this))wa.getOrCreateInstance(t,{toggle:!1}).toggle()});Ln(wa);const Nf="dropdown",$_="bs.dropdown",ur=`.${$_}`,wh=".data-api",V_="Escape",Bf="Tab",H_="ArrowUp",Ff="ArrowDown",z_=2,q_=`hide${ur}`,j_=`hidden${ur}`,U_=`show${ur}`,W_=`shown${ur}`,dv=`click${ur}${wh}`,hv=`keydown${ur}${wh}`,Y_=`keyup${ur}${wh}`,zr="show",X_="dropup",G_="dropend",K_="dropstart",J_="dropup-center",Z_="dropdown-center",Ys='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Q_=`${Ys}.${zr}`,tc=".dropdown-menu",tE=".navbar",eE=".navbar-nav",nE=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",iE=In()?"top-end":"top-start",sE=In()?"top-start":"top-end",rE=In()?"bottom-end":"bottom-start",oE=In()?"bottom-start":"bottom-end",aE=In()?"left-start":"right-start",lE=In()?"right-start":"left-start",cE="top",uE="bottom",dE={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},hE={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ai extends jn{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=vt.next(this._element,tc)[0]||vt.prev(this._element,tc)[0]||vt.findOne(tc,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return dE}static get DefaultType(){return hE}static get NAME(){return Nf}toggle(){return this._isShown()?this.hide():this.show()}show(){if(fs(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!J.trigger(this._element,U_,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(eE))for(const i of[].concat(...document.body.children))J.on(i,"mouseover",xc);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(zr),this._element.classList.add(zr),J.trigger(this._element,W_,t)}}hide(){if(fs(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!J.trigger(this._element,q_,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))J.off(i,"mouseover",xc);this._popper&&this._popper.destroy(),this._menu.classList.remove(zr),this._element.classList.remove(zr),this._element.setAttribute("aria-expanded","false"),Ni.removeDataAttribute(this._menu,"popper"),J.trigger(this._element,j_,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Ri(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${Nf.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof Xm>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Ri(this._config.reference)?t=hs(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=xh(t,this._menu,e)}_isShown(){return this._menu.classList.contains(zr)}_getPlacement(){const t=this._parent;if(t.classList.contains(G_))return aE;if(t.classList.contains(K_))return lE;if(t.classList.contains(J_))return cE;if(t.classList.contains(Z_))return uE;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(X_)?e?sE:iE:e?oE:rE}_detectNavbar(){return this._element.closest(tE)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ni.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...an(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const i=vt.find(nE,this._menu).filter(s=>fo(s));i.length&&_h(i,e,t===Ff,!i.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=ai.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===z_||t.type==="keyup"&&t.key!==Bf)return;const e=vt.find(Q_);for(const i of e){const s=ai.getInstance(i);if(!s||s._config.autoClose===!1)continue;const r=t.composedPath(),o=r.includes(s._menu);if(r.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(t.target)&&(t.type==="keyup"&&t.key===Bf||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:s._element};t.type==="click"&&(a.clickEvent=t),s._completeHide(a)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),i=t.key===V_,s=[H_,Ff].includes(t.key);if(!s&&!i||e&&!i)return;t.preventDefault();const r=this.matches(Ys)?this:vt.prev(this,Ys)[0]||vt.next(this,Ys)[0]||vt.findOne(Ys,t.delegateTarget.parentNode),o=ai.getOrCreateInstance(r);if(s){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}J.on(document,hv,Ys,ai.dataApiKeydownHandler);J.on(document,hv,tc,ai.dataApiKeydownHandler);J.on(document,dv,ai.clearMenus);J.on(document,Y_,ai.clearMenus);J.on(document,dv,Ys,function(n){n.preventDefault(),ai.getOrCreateInstance(this).toggle()});Ln(ai);const fv="backdrop",fE="fade",$f="show",Vf=`mousedown.bs.${fv}`,pE={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},gE={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class pv extends Ha{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return pE}static get DefaultType(){return gE}static get NAME(){return fv}show(t){if(!this._config.isVisible){an(t);return}this._append();const e=this._getElement();this._config.isAnimated&&Va(e),e.classList.add($f),this._emulateAnimation(()=>{an(t)})}hide(t){if(!this._config.isVisible){an(t);return}this._getElement().classList.remove($f),this._emulateAnimation(()=>{this.dispose(),an(t)})}dispose(){this._isAppended&&(J.off(this._element,Vf),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(fE),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=hs(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),J.on(t,Vf,()=>{an(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Qm(t,this._getElement(),this._config.isAnimated)}}const mE="focustrap",vE="bs.focustrap",Ec=`.${vE}`,bE=`focusin${Ec}`,yE=`keydown.tab${Ec}`,xE="Tab",_E="forward",Hf="backward",EE={autofocus:!0,trapElement:null},wE={autofocus:"boolean",trapElement:"element"};class gv extends Ha{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return EE}static get DefaultType(){return wE}static get NAME(){return mE}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),J.off(document,Ec),J.on(document,bE,t=>this._handleFocusin(t)),J.on(document,yE,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,J.off(document,Ec))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const i=vt.focusableChildren(e);i.length===0?e.focus():this._lastTabNavDirection===Hf?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){t.key===xE&&(this._lastTabNavDirection=t.shiftKey?Hf:_E)}}const zf=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",qf=".sticky-top",Cl="padding-right",jf="margin-right";class kd{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Cl,e=>e+t),this._setElementAttributes(zf,Cl,e=>e+t),this._setElementAttributes(qf,jf,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Cl),this._resetElementAttributes(zf,Cl),this._resetElementAttributes(qf,jf)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,i){const s=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,e);const a=window.getComputedStyle(o).getPropertyValue(e);o.style.setProperty(e,`${i(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,r)}_saveInitialAttribute(t,e){const i=t.style.getPropertyValue(e);i&&Ni.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){const i=s=>{const r=Ni.getDataAttribute(s,e);if(r===null){s.style.removeProperty(e);return}Ni.removeDataAttribute(s,e),s.style.setProperty(e,r)};this._applyManipulationCallback(t,i)}_applyManipulationCallback(t,e){if(Ri(t)){e(t);return}for(const i of vt.find(t,this._element))e(i)}}const SE="modal",TE="bs.modal",On=`.${TE}`,AE=".data-api",kE="Escape",DE=`hide${On}`,CE=`hidePrevented${On}`,mv=`hidden${On}`,vv=`show${On}`,IE=`shown${On}`,OE=`resize${On}`,ME=`click.dismiss${On}`,LE=`mousedown.dismiss${On}`,PE=`keydown.dismiss${On}`,RE=`click${On}${AE}`,Uf="modal-open",NE="fade",Wf="show",$u="modal-static",BE=".modal.show",FE=".modal-dialog",$E=".modal-body",VE='[data-bs-toggle="modal"]',HE={backdrop:!0,focus:!0,keyboard:!0},zE={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class rr extends jn{constructor(t,e){super(t,e),this._dialog=vt.findOne(FE,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new kd,this._addEventListeners()}static get Default(){return HE}static get DefaultType(){return zE}static get NAME(){return SE}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||J.trigger(this._element,vv,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Uf),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||J.trigger(this._element,DE).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Wf),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){J.off(window,On),J.off(this._dialog,On),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new pv({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new gv({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=vt.findOne($E,this._dialog);e&&(e.scrollTop=0),Va(this._element),this._element.classList.add(Wf);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,J.trigger(this._element,IE,{relatedTarget:t})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){J.on(this._element,PE,t=>{if(t.key===kE){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),J.on(window,OE,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),J.on(this._element,LE,t=>{J.one(this._element,ME,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Uf),this._resetAdjustments(),this._scrollBar.reset(),J.trigger(this._element,mv)})}_isAnimated(){return this._element.classList.contains(NE)}_triggerBackdropTransition(){if(J.trigger(this._element,CE).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains($u)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add($u),this._queueCallback(()=>{this._element.classList.remove($u),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;if(i&&!t){const s=In()?"paddingLeft":"paddingRight";this._element.style[s]=`${e}px`}if(!i&&t){const s=In()?"paddingRight":"paddingLeft";this._element.style[s]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const i=rr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t](e)}})}}J.on(document,RE,VE,function(n){const t=vt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),J.one(t,vv,s=>{s.defaultPrevented||J.one(t,mv,()=>{fo(this)&&this.focus()})});const e=vt.findOne(BE);e&&rr.getInstance(e).hide(),rr.getOrCreateInstance(t).toggle(this)});Uc(rr);Ln(rr);const qE="offcanvas",jE="bs.offcanvas",Vi=`.${jE}`,bv=".data-api",UE=`load${Vi}${bv}`,WE="Escape",Yf="show",Xf="showing",Gf="hiding",YE="offcanvas-backdrop",yv=".offcanvas.show",XE=`show${Vi}`,GE=`shown${Vi}`,KE=`hide${Vi}`,Kf=`hidePrevented${Vi}`,xv=`hidden${Vi}`,JE=`resize${Vi}`,ZE=`click${Vi}${bv}`,QE=`keydown.dismiss${Vi}`,tw='[data-bs-toggle="offcanvas"]',ew={backdrop:!0,keyboard:!0,scroll:!1},nw={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class hi extends jn{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ew}static get DefaultType(){return nw}static get NAME(){return qE}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||J.trigger(this._element,XE,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new kd().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Xf);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Yf),this._element.classList.remove(Xf),J.trigger(this._element,GE,{relatedTarget:t})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||J.trigger(this._element,KE).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Gf),this._backdrop.hide();const e=()=>{this._element.classList.remove(Yf,Gf),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new kd().reset(),J.trigger(this._element,xv)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){J.trigger(this._element,Kf);return}this.hide()},e=!!this._config.backdrop;return new pv({className:YE,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new gv({trapElement:this._element})}_addEventListeners(){J.on(this._element,QE,t=>{if(t.key===WE){if(this._config.keyboard){this.hide();return}J.trigger(this._element,Kf)}})}static jQueryInterface(t){return this.each(function(){const e=hi.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}J.on(document,ZE,tw,function(n){const t=vt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),fs(this))return;J.one(t,xv,()=>{fo(this)&&this.focus()});const e=vt.findOne(yv);e&&e!==t&&hi.getInstance(e).hide(),hi.getOrCreateInstance(t).toggle(this)});J.on(window,UE,()=>{for(const n of vt.find(yv))hi.getOrCreateInstance(n).show()});J.on(window,JE,()=>{for(const n of vt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&hi.getOrCreateInstance(n).hide()});Uc(hi);Ln(hi);const iw=/^aria-[\w-]*$/i,_v={"*":["class","dir","id","lang","role",iw],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},sw=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),rw=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,ow=(n,t)=>{const e=n.nodeName.toLowerCase();return t.includes(e)?sw.has(e)?!!rw.test(n.nodeValue):!0:t.filter(i=>i instanceof RegExp).some(i=>i.test(e))};function aw(n,t,e){if(!n.length)return n;if(e&&typeof e=="function")return e(n);const s=new window.DOMParser().parseFromString(n,"text/html"),r=[].concat(...s.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),d=[].concat(t["*"]||[],t[a]||[]);for(const f of l)ow(f,d)||o.removeAttribute(f.nodeName)}return s.body.innerHTML}const lw="TemplateFactory",cw={allowList:_v,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},uw={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},dw={entry:"(string|element|function|null)",selector:"(string|element)"};class hw extends Ha{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return cw}static get DefaultType(){return uw}static get NAME(){return lw}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[s,r]of Object.entries(this._config.content))this._setContent(t,r,s);const e=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&e.classList.add(...i.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,i]of Object.entries(t))super._typeCheckConfig({selector:e,entry:i},dw)}_setContent(t,e,i){const s=vt.findOne(i,t);if(s){if(e=this._resolvePossibleFunction(e),!e){s.remove();return}if(Ri(e)){this._putElementInTemplate(hs(e),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(e);return}s.textContent=e}}_maybeSanitize(t){return this._config.sanitize?aw(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return an(t,[this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const fw="tooltip",pw=new Set(["sanitize","allowList","sanitizeFn"]),Vu="fade",gw="modal",Il="show",mw=".tooltip-inner",Jf=`.${gw}`,Zf="hide.bs.modal",Uo="hover",Hu="focus",vw="click",bw="manual",yw="hide",xw="hidden",_w="show",Ew="shown",ww="inserted",Sw="click",Tw="focusin",Aw="focusout",kw="mouseenter",Dw="mouseleave",Cw={AUTO:"auto",TOP:"top",RIGHT:In()?"left":"right",BOTTOM:"bottom",LEFT:In()?"right":"left"},Iw={allowList:_v,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ow={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};let Xc=class Ev extends jn{constructor(t,e){if(typeof Xm>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Iw}static get DefaultType(){return Ow}static get NAME(){return fw}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),J.off(this._element.closest(Jf),Zf,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=J.trigger(this._element,this.constructor.eventName(_w)),i=(Jm(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!i)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(s),J.trigger(this._element,this.constructor.eventName(ww))),this._popper=this._createPopper(s),s.classList.add(Il),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))J.on(a,"mouseover",xc);const o=()=>{J.trigger(this._element,this.constructor.eventName(Ew)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||J.trigger(this._element,this.constructor.eventName(yw)).defaultPrevented)return;if(this._getTipElement().classList.remove(Il),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))J.off(s,"mouseover",xc);this._activeTrigger[vw]=!1,this._activeTrigger[Hu]=!1,this._activeTrigger[Uo]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),J.trigger(this._element,this.constructor.eventName(xw)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Vu,Il),e.classList.add(`bs-${this.constructor.NAME}-auto`);const i=vx(this.constructor.NAME).toString();return e.setAttribute("id",i),this._isAnimated()&&e.classList.add(Vu),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new hw({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[mw]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Vu)}_isShown(){return this.tip&&this.tip.classList.contains(Il)}_createPopper(t){const e=an(this._config.placement,[this,t,this._element]),i=Cw[e.toUpperCase()];return xh(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return an(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...e,...an(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")J.on(this._element,this.constructor.eventName(Sw),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(e!==bw){const i=e===Uo?this.constructor.eventName(kw):this.constructor.eventName(Tw),s=e===Uo?this.constructor.eventName(Dw):this.constructor.eventName(Aw);J.on(this._element,i,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?Hu:Uo]=!0,o._enter()}),J.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?Hu:Uo]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},J.on(this._element.closest(Jf),Zf,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=Ni.getDataAttributes(this._element);for(const i of Object.keys(e))pw.has(i)&&delete e[i];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:hs(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,i]of Object.entries(this._config))this.constructor.Default[e]!==i&&(t[e]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=Ev.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}};Ln(Xc);const Mw="popover",Lw=".popover-header",Pw=".popover-body",Rw={...Xc.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Nw={...Xc.DefaultType,content:"(null|string|element|function)"};class Sh extends Xc{static get Default(){return Rw}static get DefaultType(){return Nw}static get NAME(){return Mw}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Lw]:this._getTitle(),[Pw]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=Sh.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Ln(Sh);const Bw="scrollspy",Fw="bs.scrollspy",Th=`.${Fw}`,$w=".data-api",Vw=`activate${Th}`,Qf=`click${Th}`,Hw=`load${Th}${$w}`,zw="dropdown-item",Nr="active",qw='[data-bs-spy="scroll"]',zu="[href]",jw=".nav, .list-group",tp=".nav-link",Uw=".nav-item",Ww=".list-group-item",Yw=`${tp}, ${Uw} > ${tp}, ${Ww}`,Xw=".dropdown",Gw=".dropdown-toggle",Kw={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Jw={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Gc extends jn{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Kw}static get DefaultType(){return Jw}static get NAME(){return Bw}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=hs(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(J.off(this._config.target,Qf),J.on(this._config.target,Qf,zu,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const i=this._rootElement||window,s=e.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:s,behavior:"smooth"});return}i.scrollTop=s}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(e(o))},s=(this._rootElement||document.documentElement).scrollTop,r=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(i(o),!s)return;continue}!r&&!a&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=vt.find(zu,this._config.target);for(const e of t){if(!e.hash||fs(e))continue;const i=vt.findOne(decodeURI(e.hash),this._element);fo(i)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,i))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Nr),this._activateParents(t),J.trigger(this._element,Vw,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(zw)){vt.findOne(Gw,t.closest(Xw)).classList.add(Nr);return}for(const e of vt.parents(t,jw))for(const i of vt.prev(e,Yw))i.classList.add(Nr)}_clearActiveClass(t){t.classList.remove(Nr);const e=vt.find(`${zu}.${Nr}`,t);for(const i of e)i.classList.remove(Nr)}static jQueryInterface(t){return this.each(function(){const e=Gc.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}J.on(window,Hw,()=>{for(const n of vt.find(qw))Gc.getOrCreateInstance(n)});Ln(Gc);const Zw="tab",Qw="bs.tab",dr=`.${Qw}`,tS=`hide${dr}`,eS=`hidden${dr}`,nS=`show${dr}`,iS=`shown${dr}`,sS=`click${dr}`,rS=`keydown${dr}`,oS=`load${dr}`,aS="ArrowLeft",ep="ArrowRight",lS="ArrowUp",np="ArrowDown",qu="Home",ip="End",Xs="active",sp="fade",ju="show",cS="dropdown",wv=".dropdown-toggle",uS=".dropdown-menu",Uu=`:not(${wv})`,dS='.list-group, .nav, [role="tablist"]',hS=".nav-item, .list-group-item",fS=`.nav-link${Uu}, .list-group-item${Uu}, [role="tab"]${Uu}`,Sv='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Wu=`${fS}, ${Sv}`,pS=`.${Xs}[data-bs-toggle="tab"], .${Xs}[data-bs-toggle="pill"], .${Xs}[data-bs-toggle="list"]`;class eo extends jn{constructor(t){super(t),this._parent=this._element.closest(dS),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),J.on(this._element,rS,e=>this._keydown(e)))}static get NAME(){return Zw}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),i=e?J.trigger(e,tS,{relatedTarget:t}):null;J.trigger(t,nS,{relatedTarget:e}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(Xs),this._activate(vt.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(ju);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),J.trigger(t,iS,{relatedTarget:e})};this._queueCallback(i,t,t.classList.contains(sp))}_deactivate(t,e){if(!t)return;t.classList.remove(Xs),t.blur(),this._deactivate(vt.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(ju);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),J.trigger(t,eS,{relatedTarget:e})};this._queueCallback(i,t,t.classList.contains(sp))}_keydown(t){if(![aS,ep,lS,np,qu,ip].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(s=>!fs(s));let i;if([qu,ip].includes(t.key))i=e[t.key===qu?0:e.length-1];else{const s=[ep,np].includes(t.key);i=_h(e,t.target,s,!0)}i&&(i.focus({preventScroll:!0}),eo.getOrCreateInstance(i).show())}_getChildren(){return vt.find(Wu,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const i of e)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",e),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=vt.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const i=this._getOuterElement(t);if(!i.classList.contains(cS))return;const s=(r,o)=>{const a=vt.findOne(r,i);a&&a.classList.toggle(o,e)};s(wv,Xs),s(uS,ju),i.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}_elemIsActive(t){return t.classList.contains(Xs)}_getInnerElement(t){return t.matches(Wu)?t:vt.findOne(Wu,t)}_getOuterElement(t){return t.closest(hS)||t}static jQueryInterface(t){return this.each(function(){const e=eo.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}J.on(document,sS,Sv,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!fs(this)&&eo.getOrCreateInstance(this).show()});J.on(window,oS,()=>{for(const n of vt.find(pS))eo.getOrCreateInstance(n)});Ln(eo);const gS="toast",mS="bs.toast",xs=`.${mS}`,vS=`mouseover${xs}`,bS=`mouseout${xs}`,yS=`focusin${xs}`,xS=`focusout${xs}`,_S=`hide${xs}`,ES=`hidden${xs}`,wS=`show${xs}`,SS=`shown${xs}`,TS="fade",rp="hide",Ol="show",Ml="showing",AS={animation:"boolean",autohide:"boolean",delay:"number"},kS={animation:!0,autohide:!0,delay:5e3};class ja extends jn{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return kS}static get DefaultType(){return AS}static get NAME(){return gS}show(){if(J.trigger(this._element,wS).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(TS);const e=()=>{this._element.classList.remove(Ml),J.trigger(this._element,SS),this._maybeScheduleHide()};this._element.classList.remove(rp),Va(this._element),this._element.classList.add(Ol,Ml),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||J.trigger(this._element,_S).defaultPrevented)return;const e=()=>{this._element.classList.add(rp),this._element.classList.remove(Ml,Ol),J.trigger(this._element,ES)};this._element.classList.add(Ml),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ol),super.dispose()}isShown(){return this._element.classList.contains(Ol)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){J.on(this._element,vS,t=>this._onInteraction(t,!0)),J.on(this._element,bS,t=>this._onInteraction(t,!1)),J.on(this._element,yS,t=>this._onInteraction(t,!0)),J.on(this._element,xS,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=ja.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Uc(ja);Ln(ja);function Tv(n,t){return function(){return n.apply(t,arguments)}}const{toString:DS}=Object.prototype,{getPrototypeOf:Ah}=Object,Kc=(n=>t=>{const e=DS.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),fi=n=>(n=n.toLowerCase(),t=>Kc(t)===n),Jc=n=>t=>typeof t===n,{isArray:go}=Array,Sa=Jc("undefined");function CS(n){return n!==null&&!Sa(n)&&n.constructor!==null&&!Sa(n.constructor)&&Cn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Av=fi("ArrayBuffer");function IS(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&Av(n.buffer),t}const OS=Jc("string"),Cn=Jc("function"),kv=Jc("number"),Zc=n=>n!==null&&typeof n=="object",MS=n=>n===!0||n===!1,ec=n=>{if(Kc(n)!=="object")return!1;const t=Ah(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},LS=fi("Date"),PS=fi("File"),RS=fi("Blob"),NS=fi("FileList"),BS=n=>Zc(n)&&Cn(n.pipe),FS=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||Cn(n.append)&&((t=Kc(n))==="formdata"||t==="object"&&Cn(n.toString)&&n.toString()==="[object FormData]"))},$S=fi("URLSearchParams"),VS=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ua(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),go(n))for(i=0,s=n.length;i<s;i++)t.call(null,n[i],i,n);else{const r=e?Object.getOwnPropertyNames(n):Object.keys(n),o=r.length;let a;for(i=0;i<o;i++)a=r[i],t.call(null,n[a],a,n)}}function Dv(n,t){t=t.toLowerCase();const e=Object.keys(n);let i=e.length,s;for(;i-- >0;)if(s=e[i],t===s.toLowerCase())return s;return null}const Cv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Iv=n=>!Sa(n)&&n!==Cv;function Dd(){const{caseless:n}=Iv(this)&&this||{},t={},e=(i,s)=>{const r=n&&Dv(t,s)||s;ec(t[r])&&ec(i)?t[r]=Dd(t[r],i):ec(i)?t[r]=Dd({},i):go(i)?t[r]=i.slice():t[r]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Ua(arguments[i],e);return t}const HS=(n,t,e,{allOwnKeys:i}={})=>(Ua(t,(s,r)=>{e&&Cn(s)?n[r]=Tv(s,e):n[r]=s},{allOwnKeys:i}),n),zS=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),qS=(n,t,e,i)=>{n.prototype=Object.create(t.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},jS=(n,t,e,i)=>{let s,r,o;const a={};if(t=t||{},n==null)return t;do{for(s=Object.getOwnPropertyNames(n),r=s.length;r-- >0;)o=s[r],(!i||i(o,n,t))&&!a[o]&&(t[o]=n[o],a[o]=!0);n=e!==!1&&Ah(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},US=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const i=n.indexOf(t,e);return i!==-1&&i===e},WS=n=>{if(!n)return null;if(go(n))return n;let t=n.length;if(!kv(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},YS=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&Ah(Uint8Array)),XS=(n,t)=>{const i=(n&&n[Symbol.iterator]).call(n);let s;for(;(s=i.next())&&!s.done;){const r=s.value;t.call(n,r[0],r[1])}},GS=(n,t)=>{let e;const i=[];for(;(e=n.exec(t))!==null;)i.push(e);return i},KS=fi("HTMLFormElement"),JS=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,s){return i.toUpperCase()+s}),op=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),ZS=fi("RegExp"),Ov=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),i={};Ua(e,(s,r)=>{let o;(o=t(s,r,n))!==!1&&(i[r]=o||s)}),Object.defineProperties(n,i)},QS=n=>{Ov(n,(t,e)=>{if(Cn(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=n[e];if(Cn(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},tT=(n,t)=>{const e={},i=s=>{s.forEach(r=>{e[r]=!0})};return go(n)?i(n):i(String(n).split(t)),e},eT=()=>{},nT=(n,t)=>(n=+n,Number.isFinite(n)?n:t),Yu="abcdefghijklmnopqrstuvwxyz",ap="0123456789",Mv={DIGIT:ap,ALPHA:Yu,ALPHA_DIGIT:Yu+Yu.toUpperCase()+ap},iT=(n=16,t=Mv.ALPHA_DIGIT)=>{let e="";const{length:i}=t;for(;n--;)e+=t[Math.random()*i|0];return e};function sT(n){return!!(n&&Cn(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const rT=n=>{const t=new Array(10),e=(i,s)=>{if(Zc(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[s]=i;const r=go(i)?[]:{};return Ua(i,(o,a)=>{const l=e(o,s+1);!Sa(l)&&(r[a]=l)}),t[s]=void 0,r}}return i};return e(n,0)},oT=fi("AsyncFunction"),aT=n=>n&&(Zc(n)||Cn(n))&&Cn(n.then)&&Cn(n.catch),Y={isArray:go,isArrayBuffer:Av,isBuffer:CS,isFormData:FS,isArrayBufferView:IS,isString:OS,isNumber:kv,isBoolean:MS,isObject:Zc,isPlainObject:ec,isUndefined:Sa,isDate:LS,isFile:PS,isBlob:RS,isRegExp:ZS,isFunction:Cn,isStream:BS,isURLSearchParams:$S,isTypedArray:YS,isFileList:NS,forEach:Ua,merge:Dd,extend:HS,trim:VS,stripBOM:zS,inherits:qS,toFlatObject:jS,kindOf:Kc,kindOfTest:fi,endsWith:US,toArray:WS,forEachEntry:XS,matchAll:GS,isHTMLForm:KS,hasOwnProperty:op,hasOwnProp:op,reduceDescriptors:Ov,freezeMethods:QS,toObjectSet:tT,toCamelCase:JS,noop:eT,toFiniteNumber:nT,findKey:Dv,global:Cv,isContextDefined:Iv,ALPHABET:Mv,generateString:iT,isSpecCompliantForm:sT,toJSONObject:rT,isAsyncFn:oT,isThenable:aT};function Yt(n,t,e,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),i&&(this.request=i),s&&(this.response=s)}Y.inherits(Yt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Y.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Lv=Yt.prototype,Pv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Pv[n]={value:n}});Object.defineProperties(Yt,Pv);Object.defineProperty(Lv,"isAxiosError",{value:!0});Yt.from=(n,t,e,i,s,r)=>{const o=Object.create(Lv);return Y.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Yt.call(o,n.message,t,e,i,s),o.cause=n,o.name=n.name,r&&Object.assign(o,r),o};const lT=null;function Cd(n){return Y.isPlainObject(n)||Y.isArray(n)}function Rv(n){return Y.endsWith(n,"[]")?n.slice(0,-2):n}function lp(n,t,e){return n?n.concat(t).map(function(s,r){return s=Rv(s),!e&&r?"["+s+"]":s}).join(e?".":""):t}function cT(n){return Y.isArray(n)&&!n.some(Cd)}const uT=Y.toFlatObject(Y,{},null,function(t){return/^is[A-Z]/.test(t)});function Qc(n,t,e){if(!Y.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=Y.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,T){return!Y.isUndefined(T[w])});const i=e.metaTokens,s=e.visitor||f,r=e.dots,o=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&Y.isSpecCompliantForm(t);if(!Y.isFunction(s))throw new TypeError("visitor must be a function");function d(E){if(E===null)return"";if(Y.isDate(E))return E.toISOString();if(!l&&Y.isBlob(E))throw new Yt("Blob is not supported. Use a Buffer instead.");return Y.isArrayBuffer(E)||Y.isTypedArray(E)?l&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function f(E,w,T){let O=E;if(E&&!T&&typeof E=="object"){if(Y.endsWith(w,"{}"))w=i?w:w.slice(0,-2),E=JSON.stringify(E);else if(Y.isArray(E)&&cT(E)||(Y.isFileList(E)||Y.endsWith(w,"[]"))&&(O=Y.toArray(E)))return w=Rv(w),O.forEach(function(j,$){!(Y.isUndefined(j)||j===null)&&t.append(o===!0?lp([w],$,r):o===null?w:w+"[]",d(j))}),!1}return Cd(E)?!0:(t.append(lp(T,w,r),d(E)),!1)}const p=[],v=Object.assign(uT,{defaultVisitor:f,convertValue:d,isVisitable:Cd});function y(E,w){if(!Y.isUndefined(E)){if(p.indexOf(E)!==-1)throw Error("Circular reference detected in "+w.join("."));p.push(E),Y.forEach(E,function(O,R){(!(Y.isUndefined(O)||O===null)&&s.call(t,O,Y.isString(R)?R.trim():R,w,v))===!0&&y(O,w?w.concat(R):[R])}),p.pop()}}if(!Y.isObject(n))throw new TypeError("data must be an object");return y(n),t}function cp(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function kh(n,t){this._pairs=[],n&&Qc(n,this,t)}const Nv=kh.prototype;Nv.append=function(t,e){this._pairs.push([t,e])};Nv.toString=function(t){const e=t?function(i){return t.call(this,i,cp)}:cp;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function dT(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Bv(n,t,e){if(!t)return n;const i=e&&e.encode||dT,s=e&&e.serialize;let r;if(s?r=s(t,e):r=Y.isURLSearchParams(t)?t.toString():new kh(t,e).toString(i),r){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class up{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Y.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Fv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hT=typeof URLSearchParams<"u"?URLSearchParams:kh,fT=typeof FormData<"u"?FormData:null,pT=typeof Blob<"u"?Blob:null,gT={isBrowser:!0,classes:{URLSearchParams:hT,FormData:fT,Blob:pT},protocols:["http","https","file","blob","url","data"]},$v=typeof window<"u"&&typeof document<"u",mT=(n=>$v&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),vT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",bT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$v,hasStandardBrowserEnv:mT,hasStandardBrowserWebWorkerEnv:vT},Symbol.toStringTag,{value:"Module"})),ii={...bT,...gT};function yT(n,t){return Qc(n,new ii.classes.URLSearchParams,Object.assign({visitor:function(e,i,s,r){return ii.isNode&&Y.isBuffer(e)?(this.append(i,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function xT(n){return Y.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function _T(n){const t={},e=Object.keys(n);let i;const s=e.length;let r;for(i=0;i<s;i++)r=e[i],t[r]=n[r];return t}function Vv(n){function t(e,i,s,r){let o=e[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=e.length;return o=!o&&Y.isArray(s)?s.length:o,l?(Y.hasOwnProp(s,o)?s[o]=[s[o],i]:s[o]=i,!a):((!s[o]||!Y.isObject(s[o]))&&(s[o]=[]),t(e,i,s[o],r)&&Y.isArray(s[o])&&(s[o]=_T(s[o])),!a)}if(Y.isFormData(n)&&Y.isFunction(n.entries)){const e={};return Y.forEachEntry(n,(i,s)=>{t(xT(i),s,e,0)}),e}return null}function ET(n,t,e){if(Y.isString(n))try{return(t||JSON.parse)(n),Y.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(n)}const Dh={transitional:Fv,adapter:["xhr","http"],transformRequest:[function(t,e){const i=e.getContentType()||"",s=i.indexOf("application/json")>-1,r=Y.isObject(t);if(r&&Y.isHTMLForm(t)&&(t=new FormData(t)),Y.isFormData(t))return s?JSON.stringify(Vv(t)):t;if(Y.isArrayBuffer(t)||Y.isBuffer(t)||Y.isStream(t)||Y.isFile(t)||Y.isBlob(t))return t;if(Y.isArrayBufferView(t))return t.buffer;if(Y.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return yT(t,this.formSerializer).toString();if((a=Y.isFileList(t))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Qc(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return r||s?(e.setContentType("application/json",!1),ET(t)):t}],transformResponse:[function(t){const e=this.transitional||Dh.transitional,i=e&&e.forcedJSONParsing,s=this.responseType==="json";if(t&&Y.isString(t)&&(i&&!this.responseType||s)){const o=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?Yt.from(a,Yt.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ii.classes.FormData,Blob:ii.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Y.forEach(["delete","get","head","post","put","patch"],n=>{Dh.headers[n]={}});const Ch=Dh,wT=Y.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ST=n=>{const t={};let e,i,s;return n&&n.split(`
`).forEach(function(o){s=o.indexOf(":"),e=o.substring(0,s).trim().toLowerCase(),i=o.substring(s+1).trim(),!(!e||t[e]&&wT[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},dp=Symbol("internals");function Wo(n){return n&&String(n).trim().toLowerCase()}function nc(n){return n===!1||n==null?n:Y.isArray(n)?n.map(nc):String(n)}function TT(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(n);)t[i[1]]=i[2];return t}const AT=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Xu(n,t,e,i,s){if(Y.isFunction(i))return i.call(this,t,e);if(s&&(t=e),!!Y.isString(t)){if(Y.isString(i))return t.indexOf(i)!==-1;if(Y.isRegExp(i))return i.test(t)}}function kT(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function DT(n,t){const e=Y.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+e,{value:function(s,r,o){return this[i].call(this,t,s,r,o)},configurable:!0})})}class tu{constructor(t){t&&this.set(t)}set(t,e,i){const s=this;function r(a,l,d){const f=Wo(l);if(!f)throw new Error("header name must be a non-empty string");const p=Y.findKey(s,f);(!p||s[p]===void 0||d===!0||d===void 0&&s[p]!==!1)&&(s[p||l]=nc(a))}const o=(a,l)=>Y.forEach(a,(d,f)=>r(d,f,l));return Y.isPlainObject(t)||t instanceof this.constructor?o(t,e):Y.isString(t)&&(t=t.trim())&&!AT(t)?o(ST(t),e):t!=null&&r(e,t,i),this}get(t,e){if(t=Wo(t),t){const i=Y.findKey(this,t);if(i){const s=this[i];if(!e)return s;if(e===!0)return TT(s);if(Y.isFunction(e))return e.call(this,s,i);if(Y.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Wo(t),t){const i=Y.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||Xu(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let s=!1;function r(o){if(o=Wo(o),o){const a=Y.findKey(i,o);a&&(!e||Xu(i,i[a],a,e))&&(delete i[a],s=!0)}}return Y.isArray(t)?t.forEach(r):r(t),s}clear(t){const e=Object.keys(this);let i=e.length,s=!1;for(;i--;){const r=e[i];(!t||Xu(this,this[r],r,t,!0))&&(delete this[r],s=!0)}return s}normalize(t){const e=this,i={};return Y.forEach(this,(s,r)=>{const o=Y.findKey(i,r);if(o){e[o]=nc(s),delete e[r];return}const a=t?kT(r):String(r).trim();a!==r&&delete e[r],e[a]=nc(s),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return Y.forEach(this,(i,s)=>{i!=null&&i!==!1&&(e[s]=t&&Y.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(s=>i.set(s)),i}static accessor(t){const i=(this[dp]=this[dp]={accessors:{}}).accessors,s=this.prototype;function r(o){const a=Wo(o);i[a]||(DT(s,o),i[a]=!0)}return Y.isArray(t)?t.forEach(r):r(t),this}}tu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Y.reduceDescriptors(tu.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(i){this[e]=i}}});Y.freezeMethods(tu);const Bi=tu;function Gu(n,t){const e=this||Ch,i=t||e,s=Bi.from(i.headers);let r=i.data;return Y.forEach(n,function(a){r=a.call(e,r,s.normalize(),t?t.status:void 0)}),s.normalize(),r}function Hv(n){return!!(n&&n.__CANCEL__)}function Wa(n,t,e){Yt.call(this,n??"canceled",Yt.ERR_CANCELED,t,e),this.name="CanceledError"}Y.inherits(Wa,Yt,{__CANCEL__:!0});function CT(n,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?n(e):t(new Yt("Request failed with status code "+e.status,[Yt.ERR_BAD_REQUEST,Yt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const IT=ii.hasStandardBrowserEnv?{write(n,t,e,i,s,r){const o=[n+"="+encodeURIComponent(t)];Y.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),Y.isString(i)&&o.push("path="+i),Y.isString(s)&&o.push("domain="+s),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function OT(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function MT(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function zv(n,t){return n&&!OT(t)?MT(n,t):t}const LT=ii.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let i;function s(r){let o=r;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return i=s(window.location.href),function(o){const a=Y.isString(o)?s(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function PT(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function RT(n,t){n=n||10;const e=new Array(n),i=new Array(n);let s=0,r=0,o;return t=t!==void 0?t:1e3,function(l){const d=Date.now(),f=i[r];o||(o=d),e[s]=l,i[s]=d;let p=r,v=0;for(;p!==s;)v+=e[p++],p=p%n;if(s=(s+1)%n,s===r&&(r=(r+1)%n),d-o<t)return;const y=f&&d-f;return y?Math.round(v*1e3/y):void 0}}function hp(n,t){let e=0;const i=RT(50,250);return s=>{const r=s.loaded,o=s.lengthComputable?s.total:void 0,a=r-e,l=i(a),d=r<=o;e=r;const f={loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&d?(o-r)/l:void 0,event:s};f[t?"download":"upload"]=!0,n(f)}}const NT=typeof XMLHttpRequest<"u",BT=NT&&function(n){return new Promise(function(e,i){let s=n.data;const r=Bi.from(n.headers).normalize();let{responseType:o,withXSRFToken:a}=n,l;function d(){n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let f;if(Y.isFormData(s)){if(ii.hasStandardBrowserEnv||ii.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if((f=r.getContentType())!==!1){const[w,...T]=f?f.split(";").map(O=>O.trim()).filter(Boolean):[];r.setContentType([w||"multipart/form-data",...T].join("; "))}}let p=new XMLHttpRequest;if(n.auth){const w=n.auth.username||"",T=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";r.set("Authorization","Basic "+btoa(w+":"+T))}const v=zv(n.baseURL,n.url);p.open(n.method.toUpperCase(),Bv(v,n.params,n.paramsSerializer),!0),p.timeout=n.timeout;function y(){if(!p)return;const w=Bi.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),O={data:!o||o==="text"||o==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:w,config:n,request:p};CT(function(j){e(j),d()},function(j){i(j),d()},O),p=null}if("onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(y)},p.onabort=function(){p&&(i(new Yt("Request aborted",Yt.ECONNABORTED,n,p)),p=null)},p.onerror=function(){i(new Yt("Network Error",Yt.ERR_NETWORK,n,p)),p=null},p.ontimeout=function(){let T=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const O=n.transitional||Fv;n.timeoutErrorMessage&&(T=n.timeoutErrorMessage),i(new Yt(T,O.clarifyTimeoutError?Yt.ETIMEDOUT:Yt.ECONNABORTED,n,p)),p=null},ii.hasStandardBrowserEnv&&(a&&Y.isFunction(a)&&(a=a(n)),a||a!==!1&&LT(v))){const w=n.xsrfHeaderName&&n.xsrfCookieName&&IT.read(n.xsrfCookieName);w&&r.set(n.xsrfHeaderName,w)}s===void 0&&r.setContentType(null),"setRequestHeader"in p&&Y.forEach(r.toJSON(),function(T,O){p.setRequestHeader(O,T)}),Y.isUndefined(n.withCredentials)||(p.withCredentials=!!n.withCredentials),o&&o!=="json"&&(p.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&p.addEventListener("progress",hp(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",hp(n.onUploadProgress)),(n.cancelToken||n.signal)&&(l=w=>{p&&(i(!w||w.type?new Wa(null,n,p):w),p.abort(),p=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const E=PT(v);if(E&&ii.protocols.indexOf(E)===-1){i(new Yt("Unsupported protocol "+E+":",Yt.ERR_BAD_REQUEST,n));return}p.send(s||null)})},Id={http:lT,xhr:BT};Y.forEach(Id,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const fp=n=>`- ${n}`,FT=n=>Y.isFunction(n)||n===null||n===!1,qv={getAdapter:n=>{n=Y.isArray(n)?n:[n];const{length:t}=n;let e,i;const s={};for(let r=0;r<t;r++){e=n[r];let o;if(i=e,!FT(e)&&(i=Id[(o=String(e)).toLowerCase()],i===void 0))throw new Yt(`Unknown adapter '${o}'`);if(i)break;s[o||"#"+r]=i}if(!i){const r=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?r.length>1?`since :
`+r.map(fp).join(`
`):" "+fp(r[0]):"as no adapter specified";throw new Yt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:Id};function Ku(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Wa(null,n)}function pp(n){return Ku(n),n.headers=Bi.from(n.headers),n.data=Gu.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),qv.getAdapter(n.adapter||Ch.adapter)(n).then(function(i){return Ku(n),i.data=Gu.call(n,n.transformResponse,i),i.headers=Bi.from(i.headers),i},function(i){return Hv(i)||(Ku(n),i&&i.response&&(i.response.data=Gu.call(n,n.transformResponse,i.response),i.response.headers=Bi.from(i.response.headers))),Promise.reject(i)})}const gp=n=>n instanceof Bi?{...n}:n;function no(n,t){t=t||{};const e={};function i(d,f,p){return Y.isPlainObject(d)&&Y.isPlainObject(f)?Y.merge.call({caseless:p},d,f):Y.isPlainObject(f)?Y.merge({},f):Y.isArray(f)?f.slice():f}function s(d,f,p){if(Y.isUndefined(f)){if(!Y.isUndefined(d))return i(void 0,d,p)}else return i(d,f,p)}function r(d,f){if(!Y.isUndefined(f))return i(void 0,f)}function o(d,f){if(Y.isUndefined(f)){if(!Y.isUndefined(d))return i(void 0,d)}else return i(void 0,f)}function a(d,f,p){if(p in t)return i(d,f);if(p in n)return i(void 0,d)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(d,f)=>s(gp(d),gp(f),!0)};return Y.forEach(Object.keys(Object.assign({},n,t)),function(f){const p=l[f]||s,v=p(n[f],t[f],f);Y.isUndefined(v)&&p!==a||(e[f]=v)}),e}const jv="1.6.8",Ih={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{Ih[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});const mp={};Ih.transitional=function(t,e,i){function s(r,o){return"[Axios v"+jv+"] Transitional option '"+r+"'"+o+(i?". "+i:"")}return(r,o,a)=>{if(t===!1)throw new Yt(s(o," has been removed"+(e?" in "+e:"")),Yt.ERR_DEPRECATED);return e&&!mp[o]&&(mp[o]=!0,console.warn(s(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,o,a):!0}};function $T(n,t,e){if(typeof n!="object")throw new Yt("options must be an object",Yt.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const r=i[s],o=t[r];if(o){const a=n[r],l=a===void 0||o(a,r,n);if(l!==!0)throw new Yt("option "+r+" must be "+l,Yt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Yt("Unknown option "+r,Yt.ERR_BAD_OPTION)}}const Od={assertOptions:$T,validators:Ih},is=Od.validators;class wc{constructor(t){this.defaults=t,this.interceptors={request:new up,response:new up}}async request(t,e){try{return await this._request(t,e)}catch(i){if(i instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}throw i}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=no(this.defaults,e);const{transitional:i,paramsSerializer:s,headers:r}=e;i!==void 0&&Od.assertOptions(i,{silentJSONParsing:is.transitional(is.boolean),forcedJSONParsing:is.transitional(is.boolean),clarifyTimeoutError:is.transitional(is.boolean)},!1),s!=null&&(Y.isFunction(s)?e.paramsSerializer={serialize:s}:Od.assertOptions(s,{encode:is.function,serialize:is.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=r&&Y.merge(r.common,r[e.method]);r&&Y.forEach(["delete","get","head","post","put","patch","common"],E=>{delete r[E]}),e.headers=Bi.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(e)===!1||(l=l&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const d=[];this.interceptors.response.forEach(function(w){d.push(w.fulfilled,w.rejected)});let f,p=0,v;if(!l){const E=[pp.bind(this),void 0];for(E.unshift.apply(E,a),E.push.apply(E,d),v=E.length,f=Promise.resolve(e);p<v;)f=f.then(E[p++],E[p++]);return f}v=a.length;let y=e;for(p=0;p<v;){const E=a[p++],w=a[p++];try{y=E(y)}catch(T){w.call(this,T);break}}try{f=pp.call(this,y)}catch(E){return Promise.reject(E)}for(p=0,v=d.length;p<v;)f=f.then(d[p++],d[p++]);return f}getUri(t){t=no(this.defaults,t);const e=zv(t.baseURL,t.url);return Bv(e,t.params,t.paramsSerializer)}}Y.forEach(["delete","get","head","options"],function(t){wc.prototype[t]=function(e,i){return this.request(no(i||{},{method:t,url:e,data:(i||{}).data}))}});Y.forEach(["post","put","patch"],function(t){function e(i){return function(r,o,a){return this.request(no(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}wc.prototype[t]=e(),wc.prototype[t+"Form"]=e(!0)});const ic=wc;class Oh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const i=this;this.promise.then(s=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](s);i._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(a=>{i.subscribe(a),r=a}).then(s);return o.cancel=function(){i.unsubscribe(r)},o},t(function(r,o,a){i.reason||(i.reason=new Wa(r,o,a),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}static source(){let t;return{token:new Oh(function(s){t=s}),cancel:t}}}const VT=Oh;function HT(n){return function(e){return n.apply(null,e)}}function zT(n){return Y.isObject(n)&&n.isAxiosError===!0}const Md={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Md).forEach(([n,t])=>{Md[t]=n});const qT=Md;function Uv(n){const t=new ic(n),e=Tv(ic.prototype.request,t);return Y.extend(e,ic.prototype,t,{allOwnKeys:!0}),Y.extend(e,t,null,{allOwnKeys:!0}),e.create=function(s){return Uv(no(n,s))},e}const Oe=Uv(Ch);Oe.Axios=ic;Oe.CanceledError=Wa;Oe.CancelToken=VT;Oe.isCancel=Hv;Oe.VERSION=jv;Oe.toFormData=Qc;Oe.AxiosError=Yt;Oe.Cancel=Oe.CanceledError;Oe.all=function(t){return Promise.all(t)};Oe.spread=HT;Oe.isAxiosError=zT;Oe.mergeConfig=no;Oe.AxiosHeaders=Bi;Oe.formToJSON=n=>Vv(Y.isHTMLForm(n)?new FormData(n):n);Oe.getAdapter=qv.getAdapter;Oe.HttpStatusCode=qT;Oe.default=Oe;const jT=Oe,Wv=jT.create({baseURL:rg2Config.api_url});function eu(n,t,e){n.t=new Date().getTime(),document.getElementById("rg2-container").style.cursor="wait",Wv({method:"get",url:"",params:n}).then(i=>{t(i.data.data,n.id)}).catch(function(i){Yv(e+": "+i)}).finally(function(){document.getElementById("rg2-container").style.cursor="auto"})}function pi(n,t,e,i,s=()=>{}){let r={method:"post"};r.data=n,t.headers&&(r.headers=t.headers,delete t.headers),t.t=new Date().getTime(),r.params=t,document.getElementById("rg2-container").style.cursor="wait",Wv(r).then(o=>{o.data.keksi&&s(o.data.keksi),e(o.data)}).catch(function(o){Yv(i+": "+o)}).finally(function(){document.getElementById("rg2-container").style.cursor="auto"})}function Yv(n){document.getElementById("rg2-load-progress").classList.add("d-none"),document.getElementById("rg2-map-load-progress").classList.add("d-none"),yt("Configuration error",n)}let us={};us.code="en";let sc=[];function UT(n){let t=document.getElementById("rg2-select-language");t.innerHTML="";let e=us.code==="en";t.options.add(io("en","en: English",e));for(let i=0;i<n.length;i=i+1)e=us.code===n[i].code,t.options.add(io(n[i].code,n[i].code+": "+n[i].language,e));t.addEventListener("change",i=>{const s=i.target.value;s!==us.code&&(s==="en"?Gv("en"):Xv(s))})}function Xv(n){eu({type:"lang",lang:n},YT,"Language request failed")}function WT(n){const t=sc.indexOf(n);return t>-1?t:(sc.push(n),sc.length-1)}function YT(n){Gv(n.lang)}function XT(){rg2Config.start_language!=="en"&&Xv(rg2Config.start_language)}function Gv(n){n==="en"?us={code:"en"}:us=n,GT()}function U(n,t="span"){const e=WT(n);return us.hasOwnProperty(n)&&(n=us[n]),t===""?n:`<${t} data-rg2t='${e}'>${n}</${t}>`}function GT(){const n=document.querySelectorAll("[data-rg2t]");for(let t of n){const e=parseInt(t.dataset.rg2t,10);t.innerText=U(sc[e],"")}}function Ld(n,t,e){return n.length>0?n[0].getAttribute(t).trim():e}function fe(n){const t=Math.floor(n/60);let e=t;const i=n-t*60;return i<10?e+=":0"+i:e+=":"+i,e}function KT(n){let t;const e=Math.floor(n/3600);e<10?t="0"+e+":":t=e+":",n=n-e*3600;const i=Math.floor(n/60);return i<10?t+="0"+i:t+=i,n=n-i*60,n<10?t+=":0"+n:t+=":"+n,t}function io(n,t,e=!1){let i=document.createElement("option");return i.value=n,i.text=t,e&&(i.selected=!0),i}function ps(n,t,e=!1){return`<option value="${n}"${e?" selected":""}>${t}</option>`}function or(n,t,e,i){let s=Math.atan2(i-t,e-n);return s<0&&(s=s+2*Math.PI),s}function $e(n,t,e,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(t-i,2))}function Pd(n,t,e,i){const s=(e-n).toRad(),r=(i-t).toRad(),o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(n.toRad())*Math.cos(e.toRad())*Math.sin(r/2)*Math.sin(r/2);return 6371009*2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}function JT(n){if(!n)return 0;let t=0;const e=n.split(":");return t=parseInt(e[0],10)*3600+parseInt(e[1],10)*60,isNaN(t)?0:t}function Ii(n){if(!n)return 0;let t=0,e=n.replace(/\./g,":").split(":");return e.length===2?t=parseInt(e[0],10)*60+parseInt(e[1],10):e.length===3&&(t=parseInt(e[0],10)*3600+parseInt(e[1],10)*60+parseInt(e[2],10)),isNaN(t)?0:t}const yt=(n,t)=>{QT(n,t)},ZT=document.getElementById("rg2-toast-container"),QT=(n,t)=>{const e=document.createElement("div");e.classList.add("toast"),e.setAttribute("data-bs-autohide","false"),e.innerHTML=`<div class="toast-header">
      <strong class="me-auto">${n}</strong>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body">
      ${t}
    </div>`,ZT.appendChild(e),[...document.querySelectorAll(".toast")].map(s=>{const r=new ja(s,{});s.addEventListener("hidden.bs.toast",()=>{s.parentNode&&s.parentNode.removeChild(s)}),r.show()})};function Nn(n,t){return n.length>0?n[0].textContent.trim():t}let Yo;function gi(n,t=!0){Yo&&Yo.dispose();const e=document.getElementById("rg2-modal-container");e.innerHTML="";const i=t?`<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">${U("Cancel")}</button>`:"",s=`<div class="modal fade" id="rg2-modal-dialog" data-bs-backdrop="static" data-bs-keyboard="false"
    tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="staticBackdropLabel">${n.title}</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          ${n.body}
        </div>
        <div class="modal-footer">
          <button id="rg2-do-modal-action" type="button" class="btn btn-primary">${U(n.doText)}</button>
          ${i}
        </div>
      </div>
    </div>
    </div > `;e.innerHTML=s,typeof n.onCancel!="function"&&(n.onCancel=()=>{});let r=!1;const o=document.getElementById("rg2-modal-dialog");document.getElementById("rg2-do-modal-action").addEventListener("click",()=>{r=!0,Yo.hide()});const a={keyboard:!0};Yo=new rr(o,a),o.addEventListener("hidden.bs.modal",()=>{r?n.onDo():n.onCancel()}),Yo.show()}function t1(n,t){const e=document.getElementById(n),i=t(e.value);return i?(e.classList.add("is-valid"),e.classList.remove("is-invalid")):(e.classList.add("is-invalid"),e.classList.remove("is-valid")),i}Number.prototype.toRad=function(){return this*Math.PI/180};const vp=["#ff0000","#00ff00","#0000ff","#800000","#008000","#000080","#ffff00","#ff00ff","#00ffff","#808000","#800080","#008080"];let Ju=0;function Kv(){return Ju=(Ju+1)%vp.length,vp[Ju]}const F={RG2VERSION:"2.0.6",DEFAULT_SCALE_FACTOR:1.1,TAB_EVENTS:"event-tab",TAB_COURSES:"course-tab",TAB_RESULTS:"result-tab",TAB_DRAW:"draw-tab",TAB_LOGIN:"manage-login-tab",TAB_CREATE:"manage-create-tab",TAB_EDIT:"manage-edit-tab",TAB_MAP:"manage-map-tab",TAB_DELETE_MAP:"manage-delete-map-tab",INVALID_MAP_ID:9999,DEFAULT_NEW_COMMENT:"Type your comment",GPS_RESULT_OFFSET:5e4,MASS_START_REPLAY:1,REAL_TIME_REPLAY:2,MASS_START_BY_CONTROL:99999,VERY_HIGH_TIME_IN_SECS:99999,BIG_SCREEN_BREAK_POINT:800,SMALL_SCREEN_BREAK_POINT:500,MAX_ZOOM:50,MIN_ZOOM:.05,PURPLE:"#b300ff",RED:"#ff0000",GREEN:"#00ff00",DARK_GREEN:"rgb(34, 139, 34)",DARK_GREEN_30:"rgba(34, 139, 34, 0.3)",GREY:"#e0e0e0",RED_30:"rgba(255,0,0,0.3)",GREEN_30:"rgba(0,255,0,0.3)",WHITE:"#ffffff",BLACK:"#000000",RUNNER_DOT_RADIUS:6,HANDLE_DOT_RADIUS:7,HANDLE_COLOUR:"#ff0000",DIM:.75,FULL_INTENSITY:1,TIME_NOT_FOUND:9999,RIGHT_CLICK:3,DO_NOT_SAVE_COURSE:9999,FORMAT_NORMAL:1,FORMAT_NORMAL_NO_RESULTS:2,FORMAT_SCORE_EVENT:3,FORMAT_SCORE_EVENT_NO_RESULTS:4,DISPLAY_ALL_COURSES:99999,EXCLUDED_NONE:0,EXCLUDED_ZERO_SPLITS:1,EXCLUDED_REAL_SPLITS:2,MAX_DRAWN_ROUTES:10,languages:[{language:"etina",code:"cz"},{language:"Deutsch",code:"de"},{language:"Suomi",code:"fi"},{language:"Franais",code:"fr"},{language:"Italiano",code:"it"},{language:"",code:"ja"},{language:"Norsk",code:"no"},{language:"Portugus - Brasil",code:"pt"},{language:"",code:"ru"}],FILE_SIZE_WARNING:2,PIXEL_SIZE_WARNING:4e3,CLASS_NOW_ON:1,CLASS_NOW_OFF:0,managing:()=>rg2Config.keksi!==void 0},$t={perCentMapIntensity:100,perCentRouteIntensity:100,replayFontSize:12,courseWidth:3,routeWidth:4,circleSize:20,snap:!0,showThreeSeconds:!1,showGPSSpeed:!1,alignMap:!1,maxSpeed:5,minSpeed:15,drawnRoutes:[]};function Ya(){let n={};const t=vs();let e=Math.pow(Math.min(t.height,t.width)/1500,.5);e=Math.min(e,5),e=Math.max(e,.5);const i=Math.round($t.circleSize*e);return n.controlRadius=i,n.finishInnerRadius=i*(5/6),n.finishOuterRadius=i*(7/6),n.startTriangleLength=i*(7/6),n.overprintWidth=$t.courseWidth,n.font=i+"pt Arial",n}function e1(){try{if(window.hasOwnProperty("localStorage")&&window.localStorage!==null&&localStorage.getItem("rg2-options")!==null){const n=JSON.parse(localStorage.getItem("rg2-options"));for(let t in n)n.hasOwnProperty(t)&&($t[t]=n[t]);$t.circleSize=20,$t.perCentMapIntensity===0&&yt("Warning","Your saved settings have 0% map intensity so the map is invisible. You can adjust this on the configuration menu")}}catch{}}function n1(n){let t=[];for(let e=0;e<$t.drawnRoutes.length;e+=1)($t.drawnRoutes[e].id!==n.id||$t.drawnRoutes[e].eventid!==n.eventid)&&t.push($t.drawnRoutes[e]);$t.drawnRoutes=t,nu()}function nu(){try{window.hasOwnProperty("localStorage")&&window.localStorage!==null&&localStorage.setItem("rg2-options",JSON.stringify($t))}catch{return}}function i1(n){let t=$t.drawnRoutes;t.length>=F.MAX_DRAWN_ROUTES&&t.shift(),t.push(n),$t.drawnRoutes=t,nu()}function s1(n,t){$t[n]=t,nu()}class Mh{constructor(){this.controls=[],this.displayControls=!1}addControl(t,e,i){let s=!0;for(let r=0;r<this.controls.length;r+=1)if(this.controls[r].code===t){s=!1;break}s&&this.controls.push({code:t,x:e,y:i})}deleteAllControls(){this.controls.length=0}displayAllControls(){this.displayControls=!0}drawControls(t){if(this.displayControls){const e=Ya();for(let i=0;i<this.controls.length;i+=1)this.controls[i].code.indexOf("F")===0||this.controls[i].code.indexOf("M")===0?this.drawFinish(this.controls[i].x,this.controls[i].y,this.controls[i].code,e):this.controls[i].code.indexOf("S")===0?this.drawStart(this.controls[i].x,this.controls[i].y,this.controls[i].code,1.5*Math.PI,e):(this.drawSingleControl(this.controls[i].x,this.controls[i].y,this.controls[i].code,Math.PI*.25,e),t&&D.fillRect(this.controls[i].x-1,this.controls[i].y-1,3,3))}}drawFinish(t,e,i,s){D.strokeStyle="white",D.lineWidth=s.overprintWidth+2,D.beginPath(),D.arc(t,e,s.finishInnerRadius,0,2*Math.PI,!1),D.stroke(),D.beginPath(),D.arc(t,e,s.finishOuterRadius,0,2*Math.PI,!1),D.stroke(),D.beginPath(),D.font=s.font,D.textAlign="left",D.strokeStyle="white",D.miterLimit=2,D.lineJoin="circle",D.lineWidth=1.5,D.strokeText(i,t+s.controlRadius*1.5,e+s.controlRadius),D.stroke(),D.beginPath(),D.fillStyle=F.PURPLE,D.strokeStyle=F.PURPLE,D.lineWidth=s.overprintWidth,D.arc(t,e,s.finishInnerRadius,0,2*Math.PI,!1),D.stroke(),D.beginPath(),D.arc(t,e,s.finishOuterRadius,0,2*Math.PI,!1),D.fillText(i,t+s.controlRadius*1.5,e+s.controlRadius),D.stroke()}drawSingleControl(t,e,i,s,r){D.beginPath(),D.strokeStyle="white",D.lineWidth=r.overprintWidth+2,D.arc(t,e,r.controlRadius,0,2*Math.PI,!1),D.stroke(),D.beginPath(),D.textAlign="center",D.font=r.font,D.strokeStyle="white",D.miterLimit=2,D.lineJoin="circle",D.lineWidth=1.5,D.textBaseline="middle";const o=D.measureText(i);let a;s<Math.PI?a=o.width/2:a=-1*o.width/2;let l;s>=Math.PI/2&&s<=Math.PI*1.5?l=-1*r.controlRadius/2:l=r.controlRadius/2;const d=1.3;D.strokeText(i,t+r.controlRadius*d*Math.sin(s)+a,e+r.controlRadius*d*Math.cos(s)+l),D.beginPath(),D.font=r.font,D.fillStyle=F.PURPLE,D.strokeStyle=F.PURPLE,D.lineWidth=r.overprintWidth,D.arc(t,e,r.controlRadius,0,2*Math.PI,!1),D.fillText(i,t+r.controlRadius*d*Math.sin(s)+a,e+r.controlRadius*d*Math.cos(s)+l),D.stroke()}drawStart(t,e,i,s,r){let o=[],a=[];const l=2*Math.PI/3;s=s+Math.PI/2,D.lineCap="round",D.strokeStyle="white",D.lineWidth=r.overprintWidth+2,D.beginPath(),o[0]=t+r.startTriangleLength*Math.sin(s),a[0]=e-r.startTriangleLength*Math.cos(s),D.moveTo(o[0],a[0]),o[1]=t+r.startTriangleLength*Math.sin(s+l),a[1]=e-r.startTriangleLength*Math.cos(s+l),D.lineTo(o[1],a[1]),D.stroke(),D.beginPath(),D.moveTo(o[1],a[1]),o[2]=t+r.startTriangleLength*Math.sin(s-l),a[2]=e-r.startTriangleLength*Math.cos(s-l),D.lineTo(o[2],a[2]),D.stroke(),D.beginPath(),D.moveTo(o[2],a[2]),D.lineTo(o[0],a[0]),D.stroke(),D.beginPath(),D.font=r.font,D.textAlign="left",D.strokeStyle="white",D.miterLimit=2,D.lineJoin="circle",D.lineWidth=1.5,D.strokeText(i,o[0]+r.controlRadius*1.25,a[0]+r.controlRadius*1.25),D.stroke(),D.strokeStyle=F.PURPLE,D.lineWidth=r.overprintWidth,D.font=r.font,D.fillStyle=F.PURPLE,D.beginPath(),D.moveTo(o[0],a[0]),D.lineTo(o[1],a[1]),D.stroke(),D.beginPath(),D.moveTo(o[1],a[1]),D.lineTo(o[2],a[2]),D.stroke(),D.beginPath(),D.moveTo(o[2],a[2]),D.lineTo(o[0],a[0]),D.fillText(i,o[0]+r.controlRadius*1.25,a[0]+r.controlRadius*1.25),D.stroke()}generateControlList(){this.controls.length=0;const t=TP();for(let e=0;e<t.length;e+=1)if(t[e]!==void 0){const i=t[e].codes,s=t[e].x,r=t[e].y;if(i!==void 0)for(let o=0;o<i.length;o+=1)this.addControl(i[o],s[o],r[o])}}getControlCount(){return this.controls.length}toggleControlDisplay(){this.displayControls=!this.displayControls}}class r1{constructor(t,e,i,s){this.x=t,this.y=e,this.basex=t,this.basey=e,this.undox=t,this.undoy=e,this.locked=!1,this.time=i,this.index=s}}class o1{constructor(){this.handles=[]}addHandle(t,e,i){this.handles.push(new r1(t,e,i,this.handles.length)),this.handles.sort(function(s,r){return s.time-r.time}),this.renumberHandles()}deleteHandle(t){t===0||t===this.handles.length-1||(this.handles.splice(t,1),this.renumberHandles())}renumberHandles(){for(let t=0;t<this.handles.length;t+=1)this.handles[t].index=t}lockHandle(t){this.handles[t].locked=!0}lockHandleByTime(t){for(let e=0;e<this.handles.length;e+=1)this.handles[e].time===t&&(this.handles[e].locked=!0)}unlockHandle(t){this.handles[t].locked=!1}handlesLocked(){let t=0;for(let e=0;e<this.handles.length;e+=1)this.handles[e].locked&&(t+=1);return t}deleteAllHandles(){this.handles.length=0}rebaselineXY(){this.copyHandleFields("","base")}saveForUndo(){this.copyHandleFields("base","undo")}undo(){this.copyHandleFields("undo","base"),this.copyHandleFields("undo","")}copyHandleFields(t,e){for(let i=0;i<this.handles.length;i+=1)this.handles[i][e+"x"]=this.handles[i][t+"x"],this.handles[i][e+"y"]=this.handles[i][t+"y"]}getStartHandle(){return this.handles[0]}getFinishHandle(){return this.handles[this.handles.length-1]}getHandleClicked(t){for(let e=0;e<this.handles.length;e+=1)if($e(t.x,t.y,this.handles[e].basex,this.handles[e].basey)<=F.HANDLE_DOT_RADIUS)return this.handles[e]}getEarliestLockedHandle(){for(let t=0;t<this.handles.length;t+=1)if(this.handles[t].locked)return this.handles[t]}getLatestLockedHandle(){for(let t=this.handles.length-1;t>0;t-=1)if(this.handles[t].locked)return this.handles[t]}getPreviousLockedHandle(t){for(let e=t.index-1;e>=0;e-=1)if(this.handles[e].locked)return this.handles[e]}getNextLockedHandle(t){for(let e=t.index+1;e<this.handles.length;e+=1)if(this.handles[e].locked)return this.handles[e]}getSingleLockedHandle(){return this.getEarliestLockedHandle()}dragHandles(t,e){for(let i=0;i<this.handles.length;i+=1)this.handles[i].x=this.handles[i].basex+t,this.handles[i].y=this.handles[i].basey+e}drawHandles(){for(let t=0;t<this.handles.length;t+=1)D.lineWidth=1,this.handles[t].locked===!0?(D.fillStyle=F.RED_30,D.strokeStyle=F.RED):(D.fillStyle=F.GREEN_30,D.strokeStyle=F.GREEN),D.beginPath(),D.arc(this.handles[t].x,this.handles[t].y,F.HANDLE_DOT_RADIUS,0,2*Math.PI,!1),D.fill(),D.stroke()}alignHandles(t){for(let e=0;e<this.handles.length;e+=1)this.handles[e].x=t.x[this.handles[e].time],this.handles[e].y=t.y[this.handles[e].time]}}class iu{constructor(){this.courseid=null,this.coursename=null,this.controlsToAdjust=0,this.resultid=null,this.isScoreCourse=!1,this.eventid=null,this.name=null,this.comments=null,this.x=[],this.y=[],this.controlx=[],this.controly=[],this.time=[],this.startsecs=0,this.totaltime=0,this.splits=[],this.xml=null}}class Jv{constructor(){this.lat=[],this.lon=[],this.startOffset=0,this.baseX=[],this.baseY=[],this.handles=new o1,this.savedBaseX=[],this.savedBaseY=[],this.fileLoaded=!1,this.fileName="",this.fileType="",this.routeData=new iu,this.autofitOffset=null}adjustOffset(t){this.autofitOffset=t,this.processGPSFile(),this.autofitTrack()}addStartAndFinishHandles(){this.handles.addHandle(this.baseX[0],this.baseY[0],0),this.handles.addHandle(this.baseX[this.baseX.length-1],this.baseY[this.baseY.length-1],this.baseY.length-1)}applyWorldFile(){const t=Hy();for(let e=0;e<this.lat.length;e+=1)this.routeData.x[e]=Math.round((t.E*this.lon[e]-t.B*this.lat[e]+t.xCorrection)/t.AEDB),this.routeData.y[e]=Math.round((-1*t.D*this.lon[e]+t.A*this.lat[e]+t.yCorrection)/t.AEDB)}autofitTrack(){document.getElementById("chk-move-all").checked=!1,this.handles.deleteAllHandles(),this.addStartAndFinishHandles(),this.autofitOffset===null&&(this.autofitOffset=this.getOffset());for(let t=1;t<this.routeData.controlsToAdjust;t+=1)if(this.routeData.splits[t]!==this.routeData.splits[t-1]){const e=this.routeData.splits[t]+this.autofitOffset;e<this.baseX.length&&e>=0&&(this.handles.addHandle(this.routeData.x[e],this.routeData.y[e],e),Ly({x:this.routeData.x[e],y:this.routeData.y[e]},{x:this.routeData.controlx[t],y:this.routeData.controly[t]}),this.handles.lockHandleByTime(e),this.baseX=this.routeData.x.slice(0),this.baseY=this.routeData.y.slice(0),this.handles.rebaselineXY())}document.getElementById("btn-autofit-gps").setAttribute("disabled",""),document.getElementById("btn-undo-gps-adjust").setAttribute("disabled",""),wt()}expandToOneSecondInterval(){let t=[],e=[],i=[];const s=this.routeData;let r=s.time[0],o=s.x[0],a=s.y[0];t[0]=o,e[0]=a,i[0]=s.time[0];let l=i[0]+1;for(let d=1;d<s.x.length;d+=1){const f=s.time[d]-r;if(f>0){const p=(s.x[d]-o)/f,v=(s.y[d]-a)/f;let y=1;for(;y<=f;)t.push(o+p*y),e.push(a+v*y),i.push(l),l+=1,y+=1;o=s.x[d],a=s.y[d],r=l-1}}this.routeData.x=t.slice(0),this.routeData.y=e.slice(0),this.routeData.time=i.slice(0)}fitTrackInsideCourse(){const t=this.getLatLonInfo(),e=this.getControlInfo();let i=(e.maxX-e.minX)/(t.maxLon-t.minLon),s=(e.maxY-e.minY)/(t.maxLat-t.minLat);i>s?s=i*t.latCorrection/t.lonCorrection:i=s*t.lonCorrection/t.latCorrection,this.routeData.x[0]=(this.lon[0]-t.minLon)*i+e.minX,this.routeData.y[0]=-1*(this.lat[0]-t.maxLat)*s+e.minY;const r=e.minX-(this.routeData.x[0]-e.x[0]),o=e.minY-(this.routeData.y[0]-e.y[0]);for(let a=0;a<this.lat.length;a+=1)this.routeData.x[a]=(this.lon[a]-t.minLon)*i+r,this.routeData.y[a]=-1*(this.lat[a]-t.maxLat)*s+o}getControlInfo(){let t=PL();if(t.minX=Math.min.apply(Math,t.x),t.maxX=Math.max.apply(Math,t.x),t.minY=Math.min.apply(Math,t.y),t.maxY=Math.max.apply(Math,t.y),t.maxY-t.minY<100||t.maxX-t.minX<100){t.minX=0,t.minY=0;const e=vs();t.maxX=e.width,t.maxY=e.height}return t}getLatLonInfo(){let t={};return t.maxLat=Math.max.apply(Math,this.lat),t.maxLon=Math.max.apply(Math,this.lon),t.minLat=Math.min.apply(Math,this.lat),t.minLon=Math.min.apply(Math,this.lon),t.lonCorrection=Pd(t.minLat,t.maxLon,t.minLat,t.minLon)/(t.maxLon-t.minLon),t.latCorrection=Pd(t.minLat,t.minLon,t.maxLat,t.minLon)/(t.maxLat-t.minLat),t}getOffset(){const t=this.getSpeedAverage();let e=[];const i=10;for(let a=0;a<=2*i;a+=1)e[a]=0;let s=0;for(let a=1;a<this.routeData.controlsToAdjust;a+=1){const l=this.routeData.splits[a];if(l!==this.routeData.splits[a-1]){l>=i&&l+i<t.length&&(s=t.slice(l-i,l+i+1));for(let d=0;d<=2*i;d+=1)e[d]+=s[d]}}let r=0;for(let a=1;a<e.length;a+=1)e[a]<e[r]&&(r=a);return r-i}getSecsFromTrackpoint(t){const e=parseInt(Date.parse(t)/1e3,10);return isNaN(e)?0:e-this.startOffset}getSpeedAverage(){let t=[],e=[];t[0]=0;for(let i=1;i<this.routeData.x.length;i+=1)t[i]=$e(this.routeData.x[i],this.routeData.y[i],this.routeData.x[i-1],this.routeData.y[i-1]);for(let i=1;i<this.routeData.x.length-1;i+=1)e[i]=(t[i-1]+t[i]+t[i+1])/3;return e[0]=t[0],e[this.routeData.x.length-1]=t[this.routeData.x.length-1],e}getStartOffset(t){const e=parseInt(Date.parse(t.substr(0,11)+"00:00:00Z")/1e3,10);return isNaN(e)?0:e}initialiseGPS(){this.lat.length=0,this.lon.length=0,this.startOffset=0,this.baseX.length=0,this.baseY.length=0,this.handles.deleteAllHandles(),this.savedBaseX.length=0,this.savedBaseY.length=0,this.fileLoaded=!1,this.routeData.x.length=0,this.routeData.y.length=0,this.routeData.time.length=0}processGPSFile(){this.initialiseGPS(),this.fileType==="gpx"?this.processGPX():this.processTCX(),this.processGPSTrack()}processGPSTrack(){vu()?(this.applyWorldFile(),this.trackMatchesMapCoordinates()?document.getElementById("chk-move-all").checked=!0:(yt("GPS file problem","Your GPS file does not match the map co-ordinates. Please check you have selected the correct file."),this.fitTrackInsideCourse())):this.fitTrackInsideCourse(),this.lat.length=0,this.lon.length=0,this.expandToOneSecondInterval(),this.baseX=this.routeData.x.slice(0),this.baseY=this.routeData.y.slice(0),this.addStartAndFinishHandles(),this.fileLoaded=!0,this.routeData.splits.length>2&&document.getElementById("btn-autofit-gps").removeAttribute("disabled"),document.getElementById("btn-save-gps-route").removeAttribute("disabled"),wt()}processGPX(){const t=this.xml.getElementsByTagName("trkseg");for(let e=0;e<t.length;e+=1){const i=t[e].getElementsByTagName("trkpt");this.startOffset=this.getStartOffset(i[0].getElementsByTagName("time")[0].textContent);for(let s=0;s<i.length;s+=1){const r=i[s].getAttribute("lat"),o=i[s].getAttribute("lon");r!=="0"&&o!=="0"&&(this.lat.push(r),this.lon.push(o),this.routeData.time.push(this.getSecsFromTrackpoint(i[s].getElementsByTagName("time")[0].textContent)))}}}processTCX(){const t=this.xml.getElementsByTagName("Track");for(let e=0;e<t.length;e+=1){const i=t[e].getElementsByTagName("Trackpoint");this.startOffset=this.getStartOffset(i[0].getElementsByTagName("Time")[0].textContent);for(let s=0;s<i.length;s+=1)if(i[s].getElementsByTagName("Position").length>0){const r=i[s].getElementsByTagName("Position"),o=r[0].getElementsByTagName("LatitudeDegrees")[0].textContent,a=r[0].getElementsByTagName("LongitudeDegrees")[0].textContent;o!=="0"&&a!=="0"&&(this.lat.push(o),this.lon.push(a),this.routeData.time.push(this.getSecsFromTrackpoint(i[s].getElementsByTagName("Time")[0].textContent)))}}}readGPS(t){let e=new FileReader;this.fileName=t.target.files[0].name,e.onerror=function(i){yt("GPS file problem","Unable to open GPS file. "+i)},e.onload=i=>{try{if(this.fileType=this.fileName.slice(-3).toLowerCase(),this.fileType!=="gpx"&&this.fileType!=="tcx"){yt("GPS file problem","File type not recognised. Please check you have selected the correct file.");return}document.getElementById("rg2-load-gps-file").setAttribute("disabled",""),this.xml=new DOMParser().parseFromString(i.target.result,"text/xml"),this.processGPSFile()}catch(s){yt("GPS file problem","File is not valid XML. Please check you have selected the correct file. "+s);return}},e.readAsText(t.target.files[0])}trackMatchesMapCoordinates(){const t=Math.min.apply(Math,this.routeData.x),e=Math.max.apply(Math,this.routeData.x),i=Math.min.apply(Math,this.routeData.y),s=Math.max.apply(Math,this.routeData.y),r=vs();return e>0&&t<r.width&&i<r.height&&s>0}}let Bn=0,ni=[],Fn=[];function bp(n,t){return n.length>0?t+n.join(","):""}function yp(n,t,e){let i=0;return Bn!==0&&(i="#"+n+bp(e,"&course=")+bp(t,"&route=")),i}function a1(){return ni}function l1(){return Bn}function c1(){return Fn}function u1(){return Fn.length>0?F.TAB_RESULTS:F.TAB_COURSES}function d1(n){let t=n.replace(/#([0-9]+)($|&).*/,"$1");return t.length>0?parseInt(t,10):t}function Zv(n){Bn=0,ni.length=0,Fn.length=0;let t=n.split("&");for(let e=0;e<t.length;e+=1)t[e]=t[e].toLowerCase(),t[e].search("#")!==-1&&(Bn=parseInt(t[e].replace(/\D/g,""),10)),t[e].search("course=")!==-1&&(ni=t[e].replace("course=","").split(",")),t[e].search("route=")!==-1&&(Fn=t[e].replace("route=","").split(","));return ni=ni.map(Number),Fn=Fn.map(Number),isNaN(Bn)&&(Bn=0,ni.length=0,Fn.length=0),su(),Bn}function h1(n){Bn=n,su()}function xp(n){ni=n,su()}function Zu(n){Fn=n,su()}function su(){let n="";d1(window.location.hash)===Bn?(n=yp(Bn,Fn,ni),window.history.replaceState({hash:n},"",n)):(ni.length=0,Fn.length=0,n=yp(Bn,Fn,ni),window.history.pushState({hash:n},"",n))}class f1{constructor(t,e,i){return this.courses=[],this.courseClassMapping=[],this.newcontrols=new Mh,this.courses.length=0,this.courseClassMapping.length=0,this.fromOldCondes=!1,this.coursesGeoreferenced=!1,this.newcontrols.deleteAllControls(),this.localWorldfile=i,this.worldfile=e,this.processCoursesXML(t.target.result),this.addControlCount(),{courses:this.courses,newcontrols:this.newcontrols,mapping:this.courseClassMapping,georeferenced:this.coursesGeoreferenced}}processCoursesXML(t){let e=null;try{e=new DOMParser().parseFromString(t,"text/xml")}catch{yt("XML file error","File is not a valid XML course file.");return}if(e.getElementsByTagName("CourseData").length===0){e.documentElement.nodeName==="kml"?this.processKMLCourses(e):yt("XML file error","File is not a valid XML course file. CourseData element missing.");return}const s=this.getVersion(e);switch(s){case"2.0.3":this.processIOFV2XMLCourses(e);break;case"3.0":this.processIOFV3XMLCourses(e);break;default:yt("XML file error","Invalid IOF file format. Version "+s+" not supported.")}}getVersion(t){let e="",i=t.getElementsByTagName("IOFVersion");return i.length>0&&(e=i[0].getAttribute("version")),e===""&&(i=t.getElementsByTagName("CourseData"),i.length>0&&(e=i[0].getAttribute("iofVersion").trim(),this.setCreator(i[0].getAttribute("creator").trim()))),e}setCreator(t){t.indexOf("Condes")>-1&&t.length>15&&parseFloat(t.substring(15))<10.1&&(this.fromOldCondes=!0)}processIOFV3XMLCourses(t){let e=t.getElementsByTagName("Control"),i={x:0,y:0};for(let s=0;s<e.length;s+=1)if(e[s].parentNode.nodeName==="RaceCourseData"){const r=e[s].getElementsByTagName("Id")[0].textContent,o=e[s].getElementsByTagName("Position");this.localWorldfile.valid&&o.length>0?(i=this.getXYFromLatLng(o),this.coursesGeoreferenced=!0):i=this.getXYFromMapPosition(e[s].getElementsByTagName("MapPosition"));let a={};e[s].getAttribute("type")!=="CrossingPoint"&&(this.newcontrols.addControl(r.trim(),i.x,i.y),a.id=s,o.length>0?(a.lat=parseFloat(o[0].getAttribute("lat")),a.lng=parseFloat(o[0].getAttribute("lng"))):(a.lat=0,a.lng=0),a.x=i.x,a.y=i.y)}e=t.getElementsByTagName("Course"),this.extractV3Courses(e),e=t.getElementsByTagName("ClassCourseAssignment"),this.extractV3CourseClassMapping(e)}processKMLCourses(t){this.coursesGeoreferenced=!0;const e=t.getElementsByTagName("Placemark");for(let o=0;o<e.length;o=o+1){let a={};const l=e[o].getElementsByTagName("name")[0].childNodes[0].nodeValue.trim(),f=e[o].getElementsByTagName("Point")[0].getElementsByTagName("coordinates")[0].childNodes[0].nodeValue.trim().split(","),p=+f[1],v=+f[0];a.x=this.worldfile.getX(v,p),a.y=this.worldfile.getY(v,p),this.newcontrols.addControl(l.trim(),a.x,a.y);let y={};y.id=o+1,y.lat=p,y.lng=v,y.x=a.x,y.y=a.y}let i=[];const s="Course 1",r="Course 1";i=this.newcontrols.controls.map(function(o){return o.code}),this.courses.push({courseid:0,x:[],y:[],codes:i,name:s}),this.courseClassMapping.push({course:s,className:r}),document.getElementById("rg2-select-course-file").classList.add("is-valid")}getXYFromLatLng(t){let e={x:0,y:0};const i=parseFloat(t[0].getAttribute("lat")),s=parseFloat(t[0].getAttribute("lng"));return this.fromOldCondes?(e.x=this.localWorldfile.getX(s,i),e.y=this.localWorldfile.getY(s,i)):(e.x=this.worldfile.getX(s,i),e.y=this.worldfile.getY(s,i)),e}processIOFV2XMLCourses(t){if(this.extractV2Controls(t.getElementsByTagName("StartPoint"),"StartPointCode"),this.extractV2Controls(t.getElementsByTagName("Control"),"ControlCode"),this.coursesGeoreferenced=this.extractV2Controls(t.getElementsByTagName("FinishPoint"),"FinishPointCode"),this.coursesGeoreferenced&&this.localWorldfile.valid)for(let e=0;e<this.newcontrols.controls.length;e+=1){const i=this.newcontrols.controls[e].x,s=this.newcontrols.controls[e].y;this.newcontrols.controls[e].x=this.localWorldfile.getX(i,s),this.newcontrols.controls[e].y=this.localWorldfile.getY(i,s)}this.extractV2Courses(t.getElementsByTagName("Course"))}extractV2Courses(t){for(let e=0;e<t.length;e+=1){let i=[],s=[],r=[];const o=t[e].getElementsByTagName("CourseName")[0].textContent.trim();i=this.extractCodesFromControlList(t[e],"ControlCode"),i.unshift(t[e].getElementsByTagName("StartPointCode")[0].textContent.trim()),i.push(t[e].getElementsByTagName("FinishPointCode")[0].textContent.trim()),this.courses.push({courseid:0,x:s,y:r,codes:i,name:o})}document.getElementById("rg2-select-course-file").classList.add("is-valid")}extractV3Courses(t){for(let e=0;e<t.length;e+=1){let i=[],s=[],r=[];const o=t[e].getElementsByTagName("Name")[0].textContent.trim();i=this.extractCodesFromControlList(t[e],"Control"),this.courses.push({courseid:0,x:s,y:r,codes:i,name:o})}document.getElementById("rg2-select-course-file").classList.add("is-valid")}extractV3CourseClassMapping(t){for(let e=0;e<t.length;e+=1){const i=t[e].getElementsByTagName("CourseName")[0].textContent.trim(),s=t[e].getElementsByTagName("ClassName")[0].textContent.trim();this.courseClassMapping.push({course:i,className:s})}document.getElementById("rg2-select-course-file").classList.add("is-valid")}extractCodesFromControlList(t,e){const i=t.getElementsByTagName("CourseControl");let s=[];for(let r=0;r<i.length;r+=1)if(r===0||i[r].getAttribute("type")!=="Start"){const o=i[r].getElementsByTagName(e)[0].textContent.trim();this.validControlCode(o)&&s.push(o)}return s}extractV2Controls(t,e){let i=!1,s={x:0,y:0};for(let r=0;r<t.length;r+=1){const o=t[r].getElementsByTagName(e)[0].textContent,a=t[r].getElementsByTagName("ControlPosition");a.length>0&&this.localWorldfile.valid?(s.x=parseFloat(a[0].getAttribute("x")),s.y=parseFloat(a[0].getAttribute("y")),i=!0):s=this.getXYFromMapPosition(t[r].getElementsByTagName("MapPosition")),this.newcontrols.addControl(o.trim(),s.x,s.y)}return i}getXYFromMapPosition(t){return{x:t[0].getAttribute("x").replace(",","."),y:t[0].getAttribute("y").replace(",",".")}}validControlCode(t){const e=this.newcontrols.controls;for(let i=0;i<e.length;i+=1)if(e[i].code===t)return!0;return!1}addControlCount(){for(let t=0;t<this.courses.length;t+=1)this.courses[t].controlcount=this.courses[t].codes.length-2}}class p1{constructor(){if(this.georefsystems=[],this.georefsystems.push({name:"Not georeferenced",description:"none",params:"",value:0}),this.georefsystems.push({name:"GB National Grid",description:"EPSG:27700",params:"+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs",value:1}),this.georefsystems.push({name:"Google EPSG:900913",description:"EPSG:900913",params:"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs",value:2}),rg2Config.epsg_code!==void 0){const t=rg2Config.epsg_code.split("|"),e=rg2Config.epsg_params.split("|");for(let i=0;i<t.length;i=i+1)this.georefsystems.push({name:t[i].replace(" ",""),description:t[i].replace(" ",""),params:e[i],value:i+3});this.defaultGeorefVal=3}else this.defaultGeorefVal=1}getDefaultValue(){return this.georefsystems[this.defaultGeorefVal].value}getGeorefDropdown(){let t="";for(let e=0;e<this.georefsystems.length;e+=1)t+=ps(e,this.georefsystems[e].name,e===0);return t}getGeorefSystem(t){return this.georefsystems[t]}}var ru={},ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.bodyRegExps={xml:/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html4:/&notin;|&(?:nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|quot|amp|lt|gt|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html5:/&centerdot;|&copysr;|&divideontimes;|&gtcc;|&gtcir;|&gtdot;|&gtlPar;|&gtquest;|&gtrapprox;|&gtrarr;|&gtrdot;|&gtreqless;|&gtreqqless;|&gtrless;|&gtrsim;|&ltcc;|&ltcir;|&ltdot;|&lthree;|&ltimes;|&ltlarr;|&ltquest;|&ltrPar;|&ltri;|&ltrie;|&ltrif;|&notin;|&notinE;|&notindot;|&notinva;|&notinvb;|&notinvc;|&notni;|&notniva;|&notnivb;|&notnivc;|&parallel;|&timesb;|&timesbar;|&timesd;|&(?:AElig|AMP|Aacute|Acirc|Agrave|Aring|Atilde|Auml|COPY|Ccedil|ETH|Eacute|Ecirc|Egrave|Euml|GT|Iacute|Icirc|Igrave|Iuml|LT|Ntilde|Oacute|Ocirc|Ograve|Oslash|Otilde|Ouml|QUOT|REG|THORN|Uacute|Ucirc|Ugrave|Uuml|Yacute|aacute|acirc|acute|aelig|agrave|amp|aring|atilde|auml|brvbar|ccedil|cedil|cent|copy|curren|deg|divide|eacute|ecirc|egrave|eth|euml|frac12|frac14|frac34|gt|iacute|icirc|iexcl|igrave|iquest|iuml|laquo|lt|macr|micro|middot|nbsp|not|ntilde|oacute|ocirc|ograve|ordf|ordm|oslash|otilde|ouml|para|plusmn|pound|quot|raquo|reg|sect|shy|sup1|sup2|sup3|szlig|thorn|times|uacute|ucirc|ugrave|uml|uuml|yacute|yen|yuml|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g};ou.namedReferences={xml:{entities:{"&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&amp;":"&"},characters:{"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","&":"&amp;"}},html4:{entities:{"&apos;":"'","&nbsp":"","&nbsp;":"","&iexcl":"","&iexcl;":"","&cent":"","&cent;":"","&pound":"","&pound;":"","&curren":"","&curren;":"","&yen":"","&yen;":"","&brvbar":"","&brvbar;":"","&sect":"","&sect;":"","&uml":"","&uml;":"","&copy":"","&copy;":"","&ordf":"","&ordf;":"","&laquo":"","&laquo;":"","&not":"","&not;":"","&shy":"","&shy;":"","&reg":"","&reg;":"","&macr":"","&macr;":"","&deg":"","&deg;":"","&plusmn":"","&plusmn;":"","&sup2":"","&sup2;":"","&sup3":"","&sup3;":"","&acute":"","&acute;":"","&micro":"","&micro;":"","&para":"","&para;":"","&middot":"","&middot;":"","&cedil":"","&cedil;":"","&sup1":"","&sup1;":"","&ordm":"","&ordm;":"","&raquo":"","&raquo;":"","&frac14":"","&frac14;":"","&frac12":"","&frac12;":"","&frac34":"","&frac34;":"","&iquest":"","&iquest;":"","&Agrave":"","&Agrave;":"","&Aacute":"","&Aacute;":"","&Acirc":"","&Acirc;":"","&Atilde":"","&Atilde;":"","&Auml":"","&Auml;":"","&Aring":"","&Aring;":"","&AElig":"","&AElig;":"","&Ccedil":"","&Ccedil;":"","&Egrave":"","&Egrave;":"","&Eacute":"","&Eacute;":"","&Ecirc":"","&Ecirc;":"","&Euml":"","&Euml;":"","&Igrave":"","&Igrave;":"","&Iacute":"","&Iacute;":"","&Icirc":"","&Icirc;":"","&Iuml":"","&Iuml;":"","&ETH":"","&ETH;":"","&Ntilde":"","&Ntilde;":"","&Ograve":"","&Ograve;":"","&Oacute":"","&Oacute;":"","&Ocirc":"","&Ocirc;":"","&Otilde":"","&Otilde;":"","&Ouml":"","&Ouml;":"","&times":"","&times;":"","&Oslash":"","&Oslash;":"","&Ugrave":"","&Ugrave;":"","&Uacute":"","&Uacute;":"","&Ucirc":"","&Ucirc;":"","&Uuml":"","&Uuml;":"","&Yacute":"","&Yacute;":"","&THORN":"","&THORN;":"","&szlig":"","&szlig;":"","&agrave":"","&agrave;":"","&aacute":"","&aacute;":"","&acirc":"","&acirc;":"","&atilde":"","&atilde;":"","&auml":"","&auml;":"","&aring":"","&aring;":"","&aelig":"","&aelig;":"","&ccedil":"","&ccedil;":"","&egrave":"","&egrave;":"","&eacute":"","&eacute;":"","&ecirc":"","&ecirc;":"","&euml":"","&euml;":"","&igrave":"","&igrave;":"","&iacute":"","&iacute;":"","&icirc":"","&icirc;":"","&iuml":"","&iuml;":"","&eth":"","&eth;":"","&ntilde":"","&ntilde;":"","&ograve":"","&ograve;":"","&oacute":"","&oacute;":"","&ocirc":"","&ocirc;":"","&otilde":"","&otilde;":"","&ouml":"","&ouml;":"","&divide":"","&divide;":"","&oslash":"","&oslash;":"","&ugrave":"","&ugrave;":"","&uacute":"","&uacute;":"","&ucirc":"","&ucirc;":"","&uuml":"","&uuml;":"","&yacute":"","&yacute;":"","&thorn":"","&thorn;":"","&yuml":"","&yuml;":"","&quot":'"',"&quot;":'"',"&amp":"&","&amp;":"&","&lt":"<","&lt;":"<","&gt":">","&gt;":">","&OElig;":"","&oelig;":"","&Scaron;":"","&scaron;":"","&Yuml;":"","&circ;":"","&tilde;":"","&ensp;":"","&emsp;":"","&thinsp;":"","&zwnj;":"","&zwj;":"","&lrm;":"","&rlm;":"","&ndash;":"","&mdash;":"","&lsquo;":"","&rsquo;":"","&sbquo;":"","&ldquo;":"","&rdquo;":"","&bdquo;":"","&dagger;":"","&Dagger;":"","&permil;":"","&lsaquo;":"","&rsaquo;":"","&euro;":"","&fnof;":"","&Alpha;":"","&Beta;":"","&Gamma;":"","&Delta;":"","&Epsilon;":"","&Zeta;":"","&Eta;":"","&Theta;":"","&Iota;":"","&Kappa;":"","&Lambda;":"","&Mu;":"","&Nu;":"","&Xi;":"","&Omicron;":"","&Pi;":"","&Rho;":"","&Sigma;":"","&Tau;":"","&Upsilon;":"","&Phi;":"","&Chi;":"","&Psi;":"","&Omega;":"","&alpha;":"","&beta;":"","&gamma;":"","&delta;":"","&epsilon;":"","&zeta;":"","&eta;":"","&theta;":"","&iota;":"","&kappa;":"","&lambda;":"","&mu;":"","&nu;":"","&xi;":"","&omicron;":"","&pi;":"","&rho;":"","&sigmaf;":"","&sigma;":"","&tau;":"","&upsilon;":"","&phi;":"","&chi;":"","&psi;":"","&omega;":"","&thetasym;":"","&upsih;":"","&piv;":"","&bull;":"","&hellip;":"","&prime;":"","&Prime;":"","&oline;":"","&frasl;":"","&weierp;":"","&image;":"","&real;":"","&trade;":"","&alefsym;":"","&larr;":"","&uarr;":"","&rarr;":"","&darr;":"","&harr;":"","&crarr;":"","&lArr;":"","&uArr;":"","&rArr;":"","&dArr;":"","&hArr;":"","&forall;":"","&part;":"","&exist;":"","&empty;":"","&nabla;":"","&isin;":"","&notin;":"","&ni;":"","&prod;":"","&sum;":"","&minus;":"","&lowast;":"","&radic;":"","&prop;":"","&infin;":"","&ang;":"","&and;":"","&or;":"","&cap;":"","&cup;":"","&int;":"","&there4;":"","&sim;":"","&cong;":"","&asymp;":"","&ne;":"","&equiv;":"","&le;":"","&ge;":"","&sub;":"","&sup;":"","&nsub;":"","&sube;":"","&supe;":"","&oplus;":"","&otimes;":"","&perp;":"","&sdot;":"","&lceil;":"","&rceil;":"","&lfloor;":"","&rfloor;":"","&lang;":"","&rang;":"","&loz;":"","&spades;":"","&clubs;":"","&hearts;":"","&diams;":""},characters:{"'":"&apos;","":"&nbsp;","":"&iexcl;","":"&cent;","":"&pound;","":"&curren;","":"&yen;","":"&brvbar;","":"&sect;","":"&uml;","":"&copy;",:"&ordf;","":"&laquo;","":"&not;","":"&shy;","":"&reg;","":"&macr;","":"&deg;","":"&plusmn;","":"&sup2;","":"&sup3;","":"&acute;",:"&micro;","":"&para;","":"&middot;","":"&cedil;","":"&sup1;",:"&ordm;","":"&raquo;","":"&frac14;","":"&frac12;","":"&frac34;","":"&iquest;",:"&Agrave;",:"&Aacute;",:"&Acirc;",:"&Atilde;",:"&Auml;",:"&Aring;",:"&AElig;",:"&Ccedil;",:"&Egrave;",:"&Eacute;",:"&Ecirc;",:"&Euml;",:"&Igrave;",:"&Iacute;",:"&Icirc;",:"&Iuml;",:"&ETH;",:"&Ntilde;",:"&Ograve;",:"&Oacute;",:"&Ocirc;",:"&Otilde;",:"&Ouml;","":"&times;",:"&Oslash;",:"&Ugrave;",:"&Uacute;",:"&Ucirc;",:"&Uuml;",:"&Yacute;",:"&THORN;",:"&szlig;",:"&agrave;",:"&aacute;",:"&acirc;",:"&atilde;",:"&auml;",:"&aring;",:"&aelig;",:"&ccedil;",:"&egrave;",:"&eacute;",:"&ecirc;",:"&euml;",:"&igrave;",:"&iacute;",:"&icirc;",:"&iuml;",:"&eth;",:"&ntilde;",:"&ograve;",:"&oacute;",:"&ocirc;",:"&otilde;",:"&ouml;","":"&divide;",:"&oslash;",:"&ugrave;",:"&uacute;",:"&ucirc;",:"&uuml;",:"&yacute;",:"&thorn;",:"&yuml;",'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;",:"&OElig;",:"&oelig;",:"&Scaron;",:"&scaron;",:"&Yuml;","":"&circ;","":"&tilde;","":"&ensp;","":"&emsp;","":"&thinsp;","":"&zwnj;","":"&zwj;","":"&lrm;","":"&rlm;","":"&ndash;","":"&mdash;","":"&lsquo;","":"&rsquo;","":"&sbquo;","":"&ldquo;","":"&rdquo;","":"&bdquo;","":"&dagger;","":"&Dagger;","":"&permil;","":"&lsaquo;","":"&rsaquo;","":"&euro;",:"&fnof;",:"&Alpha;",:"&Beta;",:"&Gamma;",:"&Delta;",:"&Epsilon;",:"&Zeta;",:"&Eta;",:"&Theta;",:"&Iota;",:"&Kappa;",:"&Lambda;",:"&Mu;",:"&Nu;",:"&Xi;",:"&Omicron;",:"&Pi;",:"&Rho;",:"&Sigma;",:"&Tau;",:"&Upsilon;",:"&Phi;",:"&Chi;",:"&Psi;",:"&Omega;",:"&alpha;",:"&beta;",:"&gamma;",:"&delta;",:"&epsilon;",:"&zeta;",:"&eta;",:"&theta;",:"&iota;",:"&kappa;",:"&lambda;",:"&mu;",:"&nu;",:"&xi;",:"&omicron;",:"&pi;",:"&rho;",:"&sigmaf;",:"&sigma;",:"&tau;",:"&upsilon;",:"&phi;",:"&chi;",:"&psi;",:"&omega;",:"&thetasym;",:"&upsih;",:"&piv;","":"&bull;","":"&hellip;","":"&prime;","":"&Prime;","":"&oline;","":"&frasl;","":"&weierp;",:"&image;",:"&real;","":"&trade;",:"&alefsym;","":"&larr;","":"&uarr;","":"&rarr;","":"&darr;","":"&harr;","":"&crarr;","":"&lArr;","":"&uArr;","":"&rArr;","":"&dArr;","":"&hArr;","":"&forall;","":"&part;","":"&exist;","":"&empty;","":"&nabla;","":"&isin;","":"&notin;","":"&ni;","":"&prod;","":"&sum;","":"&minus;","":"&lowast;","":"&radic;","":"&prop;","":"&infin;","":"&ang;","":"&and;","":"&or;","":"&cap;","":"&cup;","":"&int;","":"&there4;","":"&sim;","":"&cong;","":"&asymp;","":"&ne;","":"&equiv;","":"&le;","":"&ge;","":"&sub;","":"&sup;","":"&nsub;","":"&sube;","":"&supe;","":"&oplus;","":"&otimes;","":"&perp;","":"&sdot;","":"&lceil;","":"&rceil;","":"&lfloor;","":"&rfloor;","":"&lang;","":"&rang;","":"&loz;","":"&spades;","":"&clubs;","":"&hearts;","":"&diams;"}},html5:{entities:{"&AElig":"","&AElig;":"","&AMP":"&","&AMP;":"&","&Aacute":"","&Aacute;":"","&Abreve;":"","&Acirc":"","&Acirc;":"","&Acy;":"","&Afr;":"","&Agrave":"","&Agrave;":"","&Alpha;":"","&Amacr;":"","&And;":"","&Aogon;":"","&Aopf;":"","&ApplyFunction;":"","&Aring":"","&Aring;":"","&Ascr;":"","&Assign;":"","&Atilde":"","&Atilde;":"","&Auml":"","&Auml;":"","&Backslash;":"","&Barv;":"","&Barwed;":"","&Bcy;":"","&Because;":"","&Bernoullis;":"","&Beta;":"","&Bfr;":"","&Bopf;":"","&Breve;":"","&Bscr;":"","&Bumpeq;":"","&CHcy;":"","&COPY":"","&COPY;":"","&Cacute;":"","&Cap;":"","&CapitalDifferentialD;":"","&Cayleys;":"","&Ccaron;":"","&Ccedil":"","&Ccedil;":"","&Ccirc;":"","&Cconint;":"","&Cdot;":"","&Cedilla;":"","&CenterDot;":"","&Cfr;":"","&Chi;":"","&CircleDot;":"","&CircleMinus;":"","&CirclePlus;":"","&CircleTimes;":"","&ClockwiseContourIntegral;":"","&CloseCurlyDoubleQuote;":"","&CloseCurlyQuote;":"","&Colon;":"","&Colone;":"","&Congruent;":"","&Conint;":"","&ContourIntegral;":"","&Copf;":"","&Coproduct;":"","&CounterClockwiseContourIntegral;":"","&Cross;":"","&Cscr;":"","&Cup;":"","&CupCap;":"","&DD;":"","&DDotrahd;":"","&DJcy;":"","&DScy;":"","&DZcy;":"","&Dagger;":"","&Darr;":"","&Dashv;":"","&Dcaron;":"","&Dcy;":"","&Del;":"","&Delta;":"","&Dfr;":"","&DiacriticalAcute;":"","&DiacriticalDot;":"","&DiacriticalDoubleAcute;":"","&DiacriticalGrave;":"`","&DiacriticalTilde;":"","&Diamond;":"","&DifferentialD;":"","&Dopf;":"","&Dot;":"","&DotDot;":"","&DotEqual;":"","&DoubleContourIntegral;":"","&DoubleDot;":"","&DoubleDownArrow;":"","&DoubleLeftArrow;":"","&DoubleLeftRightArrow;":"","&DoubleLeftTee;":"","&DoubleLongLeftArrow;":"","&DoubleLongLeftRightArrow;":"","&DoubleLongRightArrow;":"","&DoubleRightArrow;":"","&DoubleRightTee;":"","&DoubleUpArrow;":"","&DoubleUpDownArrow;":"","&DoubleVerticalBar;":"","&DownArrow;":"","&DownArrowBar;":"","&DownArrowUpArrow;":"","&DownBreve;":"","&DownLeftRightVector;":"","&DownLeftTeeVector;":"","&DownLeftVector;":"","&DownLeftVectorBar;":"","&DownRightTeeVector;":"","&DownRightVector;":"","&DownRightVectorBar;":"","&DownTee;":"","&DownTeeArrow;":"","&Downarrow;":"","&Dscr;":"","&Dstrok;":"","&ENG;":"","&ETH":"","&ETH;":"","&Eacute":"","&Eacute;":"","&Ecaron;":"","&Ecirc":"","&Ecirc;":"","&Ecy;":"","&Edot;":"","&Efr;":"","&Egrave":"","&Egrave;":"","&Element;":"","&Emacr;":"","&EmptySmallSquare;":"","&EmptyVerySmallSquare;":"","&Eogon;":"","&Eopf;":"","&Epsilon;":"","&Equal;":"","&EqualTilde;":"","&Equilibrium;":"","&Escr;":"","&Esim;":"","&Eta;":"","&Euml":"","&Euml;":"","&Exists;":"","&ExponentialE;":"","&Fcy;":"","&Ffr;":"","&FilledSmallSquare;":"","&FilledVerySmallSquare;":"","&Fopf;":"","&ForAll;":"","&Fouriertrf;":"","&Fscr;":"","&GJcy;":"","&GT":">","&GT;":">","&Gamma;":"","&Gammad;":"","&Gbreve;":"","&Gcedil;":"","&Gcirc;":"","&Gcy;":"","&Gdot;":"","&Gfr;":"","&Gg;":"","&Gopf;":"","&GreaterEqual;":"","&GreaterEqualLess;":"","&GreaterFullEqual;":"","&GreaterGreater;":"","&GreaterLess;":"","&GreaterSlantEqual;":"","&GreaterTilde;":"","&Gscr;":"","&Gt;":"","&HARDcy;":"","&Hacek;":"","&Hat;":"^","&Hcirc;":"","&Hfr;":"","&HilbertSpace;":"","&Hopf;":"","&HorizontalLine;":"","&Hscr;":"","&Hstrok;":"","&HumpDownHump;":"","&HumpEqual;":"","&IEcy;":"","&IJlig;":"","&IOcy;":"","&Iacute":"","&Iacute;":"","&Icirc":"","&Icirc;":"","&Icy;":"","&Idot;":"","&Ifr;":"","&Igrave":"","&Igrave;":"","&Im;":"","&Imacr;":"","&ImaginaryI;":"","&Implies;":"","&Int;":"","&Integral;":"","&Intersection;":"","&InvisibleComma;":"","&InvisibleTimes;":"","&Iogon;":"","&Iopf;":"","&Iota;":"","&Iscr;":"","&Itilde;":"","&Iukcy;":"","&Iuml":"","&Iuml;":"","&Jcirc;":"","&Jcy;":"","&Jfr;":"","&Jopf;":"","&Jscr;":"","&Jsercy;":"","&Jukcy;":"","&KHcy;":"","&KJcy;":"","&Kappa;":"","&Kcedil;":"","&Kcy;":"","&Kfr;":"","&Kopf;":"","&Kscr;":"","&LJcy;":"","&LT":"<","&LT;":"<","&Lacute;":"","&Lambda;":"","&Lang;":"","&Laplacetrf;":"","&Larr;":"","&Lcaron;":"","&Lcedil;":"","&Lcy;":"","&LeftAngleBracket;":"","&LeftArrow;":"","&LeftArrowBar;":"","&LeftArrowRightArrow;":"","&LeftCeiling;":"","&LeftDoubleBracket;":"","&LeftDownTeeVector;":"","&LeftDownVector;":"","&LeftDownVectorBar;":"","&LeftFloor;":"","&LeftRightArrow;":"","&LeftRightVector;":"","&LeftTee;":"","&LeftTeeArrow;":"","&LeftTeeVector;":"","&LeftTriangle;":"","&LeftTriangleBar;":"","&LeftTriangleEqual;":"","&LeftUpDownVector;":"","&LeftUpTeeVector;":"","&LeftUpVector;":"","&LeftUpVectorBar;":"","&LeftVector;":"","&LeftVectorBar;":"","&Leftarrow;":"","&Leftrightarrow;":"","&LessEqualGreater;":"","&LessFullEqual;":"","&LessGreater;":"","&LessLess;":"","&LessSlantEqual;":"","&LessTilde;":"","&Lfr;":"","&Ll;":"","&Lleftarrow;":"","&Lmidot;":"","&LongLeftArrow;":"","&LongLeftRightArrow;":"","&LongRightArrow;":"","&Longleftarrow;":"","&Longleftrightarrow;":"","&Longrightarrow;":"","&Lopf;":"","&LowerLeftArrow;":"","&LowerRightArrow;":"","&Lscr;":"","&Lsh;":"","&Lstrok;":"","&Lt;":"","&Map;":"","&Mcy;":"","&MediumSpace;":"","&Mellintrf;":"","&Mfr;":"","&MinusPlus;":"","&Mopf;":"","&Mscr;":"","&Mu;":"","&NJcy;":"","&Nacute;":"","&Ncaron;":"","&Ncedil;":"","&Ncy;":"","&NegativeMediumSpace;":"","&NegativeThickSpace;":"","&NegativeThinSpace;":"","&NegativeVeryThinSpace;":"","&NestedGreaterGreater;":"","&NestedLessLess;":"","&NewLine;":`
`,"&Nfr;":"","&NoBreak;":"","&NonBreakingSpace;":"","&Nopf;":"","&Not;":"","&NotCongruent;":"","&NotCupCap;":"","&NotDoubleVerticalBar;":"","&NotElement;":"","&NotEqual;":"","&NotEqualTilde;":"","&NotExists;":"","&NotGreater;":"","&NotGreaterEqual;":"","&NotGreaterFullEqual;":"","&NotGreaterGreater;":"","&NotGreaterLess;":"","&NotGreaterSlantEqual;":"","&NotGreaterTilde;":"","&NotHumpDownHump;":"","&NotHumpEqual;":"","&NotLeftTriangle;":"","&NotLeftTriangleBar;":"","&NotLeftTriangleEqual;":"","&NotLess;":"","&NotLessEqual;":"","&NotLessGreater;":"","&NotLessLess;":"","&NotLessSlantEqual;":"","&NotLessTilde;":"","&NotNestedGreaterGreater;":"","&NotNestedLessLess;":"","&NotPrecedes;":"","&NotPrecedesEqual;":"","&NotPrecedesSlantEqual;":"","&NotReverseElement;":"","&NotRightTriangle;":"","&NotRightTriangleBar;":"","&NotRightTriangleEqual;":"","&NotSquareSubset;":"","&NotSquareSubsetEqual;":"","&NotSquareSuperset;":"","&NotSquareSupersetEqual;":"","&NotSubset;":"","&NotSubsetEqual;":"","&NotSucceeds;":"","&NotSucceedsEqual;":"","&NotSucceedsSlantEqual;":"","&NotSucceedsTilde;":"","&NotSuperset;":"","&NotSupersetEqual;":"","&NotTilde;":"","&NotTildeEqual;":"","&NotTildeFullEqual;":"","&NotTildeTilde;":"","&NotVerticalBar;":"","&Nscr;":"","&Ntilde":"","&Ntilde;":"","&Nu;":"","&OElig;":"","&Oacute":"","&Oacute;":"","&Ocirc":"","&Ocirc;":"","&Ocy;":"","&Odblac;":"","&Ofr;":"","&Ograve":"","&Ograve;":"","&Omacr;":"","&Omega;":"","&Omicron;":"","&Oopf;":"","&OpenCurlyDoubleQuote;":"","&OpenCurlyQuote;":"","&Or;":"","&Oscr;":"","&Oslash":"","&Oslash;":"","&Otilde":"","&Otilde;":"","&Otimes;":"","&Ouml":"","&Ouml;":"","&OverBar;":"","&OverBrace;":"","&OverBracket;":"","&OverParenthesis;":"","&PartialD;":"","&Pcy;":"","&Pfr;":"","&Phi;":"","&Pi;":"","&PlusMinus;":"","&Poincareplane;":"","&Popf;":"","&Pr;":"","&Precedes;":"","&PrecedesEqual;":"","&PrecedesSlantEqual;":"","&PrecedesTilde;":"","&Prime;":"","&Product;":"","&Proportion;":"","&Proportional;":"","&Pscr;":"","&Psi;":"","&QUOT":'"',"&QUOT;":'"',"&Qfr;":"","&Qopf;":"","&Qscr;":"","&RBarr;":"","&REG":"","&REG;":"","&Racute;":"","&Rang;":"","&Rarr;":"","&Rarrtl;":"","&Rcaron;":"","&Rcedil;":"","&Rcy;":"","&Re;":"","&ReverseElement;":"","&ReverseEquilibrium;":"","&ReverseUpEquilibrium;":"","&Rfr;":"","&Rho;":"","&RightAngleBracket;":"","&RightArrow;":"","&RightArrowBar;":"","&RightArrowLeftArrow;":"","&RightCeiling;":"","&RightDoubleBracket;":"","&RightDownTeeVector;":"","&RightDownVector;":"","&RightDownVectorBar;":"","&RightFloor;":"","&RightTee;":"","&RightTeeArrow;":"","&RightTeeVector;":"","&RightTriangle;":"","&RightTriangleBar;":"","&RightTriangleEqual;":"","&RightUpDownVector;":"","&RightUpTeeVector;":"","&RightUpVector;":"","&RightUpVectorBar;":"","&RightVector;":"","&RightVectorBar;":"","&Rightarrow;":"","&Ropf;":"","&RoundImplies;":"","&Rrightarrow;":"","&Rscr;":"","&Rsh;":"","&RuleDelayed;":"","&SHCHcy;":"","&SHcy;":"","&SOFTcy;":"","&Sacute;":"","&Sc;":"","&Scaron;":"","&Scedil;":"","&Scirc;":"","&Scy;":"","&Sfr;":"","&ShortDownArrow;":"","&ShortLeftArrow;":"","&ShortRightArrow;":"","&ShortUpArrow;":"","&Sigma;":"","&SmallCircle;":"","&Sopf;":"","&Sqrt;":"","&Square;":"","&SquareIntersection;":"","&SquareSubset;":"","&SquareSubsetEqual;":"","&SquareSuperset;":"","&SquareSupersetEqual;":"","&SquareUnion;":"","&Sscr;":"","&Star;":"","&Sub;":"","&Subset;":"","&SubsetEqual;":"","&Succeeds;":"","&SucceedsEqual;":"","&SucceedsSlantEqual;":"","&SucceedsTilde;":"","&SuchThat;":"","&Sum;":"","&Sup;":"","&Superset;":"","&SupersetEqual;":"","&Supset;":"","&THORN":"","&THORN;":"","&TRADE;":"","&TSHcy;":"","&TScy;":"","&Tab;":"	","&Tau;":"","&Tcaron;":"","&Tcedil;":"","&Tcy;":"","&Tfr;":"","&Therefore;":"","&Theta;":"","&ThickSpace;":"","&ThinSpace;":"","&Tilde;":"","&TildeEqual;":"","&TildeFullEqual;":"","&TildeTilde;":"","&Topf;":"","&TripleDot;":"","&Tscr;":"","&Tstrok;":"","&Uacute":"","&Uacute;":"","&Uarr;":"","&Uarrocir;":"","&Ubrcy;":"","&Ubreve;":"","&Ucirc":"","&Ucirc;":"","&Ucy;":"","&Udblac;":"","&Ufr;":"","&Ugrave":"","&Ugrave;":"","&Umacr;":"","&UnderBar;":"_","&UnderBrace;":"","&UnderBracket;":"","&UnderParenthesis;":"","&Union;":"","&UnionPlus;":"","&Uogon;":"","&Uopf;":"","&UpArrow;":"","&UpArrowBar;":"","&UpArrowDownArrow;":"","&UpDownArrow;":"","&UpEquilibrium;":"","&UpTee;":"","&UpTeeArrow;":"","&Uparrow;":"","&Updownarrow;":"","&UpperLeftArrow;":"","&UpperRightArrow;":"","&Upsi;":"","&Upsilon;":"","&Uring;":"","&Uscr;":"","&Utilde;":"","&Uuml":"","&Uuml;":"","&VDash;":"","&Vbar;":"","&Vcy;":"","&Vdash;":"","&Vdashl;":"","&Vee;":"","&Verbar;":"","&Vert;":"","&VerticalBar;":"","&VerticalLine;":"|","&VerticalSeparator;":"","&VerticalTilde;":"","&VeryThinSpace;":"","&Vfr;":"","&Vopf;":"","&Vscr;":"","&Vvdash;":"","&Wcirc;":"","&Wedge;":"","&Wfr;":"","&Wopf;":"","&Wscr;":"","&Xfr;":"","&Xi;":"","&Xopf;":"","&Xscr;":"","&YAcy;":"","&YIcy;":"","&YUcy;":"","&Yacute":"","&Yacute;":"","&Ycirc;":"","&Ycy;":"","&Yfr;":"","&Yopf;":"","&Yscr;":"","&Yuml;":"","&ZHcy;":"","&Zacute;":"","&Zcaron;":"","&Zcy;":"","&Zdot;":"","&ZeroWidthSpace;":"","&Zeta;":"","&Zfr;":"","&Zopf;":"","&Zscr;":"","&aacute":"","&aacute;":"","&abreve;":"","&ac;":"","&acE;":"","&acd;":"","&acirc":"","&acirc;":"","&acute":"","&acute;":"","&acy;":"","&aelig":"","&aelig;":"","&af;":"","&afr;":"","&agrave":"","&agrave;":"","&alefsym;":"","&aleph;":"","&alpha;":"","&amacr;":"","&amalg;":"","&amp":"&","&amp;":"&","&and;":"","&andand;":"","&andd;":"","&andslope;":"","&andv;":"","&ang;":"","&ange;":"","&angle;":"","&angmsd;":"","&angmsdaa;":"","&angmsdab;":"","&angmsdac;":"","&angmsdad;":"","&angmsdae;":"","&angmsdaf;":"","&angmsdag;":"","&angmsdah;":"","&angrt;":"","&angrtvb;":"","&angrtvbd;":"","&angsph;":"","&angst;":"","&angzarr;":"","&aogon;":"","&aopf;":"","&ap;":"","&apE;":"","&apacir;":"","&ape;":"","&apid;":"","&apos;":"'","&approx;":"","&approxeq;":"","&aring":"","&aring;":"","&ascr;":"","&ast;":"*","&asymp;":"","&asympeq;":"","&atilde":"","&atilde;":"","&auml":"","&auml;":"","&awconint;":"","&awint;":"","&bNot;":"","&backcong;":"","&backepsilon;":"","&backprime;":"","&backsim;":"","&backsimeq;":"","&barvee;":"","&barwed;":"","&barwedge;":"","&bbrk;":"","&bbrktbrk;":"","&bcong;":"","&bcy;":"","&bdquo;":"","&becaus;":"","&because;":"","&bemptyv;":"","&bepsi;":"","&bernou;":"","&beta;":"","&beth;":"","&between;":"","&bfr;":"","&bigcap;":"","&bigcirc;":"","&bigcup;":"","&bigodot;":"","&bigoplus;":"","&bigotimes;":"","&bigsqcup;":"","&bigstar;":"","&bigtriangledown;":"","&bigtriangleup;":"","&biguplus;":"","&bigvee;":"","&bigwedge;":"","&bkarow;":"","&blacklozenge;":"","&blacksquare;":"","&blacktriangle;":"","&blacktriangledown;":"","&blacktriangleleft;":"","&blacktriangleright;":"","&blank;":"","&blk12;":"","&blk14;":"","&blk34;":"","&block;":"","&bne;":"=","&bnequiv;":"","&bnot;":"","&bopf;":"","&bot;":"","&bottom;":"","&bowtie;":"","&boxDL;":"","&boxDR;":"","&boxDl;":"","&boxDr;":"","&boxH;":"","&boxHD;":"","&boxHU;":"","&boxHd;":"","&boxHu;":"","&boxUL;":"","&boxUR;":"","&boxUl;":"","&boxUr;":"","&boxV;":"","&boxVH;":"","&boxVL;":"","&boxVR;":"","&boxVh;":"","&boxVl;":"","&boxVr;":"","&boxbox;":"","&boxdL;":"","&boxdR;":"","&boxdl;":"","&boxdr;":"","&boxh;":"","&boxhD;":"","&boxhU;":"","&boxhd;":"","&boxhu;":"","&boxminus;":"","&boxplus;":"","&boxtimes;":"","&boxuL;":"","&boxuR;":"","&boxul;":"","&boxur;":"","&boxv;":"","&boxvH;":"","&boxvL;":"","&boxvR;":"","&boxvh;":"","&boxvl;":"","&boxvr;":"","&bprime;":"","&breve;":"","&brvbar":"","&brvbar;":"","&bscr;":"","&bsemi;":"","&bsim;":"","&bsime;":"","&bsol;":"\\","&bsolb;":"","&bsolhsub;":"","&bull;":"","&bullet;":"","&bump;":"","&bumpE;":"","&bumpe;":"","&bumpeq;":"","&cacute;":"","&cap;":"","&capand;":"","&capbrcup;":"","&capcap;":"","&capcup;":"","&capdot;":"","&caps;":"","&caret;":"","&caron;":"","&ccaps;":"","&ccaron;":"","&ccedil":"","&ccedil;":"","&ccirc;":"","&ccups;":"","&ccupssm;":"","&cdot;":"","&cedil":"","&cedil;":"","&cemptyv;":"","&cent":"","&cent;":"","&centerdot;":"","&cfr;":"","&chcy;":"","&check;":"","&checkmark;":"","&chi;":"","&cir;":"","&cirE;":"","&circ;":"","&circeq;":"","&circlearrowleft;":"","&circlearrowright;":"","&circledR;":"","&circledS;":"","&circledast;":"","&circledcirc;":"","&circleddash;":"","&cire;":"","&cirfnint;":"","&cirmid;":"","&cirscir;":"","&clubs;":"","&clubsuit;":"","&colon;":":","&colone;":"","&coloneq;":"","&comma;":",","&commat;":"@","&comp;":"","&compfn;":"","&complement;":"","&complexes;":"","&cong;":"","&congdot;":"","&conint;":"","&copf;":"","&coprod;":"","&copy":"","&copy;":"","&copysr;":"","&crarr;":"","&cross;":"","&cscr;":"","&csub;":"","&csube;":"","&csup;":"","&csupe;":"","&ctdot;":"","&cudarrl;":"","&cudarrr;":"","&cuepr;":"","&cuesc;":"","&cularr;":"","&cularrp;":"","&cup;":"","&cupbrcap;":"","&cupcap;":"","&cupcup;":"","&cupdot;":"","&cupor;":"","&cups;":"","&curarr;":"","&curarrm;":"","&curlyeqprec;":"","&curlyeqsucc;":"","&curlyvee;":"","&curlywedge;":"","&curren":"","&curren;":"","&curvearrowleft;":"","&curvearrowright;":"","&cuvee;":"","&cuwed;":"","&cwconint;":"","&cwint;":"","&cylcty;":"","&dArr;":"","&dHar;":"","&dagger;":"","&daleth;":"","&darr;":"","&dash;":"","&dashv;":"","&dbkarow;":"","&dblac;":"","&dcaron;":"","&dcy;":"","&dd;":"","&ddagger;":"","&ddarr;":"","&ddotseq;":"","&deg":"","&deg;":"","&delta;":"","&demptyv;":"","&dfisht;":"","&dfr;":"","&dharl;":"","&dharr;":"","&diam;":"","&diamond;":"","&diamondsuit;":"","&diams;":"","&die;":"","&digamma;":"","&disin;":"","&div;":"","&divide":"","&divide;":"","&divideontimes;":"","&divonx;":"","&djcy;":"","&dlcorn;":"","&dlcrop;":"","&dollar;":"$","&dopf;":"","&dot;":"","&doteq;":"","&doteqdot;":"","&dotminus;":"","&dotplus;":"","&dotsquare;":"","&doublebarwedge;":"","&downarrow;":"","&downdownarrows;":"","&downharpoonleft;":"","&downharpoonright;":"","&drbkarow;":"","&drcorn;":"","&drcrop;":"","&dscr;":"","&dscy;":"","&dsol;":"","&dstrok;":"","&dtdot;":"","&dtri;":"","&dtrif;":"","&duarr;":"","&duhar;":"","&dwangle;":"","&dzcy;":"","&dzigrarr;":"","&eDDot;":"","&eDot;":"","&eacute":"","&eacute;":"","&easter;":"","&ecaron;":"","&ecir;":"","&ecirc":"","&ecirc;":"","&ecolon;":"","&ecy;":"","&edot;":"","&ee;":"","&efDot;":"","&efr;":"","&eg;":"","&egrave":"","&egrave;":"","&egs;":"","&egsdot;":"","&el;":"","&elinters;":"","&ell;":"","&els;":"","&elsdot;":"","&emacr;":"","&empty;":"","&emptyset;":"","&emptyv;":"","&emsp13;":"","&emsp14;":"","&emsp;":"","&eng;":"","&ensp;":"","&eogon;":"","&eopf;":"","&epar;":"","&eparsl;":"","&eplus;":"","&epsi;":"","&epsilon;":"","&epsiv;":"","&eqcirc;":"","&eqcolon;":"","&eqsim;":"","&eqslantgtr;":"","&eqslantless;":"","&equals;":"=","&equest;":"","&equiv;":"","&equivDD;":"","&eqvparsl;":"","&erDot;":"","&erarr;":"","&escr;":"","&esdot;":"","&esim;":"","&eta;":"","&eth":"","&eth;":"","&euml":"","&euml;":"","&euro;":"","&excl;":"!","&exist;":"","&expectation;":"","&exponentiale;":"","&fallingdotseq;":"","&fcy;":"","&female;":"","&ffilig;":"","&fflig;":"","&ffllig;":"","&ffr;":"","&filig;":"","&fjlig;":"fj","&flat;":"","&fllig;":"","&fltns;":"","&fnof;":"","&fopf;":"","&forall;":"","&fork;":"","&forkv;":"","&fpartint;":"","&frac12":"","&frac12;":"","&frac13;":"","&frac14":"","&frac14;":"","&frac15;":"","&frac16;":"","&frac18;":"","&frac23;":"","&frac25;":"","&frac34":"","&frac34;":"","&frac35;":"","&frac38;":"","&frac45;":"","&frac56;":"","&frac58;":"","&frac78;":"","&frasl;":"","&frown;":"","&fscr;":"","&gE;":"","&gEl;":"","&gacute;":"","&gamma;":"","&gammad;":"","&gap;":"","&gbreve;":"","&gcirc;":"","&gcy;":"","&gdot;":"","&ge;":"","&gel;":"","&geq;":"","&geqq;":"","&geqslant;":"","&ges;":"","&gescc;":"","&gesdot;":"","&gesdoto;":"","&gesdotol;":"","&gesl;":"","&gesles;":"","&gfr;":"","&gg;":"","&ggg;":"","&gimel;":"","&gjcy;":"","&gl;":"","&glE;":"","&gla;":"","&glj;":"","&gnE;":"","&gnap;":"","&gnapprox;":"","&gne;":"","&gneq;":"","&gneqq;":"","&gnsim;":"","&gopf;":"","&grave;":"`","&gscr;":"","&gsim;":"","&gsime;":"","&gsiml;":"","&gt":">","&gt;":">","&gtcc;":"","&gtcir;":"","&gtdot;":"","&gtlPar;":"","&gtquest;":"","&gtrapprox;":"","&gtrarr;":"","&gtrdot;":"","&gtreqless;":"","&gtreqqless;":"","&gtrless;":"","&gtrsim;":"","&gvertneqq;":"","&gvnE;":"","&hArr;":"","&hairsp;":"","&half;":"","&hamilt;":"","&hardcy;":"","&harr;":"","&harrcir;":"","&harrw;":"","&hbar;":"","&hcirc;":"","&hearts;":"","&heartsuit;":"","&hellip;":"","&hercon;":"","&hfr;":"","&hksearow;":"","&hkswarow;":"","&hoarr;":"","&homtht;":"","&hookleftarrow;":"","&hookrightarrow;":"","&hopf;":"","&horbar;":"","&hscr;":"","&hslash;":"","&hstrok;":"","&hybull;":"","&hyphen;":"","&iacute":"","&iacute;":"","&ic;":"","&icirc":"","&icirc;":"","&icy;":"","&iecy;":"","&iexcl":"","&iexcl;":"","&iff;":"","&ifr;":"","&igrave":"","&igrave;":"","&ii;":"","&iiiint;":"","&iiint;":"","&iinfin;":"","&iiota;":"","&ijlig;":"","&imacr;":"","&image;":"","&imagline;":"","&imagpart;":"","&imath;":"","&imof;":"","&imped;":"","&in;":"","&incare;":"","&infin;":"","&infintie;":"","&inodot;":"","&int;":"","&intcal;":"","&integers;":"","&intercal;":"","&intlarhk;":"","&intprod;":"","&iocy;":"","&iogon;":"","&iopf;":"","&iota;":"","&iprod;":"","&iquest":"","&iquest;":"","&iscr;":"","&isin;":"","&isinE;":"","&isindot;":"","&isins;":"","&isinsv;":"","&isinv;":"","&it;":"","&itilde;":"","&iukcy;":"","&iuml":"","&iuml;":"","&jcirc;":"","&jcy;":"","&jfr;":"","&jmath;":"","&jopf;":"","&jscr;":"","&jsercy;":"","&jukcy;":"","&kappa;":"","&kappav;":"","&kcedil;":"","&kcy;":"","&kfr;":"","&kgreen;":"","&khcy;":"","&kjcy;":"","&kopf;":"","&kscr;":"","&lAarr;":"","&lArr;":"","&lAtail;":"","&lBarr;":"","&lE;":"","&lEg;":"","&lHar;":"","&lacute;":"","&laemptyv;":"","&lagran;":"","&lambda;":"","&lang;":"","&langd;":"","&langle;":"","&lap;":"","&laquo":"","&laquo;":"","&larr;":"","&larrb;":"","&larrbfs;":"","&larrfs;":"","&larrhk;":"","&larrlp;":"","&larrpl;":"","&larrsim;":"","&larrtl;":"","&lat;":"","&latail;":"","&late;":"","&lates;":"","&lbarr;":"","&lbbrk;":"","&lbrace;":"{","&lbrack;":"[","&lbrke;":"","&lbrksld;":"","&lbrkslu;":"","&lcaron;":"","&lcedil;":"","&lceil;":"","&lcub;":"{","&lcy;":"","&ldca;":"","&ldquo;":"","&ldquor;":"","&ldrdhar;":"","&ldrushar;":"","&ldsh;":"","&le;":"","&leftarrow;":"","&leftarrowtail;":"","&leftharpoondown;":"","&leftharpoonup;":"","&leftleftarrows;":"","&leftrightarrow;":"","&leftrightarrows;":"","&leftrightharpoons;":"","&leftrightsquigarrow;":"","&leftthreetimes;":"","&leg;":"","&leq;":"","&leqq;":"","&leqslant;":"","&les;":"","&lescc;":"","&lesdot;":"","&lesdoto;":"","&lesdotor;":"","&lesg;":"","&lesges;":"","&lessapprox;":"","&lessdot;":"","&lesseqgtr;":"","&lesseqqgtr;":"","&lessgtr;":"","&lesssim;":"","&lfisht;":"","&lfloor;":"","&lfr;":"","&lg;":"","&lgE;":"","&lhard;":"","&lharu;":"","&lharul;":"","&lhblk;":"","&ljcy;":"","&ll;":"","&llarr;":"","&llcorner;":"","&llhard;":"","&lltri;":"","&lmidot;":"","&lmoust;":"","&lmoustache;":"","&lnE;":"","&lnap;":"","&lnapprox;":"","&lne;":"","&lneq;":"","&lneqq;":"","&lnsim;":"","&loang;":"","&loarr;":"","&lobrk;":"","&longleftarrow;":"","&longleftrightarrow;":"","&longmapsto;":"","&longrightarrow;":"","&looparrowleft;":"","&looparrowright;":"","&lopar;":"","&lopf;":"","&loplus;":"","&lotimes;":"","&lowast;":"","&lowbar;":"_","&loz;":"","&lozenge;":"","&lozf;":"","&lpar;":"(","&lparlt;":"","&lrarr;":"","&lrcorner;":"","&lrhar;":"","&lrhard;":"","&lrm;":"","&lrtri;":"","&lsaquo;":"","&lscr;":"","&lsh;":"","&lsim;":"","&lsime;":"","&lsimg;":"","&lsqb;":"[","&lsquo;":"","&lsquor;":"","&lstrok;":"","&lt":"<","&lt;":"<","&ltcc;":"","&ltcir;":"","&ltdot;":"","&lthree;":"","&ltimes;":"","&ltlarr;":"","&ltquest;":"","&ltrPar;":"","&ltri;":"","&ltrie;":"","&ltrif;":"","&lurdshar;":"","&luruhar;":"","&lvertneqq;":"","&lvnE;":"","&mDDot;":"","&macr":"","&macr;":"","&male;":"","&malt;":"","&maltese;":"","&map;":"","&mapsto;":"","&mapstodown;":"","&mapstoleft;":"","&mapstoup;":"","&marker;":"","&mcomma;":"","&mcy;":"","&mdash;":"","&measuredangle;":"","&mfr;":"","&mho;":"","&micro":"","&micro;":"","&mid;":"","&midast;":"*","&midcir;":"","&middot":"","&middot;":"","&minus;":"","&minusb;":"","&minusd;":"","&minusdu;":"","&mlcp;":"","&mldr;":"","&mnplus;":"","&models;":"","&mopf;":"","&mp;":"","&mscr;":"","&mstpos;":"","&mu;":"","&multimap;":"","&mumap;":"","&nGg;":"","&nGt;":"","&nGtv;":"","&nLeftarrow;":"","&nLeftrightarrow;":"","&nLl;":"","&nLt;":"","&nLtv;":"","&nRightarrow;":"","&nVDash;":"","&nVdash;":"","&nabla;":"","&nacute;":"","&nang;":"","&nap;":"","&napE;":"","&napid;":"","&napos;":"","&napprox;":"","&natur;":"","&natural;":"","&naturals;":"","&nbsp":"","&nbsp;":"","&nbump;":"","&nbumpe;":"","&ncap;":"","&ncaron;":"","&ncedil;":"","&ncong;":"","&ncongdot;":"","&ncup;":"","&ncy;":"","&ndash;":"","&ne;":"","&neArr;":"","&nearhk;":"","&nearr;":"","&nearrow;":"","&nedot;":"","&nequiv;":"","&nesear;":"","&nesim;":"","&nexist;":"","&nexists;":"","&nfr;":"","&ngE;":"","&nge;":"","&ngeq;":"","&ngeqq;":"","&ngeqslant;":"","&nges;":"","&ngsim;":"","&ngt;":"","&ngtr;":"","&nhArr;":"","&nharr;":"","&nhpar;":"","&ni;":"","&nis;":"","&nisd;":"","&niv;":"","&njcy;":"","&nlArr;":"","&nlE;":"","&nlarr;":"","&nldr;":"","&nle;":"","&nleftarrow;":"","&nleftrightarrow;":"","&nleq;":"","&nleqq;":"","&nleqslant;":"","&nles;":"","&nless;":"","&nlsim;":"","&nlt;":"","&nltri;":"","&nltrie;":"","&nmid;":"","&nopf;":"","&not":"","&not;":"","&notin;":"","&notinE;":"","&notindot;":"","&notinva;":"","&notinvb;":"","&notinvc;":"","&notni;":"","&notniva;":"","&notnivb;":"","&notnivc;":"","&npar;":"","&nparallel;":"","&nparsl;":"","&npart;":"","&npolint;":"","&npr;":"","&nprcue;":"","&npre;":"","&nprec;":"","&npreceq;":"","&nrArr;":"","&nrarr;":"","&nrarrc;":"","&nrarrw;":"","&nrightarrow;":"","&nrtri;":"","&nrtrie;":"","&nsc;":"","&nsccue;":"","&nsce;":"","&nscr;":"","&nshortmid;":"","&nshortparallel;":"","&nsim;":"","&nsime;":"","&nsimeq;":"","&nsmid;":"","&nspar;":"","&nsqsube;":"","&nsqsupe;":"","&nsub;":"","&nsubE;":"","&nsube;":"","&nsubset;":"","&nsubseteq;":"","&nsubseteqq;":"","&nsucc;":"","&nsucceq;":"","&nsup;":"","&nsupE;":"","&nsupe;":"","&nsupset;":"","&nsupseteq;":"","&nsupseteqq;":"","&ntgl;":"","&ntilde":"","&ntilde;":"","&ntlg;":"","&ntriangleleft;":"","&ntrianglelefteq;":"","&ntriangleright;":"","&ntrianglerighteq;":"","&nu;":"","&num;":"#","&numero;":"","&numsp;":"","&nvDash;":"","&nvHarr;":"","&nvap;":"","&nvdash;":"","&nvge;":"","&nvgt;":">","&nvinfin;":"","&nvlArr;":"","&nvle;":"","&nvlt;":"<","&nvltrie;":"","&nvrArr;":"","&nvrtrie;":"","&nvsim;":"","&nwArr;":"","&nwarhk;":"","&nwarr;":"","&nwarrow;":"","&nwnear;":"","&oS;":"","&oacute":"","&oacute;":"","&oast;":"","&ocir;":"","&ocirc":"","&ocirc;":"","&ocy;":"","&odash;":"","&odblac;":"","&odiv;":"","&odot;":"","&odsold;":"","&oelig;":"","&ofcir;":"","&ofr;":"","&ogon;":"","&ograve":"","&ograve;":"","&ogt;":"","&ohbar;":"","&ohm;":"","&oint;":"","&olarr;":"","&olcir;":"","&olcross;":"","&oline;":"","&olt;":"","&omacr;":"","&omega;":"","&omicron;":"","&omid;":"","&ominus;":"","&oopf;":"","&opar;":"","&operp;":"","&oplus;":"","&or;":"","&orarr;":"","&ord;":"","&order;":"","&orderof;":"","&ordf":"","&ordf;":"","&ordm":"","&ordm;":"","&origof;":"","&oror;":"","&orslope;":"","&orv;":"","&oscr;":"","&oslash":"","&oslash;":"","&osol;":"","&otilde":"","&otilde;":"","&otimes;":"","&otimesas;":"","&ouml":"","&ouml;":"","&ovbar;":"","&par;":"","&para":"","&para;":"","&parallel;":"","&parsim;":"","&parsl;":"","&part;":"","&pcy;":"","&percnt;":"%","&period;":".","&permil;":"","&perp;":"","&pertenk;":"","&pfr;":"","&phi;":"","&phiv;":"","&phmmat;":"","&phone;":"","&pi;":"","&pitchfork;":"","&piv;":"","&planck;":"","&planckh;":"","&plankv;":"","&plus;":"+","&plusacir;":"","&plusb;":"","&pluscir;":"","&plusdo;":"","&plusdu;":"","&pluse;":"","&plusmn":"","&plusmn;":"","&plussim;":"","&plustwo;":"","&pm;":"","&pointint;":"","&popf;":"","&pound":"","&pound;":"","&pr;":"","&prE;":"","&prap;":"","&prcue;":"","&pre;":"","&prec;":"","&precapprox;":"","&preccurlyeq;":"","&preceq;":"","&precnapprox;":"","&precneqq;":"","&precnsim;":"","&precsim;":"","&prime;":"","&primes;":"","&prnE;":"","&prnap;":"","&prnsim;":"","&prod;":"","&profalar;":"","&profline;":"","&profsurf;":"","&prop;":"","&propto;":"","&prsim;":"","&prurel;":"","&pscr;":"","&psi;":"","&puncsp;":"","&qfr;":"","&qint;":"","&qopf;":"","&qprime;":"","&qscr;":"","&quaternions;":"","&quatint;":"","&quest;":"?","&questeq;":"","&quot":'"',"&quot;":'"',"&rAarr;":"","&rArr;":"","&rAtail;":"","&rBarr;":"","&rHar;":"","&race;":"","&racute;":"","&radic;":"","&raemptyv;":"","&rang;":"","&rangd;":"","&range;":"","&rangle;":"","&raquo":"","&raquo;":"","&rarr;":"","&rarrap;":"","&rarrb;":"","&rarrbfs;":"","&rarrc;":"","&rarrfs;":"","&rarrhk;":"","&rarrlp;":"","&rarrpl;":"","&rarrsim;":"","&rarrtl;":"","&rarrw;":"","&ratail;":"","&ratio;":"","&rationals;":"","&rbarr;":"","&rbbrk;":"","&rbrace;":"}","&rbrack;":"]","&rbrke;":"","&rbrksld;":"","&rbrkslu;":"","&rcaron;":"","&rcedil;":"","&rceil;":"","&rcub;":"}","&rcy;":"","&rdca;":"","&rdldhar;":"","&rdquo;":"","&rdquor;":"","&rdsh;":"","&real;":"","&realine;":"","&realpart;":"","&reals;":"","&rect;":"","&reg":"","&reg;":"","&rfisht;":"","&rfloor;":"","&rfr;":"","&rhard;":"","&rharu;":"","&rharul;":"","&rho;":"","&rhov;":"","&rightarrow;":"","&rightarrowtail;":"","&rightharpoondown;":"","&rightharpoonup;":"","&rightleftarrows;":"","&rightleftharpoons;":"","&rightrightarrows;":"","&rightsquigarrow;":"","&rightthreetimes;":"","&ring;":"","&risingdotseq;":"","&rlarr;":"","&rlhar;":"","&rlm;":"","&rmoust;":"","&rmoustache;":"","&rnmid;":"","&roang;":"","&roarr;":"","&robrk;":"","&ropar;":"","&ropf;":"","&roplus;":"","&rotimes;":"","&rpar;":")","&rpargt;":"","&rppolint;":"","&rrarr;":"","&rsaquo;":"","&rscr;":"","&rsh;":"","&rsqb;":"]","&rsquo;":"","&rsquor;":"","&rthree;":"","&rtimes;":"","&rtri;":"","&rtrie;":"","&rtrif;":"","&rtriltri;":"","&ruluhar;":"","&rx;":"","&sacute;":"","&sbquo;":"","&sc;":"","&scE;":"","&scap;":"","&scaron;":"","&sccue;":"","&sce;":"","&scedil;":"","&scirc;":"","&scnE;":"","&scnap;":"","&scnsim;":"","&scpolint;":"","&scsim;":"","&scy;":"","&sdot;":"","&sdotb;":"","&sdote;":"","&seArr;":"","&searhk;":"","&searr;":"","&searrow;":"","&sect":"","&sect;":"","&semi;":";","&seswar;":"","&setminus;":"","&setmn;":"","&sext;":"","&sfr;":"","&sfrown;":"","&sharp;":"","&shchcy;":"","&shcy;":"","&shortmid;":"","&shortparallel;":"","&shy":"","&shy;":"","&sigma;":"","&sigmaf;":"","&sigmav;":"","&sim;":"","&simdot;":"","&sime;":"","&simeq;":"","&simg;":"","&simgE;":"","&siml;":"","&simlE;":"","&simne;":"","&simplus;":"","&simrarr;":"","&slarr;":"","&smallsetminus;":"","&smashp;":"","&smeparsl;":"","&smid;":"","&smile;":"","&smt;":"","&smte;":"","&smtes;":"","&softcy;":"","&sol;":"/","&solb;":"","&solbar;":"","&sopf;":"","&spades;":"","&spadesuit;":"","&spar;":"","&sqcap;":"","&sqcaps;":"","&sqcup;":"","&sqcups;":"","&sqsub;":"","&sqsube;":"","&sqsubset;":"","&sqsubseteq;":"","&sqsup;":"","&sqsupe;":"","&sqsupset;":"","&sqsupseteq;":"","&squ;":"","&square;":"","&squarf;":"","&squf;":"","&srarr;":"","&sscr;":"","&ssetmn;":"","&ssmile;":"","&sstarf;":"","&star;":"","&starf;":"","&straightepsilon;":"","&straightphi;":"","&strns;":"","&sub;":"","&subE;":"","&subdot;":"","&sube;":"","&subedot;":"","&submult;":"","&subnE;":"","&subne;":"","&subplus;":"","&subrarr;":"","&subset;":"","&subseteq;":"","&subseteqq;":"","&subsetneq;":"","&subsetneqq;":"","&subsim;":"","&subsub;":"","&subsup;":"","&succ;":"","&succapprox;":"","&succcurlyeq;":"","&succeq;":"","&succnapprox;":"","&succneqq;":"","&succnsim;":"","&succsim;":"","&sum;":"","&sung;":"","&sup1":"","&sup1;":"","&sup2":"","&sup2;":"","&sup3":"","&sup3;":"","&sup;":"","&supE;":"","&supdot;":"","&supdsub;":"","&supe;":"","&supedot;":"","&suphsol;":"","&suphsub;":"","&suplarr;":"","&supmult;":"","&supnE;":"","&supne;":"","&supplus;":"","&supset;":"","&supseteq;":"","&supseteqq;":"","&supsetneq;":"","&supsetneqq;":"","&supsim;":"","&supsub;":"","&supsup;":"","&swArr;":"","&swarhk;":"","&swarr;":"","&swarrow;":"","&swnwar;":"","&szlig":"","&szlig;":"","&target;":"","&tau;":"","&tbrk;":"","&tcaron;":"","&tcedil;":"","&tcy;":"","&tdot;":"","&telrec;":"","&tfr;":"","&there4;":"","&therefore;":"","&theta;":"","&thetasym;":"","&thetav;":"","&thickapprox;":"","&thicksim;":"","&thinsp;":"","&thkap;":"","&thksim;":"","&thorn":"","&thorn;":"","&tilde;":"","&times":"","&times;":"","&timesb;":"","&timesbar;":"","&timesd;":"","&tint;":"","&toea;":"","&top;":"","&topbot;":"","&topcir;":"","&topf;":"","&topfork;":"","&tosa;":"","&tprime;":"","&trade;":"","&triangle;":"","&triangledown;":"","&triangleleft;":"","&trianglelefteq;":"","&triangleq;":"","&triangleright;":"","&trianglerighteq;":"","&tridot;":"","&trie;":"","&triminus;":"","&triplus;":"","&trisb;":"","&tritime;":"","&trpezium;":"","&tscr;":"","&tscy;":"","&tshcy;":"","&tstrok;":"","&twixt;":"","&twoheadleftarrow;":"","&twoheadrightarrow;":"","&uArr;":"","&uHar;":"","&uacute":"","&uacute;":"","&uarr;":"","&ubrcy;":"","&ubreve;":"","&ucirc":"","&ucirc;":"","&ucy;":"","&udarr;":"","&udblac;":"","&udhar;":"","&ufisht;":"","&ufr;":"","&ugrave":"","&ugrave;":"","&uharl;":"","&uharr;":"","&uhblk;":"","&ulcorn;":"","&ulcorner;":"","&ulcrop;":"","&ultri;":"","&umacr;":"","&uml":"","&uml;":"","&uogon;":"","&uopf;":"","&uparrow;":"","&updownarrow;":"","&upharpoonleft;":"","&upharpoonright;":"","&uplus;":"","&upsi;":"","&upsih;":"","&upsilon;":"","&upuparrows;":"","&urcorn;":"","&urcorner;":"","&urcrop;":"","&uring;":"","&urtri;":"","&uscr;":"","&utdot;":"","&utilde;":"","&utri;":"","&utrif;":"","&uuarr;":"","&uuml":"","&uuml;":"","&uwangle;":"","&vArr;":"","&vBar;":"","&vBarv;":"","&vDash;":"","&vangrt;":"","&varepsilon;":"","&varkappa;":"","&varnothing;":"","&varphi;":"","&varpi;":"","&varpropto;":"","&varr;":"","&varrho;":"","&varsigma;":"","&varsubsetneq;":"","&varsubsetneqq;":"","&varsupsetneq;":"","&varsupsetneqq;":"","&vartheta;":"","&vartriangleleft;":"","&vartriangleright;":"","&vcy;":"","&vdash;":"","&vee;":"","&veebar;":"","&veeeq;":"","&vellip;":"","&verbar;":"|","&vert;":"|","&vfr;":"","&vltri;":"","&vnsub;":"","&vnsup;":"","&vopf;":"","&vprop;":"","&vrtri;":"","&vscr;":"","&vsubnE;":"","&vsubne;":"","&vsupnE;":"","&vsupne;":"","&vzigzag;":"","&wcirc;":"","&wedbar;":"","&wedge;":"","&wedgeq;":"","&weierp;":"","&wfr;":"","&wopf;":"","&wp;":"","&wr;":"","&wreath;":"","&wscr;":"","&xcap;":"","&xcirc;":"","&xcup;":"","&xdtri;":"","&xfr;":"","&xhArr;":"","&xharr;":"","&xi;":"","&xlArr;":"","&xlarr;":"","&xmap;":"","&xnis;":"","&xodot;":"","&xopf;":"","&xoplus;":"","&xotime;":"","&xrArr;":"","&xrarr;":"","&xscr;":"","&xsqcup;":"","&xuplus;":"","&xutri;":"","&xvee;":"","&xwedge;":"","&yacute":"","&yacute;":"","&yacy;":"","&ycirc;":"","&ycy;":"","&yen":"","&yen;":"","&yfr;":"","&yicy;":"","&yopf;":"","&yscr;":"","&yucy;":"","&yuml":"","&yuml;":"","&zacute;":"","&zcaron;":"","&zcy;":"","&zdot;":"","&zeetrf;":"","&zeta;":"","&zfr;":"","&zhcy;":"","&zigrarr;":"","&zopf;":"","&zscr;":"","&zwj;":"","&zwnj;":""},characters:{:"&AElig;","&":"&amp;",:"&Aacute;",:"&Abreve;",:"&Acirc;",:"&Acy;","":"&Afr;",:"&Agrave;",:"&Alpha;",:"&Amacr;","":"&And;",:"&Aogon;","":"&Aopf;","":"&af;",:"&angst;","":"&Ascr;","":"&coloneq;",:"&Atilde;",:"&Auml;","":"&ssetmn;","":"&Barv;","":"&doublebarwedge;",:"&Bcy;","":"&because;",:"&bernou;",:"&Beta;","":"&Bfr;","":"&Bopf;","":"&breve;","":"&bump;",:"&CHcy;","":"&copy;",:"&Cacute;","":"&Cap;","":"&DD;",:"&Cfr;",:"&Ccaron;",:"&Ccedil;",:"&Ccirc;","":"&Cconint;",:"&Cdot;","":"&cedil;","":"&middot;",:"&Chi;","":"&odot;","":"&ominus;","":"&oplus;","":"&otimes;","":"&cwconint;","":"&rdquor;","":"&rsquor;","":"&Proportion;","":"&Colone;","":"&equiv;","":"&DoubleContourIntegral;","":"&oint;",:"&complexes;","":"&coprod;","":"&awconint;","":"&Cross;","":"&Cscr;","":"&Cup;","":"&asympeq;","":"&DDotrahd;",:"&DJcy;",:"&DScy;",:"&DZcy;","":"&ddagger;","":"&Darr;","":"&DoubleLeftTee;",:"&Dcaron;",:"&Dcy;","":"&nabla;",:"&Delta;","":"&Dfr;","":"&acute;","":"&dot;","":"&dblac;","`":"&grave;","":"&tilde;","":"&diamond;","":"&dd;","":"&Dopf;","":"&uml;","":"&DotDot;","":"&esdot;","":"&dArr;","":"&lArr;","":"&iff;","":"&xlArr;","":"&xhArr;","":"&xrArr;","":"&rArr;","":"&vDash;","":"&uArr;","":"&vArr;","":"&spar;","":"&downarrow;","":"&DownArrowBar;","":"&duarr;","":"&DownBreve;","":"&DownLeftRightVector;","":"&DownLeftTeeVector;","":"&lhard;","":"&DownLeftVectorBar;","":"&DownRightTeeVector;","":"&rightharpoondown;","":"&DownRightVectorBar;","":"&top;","":"&mapstodown;","":"&Dscr;",:"&Dstrok;",:"&ENG;",:"&ETH;",:"&Eacute;",:"&Ecaron;",:"&Ecirc;",:"&Ecy;",:"&Edot;","":"&Efr;",:"&Egrave;","":"&isinv;",:"&Emacr;","":"&EmptySmallSquare;","":"&EmptyVerySmallSquare;",:"&Eogon;","":"&Eopf;",:"&Epsilon;","":"&Equal;","":"&esim;","":"&rlhar;",:"&expectation;","":"&Esim;",:"&Eta;",:"&Euml;","":"&exist;","":"&exponentiale;",:"&Fcy;","":"&Ffr;","":"&FilledSmallSquare;","":"&squf;","":"&Fopf;","":"&forall;",:"&Fscr;",:"&GJcy;",">":"&gt;",:"&Gamma;",:"&Gammad;",:"&Gbreve;",:"&Gcedil;",:"&Gcirc;",:"&Gcy;",:"&Gdot;","":"&Gfr;","":"&ggg;","":"&Gopf;","":"&geq;","":"&gtreqless;","":"&geqq;","":"&GreaterGreater;","":"&gtrless;","":"&ges;","":"&gtrsim;","":"&Gscr;","":"&gg;",:"&HARDcy;","":"&caron;","^":"&Hat;",:"&Hcirc;",:"&Poincareplane;",:"&hamilt;",:"&quaternions;","":"&boxh;",:"&Hstrok;","":"&bumpeq;",:"&IEcy;",:"&IJlig;",:"&IOcy;",:"&Iacute;",:"&Icirc;",:"&Icy;",:"&Idot;",:"&imagpart;",:"&Igrave;",:"&Imacr;","":"&ii;","":"&Int;","":"&int;","":"&xcap;","":"&ic;","":"&it;",:"&Iogon;","":"&Iopf;",:"&Iota;",:"&imagline;",:"&Itilde;",:"&Iukcy;",:"&Iuml;",:"&Jcirc;",:"&Jcy;","":"&Jfr;","":"&Jopf;","":"&Jscr;",:"&Jsercy;",:"&Jukcy;",:"&KHcy;",:"&KJcy;",:"&Kappa;",:"&Kcedil;",:"&Kcy;","":"&Kfr;","":"&Kopf;","":"&Kscr;",:"&LJcy;","<":"&lt;",:"&Lacute;",:"&Lambda;","":"&Lang;",:"&lagran;","":"&twoheadleftarrow;",:"&Lcaron;",:"&Lcedil;",:"&Lcy;","":"&langle;","":"&slarr;","":"&larrb;","":"&lrarr;","":"&lceil;","":"&lobrk;","":"&LeftDownTeeVector;","":"&downharpoonleft;","":"&LeftDownVectorBar;","":"&lfloor;","":"&leftrightarrow;","":"&LeftRightVector;","":"&dashv;","":"&mapstoleft;","":"&LeftTeeVector;","":"&vltri;","":"&LeftTriangleBar;","":"&trianglelefteq;","":"&LeftUpDownVector;","":"&LeftUpTeeVector;","":"&upharpoonleft;","":"&LeftUpVectorBar;","":"&lharu;","":"&LeftVectorBar;","":"&lesseqgtr;","":"&leqq;","":"&lg;","":"&LessLess;","":"&les;","":"&lsim;","":"&Lfr;","":"&Ll;","":"&lAarr;",:"&Lmidot;","":"&xlarr;","":"&xharr;","":"&xrarr;","":"&Lopf;","":"&swarrow;","":"&searrow;","":"&lsh;",:"&Lstrok;","":"&ll;","":"&Map;",:"&Mcy;","":"&MediumSpace;",:"&phmmat;","":"&Mfr;","":"&mp;","":"&Mopf;",:"&Mu;",:"&NJcy;",:"&Nacute;",:"&Ncaron;",:"&Ncedil;",:"&Ncy;","":"&ZeroWidthSpace;","\n":"&NewLine;","":"&Nfr;","":"&NoBreak;","":"&nbsp;",:"&naturals;","":"&Not;","":"&nequiv;","":"&NotCupCap;","":"&nspar;","":"&notinva;","":"&ne;","":"&nesim;","":"&nexists;","":"&ngtr;","":"&ngeq;","":"&ngeqq;","":"&nGtv;","":"&ntgl;","":"&nges;","":"&ngsim;","":"&nbump;","":"&nbumpe;","":"&ntriangleleft;","":"&NotLeftTriangleBar;","":"&ntrianglelefteq;","":"&nlt;","":"&nleq;","":"&ntlg;","":"&nLtv;","":"&nles;","":"&nlsim;","":"&NotNestedGreaterGreater;","":"&NotNestedLessLess;","":"&nprec;","":"&npreceq;","":"&nprcue;","":"&notniva;","":"&ntriangleright;","":"&NotRightTriangleBar;","":"&ntrianglerighteq;","":"&NotSquareSubset;","":"&nsqsube;","":"&NotSquareSuperset;","":"&nsqsupe;","":"&vnsub;","":"&nsubseteq;","":"&nsucc;","":"&nsucceq;","":"&nsccue;","":"&NotSucceedsTilde;","":"&vnsup;","":"&nsupseteq;","":"&nsim;","":"&nsimeq;","":"&ncong;","":"&napprox;","":"&nsmid;","":"&Nscr;",:"&Ntilde;",:"&Nu;",:"&OElig;",:"&Oacute;",:"&Ocirc;",:"&Ocy;",:"&Odblac;","":"&Ofr;",:"&Ograve;",:"&Omacr;",:"&ohm;",:"&Omicron;","":"&Oopf;","":"&ldquo;","":"&lsquo;","":"&Or;","":"&Oscr;",:"&Oslash;",:"&Otilde;","":"&Otimes;",:"&Ouml;","":"&oline;","":"&OverBrace;","":"&tbrk;","":"&OverParenthesis;","":"&part;",:"&Pcy;","":"&Pfr;",:"&Phi;",:"&Pi;","":"&pm;",:"&primes;","":"&Pr;","":"&prec;","":"&preceq;","":"&preccurlyeq;","":"&prsim;","":"&Prime;","":"&prod;","":"&vprop;","":"&Pscr;",:"&Psi;",'"':"&quot;","":"&Qfr;",:"&rationals;","":"&Qscr;","":"&drbkarow;","":"&reg;",:"&Racute;","":"&Rang;","":"&twoheadrightarrow;","":"&Rarrtl;",:"&Rcaron;",:"&Rcedil;",:"&Rcy;",:"&realpart;","":"&niv;","":"&lrhar;","":"&duhar;",:"&Rho;","":"&rangle;","":"&srarr;","":"&rarrb;","":"&rlarr;","":"&rceil;","":"&robrk;","":"&RightDownTeeVector;","":"&downharpoonright;","":"&RightDownVectorBar;","":"&rfloor;","":"&vdash;","":"&mapsto;","":"&RightTeeVector;","":"&vrtri;","":"&RightTriangleBar;","":"&trianglerighteq;","":"&RightUpDownVector;","":"&RightUpTeeVector;","":"&upharpoonright;","":"&RightUpVectorBar;","":"&rightharpoonup;","":"&RightVectorBar;",:"&reals;","":"&RoundImplies;","":"&rAarr;",:"&realine;","":"&rsh;","":"&RuleDelayed;",:"&SHCHcy;",:"&SHcy;",:"&SOFTcy;",:"&Sacute;","":"&Sc;",:"&Scaron;",:"&Scedil;",:"&Scirc;",:"&Scy;","":"&Sfr;","":"&uparrow;",:"&Sigma;","":"&compfn;","":"&Sopf;","":"&radic;","":"&square;","":"&sqcap;","":"&sqsubset;","":"&sqsubseteq;","":"&sqsupset;","":"&sqsupseteq;","":"&sqcup;","":"&Sscr;","":"&sstarf;","":"&Subset;","":"&subseteq;","":"&succ;","":"&succeq;","":"&succcurlyeq;","":"&succsim;","":"&sum;","":"&Supset;","":"&supset;","":"&supseteq;",:"&THORN;","":"&trade;",:"&TSHcy;",:"&TScy;","	":"&Tab;",:"&Tau;",:"&Tcaron;",:"&Tcedil;",:"&Tcy;","":"&Tfr;","":"&therefore;",:"&Theta;","":"&ThickSpace;","":"&thinsp;","":"&thksim;","":"&simeq;","":"&cong;","":"&thkap;","":"&Topf;","":"&tdot;","":"&Tscr;",:"&Tstrok;",:"&Uacute;","":"&Uarr;","":"&Uarrocir;",:"&Ubrcy;",:"&Ubreve;",:"&Ucirc;",:"&Ucy;",:"&Udblac;","":"&Ufr;",:"&Ugrave;",:"&Umacr;",_:"&lowbar;","":"&UnderBrace;","":"&bbrk;","":"&UnderParenthesis;","":"&xcup;","":"&uplus;",:"&Uogon;","":"&Uopf;","":"&UpArrowBar;","":"&udarr;","":"&varr;","":"&udhar;","":"&perp;","":"&mapstoup;","":"&nwarrow;","":"&nearrow;",:"&upsih;",:"&Upsilon;",:"&Uring;","":"&Uscr;",:"&Utilde;",:"&Uuml;","":"&VDash;","":"&Vbar;",:"&Vcy;","":"&Vdash;","":"&Vdashl;","":"&xvee;","":"&Vert;","":"&smid;","|":"&vert;","":"&VerticalSeparator;","":"&wreath;","":"&hairsp;","":"&Vfr;","":"&Vopf;","":"&Vscr;","":"&Vvdash;",:"&Wcirc;","":"&xwedge;","":"&Wfr;","":"&Wopf;","":"&Wscr;","":"&Xfr;",:"&Xi;","":"&Xopf;","":"&Xscr;",:"&YAcy;",:"&YIcy;",:"&YUcy;",:"&Yacute;",:"&Ycirc;",:"&Ycy;","":"&Yfr;","":"&Yopf;","":"&Yscr;",:"&Yuml;",:"&ZHcy;",:"&Zacute;",:"&Zcaron;",:"&Zcy;",:"&Zdot;",:"&Zeta;",:"&zeetrf;",:"&integers;","":"&Zscr;",:"&aacute;",:"&abreve;","":"&mstpos;","":"&acE;","":"&acd;",:"&acirc;",:"&acy;",:"&aelig;","":"&afr;",:"&agrave;",:"&aleph;",:"&alpha;",:"&amacr;","":"&amalg;","":"&wedge;","":"&andand;","":"&andd;","":"&andslope;","":"&andv;","":"&angle;","":"&ange;","":"&measuredangle;","":"&angmsdaa;","":"&angmsdab;","":"&angmsdac;","":"&angmsdad;","":"&angmsdae;","":"&angmsdaf;","":"&angmsdag;","":"&angmsdah;","":"&angrt;","":"&angrtvb;","":"&angrtvbd;","":"&angsph;","":"&angzarr;",:"&aogon;","":"&aopf;","":"&apE;","":"&apacir;","":"&approxeq;","":"&apid;","'":"&apos;",:"&aring;","":"&ascr;","*":"&midast;",:"&atilde;",:"&auml;","":"&awint;","":"&bNot;","":"&bcong;","":"&bepsi;","":"&bprime;","":"&bsim;","":"&bsime;","":"&barvee;","":"&barwedge;","":"&bbrktbrk;",:"&bcy;","":"&ldquor;","":"&bemptyv;",:"&beta;",:"&beth;","":"&twixt;","":"&bfr;","":"&xcirc;","":"&xodot;","":"&xoplus;","":"&xotime;","":"&xsqcup;","":"&starf;","":"&xdtri;","":"&xutri;","":"&xuplus;","":"&rbarr;","":"&lozf;","":"&utrif;","":"&dtrif;","":"&ltrif;","":"&rtrif;","":"&blank;","":"&blk12;","":"&blk14;","":"&blk34;","":"&block;","=":"&bne;","":"&bnequiv;","":"&bnot;","":"&bopf;","":"&bowtie;","":"&boxDL;","":"&boxDR;","":"&boxDl;","":"&boxDr;","":"&boxH;","":"&boxHD;","":"&boxHU;","":"&boxHd;","":"&boxHu;","":"&boxUL;","":"&boxUR;","":"&boxUl;","":"&boxUr;","":"&boxV;","":"&boxVH;","":"&boxVL;","":"&boxVR;","":"&boxVh;","":"&boxVl;","":"&boxVr;","":"&boxbox;","":"&boxdL;","":"&boxdR;","":"&boxdl;","":"&boxdr;","":"&boxhD;","":"&boxhU;","":"&boxhd;","":"&boxhu;","":"&minusb;","":"&plusb;","":"&timesb;","":"&boxuL;","":"&boxuR;","":"&boxul;","":"&boxur;","":"&boxv;","":"&boxvH;","":"&boxvL;","":"&boxvR;","":"&boxvh;","":"&boxvl;","":"&boxvr;","":"&brvbar;","":"&bscr;","":"&bsemi;","\\":"&bsol;","":"&bsolb;","":"&bsolhsub;","":"&bullet;","":"&bumpE;",:"&cacute;","":"&cap;","":"&capand;","":"&capbrcup;","":"&capcap;","":"&capcup;","":"&capdot;","":"&caps;","":"&caret;","":"&ccaps;",:"&ccaron;",:"&ccedil;",:"&ccirc;","":"&ccups;","":"&ccupssm;",:"&cdot;","":"&cemptyv;","":"&cent;","":"&cfr;",:"&chcy;","":"&checkmark;",:"&chi;","":"&cir;","":"&cirE;","":"&circ;","":"&cire;","":"&olarr;","":"&orarr;","":"&oS;","":"&oast;","":"&ocir;","":"&odash;","":"&cirfnint;","":"&cirmid;","":"&cirscir;","":"&clubsuit;",":":"&colon;",",":"&comma;","@":"&commat;","":"&complement;","":"&congdot;","":"&copf;","":"&copysr;","":"&crarr;","":"&cross;","":"&cscr;","":"&csub;","":"&csube;","":"&csup;","":"&csupe;","":"&ctdot;","":"&cudarrl;","":"&cudarrr;","":"&curlyeqprec;","":"&curlyeqsucc;","":"&curvearrowleft;","":"&cularrp;","":"&cup;","":"&cupbrcap;","":"&cupcap;","":"&cupcup;","":"&cupdot;","":"&cupor;","":"&cups;","":"&curvearrowright;","":"&curarrm;","":"&cuvee;","":"&cuwed;","":"&curren;","":"&cwint;","":"&cylcty;","":"&dHar;","":"&dagger;",:"&daleth;","":"&hyphen;","":"&rBarr;",:"&dcaron;",:"&dcy;","":"&downdownarrows;","":"&eDDot;","":"&deg;",:"&delta;","":"&demptyv;","":"&dfisht;","":"&dfr;","":"&diams;",:"&gammad;","":"&disin;","":"&divide;","":"&divonx;",:"&djcy;","":"&llcorner;","":"&dlcrop;",$:"&dollar;","":"&dopf;","":"&eDot;","":"&minusd;","":"&plusdo;","":"&sdotb;","":"&lrcorner;","":"&drcrop;","":"&dscr;",:"&dscy;","":"&dsol;",:"&dstrok;","":"&dtdot;","":"&triangledown;","":"&dwangle;",:"&dzcy;","":"&dzigrarr;",:"&eacute;","":"&easter;",:"&ecaron;","":"&eqcirc;",:"&ecirc;","":"&eqcolon;",:"&ecy;",:"&edot;","":"&fallingdotseq;","":"&efr;","":"&eg;",:"&egrave;","":"&eqslantgtr;","":"&egsdot;","":"&el;","":"&elinters;",:"&ell;","":"&eqslantless;","":"&elsdot;",:"&emacr;","":"&varnothing;","":"&emsp13;","":"&emsp14;","":"&emsp;",:"&eng;","":"&ensp;",:"&eogon;","":"&eopf;","":"&epar;","":"&eparsl;","":"&eplus;",:"&epsilon;","":"&varepsilon;","=":"&equals;","":"&questeq;","":"&equivDD;","":"&eqvparsl;","":"&risingdotseq;","":"&erarr;",:"&escr;",:"&eta;",:"&eth;",:"&euml;","":"&euro;","!":"&excl;",:"&fcy;","":"&female;",:"&ffilig;",:"&fflig;",:"&ffllig;","":"&ffr;",:"&filig;",fj:"&fjlig;","":"&flat;",:"&fllig;","":"&fltns;",:"&fnof;","":"&fopf;","":"&pitchfork;","":"&forkv;","":"&fpartint;","":"&half;","":"&frac13;","":"&frac14;","":"&frac15;","":"&frac16;","":"&frac18;","":"&frac23;","":"&frac25;","":"&frac34;","":"&frac35;","":"&frac38;","":"&frac45;","":"&frac56;","":"&frac58;","":"&frac78;","":"&frasl;","":"&sfrown;","":"&fscr;","":"&gtreqqless;",:"&gacute;",:"&gamma;","":"&gtrapprox;",:"&gbreve;",:"&gcirc;",:"&gcy;",:"&gdot;","":"&gescc;","":"&gesdot;","":"&gesdoto;","":"&gesdotol;","":"&gesl;","":"&gesles;","":"&gfr;",:"&gimel;",:"&gjcy;","":"&glE;","":"&gla;","":"&glj;","":"&gneqq;","":"&gnapprox;","":"&gneq;","":"&gnsim;","":"&gopf;",:"&gscr;","":"&gsime;","":"&gsiml;","":"&gtcc;","":"&gtcir;","":"&gtrdot;","":"&gtlPar;","":"&gtquest;","":"&gtrarr;","":"&gvnE;",:"&hardcy;","":"&harrcir;","":"&leftrightsquigarrow;",:"&plankv;",:"&hcirc;","":"&heartsuit;","":"&mldr;","":"&hercon;","":"&hfr;","":"&searhk;","":"&swarhk;","":"&hoarr;","":"&homtht;","":"&larrhk;","":"&rarrhk;","":"&hopf;","":"&horbar;","":"&hscr;",:"&hstrok;","":"&hybull;",:"&iacute;",:"&icirc;",:"&icy;",:"&iecy;","":"&iexcl;","":"&ifr;",:"&igrave;","":"&qint;","":"&tint;","":"&iinfin;","":"&iiota;",:"&ijlig;",:"&imacr;",:"&inodot;","":"&imof;",:"&imped;","":"&incare;","":"&infin;","":"&infintie;","":"&intercal;","":"&intlarhk;","":"&iprod;",:"&iocy;",:"&iogon;","":"&iopf;",:"&iota;","":"&iquest;","":"&iscr;","":"&isinE;","":"&isindot;","":"&isins;","":"&isinsv;",:"&itilde;",:"&iukcy;",:"&iuml;",:"&jcirc;",:"&jcy;","":"&jfr;","":"&jmath;","":"&jopf;","":"&jscr;",:"&jsercy;",:"&jukcy;",:"&kappa;",:"&varkappa;",:"&kcedil;",:"&kcy;","":"&kfr;",:"&kgreen;",:"&khcy;",:"&kjcy;","":"&kopf;","":"&kscr;","":"&lAtail;","":"&lBarr;","":"&lesseqqgtr;","":"&lHar;",:"&lacute;","":"&laemptyv;",:"&lambda;","":"&langd;","":"&lessapprox;","":"&laquo;","":"&larrbfs;","":"&larrfs;","":"&looparrowleft;","":"&larrpl;","":"&larrsim;","":"&leftarrowtail;","":"&lat;","":"&latail;","":"&late;","":"&lates;","":"&lbarr;","":"&lbbrk;","{":"&lcub;","[":"&lsqb;","":"&lbrke;","":"&lbrksld;","":"&lbrkslu;",:"&lcaron;",:"&lcedil;",:"&lcy;","":"&ldca;","":"&ldrdhar;","":"&ldrushar;","":"&ldsh;","":"&leq;","":"&llarr;","":"&lthree;","":"&lescc;","":"&lesdot;","":"&lesdoto;","":"&lesdotor;","":"&lesg;","":"&lesges;","":"&ltdot;","":"&lfisht;","":"&lfr;","":"&lgE;","":"&lharul;","":"&lhblk;",:"&ljcy;","":"&llhard;","":"&lltri;",:"&lmidot;","":"&lmoustache;","":"&lneqq;","":"&lnapprox;","":"&lneq;","":"&lnsim;","":"&loang;","":"&loarr;","":"&xmap;","":"&rarrlp;","":"&lopar;","":"&lopf;","":"&loplus;","":"&lotimes;","":"&lowast;","":"&lozenge;","(":"&lpar;","":"&lparlt;","":"&lrhard;","":"&lrm;","":"&lrtri;","":"&lsaquo;","":"&lscr;","":"&lsime;","":"&lsimg;","":"&sbquo;",:"&lstrok;","":"&ltcc;","":"&ltcir;","":"&ltimes;","":"&ltlarr;","":"&ltquest;","":"&ltrPar;","":"&triangleleft;","":"&lurdshar;","":"&luruhar;","":"&lvnE;","":"&mDDot;","":"&strns;","":"&male;","":"&maltese;","":"&marker;","":"&mcomma;",:"&mcy;","":"&mdash;","":"&mfr;","":"&mho;",:"&micro;","":"&midcir;","":"&minus;","":"&minusdu;","":"&mlcp;","":"&models;","":"&mopf;","":"&mscr;",:"&mu;","":"&mumap;","":"&nGg;","":"&nGt;","":"&nlArr;","":"&nhArr;","":"&nLl;","":"&nLt;","":"&nrArr;","":"&nVDash;","":"&nVdash;",:"&nacute;","":"&nang;","":"&napE;","":"&napid;",:"&napos;","":"&natural;","":"&ncap;",:"&ncaron;",:"&ncedil;","":"&ncongdot;","":"&ncup;",:"&ncy;","":"&ndash;","":"&neArr;","":"&nearhk;","":"&nedot;","":"&toea;","":"&nfr;","":"&nleftrightarrow;","":"&nhpar;","":"&nis;","":"&nisd;",:"&njcy;","":"&nleqq;","":"&nleftarrow;","":"&nldr;","":"&nopf;","":"&not;","":"&notinE;","":"&notindot;","":"&notinvb;","":"&notinvc;","":"&notnivb;","":"&notnivc;","":"&nparsl;","":"&npart;","":"&npolint;","":"&nrightarrow;","":"&nrarrc;","":"&nrarrw;","":"&nscr;","":"&nsub;","":"&nsubseteqq;","":"&nsup;","":"&nsupseteqq;",:"&ntilde;",:"&nu;","#":"&num;","":"&numero;","":"&numsp;","":"&nvDash;","":"&nvHarr;","":"&nvap;","":"&nvdash;","":"&nvge;",">":"&nvgt;","":"&nvinfin;","":"&nvlArr;","":"&nvle;","<":"&nvlt;","":"&nvltrie;","":"&nvrArr;","":"&nvrtrie;","":"&nvsim;","":"&nwArr;","":"&nwarhk;","":"&nwnear;",:"&oacute;",:"&ocirc;",:"&ocy;",:"&odblac;","":"&odiv;","":"&odsold;",:"&oelig;","":"&ofcir;","":"&ofr;","":"&ogon;",:"&ograve;","":"&ogt;","":"&ohbar;","":"&olcir;","":"&olcross;","":"&olt;",:"&omacr;",:"&omega;",:"&omicron;","":"&omid;","":"&oopf;","":"&opar;","":"&operp;","":"&vee;","":"&ord;",:"&oscr;",:"&ordf;",:"&ordm;","":"&origof;","":"&oror;","":"&orslope;","":"&orv;",:"&oslash;","":"&osol;",:"&otilde;","":"&otimesas;",:"&ouml;","":"&ovbar;","":"&para;","":"&parsim;","":"&parsl;",:"&pcy;","%":"&percnt;",".":"&period;","":"&permil;","":"&pertenk;","":"&pfr;",:"&phi;",:"&varphi;","":"&phone;",:"&pi;",:"&varpi;",:"&planckh;","+":"&plus;","":"&plusacir;","":"&pluscir;","":"&plusdu;","":"&pluse;","":"&plussim;","":"&plustwo;","":"&pointint;","":"&popf;","":"&pound;","":"&prE;","":"&precapprox;","":"&prnap;","":"&prnE;","":"&prnsim;","":"&prime;","":"&profalar;","":"&profline;","":"&profsurf;","":"&prurel;","":"&pscr;",:"&psi;","":"&puncsp;","":"&qfr;","":"&qopf;","":"&qprime;","":"&qscr;","":"&quatint;","?":"&quest;","":"&rAtail;","":"&rHar;","":"&race;",:"&racute;","":"&raemptyv;","":"&rangd;","":"&range;","":"&raquo;","":"&rarrap;","":"&rarrbfs;","":"&rarrc;","":"&rarrfs;","":"&rarrpl;","":"&rarrsim;","":"&rightarrowtail;","":"&rightsquigarrow;","":"&ratail;","":"&ratio;","":"&rbbrk;","}":"&rcub;","]":"&rsqb;","":"&rbrke;","":"&rbrksld;","":"&rbrkslu;",:"&rcaron;",:"&rcedil;",:"&rcy;","":"&rdca;","":"&rdldhar;","":"&rdsh;","":"&rect;","":"&rfisht;","":"&rfr;","":"&rharul;",:"&rho;",:"&varrho;","":"&rrarr;","":"&rthree;","":"&ring;","":"&rlm;","":"&rmoustache;","":"&rnmid;","":"&roang;","":"&roarr;","":"&ropar;","":"&ropf;","":"&roplus;","":"&rotimes;",")":"&rpar;","":"&rpargt;","":"&rppolint;","":"&rsaquo;","":"&rscr;","":"&rtimes;","":"&triangleright;","":"&rtriltri;","":"&ruluhar;","":"&rx;",:"&sacute;","":"&scE;","":"&succapprox;",:"&scaron;",:"&scedil;",:"&scirc;","":"&succneqq;","":"&succnapprox;","":"&succnsim;","":"&scpolint;",:"&scy;","":"&sdot;","":"&sdote;","":"&seArr;","":"&sect;",";":"&semi;","":"&tosa;","":"&sext;","":"&sfr;","":"&sharp;",:"&shchcy;",:"&shcy;","":"&shy;",:"&sigma;",:"&varsigma;","":"&simdot;","":"&simg;","":"&simgE;","":"&siml;","":"&simlE;","":"&simne;","":"&simplus;","":"&simrarr;","":"&smashp;","":"&smeparsl;","":"&ssmile;","":"&smt;","":"&smte;","":"&smtes;",:"&softcy;","/":"&sol;","":"&solb;","":"&solbar;","":"&sopf;","":"&spadesuit;","":"&sqcaps;","":"&sqcups;","":"&sscr;","":"&star;","":"&subset;","":"&subseteqq;","":"&subdot;","":"&subedot;","":"&submult;","":"&subsetneqq;","":"&subsetneq;","":"&subplus;","":"&subrarr;","":"&subsim;","":"&subsub;","":"&subsup;","":"&sung;","":"&sup1;","":"&sup2;","":"&sup3;","":"&supseteqq;","":"&supdot;","":"&supdsub;","":"&supedot;","":"&suphsol;","":"&suphsub;","":"&suplarr;","":"&supmult;","":"&supsetneqq;","":"&supsetneq;","":"&supplus;","":"&supsim;","":"&supsub;","":"&supsup;","":"&swArr;","":"&swnwar;",:"&szlig;","":"&target;",:"&tau;",:"&tcaron;",:"&tcedil;",:"&tcy;","":"&telrec;","":"&tfr;",:"&theta;",:"&vartheta;",:"&thorn;","":"&times;","":"&timesbar;","":"&timesd;","":"&topbot;","":"&topcir;","":"&topf;","":"&topfork;","":"&tprime;","":"&utri;","":"&trie;","":"&tridot;","":"&triminus;","":"&triplus;","":"&trisb;","":"&tritime;","":"&trpezium;","":"&tscr;",:"&tscy;",:"&tshcy;",:"&tstrok;","":"&uHar;",:"&uacute;",:"&ubrcy;",:"&ubreve;",:"&ucirc;",:"&ucy;",:"&udblac;","":"&ufisht;","":"&ufr;",:"&ugrave;","":"&uhblk;","":"&ulcorner;","":"&ulcrop;","":"&ultri;",:"&umacr;",:"&uogon;","":"&uopf;",:"&upsilon;","":"&uuarr;","":"&urcorner;","":"&urcrop;",:"&uring;","":"&urtri;","":"&uscr;","":"&utdot;",:"&utilde;",:"&uuml;","":"&uwangle;","":"&vBar;","":"&vBarv;","":"&vangrt;","":"&vsubne;","":"&vsubnE;","":"&vsupne;","":"&vsupnE;",:"&vcy;","":"&veebar;","":"&veeeq;","":"&vellip;","":"&vfr;","":"&vopf;","":"&vscr;","":"&vzigzag;",:"&wcirc;","":"&wedbar;","":"&wedgeq;","":"&wp;","":"&wfr;","":"&wopf;","":"&wscr;","":"&xfr;",:"&xi;","":"&xnis;","":"&xopf;","":"&xscr;",:"&yacute;",:"&yacy;",:"&ycirc;",:"&ycy;","":"&yen;","":"&yfr;",:"&yicy;","":"&yopf;","":"&yscr;",:"&yucy;",:"&yuml;",:"&zacute;",:"&zcaron;",:"&zcy;",:"&zdot;",:"&zeta;","":"&zfr;",:"&zhcy;","":"&zigrarr;","":"&zopf;","":"&zscr;","":"&zwj;","":"&zwnj;"}}};var Lh={};Object.defineProperty(Lh,"__esModule",{value:!0});Lh.numericUnicodeMap={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376};var mo={};Object.defineProperty(mo,"__esModule",{value:!0});mo.fromCodePoint=String.fromCodePoint||function(n){return String.fromCharCode(Math.floor((n-65536)/1024)+55296,(n-65536)%1024+56320)};mo.getCodePoint=String.prototype.codePointAt?function(n,t){return n.codePointAt(t)}:function(n,t){return(n.charCodeAt(t)-55296)*1024+n.charCodeAt(t+1)-56320+65536};mo.highSurrogateFrom=55296;mo.highSurrogateTo=56319;var so=xd&&xd.__assign||function(){return so=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},so.apply(this,arguments)};Object.defineProperty(ru,"__esModule",{value:!0});var ca=ou,g1=Lh,Qv=mo,Ph=so(so({},ca.namedReferences),{all:ca.namedReferences.html5});function tb(n,t,e){t.lastIndex=0;var i=t.exec(n),s;if(i){s="";var r=0;do{r!==i.index&&(s+=n.substring(r,i.index));var o=i[0];s+=e(o),r=i.index+o.length}while(i=t.exec(n));r!==n.length&&(s+=n.substring(r))}else s=n;return s}var m1={specialChars:/[<>'"&]/g,nonAscii:/[<>'"&\u0080-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,nonAsciiPrintable:/[<>'"&\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,nonAsciiPrintableOnly:/[\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,extensive:/[\x01-\x0c\x0e-\x1f\x21-\x2c\x2e-\x2f\x3a-\x40\x5b-\x60\x7b-\x7d\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g},v1={mode:"specialChars",level:"all",numeric:"decimal"};function b1(n,t){var e=t===void 0?v1:t,i=e.mode,s=i===void 0?"specialChars":i,r=e.numeric,o=r===void 0?"decimal":r,a=e.level,l=a===void 0?"all":a;if(!n)return"";var d=m1[s],f=Ph[l].characters,p=o==="hexadecimal";return tb(n,d,function(v){var y=f[v];if(!y){var E=v.length>1?Qv.getCodePoint(v,0):v.charCodeAt(0);y=(p?"&#x"+E.toString(16):"&#"+E)+";"}return y})}ru.encode=b1;var y1={scope:"body",level:"all"},Qu=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);/g,td=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+)[;=]?/g,_p={xml:{strict:Qu,attribute:td,body:ca.bodyRegExps.xml},html4:{strict:Qu,attribute:td,body:ca.bodyRegExps.html4},html5:{strict:Qu,attribute:td,body:ca.bodyRegExps.html5}},x1=so(so({},_p),{all:_p.html5}),eb=String.fromCharCode,_1=eb(65533),E1={level:"all"};function nb(n,t,e,i){var s=n,r=n[n.length-1];if(e&&r==="=")s=n;else if(i&&r!==";")s=n;else{var o=t[n];if(o)s=o;else if(n[0]==="&"&&n[1]==="#"){var a=n[2],l=a=="x"||a=="X"?parseInt(n.substr(3),16):parseInt(n.substr(2));s=l>=1114111?_1:l>65535?Qv.fromCodePoint(l):eb(g1.numericUnicodeMap[l]||l)}}return s}function w1(n,t){var e=(t===void 0?E1:t).level,i=e===void 0?"all":e;return n?nb(n,Ph[i].entities,!1,!1):""}ru.decodeEntity=w1;function S1(n,t){var e=t===void 0?y1:t,i=e.level,s=i===void 0?"all":i,r=e.scope,o=r===void 0?s==="xml"?"strict":"body":r;if(!n)return"";var a=x1[s][o],l=Ph[s].entities,d=o==="attribute",f=o==="strict";return tb(n,a,function(p){return nb(p,l,d,f)})}var Hn=ru.decode=S1;class si{constructor(t){t.A===void 0?(this.valid=!1,this.A=0,this.B=0,this.C=0,this.D=0,this.E=0,this.F=0):(this.A=parseFloat(t.A),this.B=parseFloat(t.B),this.C=parseFloat(t.C),this.D=parseFloat(t.D),this.E=parseFloat(t.E),this.F=parseFloat(t.F),this.valid=!0,this.AEDB=t.A*t.E-t.D*t.B,this.xCorrection=t.B*t.F-t.E*t.C,this.yCorrection=t.D*t.C-t.A*t.F)}getLat(t,e){return this.D*t+this.E*e+this.F}getLon(t,e){return this.A*t+this.B*e+this.C}getX(t,e){return Math.round((this.E*t-this.B*e+this.xCorrection)/this.AEDB)}getY(t,e){return Math.round((-1*this.D*t+this.A*e+this.yCorrection)/this.AEDB)}}class ib{constructor(t){t!==void 0?(this.mapid=t.mapid,this.name=t.name,this.worldfile=new si(t),this.localworldfile=new si({A:t.localA,B:t.localB,C:t.localC,D:t.localD,E:t.localE,F:t.localF}),t.mapfilename===void 0?this.mapfilename=this.mapid+".jpg":this.mapfilename=t.mapfilename):(this.mapid=0,this.name="",this.worldfile=new si(0),this.localworldfile=new si(0)),this.xpx=[],this.ypx=[],this.lat=[],this.lon=[]}}class T1{constructor(t){return this.results=[],this.CSVFormat={},this.separator="",this.valid=!0,this.processResultsCSV(t),{results:this.results,valid:this.valid}}extractResult(t,e,i){let l={};l.chipid=0,l.name=(t[0]+" "+t[1]+" "+t[2]).trim(),l.dbid=l.chipid+"__"+l.name,l.starttime=JT(t[3]),l.club=t[2],l.course=e,l.controls=i;const d=this.extractSpklasseSplits(t);l.splits=d.splits,l.codes=d.codes,l.time=fe(d.totaltime),this.results.push(l)}extractSingleCSVResult(t){let e={};e.valid=!0,e.chipid=t[this.CSVFormat.CHIP_IDX],e.name=(t[this.CSVFormat.FIRST_NAME_IDX]+" "+t[this.CSVFormat.SURNAME_IDX]).trim().replace(/"/g,""),e.dbid=t[this.CSVFormat.DB_IDX],e.starttime=Ii(t[this.CSVFormat.START_TIME_IDX]),e.time=t[this.CSVFormat.TOTAL_TIME_IDX],e.position=this.getPosition(t),e.status=this.getSICSVStatus(t[this.CSVFormat.NC_IDX],t[this.CSVFormat.CLASSIFIER_IDX]),e.club=t[this.CSVFormat.CLUB_IDX].trim().replace(/"/g,""),e.course=t[this.CSVFormat.COURSE_IDX],e.course===""&&(e.valid=!1),e.controls=parseInt(t[this.CSVFormat.NUM_CONTROLS_IDX],10);const i=this.extractSISplits(t,e.controls);return e.splits=i.splits,e.splits!==""&&(e.splits+=";"),e.splits+=Ii(e.time),e.codes=i.codes,e}extractSISplits(t,e){let i=this.CSVFormat.FIRST_SPLIT_IDX,s=this.CSVFormat.FIRST_CODE_IDX,r={};r.splits="",r.codes=[];for(let o=0;o<e;o+=1)t[s]&&(o>0&&(r.splits+=";"),r.codes[o]=t[s],r.splits+=Ii(t[i])),i+=this.CSVFormat.STEP,s+=this.CSVFormat.STEP;return{splits:r.splits,codes:r.codes}}extractSpklasseSplits(t){let i="",s=[],r=0;for(let o=0;o<t.length-4;o+=1)o>0&&(i+=";"),s[o]="X",r+=Ii(t[o+4]),i+=r;return{splits:i,codes:s,totaltime:r}}getCSVFormat(t){const e=["si card","database id","surname","first name","nc","start","time","classifier","city","short","course","course controls","pl","start punch","control1","punch1","control2"];let i=[];const s=t.split(this.separator).map(function(o){return o.toLowerCase()});let r=!1;for(let o=0;o<e.length;o+=1){r=!1;for(let a=0;a<s.length;a+=1){if(s[a]===e[o]){i[o]=a,r=!0;break}if(e[o]==="si card"&&(s[a]==="chipno"||s[a]==="sicard"||s[a]==="database id")){i[o]=a,r=!0;break}if(e[o]==="nc"&&s[a]==="classifier"){i[o]=a,r=!0;break}if(e[o]==="city"&&s[a]==="club"){i[o]=a,r=!0;break}if(e[o]==="pl"&&s[a]==="place"){i[o]=a,r=!0;break}}if(!r)break}r||(i=[1,2,3,4,8,9,11,12,15,18,39,42,43,44,46,47,48]),this.setCSVFormat(i)}getPosition(t){let e=parseInt(t[this.CSVFormat.POSITION_IDX],10);return isNaN(e)&&(e=""),e}getSICSVStatus(t,e){return t==="0"||t===""||t==="N"||t==="n"?e===""||e==="0"?"ok":"nok":"nc"}processCSVResults(t){for(let e=1;e<t.length;e+=1){const i=t[e].split(this.separator);if(i.length>=this.CSVFormat.FIRST_SPLIT_IDX){let s=this.extractSingleCSVResult(i);s.valid&&(delete s.valid,this.results.push(s))}}}processResultsCSV(t){const e=t.split(/[\r\n|\n]+/),i=e[0].split(",").length-1,s=e[0].split(";").length-1;i>s?this.separator=",":this.separator=";",e[0].split(this.separator).length===2?this.processSpklasseCSVResults(e):(this.getCSVFormat(e[0]),this.processCSVResults(e))}processSpklasseCSVResults(t){let s=[],r="",o=0;for(let a=0;a<t.length;a+=1)s=t[a].split(this.separator),s.length===2?(r=s[0],o=parseInt(s[1],10)):this.extractResult(s,r,o)}setCSVFormat(t){this.CSVFormat.CHIP_IDX=t[0],this.CSVFormat.DB_IDX=t[1],this.CSVFormat.SURNAME_IDX=t[2],this.CSVFormat.FIRST_NAME_IDX=t[3],this.CSVFormat.NC_IDX=t[4],this.CSVFormat.START_TIME_IDX=t[5],this.CSVFormat.TOTAL_TIME_IDX=t[6],this.CSVFormat.CLASSIFIER_IDX=t[7],this.CSVFormat.CLUB_IDX=t[8],this.CSVFormat.CLASS_IDX=t[9],this.CSVFormat.COURSE_IDX=t[10],this.CSVFormat.NUM_CONTROLS_IDX=t[11],this.CSVFormat.POSITION_IDX=t[12],this.CSVFormat.START_PUNCH_IDX=t[13],this.CSVFormat.FIRST_CODE_IDX=t[14],this.CSVFormat.FIRST_SPLIT_IDX=t[15],this.CSVFormat.STEP=t[16]-t[14]}}class A1{constructor(t){return this.results=[],this.valid=!0,this.processIOFV2Results(t),{results:this.results,valid:this.valid}}extractIOFV2Results(t,e){for(let i=0;i<t.length;i+=1){e.status=Ld(t[i].getElementsByTagName("CompetitorStatus"),"value",""),e.position=this.getPosition(t[i].getElementsByTagName("ResultPosition")),e.chipid=Nn(t[i].getElementsByTagName("CCardId"),0),e.time=this.getTime(t[i].getElementsByTagName("Time")),e.starttime=this.getStartFinishTimeAsSecs(t[i].getElementsByTagName("StartTime")),e.splits="",e.codes=[];const s=t[i].getElementsByTagName("SplitTime");e.controls=s.length,this.extractIOFV2Splits(s,e);const r=this.getStartFinishTimeAsSecs(t[i].getElementsByTagName("FinishTime"));e.splits+=Math.max(r-e.starttime,0)}}extractIOFV2Splits(t,e){for(let i=0;i<t.length;i+=1){i>0&&(e.splits+=";");const s=t[i].getElementsByTagName("Time");s.length>0?(e.splits+=Ii(s[0].textContent),e.codes[i]=Nn(t[i].getElementsByTagName("ControlCode"),"")):(e.splits+=0,e.codes[i]="")}e.splits+=";"}getDBID(t,e){return t.length===0?e:(t=t[0].textContent.replace(/[\n\r]/g,"").trim(),t||e)}getName(t){return(t.getElementsByTagName("Given")[0].textContent+" "+t.getElementsByTagName("Family")[0].textContent).replace(/[\n\r]/g,"").trim()}getPosition(t){return t.length>0?parseInt(t[0].textContent,10):""}getStartFinishTimeAsSecs(t){if(t.length>0){const e=t[0].getElementsByTagName("Clock")[0].textContent;return Ii(e)}return 0}getTime(t){return t.length>0?t[0].textContent.replace(/[\n\r]/g,""):""}processIOFV2Results(t){try{const e=t.getElementsByTagName("ClassResult");for(let i=0;i<e.length;i+=1){const s=e[i].getElementsByTagName("ClassShortName")[0].textContent,r=e[i].getElementsByTagName("PersonResult");for(let o=0;o<r.length;o+=1){let a={};a.course=s,a.name=this.getName(r[o]),a.dbid=this.getDBID(r[o].getElementsByTagName("PersonId"),o),a.club=Nn(r[o].getElementsByTagName("ShortName"),"");const l=r[o].getElementsByTagName("Result");this.extractIOFV2Results(l,a),a.status!=="DidNotStart"&&this.results.push(a)}}}catch(e){this.valid=!1,yt("XML parse error","Error processing XML file. Error is : "+e.message);return}}}class k1{constructor(t){return this.results=[],this.valid=!0,this.processIOFV3Results(t),{results:this.results,valid:this.valid}}extractIOFV3Results(t,e){for(let i=0;i<t.length;i+=1){e.chipid=Nn(t[i].getElementsByTagName("ControlCard"),0),e.position=Nn(t[i].getElementsByTagName("Position"),""),e.position==="0"&&(e.position=""),e.status=Nn(t[i].getElementsByTagName("Status"),""),e.time=this.getTotalTimeAsSeconds(t[i].getElementsByTagName("Time")),e.starttime=this.getStartFinishTimeAsSeconds(Nn(t[i].getElementsByTagName("StartTime"),0)),e.splits="",e.codes=[];const s=t[i].getElementsByTagName("SplitTime");this.extractIOFV3Splits(s,e);const r=this.getStartFinishTimeAsSeconds(Nn(t[i].getElementsByTagName("FinishTime"),0));r>0?e.splits+=r-e.starttime:e.splits+=0}}extractIOFV3Splits(t,e){let i=[];for(let s=0;s<t.length;s+=1)t[s].attributes.length===0?(e.splits+=Nn(t[s].getElementsByTagName("Time"),0),i.push(Nn(t[s].getElementsByTagName("ControlCode"),"X"+s)),e.splits+=";"):t[s].getAttribute("status")==="Missing"&&(e.splits+="0",i.push(Nn(t[s].getElementsByTagName("ControlCode"),"X"+s)),e.splits+=";");e.codes=i,e.controls=e.codes.length}getClub(t){return t.length>0&&t[0].getElementsByTagName("Name")[0]?t[0].getElementsByTagName("Name")[0].textContent:""}getID(t,e){if(t.length>0){let i=t[0].textContent;return i.replace(/[\n\r]/g,""),i.trim()}return e}getStartFinishTimeAsSeconds(t){return t.length>=19?Ii(t.substr(11,8)):0}getTotalTimeAsSeconds(t){if(t.length>0&&t[0].textContent){const e=parseInt(t[0].textContent,10);return fe(e)}return"00:00"}processIOFV3Results(t){try{const e=t.getElementsByTagName("ClassResult");for(let i=0;i<e.length;i+=1){const r=e[i].getElementsByTagName("Class")[0].getElementsByTagName("Name")[0].textContent,o=e[i].getElementsByTagName("PersonResult");for(let a=0;a<o.length;a+=1){let l={};l.course=r;const d=o[a].getElementsByTagName("Given")[0].textContent+" "+o[a].getElementsByTagName("Family")[0].textContent;l.name=d.replace(/[\n\r]/g,"").trim(),l.dbid=this.getID(o[a].getElementsByTagName("Id"),a),l.club=this.getClub(o[a].getElementsByTagName("Organisation"));const f=o[a].getElementsByTagName("Result");this.extractIOFV3Results(f,l),l.status!=="DidNotStart"&&this.results.push(l)}}}catch(e){this.valid=!1,yt("XML parse error","Error processing XML file. Error is : "+e.message);return}}}class D1{constructor(t,e){this.results=[],this.resultCourses=[],this.valid=!0;const i=this.processResults(t,e);return this.results=i.results,this.valid=i.valid,this.getCoursesFromResults(),{results:this.results,resultCourses:this.resultCourses,valid:this.valid}}getCoursesFromResults(){for(let t=0;t<this.results.length;t+=1){let e=!1;for(let i=0;i<this.resultCourses.length;i+=1)if(this.resultCourses[i].course===this.results[t].course){e=!0;break}e||this.resultCourses.push({course:this.results[t].course,courseid:F.DO_NOT_SAVE_COURSE})}}processResults(t,e){switch(e){case"CSV":return new T1(t.target.result);case"XML":return this.processResultsXML(t.target.result);default:return yt("File type error","Results file type is not recognised. Please select a valid file."),{results:[],valid:!1}}}processResultsXML(t){let e="",i;try{if(i=new DOMParser().parseFromString(t,"text/xml"),i.getElementsByTagName("ResultList").length===0)return yt("XML file error","File is not a valid XML results file. ResultList element missing."),{results:[],valid:!1};e=Ld(i.getElementsByTagName("IOFVersion"),"version",""),e===""&&(e=Ld(i.getElementsByTagName("ResultList"),"iofVersion",""))}catch{return yt("XML file error","File is not a valid XML results file."),{results:[],valid:!1}}switch(e){case"2.0.3":return new A1(i);case"3.0":return new k1(i);default:return yt("XML file error","Invalid IOF file format. Version "+e+" not supported."),{results:[],valid:!1}}}}class C1{constructor(t){this.x="",this.y=t,this.name=null,this.password=null}setDetails(t,e){const i=/...../;this.name=document.getElementById(t).value;const s=i.test(this.name);this.password=document.getElementById(e).value;const r=i.test(this.password);return s&&r}alterString(t,e){let i="";for(let s=0;s<t.length;s+=1)i+=t.charAt(s)+e.charAt(s);return i}encodeUser(){return{x:this.alterString(this.name+this.password,this.y),y:this.y}}}let Mn=null,Ze=new ib,Rh=new p1,Fi=null,jr=null,ua=!1,Xa=!0,kt=null,Vt=[],kn=[],au=!1,qn=!1,Sc=!1,Ga=!1,vo=!1,$n={},ie=[],ss=[],cn=[],rc,Tc,Nh="";const Rd=["UTF-8","ISO-8859-1","windows-1251"];let oc=[],Ur=0,Nd=!1,Ka=!1,Bh=!1,Re={x:null,y:null},ri=[],Be={height:0,width:0},Js=new si(0),sb=new si(0),da=null,Oi=[],Fh=null,lu=null;const rb="e.g. 1|1|6,60|15,60";function I1(n,t){let e;kt.controls.length===0?e="S"+(kt.controls.length+1):e="X"+(kt.controls.length+1),kt.addControl(e,n,t),kt.displayAllControls(),$n.codes.push(e),$n.x.push(n),$n.y.push(t)}function O1(n,t,e){if(Ka||e===F.RIGHT_CLICK)D.translate(t.x-n.x,t.y-n.y);else if(Ga=!0,Re.x!==null){const i=(t.x-Re.x)/(n.x-Re.x),s=(t.y-Re.y)/(n.y-Re.y);if(isFinite(i)&&isFinite(s))for(let r=0;r<kt.controls.length;r+=1){const o=kt.controls[r].oldX-Re.x,a=kt.controls[r].oldY-Re.y;kt.controls[r].x=o*i+Re.x,kt.controls[r].y=a*s+Re.y}}else{const i=t.x-n.x,s=t.y-n.y;for(let r=0;r<kt.controls.length;r+=1)kt.controls[r].x=kt.controls[r].oldX+i,kt.controls[r].y=kt.controls[r].oldY+s}}function M1(n){const t=HA(n.target.result);if(t===0||Nd){CA(n);return}if(oc[Ur]=t,Ur+=1,Ur===Rd.length){let e=99999;for(let i=0;i<Rd.length;i+=1)e>oc[i]&&(Ur=i,e=oc[i]);Nd=!0}pb()}function L1(){let n={};n.body="Are you sure you want to add this map?",n.title="Confirm new map",n.classes="rg2-confirm-add-map-dialog",n.doText="Add map",n.onDo=Y1,gi(n)}function P1(n){n.preventDefault();const t=YA();if(t!=="OK"){yt("Event set-up incomplete",t+" Please enter all necessary information and make sure controls are aligned before creating the event.");return}let e={};e.body="Are you sure you want to create this event?",e.title="Confirm event creation",e.classes="rg2-confirm-create-event-dialog",e.doText="Create event",e.onDo=H1,gi(e)}function R1(){let n={};n.body="This event will be deleted. Are you sure?",n.title="Confirm event delete",n.classes="rg2-confirm-delete-event-dialog",n.doText="Delete event",n.onDo=z1,gi(n)}function N1(){let n={};n.body="This route will be permanently deleted. Are you sure?",n.title="Confirm route delete",n.classes="rg2-confirm-route-delete-dialog",n.doText="Delete route",n.onDo=q1,gi(n)}function B1(){const n=document.querySelectorAll(".unused-map input[type=checkbox]:checked");let t=[];for(let i of n){i.checked&&t.push(parseInt(i.dataset.mapId,10));for(let s=0;s<Oi.length;s+=1)t.indexOf(Oi[s].mapid)>-1?Oi[s].delete=!0:Oi[s].delete=!1}if(t.length===0){yt("Warning","No maps selected.");return}const e={};e.body="Selected maps will be deleted. Are you sure?",e.title="Confirm map deletion",e.doText="Delete maps",e.onDo=j1,gi(e)}function F1(){let n={};n.body=`Are you sure you want to update ${document.getElementById("rg2-edit-event-name").value}?`,n.title="Confirm event update",n.doText="Update event",n.onDo=W1,gi(n)}function ob(n){try{const t=Rh.getGeorefSystem(n);if(Be=vs(),!Js.valid||Be.width===0||t.name==="none")throw"Do not georeference";Tl.defs(t.name,t.params);const e=new Tl.Proj(t.name),i=new Tl.Proj("EPSG:4326"),s=[0,Be.width,Be.width,0],r=[0,Be.height,0,Be.height];let o=[],a=[];for(let f=0;f<4;f+=1)o[f]=Js.getLon(s[f],r[f]),a[f]=Js.getLat(s[f],r[f]);Ze.xpx.length=0,Ze.ypx.length=0,Ze.lat.length=0,Ze.lon.length=0;let l=[];for(let f=0;f<4;f+=1){let p={};p.x=o[f],p.y=a[f],l.push(p);const v=Tl(e,i,l[f]);Ze.xpx.push(s[f]),Ze.ypx.push(r[f]),Ze.lat.push(v.y),Ze.lon.push(v.x)}let d={};d.C=l[0].x,d.F=l[0].y,d.A=(l[2].x-d.C)/s[2],d.B=(l[3].x-d.C)/r[3],d.D=(l[2].y-d.F)/s[2],d.E=(l[3].y-d.F)/r[3],Ze.worldfile=new si(d),Sp()}catch{Ze.worldfile=new si(0),Sp();return}}function ab(){for(let n=0;n<kt.controls.length;n+=1)kt.controls[n].oldX=kt.controls[n].x,kt.controls[n].oldY=kt.controls[n].y}function $1(n,t){let e=-1;for(let s=0;s<Vt.length;s+=1)if(Vt[s].name===n){e=s;break}if(e===-1&&kn.length>0){for(let s=0;s<kn.length;s+=1)if(kn[s].className===n){for(let r=0;r<Vt.length;r+=1)if(Vt[r].name===kn[s].course){e=r;break}break}}let i=`<select id='rg2-alloc-${t}' class="form-control form-control-sm">`;i+=`<option value="${F.DO_NOT_SAVE_COURSE}"${e===-1?" selected":""}>Do not save</option>`;for(let s=0;s<Vt.length;s+=1)i+=`<option value="${s}"${e===s?" selected":""}>${ub(Vt[s].name)}</option>`;return i+="</select >",i}function $h(){if(!Xa){cn.length=0;for(let n=0;n<Vt.length;n+=1)cn.push({courseid:Vt[n].courseid,course:Vt[n].name})}}function cu(){let n="";if(Vt.length&&cn.length){n='<div class="fw-bold">Results</div><div class="fw-bold">Course</div>';for(let t=0;t<cn.length;t+=1)n+=`<div>${cn[t].course}</div>`,n+=`<div>${$1(cn[t].course,t)}</div>`;document.getElementById("rg2-course-allocations").innerHTML=n}}function lb(n,t){let e={};e.body=t,e.title=n,e.doText="Ok",e.onDo=()=>{},gi(e,!1)}function cb(n){let t="<div class='title'>ID</div><div class='title'>Name</div><div><i class='bi-trash'></i></div>";if(n.length===0)t+="<div></div><div>None found.</div><div></div>",document.getElementById("btn-delete-unused-maps").setAttribute("disabled","");else{for(let e=0;e<n.length;e+=1)t+="<div>"+n[e].mapid+"</div>",t+="<div>"+n[e].name+"</div>",t+="<div class='unused-map'><input type='checkbox' data-map-id="+n[e].mapid+"></div>";document.getElementById("btn-delete-unused-maps").removeAttribute("disabled")}document.getElementById("rg2-unused-maps").innerHTML=t}function V1(){const n={type:"addmap"};Ze.localworldfile=Js;const t={...Ze,...Mn.encodeUser()};pi(JSON.stringify(t),n,gA,"Map save failed",_s)}function H1(){const n={...tA(),...Mn.encodeUser()},t={type:"createevent"};pi(JSON.stringify(n),t,dA,"Event creation failed",_s)}function z1(){const t={type:"deleteevent",id:document.getElementById("rg2-edit-event-selected").value};pi(JSON.stringify(Mn.encodeUser()),t,hA,"Event deletion failed",_s)}function q1(){const n=document.getElementById("rg2-edit-event-selected").value,t=document.getElementById("rg2-route-selected").value,e={type:"deleteroute",id:n,routeid:t};pi(JSON.stringify(Mn.encodeUser()),e,bA,"Route delete failed",_s)}function j1(){let n=Mn.encodeUser();n.maps=Oi.filter(e=>e.delete===!0).map(e=>e.mapid);const t={type:"deleteunusedmaps"};pi(JSON.stringify(n),t,yA,"Map deletion failed",_s)}function Vh(){eu({type:"maps"},vA,"Events request failed")}function U1(){const n={type:"login"};pi(JSON.stringify(Mn.encodeUser()),n,pA,"Login failed",_s)}function W1(){const n=document.getElementById("rg2-edit-event-selected").value;let t=Mn.encodeUser();t.comments=document.getElementById("rg2-edit-event-comments").value,t.locked=document.getElementById("chk-edit-read-only").checked,t.name=document.getElementById("rg2-edit-event-name").value,t.type=document.getElementById("rg2-edit-event-level").value,t.eventdate=lu.getDate("yyyy-mm-dd"),t.club=document.getElementById("rg2-edit-club-name").value;let e=document.getElementById("rg2-edit-exclude").value.trim();e===rb&&(e=""),t.exclude=e;const i={type:"editevent",id:n};pi(JSON.stringify(t),i,fA,"Event update failed",_s)}function Y1(){const n=Mn.encodeUser();let t=new FormData;t.append(rc.name,rc),t.append("name",rc.name),t.append("x",n.x),t.append("y",n.y),pi(t,{type:"uploadmapfile",headers:{"Content-Type":"multipart/form-data"}},mA,"Map upload failed",_s)}function X1(){if(qn&&kt.controls.length>0){kt.drawControls(!0);const n=Ya();Re.x!==null&&(D.lineWidth=n.overprintWidth,D.strokeStyle=F.HANDLE_COLOUR,D.fillStyle=F.HANDLE_COLOUR,D.globalAlpha=1,D.beginPath(),D.arc(Re.x,Re.y,F.HANDLE_DOT_RADIUS,0,2*Math.PI,!1),D.fill(),D.beginPath(),D.arc(Re.x,Re.y,2*F.HANDLE_DOT_RADIUS,0,2*Math.PI,!1),D.stroke())}}function G1(){document.querySelector("#rg2-info-panel-tab-headers li").remove(),document.querySelector("#rg2-manage-login-tab-body").remove(),document.getElementById(F.TAB_CREATE).classList.remove("d-none"),document.getElementById(F.TAB_CREATE).click(),document.getElementById(F.TAB_EDIT).classList.remove("d-none"),document.getElementById(F.TAB_MAP).classList.remove("d-none"),document.getElementById(F.TAB_DELETE_MAP).classList.remove("d-none"),Vh(),PA(),document.getElementById("rg2-select-event-level").innerHTML=Ep(),document.getElementById("rg2-edit-event-level").innerHTML=Ep(),document.getElementById("rg2-georef-type").innerHTML=Rh.getGeorefDropdown(),document.getElementById("rg2-select-map").addEventListener("change",n=>{Fi=parseInt(n.target.value,10),Fi!==F.INVALID_MAP_ID?_f(rg2Config.maps_url+"/"+ri[Fi].mapfilename):(qn=!1,Be.width=0,Be.height=0)}),Fh=new wf(document.getElementById("rg2-select-event-date"),{buttonClass:"btn",autohide:!0,format:"yyyy-mm-dd"}),lu=new wf(document.getElementById("rg2-edit-event-date"),{buttonClass:"btn",autohide:!0,format:"yyyy-mm-dd"}),document.getElementById("rg2-map-name").addEventListener("change",function(){FA()}),document.getElementById("rg2-new-course-name").addEventListener("change",function(){NA()}),document.getElementById("rg2-edit-event-selected").addEventListener("change",n=>{Ja(parseInt(n.target.value,10))}),document.getElementById("rg2-georef-type").addEventListener("change",n=>{BA(parseInt(n.target.value,10))})}function ub(n){let t="";if(kn&&kn.length>0&&au)for(let e=0;e<kn.length;e+=1){const i=kn[e].course;let s="";i===n&&(t!==""&&(t+=", "),s=kn[e].className,s=s.replace(/ /g,""),s=s.replace(/-/g,""),t+=s)}return t!==""?n+": "+t:n}function K1(){if(au)for(let n=0;n<Vt.length;n+=1)Vt[n].name=ub(Vt[n].name)}function J1(){const n=parseInt(document.getElementById("rg2-edit-event-selected").value,10),t=ff(n);document.getElementById("rg2-edit-event-name").value=Hn(t.name),document.getElementById("rg2-edit-club-name").value=Hn(t.club),lu.setDate(t.date),document.getElementById("rg2-edit-event-level").value=t.rawtype,document.getElementById("rg2-edit-event-comments").value=Hn(t.comment),Ra()?document.getElementById("rg2-exclude-info").classList.add("d-none"):(document.getElementById("rg2-edit-exclude").value=t.exclude,document.getElementById("rg2-exclude-info").classList.remove("d-none")),document.getElementById("chk-edit-read-only").checked=t.locked,document.getElementById("rg2-route-selected").innerHTML=cA(t.id)}function Z1(n){document.getElementById("rg2-edit-event-selected").innerHTML=oA(n),ri.length>0&&(db(ri),cb(Oi))}function Q1(){ss.length=0;let n;for(let t=0;t<ie.length;t+=1){let e=ie[t].codes;for(let i=0;i<Vt.length;i+=1)if(Vt[i].courseid===ie[t].courseid){n=Vt[i];break}e.unshift(n.codes[0]),e.push(n.codes[n.codes.length-1]),ie[t].variantid=uA(ie[t].codes,ie[t].courseid)}}function db(n){Oi.length=0;for(let t=0;t<n.length;t+=1)if(!pP(n[t].mapid)){const e={};e.mapid=n[t].mapid,e.name=n[t].name,e.name===""&&(e.name="(None)"),e.delete=!1,Oi.push(e)}}function Hh(){let n=!1;if(qn&&kt.controls.length>0){const t=eA();if(Sc&&(t.maxX<0||t.minX>Be.width||t.minY>Be.height||t.maxY<0?yt("Course file problem","Your course file does not match the map co-ordinates. Please check you have selected the correct file."):n=!0),n)Ka=!0,Ga=!0,document.getElementById("chk-move-map-and-controls").checked=!0;else{let e=.8;for(let i=0;i<kt.controls.length;i+=1)kt.controls[i].x=(kt.controls[i].x-t.minX)*(Be.width/t.xRange)*e+Be.width*(1-e)*.5,kt.controls[i].y=Be.height-(kt.controls[i].y-t.minY)*(Be.height/t.yRange)*e-Be.height*(1-e)*.5}ab(),kt.displayAllControls()}}function tA(){let n=Mn.encodeUser();if(n.name=document.getElementById("rg2-event-name").value,n.mapid=ri[Fi].mapid,n.eventdate=Fh.getDate("yyyy-mm-dd"),n.comments=document.getElementById("rg2-enter-event-comments").value,n.locked=document.getElementById("chk-read-only").checked,n.club=document.getElementById("rg2-select-club-name").value,Xa?ua?n.format=F.FORMAT_SCORE_EVENT:n.format=F.FORMAT_NORMAL:ua?n.format=F.FORMAT_SCORE_EVENT_NO_RESULTS:n.format=F.FORMAT_NORMAL_NO_RESULTS,n.level=document.getElementById("rg2-select-event-level").value,vo&&(Vt.push($n),$h()),RA(),AA(),K1(),LA(),ua&&(Q1(),n.variants=ss.slice(0)),n.courses=Vt.slice(0),Bh?n.results=ie.slice(0).sort($A):n.results=ie.slice(0),n.format===F.FORMAT_NORMAL)for(let t=0;t<n.results.length;t+=1)(n.results[t].splits.match(/;/g)||[]).length===nA(n.courses,n.results[t].courseid)+1&&(n.results[t].splits=n.results[t].splits.substring(0,n.results[t].splits.lastIndexOf(";")));for(let t=0;t<n.results.length;t+=1)delete n.results[t].codes,delete n.results[t].chipid,delete n.results[t].club;return n}function eA(){let n={};n.minX=kt.controls[0].x,n.maxX=kt.controls[0].x,n.minY=kt.controls[0].y,n.maxY=kt.controls[0].y;for(let t=1;t<kt.controls.length;t+=1)n.maxX=Math.max(n.maxX,kt.controls[t].x),n.maxY=Math.max(n.maxY,kt.controls[t].y),n.minX=Math.min(n.minX,kt.controls[t].x),n.minY=Math.min(n.minY,kt.controls[t].y);return n.xRange=n.maxX-n.minX,n.yRange=n.maxY-n.minY,n}function nA(n,t){for(let e=0;e<n.length;e+=1)if(n[e].courseid===t)return n[e].controlcount;return 0}function hb(n){let t={x:0,y:0};for(let e=0;e<kt.controls.length;e+=1)if(kt.controls[e].code===n)return t.x=Math.round(kt.controls[e].x),t.y=Math.round(kt.controls[e].y),t;return t}function iA(n){for(let t=0;t<cn.length;t+=1)if(cn[t].course===n)return cn[t].courseid;return 0}function sA(){let n='<div class="new-courses-table">';if(Vt.length){n+=`<div>${U("Course")}</div><div>${U("Name")}</div><div>${U("Controls")}</div>`;for(let t=0;t<Vt.length;t+=1)n+=`<div>${t+1}</div><div>${Vt[t].name}</div><div>${Vt[t].codes.length-2}</div>`}return n+="</div>",n}function rA(n){for(let t=0;t<Vt.length;t+=1)if(Vt[t].courseid===n)return Vt[t].name;return 0}function oA(n){let t=ps(null,"No event selected",!0);for(let e=n.length-1;e>-1;e-=1)t+=ps(n[e].kartatid,n[e].kartatid+": "+n[e].date+": "+Hn(n[e].name));return t}function Ep(){let n="";const t=["Select level","Training","Local","Regional","National","International"],e=["X","T","L","R","N","I"];for(let i=0;i<t.length;i+=1)n+=ps(e[i],t[i],i===0);return n}function aA(n){let t=ps(F.INVALID_MAP_ID,"Select map",!0);for(let e=n.length-1;e>-1;e-=1)t+=ps(e,n[e].mapid+": "+Hn(n[e].name));return t}function lA(){let n="";if(ie.length){n='<div class="new-results-table">';let t=0,e=null;for(let i=0;i<ie.length;i+=1)ie[i].course!==e&&(e!==null&&(n+=`<div>${t}</div>`,t=0),n+=`<div>${ie[i].course}</div><div>${ie[i].name}</div><div>${ie[i].time}</div>`,e=ie[i].course),t+=1;n+=`<div>${t}</div></div>`}else n="No valid results found.";return n}function cA(n){const t=bk();let e=ps("undefined","Select route");for(let i=0;i<t.length;i+=1)e+=ps(t[i].resultid,t[i].resultid+": "+Hn(t[i].name)+" on "+Hn(t[i].coursename));return e}function uA(n,t){let e=[],i=[],s=0;for(let r=0;r<ss.length;r+=1)if(ss[r].codes.length===n.length){let o=!0;for(let a=0;a<n.length;a+=1)if(ss[r].codes[a]!==n[a]){o=!1;break}if(o){s=r+1;break}}if(s===0){s=ss.length+1;for(let r=0;r<n.length;r+=1){const o=hb(n[r]);e.push(o.x),i.push(o.y)}ss.push({x:e,y:i,id:s,courseid:t,name:"Variant "+s,codes:n})}return s}function dA(n){n.ok?(yt("Event created",document.getElementById("rg2-event-name").value+" has been added with id "+n.newid+"."),window.open(rg2Config.api_url.replace("rg2api.php","")+"#"+n.newid),yo(),Ja()):yt("Save failed",n.status_msg+" Failed to create event. Please try again.")}function hA(n){n.ok?(yt("Event deleted","Event has been deleted."),yo(),Ja(),document.getElementById("rg2-edit-event-selected").replaceChildren()):yt("Delete failed",n.status_msg+". Event delete failed. Please try again.")}function fA(n,t){n.ok?(yt("Event updated","Event "+t+" has been updated."),bu(null),pf(),yo(),Ja()):yt("Update failed",n.status_msg+". Event update failed. Please try again.")}function _s(n){Mn.y=n}function pA(n){n.ok?G1():yt("Login failed","User name or password incorrect. Please try again.")}function gA(n){n.ok?(yt("Map added",n.name+" has been added with id "+n.newid+"."),Vh()):yt("Save failed",n.status_msg+". Failed to save map. Please try again.")}function mA(n){n.ok?V1():yt("Upload failed",n.status_msg+". Failed to upload map. Please try again.")}function vA(n){ri.length=0;for(let t=0;t<n.maps.length;t+=1)ri.push(new ib(n.maps[t]));document.getElementById("rg2-select-map").innerHTML=aA(ri),db(ri),cb(Oi)}function bA(n){n.ok?(yt("Route deleted","Route has been deleted."),bu(null),pf(),yo(),Ja()):yt("Delete failed",n.status_msg+". Delete failed. Please try again.")}function yA(n){n.ok?yt("Maps deleted","Selected maps have been deleted."):yt("Delete failed",n.status_msg+". Delete failed. Please try again."),Vh()}function wp(n){return n===0||n==="0"||n==="0:00"||n==="00:00"}function fb(){kt=new Mh,Fi=F.INVALID_MAP_ID,jr=F.FORMAT_NORMAL,ua=!1,Xa=!0,Vt=[],kn=[],au=!1,qn=!1,Sc=!1,Ga=!1,vo=!1,$n={},ie=[],ss=[],cn=[],Be={height:0,width:0},Tc=void 0,Nh="",Ka=!1,Bh=!1,Re={x:null,y:null}}function xA(){Ur=0,oc=[],Nd=!1}function _A(n){Mn=new C1(n),da=oh.map("rg2-world-file-map"),fb(),EA(),document.getElementById("rg2-manager-login-form").addEventListener("submit",t=>{t.preventDefault(),Mn.setDetails("rg2-user-name","rg2-password")?U1():yt("Login failed","Please enter user name and password of at least five characters")})}function EA(){oh.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(da),document.getElementById("rg2-world-file-map-container").classList.remove("d-none")}function wA(){qn&&kt.controls.length>0&&ab()}function SA(){qn=!0,Fi!==F.INVALID_MAP_ID&&(Js=ri[Fi].localworldfile,sb=ri[Fi].worldfile),Be=vs(),Hh(),wt()}function TA(n,t){if(vo){I1(n,t),Ga=!0;return}qn&&kt.controls.length>0&&(Re.x===null?Re={x:n,y:t}:Re={x:null,y:null})}function AA(){let n=[],t=1;for(let e=0;e<cn.length;e+=1){let i;if(vo)i=0;else{const s=document.getElementById("rg2-alloc-"+e);s&&(i=parseInt(s.value,10))}i!==void 0&&i!==F.DO_NOT_SAVE_COURSE&&(Vt[i].courseid===0?(Vt[i].courseid=t,n.push(Vt[i]),cn[e].courseid=t,t+=1):cn[e].courseid=Vt[i].courseid)}Vt=n}function kA(n){Sc=!1,Ka=!1,document.getElementById("chk-move-map-and-controls").checked=!1,Re={x:null,y:null},kt.deleteAllControls();const t=new f1(n,sb,Js);Vt=t.courses,Vt.length>0&&(kt=t.newcontrols,kn=t.mapping,kn.length>0?document.getElementById("chk-enrich-course-names").classList.remove("d-none"):document.getElementById("chk-enrich-course-names").classList.add("d-none"),Sc=t.georeferenced,lb("Course details",sA()),$h(),cu(),Hh()),wt()}function DA(n){_f(n.target.result,!0),document.getElementById("rg2-load-map-file").classList.add("is-valid"),qn=!0,Be=vs(),Hh(),wt(),document.getElementById("btn-add-map").removeAttribute("disabled")}function CA(n){const t=new D1(n,Nh);ie=t.results,ie.length>0&&(cn=t.resultCourses,lb("Result details",lA()),cu())}function IA(n){let t=new FileReader;t.onerror=function(){yt("Course file error","The selected course file could not be read.")},t.onload=function(e){kA(e)},t.readAsText(n.target.files[0])}function OA(n){const t=new FileReader;try{t.readAsText(n.target.files[0])}catch{yt("File read error","Failed to open selected world file.");return}t.onerror=function(){yt("World file error","The selected world file could not be read.")},t.onload=function(e){const s=e.target.result.split(/[\r\n]+/g);Js=new si({A:s[0],B:s[2],C:s[4],D:s[1],E:s[3],F:s[5]});const r=Rh.getDefaultValue();document.getElementById("rg2-georef-type").value=r,ob(r)}}function MA(n){const t=new FileReader;t.onload=function(i){DA(i)};const e=n.target.files[0].name.substr(-3,3).toUpperCase();e==="JPG"||e==="GIF"?(rc=n.target.files[0],t.readAsDataURL(n.target.files[0])):yt("File type error",n.target.files[0].name+" is not recognised. Only .jpg and .gif files are supported at present.")}function pb(){let n=new FileReader;n.onerror=function(){yt("Results file error","The selected results file could not be read.")},n.onload=function(t){M1(t)},jr=Tc.name.substr(-3,3).toUpperCase(),jr==="XML"||jr==="CSV"?(Nh=jr,n.readAsText(Tc,Rd[Ur])):yt("File type error","Results file type is not recognised. Please select a valid file.")}function LA(){let n=[];for(let t=0;t<ie.length;t+=1){const e=iA(ie[t].course);e!==F.DO_NOT_SAVE_COURSE&&(ie[t].courseid=e,ie[t].course=rA(e),ie[t].variantid="",n.push(ie[t]))}ie=n}function PA(){document.getElementById("btn-create-event").addEventListener("click",e=>{P1(e)}),document.getElementById("btn-update-event").addEventListener("click",e=>{F1()}),document.getElementById("btn-delete-route").addEventListener("click",e=>{N1()}),document.getElementById("btn-delete-event").addEventListener("click",e=>{R1()}),document.getElementById("btn-add-map").addEventListener("click",e=>{L1()}),document.getElementById("btn-delete-unused-maps").addEventListener("click",e=>{B1()}),document.getElementById("btn-draw-courses").addEventListener("click",e=>{VA()}),document.getElementById("rg2-load-georef-file").addEventListener("input",e=>{OA(e)}),document.getElementById("rg2-load-map-file").addEventListener("input",e=>{XA(e.target.files[0]),MA(e)});const n=document.getElementById("rg2-load-results-file");n.addEventListener("click",e=>{qn||(yt("No map loaded","Please load a map file before adding results."),e.preventDefault())}),n.addEventListener("change",e=>{Tc=e.target.files[0],xA(),pb()}),document.getElementById("chk-move-map-and-controls").addEventListener("click",e=>{qA(e.target.checked)}),document.getElementById("chk-no-results").addEventListener("click",e=>{jA(e.target.checked)}),document.getElementById("chk-score-event").addEventListener("click",e=>{UA(e.target.checked)}),document.getElementById("chk-enrich-course-names").addEventListener("click",e=>{zA(e.target.checked)}),document.getElementById("chk-sort-results").addEventListener("click",e=>{WA(e.target.checked)});const t=document.getElementById("rg2-load-course-file");t.addEventListener("click",e=>{qn||(yt("No map loaded","Please load a map file before adding courses."),e.preventDefault())}),t.addEventListener("change",e=>{IA(e)})}function RA(){for(let n=0;n<Vt.length;n+=1)for(let t=0;t<Vt[n].codes.length;t+=1){const e=hb(Vt[n].codes[t]);Vt[n].x[t]=e.x,Vt[n].y[t]=e.y}}function NA(){const n=document.getElementById("rg2-new-course-name").value;n&&($n.name=n)}function Ja(n){n?el(n):(fb(),document.getElementById("rg2-edit-event-name").value="",document.getElementById("rg2-edit-club-name").value="",lu.setDate(""),document.getElementById("rg2-edit-event-level").value="",document.getElementById("rg2-edit-event-comments").value="",document.getElementById("rg2-edit-exclude").value=rb,document.getElementById("rg2-route-selected").replaceChildren(),document.getElementById("chk-edit-read-only").checked=!1,document.getElementById("rg2-course-allocations").innerHTML="")}function BA(n){n!==0&&ob(n)}function FA(){Ze.name=document.getElementById("rg2-map-name").value,t1("rg2-map-name",n=>/./.test(n))}function $A(n,t){return n.courseid!==t.courseid?n.courseid-t.courseid:n.position!==""&&t.position!==""?n.position-t.position:n.position===""&&t.position!==""?1:n.position!==""&&t.position===""?-1:wp(n.time)&&wp(t.time)?n.name-t.name:n.time-t.time}function VA(){qn?(vo=!0,Vt.length=0,kt.deleteAllControls(),$n.name="Course",$n.x=[],$n.y=[],$n.codes=[],$n.courseid=0,document.getElementById("rg2-new-course-name").value,document.getElementById("rg2-draw-courses").classList.remove("d-none")):yt("No map selected","Please load a map before drawing courses")}function HA(n){let t=0;for(let e=0;e<n.length;e+=1)n.charCodeAt(e)===65533&&(t+=1);return t}function zA(n){au=n,cu()}function qA(n){Ka=n}function jA(n){Xa=!n,$h(),cu()}function UA(n){ua=n}function WA(n){Bh=n}function Sp(){const n=Ze.lon,t=Ze.lat;let e=[];[3,1,2,0].forEach(function(r){e.push([t[r],n[r]])});const s=oh.polygon(e,{color:"red"});s.addTo(da),document.getElementById("rg2-world-file-map-container").classList.remove("d-none"),da.invalidateSize(),da.fitBounds(s.getBounds())}function YA(){return document.getElementById("rg2-event-name").value===""?"Event name is not valid.":Fi===F.INVALID_MAP_ID?"No map selected.":document.getElementById("rg2-select-club-name").value===""?"Club name is not valid.":Fh.getDate("yyyy-mm-dd")===void 0?"Date is not valid.":document.getElementById("rg2-select-event-level").value==="X"?"Event level is not valid.":jr?Vt.length===0&&!vo?"No course information. Check your course XML file.":ie.length===0&&Xa?"No results information. Check your results file.":Ga?"OK":"Controls have not been adjusted on the map.":"Event format is not valid."}function XA(n){let t=new FileReader;t.onload=function(e){let i=new Image;i.src=e.target.result,i.onload=function(){const s=Math.round(n.size/1024/1024);if(s>F.FILE_SIZE_WARNING||i.height>F.PIXEL_SIZE_WARNING||i.width>F.PIXEL_SIZE_WARNING){let r="The uploaded map file is "+s+"MB ("+i.width;r+=" x "+i.height+"px). It is recommended that you use maps under "+F.FILE_SIZE_WARNING,r+="MB with a maximum dimension of "+F.PIXEL_SIZE_WARNING+"px. Please see the ",r+="<a href='https://github.com/Maprunner/rg2/wiki/Map-files'>RG2 wiki</a> for ",r+="guidance on how to create map files.",yt("Oversized map upload",r)}}},t.readAsDataURL(n)}class Tp{constructor(t,e,i,s,r){this.resultid=t.resultid,this.rawid=this.resultid%F.GPS_RESULT_OFFSET,this.isScoreEvent=e,this.name=Hn(t.name).trim(),this.initials=this.getInitials(this.name),this.starttime=t.starttime,this.time=t.time,(this.time==="00"||this.time==="0")&&(this.time=""),this.timeInSecs=t.secs,this.position=t.position,this.status=t.status,this.canDelete=!1,this.showResult=!0,this.token=0,t.comments?this.comments=Hn(t.comments):this.comments="",this.coursename=t.coursename,this.coursename===""&&(this.coursename=t.courseid.toString()),this.courseid=t.courseid,this.variant=t.variant,this.splits=this.adjustRawSplits(t.splits),this.isScoreEvent&&(this.scorex=s,this.scorey=r,this.scorecodes=i),this.trackColour=null,this.userColour=null,this.initialiseTrack(t)}addInterpolatedTimes(t,e,i){const s=this.xysecs[t],r=this.xysecs[e]-s,o=i[t],a=i[e]-o;for(let l=t;l<=e;l+=1)this.xysecs[l]=s+Math.round((i[l]-o)*r/a)}addTrack(t){this.trackx=t.x.split(",").map(function(i){return parseInt(i,10)}),this.tracky=t.y.split(",").map(function(i){return parseInt(i,10)});for(let i=1;i<this.trackx.length;i+=1)this.trackx[i]=this.trackx[i-1]+this.trackx[i],this.tracky[i]=this.tracky[i-1]+this.tracky[i];let e;this.isGPSTrack?e=this.expandGPSTrack():this.splits.length===2?e=this.expandTrackWithNoSplits():e=this.expandNormalTrack(),e&&LP(this.courseid)}adjustRawSplits(t){t.splice(0,0,0);for(let e=1;e<t.length;e+=1)t[e]<=0&&(t[e]=t[e-1]);return t[t.length-1]=Math.max(this.timeInSecs,t[t.length-2]),t}calculateTotalTrackLength(){let t=[];t[0]=0;let e=this.trackx[0],i=this.tracky[0];for(let s=1;s<this.trackx.length;s+=1)t[s]=t[s-1]+Math.round($e(this.trackx[s],this.tracky[s],e,i)),e=this.trackx[s],i=this.tracky[s];return t}calculateTrackTimes(t){let e=[];e[0]=0;let i=this.getNextValidControl(0),s=t.x[i],r=t.y[i],o=0,a=this.trackx[0],l=this.tracky[0],d=0,f=0,p=0;for(let v=1;v<this.trackx.length;v+=1)if(d=this.trackx[v],f=this.tracky[v],o+=$e(d,f,a,l),e[v]=Math.round(o),a=d,l=f,s===d&&r===f){if(this.xysecs[v]=this.splits[i],this.addInterpolatedTimes(p,v,e),p=v,i=this.getNextValidControl(i),i===t.x.length){this.hasValidTrack=!0;break}s=t.x[i],r=t.y[i]}}drawScoreCourse(){if(this.displayScoreCourse&&this.scorex.length>1){const t=Ya();D.globalAlpha=F.FULL_INTENSITY;let e=or(this.scorex[0],this.scorey[0],this.scorex[1],this.scorey[1]);Xe.drawStart(this.scorex[0],this.scorey[0],"",e,t),e=[];for(let s=0;s<this.scorex.length-1;s+=1)e[s]=or(this.scorex[s],this.scorey[s],this.scorex[s+1],this.scorey[s+1]);const i={from:0,to:this.scorex.length};xP({x:this.scorex,y:this.scorey},e,this.courseid,t,i);for(let s=1;s<this.scorex.length-1;s+=1)Xe.drawSingleControl(this.scorex[s],this.scorey[s],s,Math.PI*.25,t);Xe.drawFinish(this.scorex[this.scorex.length-1],this.scorey[this.scorey.length-1],"",t)}}drawTrack(t){try{let e,i,s;if(this.displayTrack){this.isGPSTrack&&$t.showGPSSpeed&&this.speedColour.length===0&&this.setSpeedColours();let r=0,o=this.xysecs.length;const a=this.splits[t.filterFrom],l=this.splits[t.filterTo];for(let d=0;d<this.xysecs.length;d+=1)if(this.xysecs[d]>=a){r=d;break}for(let d=this.xysecs.length-1;d>=0;d-=1)if(this.xysecs[d]<=l){o=d;break}D.lineWidth=$t.routeWidth,D.strokeStyle=this.trackColour,D.globalAlpha=$t.perCentRouteIntensity/100,D.fillStyle=this.trackColour,D.font="10pt Arial",D.textAlign="left",D.beginPath(),D.moveTo(this.trackx[r],this.tracky[r]),e=this.trackx[r],i=this.tracky[r],s=0;for(let d=r+1;d<=o;d+=1)D.lineTo(this.trackx[d],this.tracky[d]),this.trackx[d]===e&&this.tracky[d]===i?s+=1:s>0&&((!this.isGPSTrack||this.isGPSTrack&&$t.showThreeSeconds)&&D.fillText("+"+3*s,e+5,i+5),s=0),e=this.trackx[d],i=this.tracky[d],this.isGPSTrack&&$t.showGPSSpeed&&(D.strokeStyle=this.speedColour[d],D.stroke(),D.beginPath(),D.moveTo(e,i));D.stroke()}}catch{return}}expandGPSTrack(){for(let t=0;t<this.trackx.length;t+=1)this.xysecs[t]=3*t;return this.speedColour.length=0,this.hasValidTrack=!0,this.hasValidTrack}expandNormalTrack(){this.xysecs.length=0,this.xysecs[0]=0;let t={};return this.isScoreEvent?(t.x=this.scorex,t.y=this.scorey):t=ci(this.courseid),this.calculateTrackTimes(t),this.isScoreEvent&&(this.hasValidTrack=!0),this.hasValidTrack}expandTrackWithNoSplits(){this.xysecs.length=0;const t=this.splits[1];let e=0;this.xysecs[0]=0;const i={};i.x=ci(this.courseid).x,i.y=ci(this.courseid).y;let s=1,r=i.x[s],o=i.y[s],a=i.x[i.x.length-1],l=i.y[i.y.length-1];this.trackx.push(a),this.tracky.push(l);let d=0;const f=this.calculateTotalTrackLength(),p=f[f.length-1];let v=0,y=0,E=!1;for(let w=1;w<this.trackx.length;w+=1)if(v=this.trackx[w],y=this.tracky[w],(v!==this.trackx[0]||y!==this.tracky[0])&&(E=!0),r===v&&o===y&&E){if(e=parseInt(f[w]/p*t,10),this.xysecs[w]=e,this.splits[s]=e,this.addInterpolatedTimes(d,w,f),d=w,s+=1,s===i.x.length){this.hasValidTrack=!0;break}r=i.x[s],o=i.y[s]}return this.hasValidTrack}getColour(t){let e="#";if(t===0)return"#0080ff";if(t<.5)e+="ff";else{const i=parseInt((1-t)*255*2,10);i<16&&(e+="0"),e+=i.toString(16)}if(t>=.5)e+="ff";else{const i=255-parseInt((.5-t)*255*2,10);i<16&&(e+="0"),e+=i.toString(16)}return e+="00",e}getInitials(t){if(t===null)return"??";t=t.replace(/GPS/g,"*");let e="",i=!0;for(let s=0;s<t.length;s+=1)i&&(e+=t.substr(s,1),i=!1),t.charAt(s)===" "&&(i=!0);return e}getNextValidControl(t){for(let e=t+1;e<this.splits.length;e+=1)if(this.splits[e]!==this.splits[e-1])return e;return this.splits.length}initialiseTrack(t){if(this.legpos=[],this.racepos=[],this.hasValidTrack=!1,this.displayTrack=!1,this.displayScoreCourse=!1,this.trackx=[],this.tracky=[],this.speedColour=[],this.xysecs=[],this.resultid>=F.GPS_RESULT_OFFSET){this.isGPSTrack=!0;const e=yk(this.rawid);this.time=e.time,this.splits=e.splits,this.time===F.TIME_NOT_FOUND&&(this.time=t.time)}else this.isGPSTrack=!1}mapSpeedColours(){const t=16.667/$t.maxSpeed,e=16.667/$t.minSpeed,i=3,s=this.speedColour.slice().sort(function(d,f){return d-f}),r=mu();let o=0,a=0;r!==void 0?(o=i*t/r,a=i*e/r):(o=s[s.length-1],a=s[Math.floor(s.length/95)]);const l=o-a;for(let d=0;d<this.speedColour.length;d+=1){let f=Math.max(this.speedColour[d],a);f=Math.min(f,o),this.speedColour[d]=this.getColour((f-a)/l)}}setSpeedColours(){this.speedColour[0]=0;let t=0;for(let e=1;e<this.trackx.length;e+=1){const i=$e(this.trackx[e],this.tracky[e],this.trackx[e-1],this.tracky[e-1]);this.speedColour[e]=(i+t)/2,t=i}this.mapSpeedColours()}setTrackDisplay(t){this.hasValidTrack&&(t?this.userColour!==null?this.trackColour=this.userColour:this.trackColour=Kv():this.trackColour=null,this.displayTrack=t)}}let P=[];function GA(n,t){P.length=0;let e=[],i=[],s=[];if(t)for(let r=0;r<n.length;r+=1){let o=n[r].variant;e[o]===void 0&&(e[o]=n[r].scorecodes,i[o]=n[r].scorex,s[o]=n[r].scorey)}for(let r=0;r<n.length;r+=1)if(RP(n[r].courseid)){n[r].resultid>F.GPS_RESULT_OFFSET&&n[r].coursename===""&&(n[r].coursename=ci(n[r].courseid).name);let o;if(t){let a=n[r].variant;o=new Tp(n[r],t,e[a],i[a],s[a])}else o=new Tp(n[r],t);P.push(o)}Dk(),kk(),Ok(),xk(),Sk(t)}function KA(n){for(let t=0;t<n.length;t+=1){let e=n[t].id,i=0;for(;i<P.length;){if(e===P[i].resultid){P[i].addTrack(n[t]);break}i+=1}}}function Ap(n){for(let t=0;t<P.length;t+=1)if(P[t].courseid===n&&!n0(t))return!1;return!0}function kp(){for(let n=0;n<P.length;n+=1)if(P[n].hasValidTrack&&!P[n].displayTrack)return!1;return!0}function JA(n){for(let t=0;t<P.length;t+=1)if(P[t].courseid===n&&P[t].hasValidTrack&&!P[t].displayTrack)return!1;return!0}function Dp(n){for(let t=0;t<P.length;t+=1)if(P[t].courseid===n&&P[t].hasValidTrack&&!n0(t))return!1;return!0}function ZA(n){for(let t=0;t<P.length;t+=1)if(P[t].courseid===n&&P[t].hasValidTrack&&P[t].displayTrack)return!0;return!1}function QA(n){const t=ff();let e=0;for(let i=0;i<P.length;i+=1)P[i].courseid===n&&(P[i].resultid<F.GPS_RESULT_OFFSET||t.format===F.FORMAT_NO_RESULTS||t.format===F.FORMAT_SCORE_EVENT_NO_RESULTS)&&(e+=1);return e}function gb(n){let t=document.getElementById("rg2-select-name");if(t.innerHTML="",t.options.add(io(null,U("Select name",""))),n!==void 0){for(let e=0;e<P.length;e+=1)P[e].courseid===n&&P[e].resultid<F.GPS_RESULT_OFFSET&&t.options.add(io(P[e].resultid,P[e].time+" "+P[e].name));t.addEventListener("change",e=>{GL(parseInt(e.target.value,10))}),t.removeAttribute("disabled")}}function tk(){let n=ik();n=n.replace(/&amp;/g,"&");const t=document.getElementById("rg2-result-table");t.innerHTML=n,Ik(),bb(),bL();const e=document.querySelectorAll(".resultrow");for(let i of e)i.addEventListener("dblclick",s=>{const r=parseInt(s.currentTarget.dataset.id,10);r&&cm(r)}),i.addEventListener("contextmenu",s=>{const r=parseInt(s.currentTarget.dataset.id,10);r&&cm(r)})}function ek(){P.length=0}function nk(n,t){P[n].displayScoreCourse=t}function Cp(){for(let n=0;n<P.length;n+=1){let t;P[n].isScoreEvent?t={from:0,to:P[n].scorex.length}:t=OP(P[n].courseid),P[n].drawTrack(t),P[n].drawScoreCourse()}}function ik(){let n=[],t=[];if(P.length===0)return`<p>${U("No results available")}</p>`;let e="",i=0,s=0;_k();for(let r=0;r<P.length;r+=1){const o=P[r];if(!o.showResult)continue;o.courseid!==i&&(n.length>0&&(e+=Ip(s,i)+"</table>",t.push(e)),s=0,n.push(hk(o)),e=`<table class='resulttable' id='table-${o.courseid}'><thead><tr><th>#</th>`,e+=`<th>${U("Name")}</th><th>${U("Time")}</th>`,e+=`<th><i class='bi-pencil'></i></th><th><i class='bi-play-fill'></i></th></tr></thead><tbody class="table-group-divider">`,i=o.courseid),e+=`<tr class="resultrow" data-id="${o.rawid}"><td>${o.position}</td>`,o.comments!==""&&o.comments!==U("Type your comment")?(o.comments=o.comments.replace(/"/g,"&quot;"),e+=`<td title="${o.comments}"><u>${Op(o,r)}</u>`):e+=`<td>${Op(o,r)}`,o.canDelete&&(e+=` <i class='deleteroute bi-trash-fill' data-resultidx=${r}></i>`),e+=`</td><td>${o.time}</td>`;let a="",l="showreplay";o.hasValidTrack&&(s+=1,a=`<input class='showtrack' data-courseid='${i}' data-id='${o.resultid}' type=checkbox name=result></input>`,l+=" showtrackreplay"),e+=`<td>${a}</td>`,e+=`<td><input class="${l}" data-courseid=${i} data-id=${o.resultid} type=checkbox name=replay></input></td></tr>`}e+=`</tbody>${Ip(s,i)}</table>`,t.push(e),e='<div class="accordion" id="results-accordion">';for(let r=0;r<t.length;r+=1)e+='<div class="accordion-item">',e+=`<h2 class="accordion-header d-flex" id="header-${r}">`,e+=`<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-${r}" aria-expanded="true" aria-controls="collapse-${r}">`,e+=`${n[r].title}</button>${n[r].check}</h2>`,e+=`<div id="collapse-${r}" class="accordion-collapse collapse" aria-labelledby="header-${r}" data-bs-parent="#rg2-result-tab-body">`,e+=`<div class="accordion-body px-0">${t[r]}</div></div></div>`;return e+="</div>",e}function sk(n){let t=Math.floor(n/86400)+" days ";return n=n-86400*Math.floor(n/86400),t+=Math.floor(n/3600)+" hours ",n=n-3600*Math.floor(n/3600),t+=Math.floor(n/60)+" minutes ",t+=n-60*Math.floor(n/60)+" seconds",t}function rk(){let n=[],t=[],e=[],i=[];for(let s=0;s<P.length;s+=1){const r=P[s];if(r.resultid<F.GPS_RESULT_OFFSET){const o=r.courseid;n.indexOf(o)===-1&&(n.push(o),t[o]=[],e[o]=[],i[o]=[]);for(let a=0;a<r.scorecodes.length;a+=1)t[o].indexOf(r.scorecodes[a])===-1&&(t[o].push(r.scorecodes[a]),e[o].push(r.scorex[a]),i[o].push(r.scorey[a]))}}for(let s=0;s<n.length;s+=1){const r=n[s];FP(r,t[r],e[r],i[r])}}function ok(n){let t=[];for(let e=0;e<P.length;e+=1)P[e].courseid===n&&P[e].resultid===P[e].rawid&&t.push(P[e]);return t}function ak(n){let t=[];for(let e=0;e<P.length;e+=1)P[e].variant===n&&P[e].resultid===P[e].rawid&&t.push(P[e]);return t}function lk(n){let t=[];for(let e=0;e<P.length;e+=1)P[e].courseid===n&&t.push(P[e].resultid);return t}function ck(n){let t=[];for(let e=0;e<P.length;e+=1)P[e].courseid===n&&P[e].hasValidTrack&&t.push(P[e].resultid);return t}function Ip(n,t){let e=`<tfoot class="table-group-divider"><tr class='allitemsrow'><td></td><td>${U("Routes")}</td><td></td>`;return n>0?(e+=`<td><input class='allcoursetracks' data-courseid=${t} type=checkbox name=track></input></td>`,e+=`<td><input class='allcoursetracksreplay' data-courseid=${t} type=checkbox name=replay></input></td>`):e+="<td></td><td></td>",e+=`</tr><tr class='allitemsrow'><td></td><td>${U("All")}</td><td></td><td></td>`,e+=`<td><input class='allcoursereplay' data-courseid=${t} type=checkbox name=replay></input></td></tr></tfoot>`,e}function uk(){let n=!1,t=["<table id='rg2-comments-table' class='table table-sm table-striped table-bordered'>",`<thead><tr><th>${U("Name")}</th><th>${U("Course")}</th>`,`<th>${U("Comments")}</th></tr></thead><tbody class="table-group-divider">`].join("");for(let e=0;e<P.length;e+=1)P[e].comments!==""&&(n=!0,t+=[`<tr><td>${P[e].name}</td><td>${P[e].coursename}</td>`,`<td>${P[e].comments}</td></tr>`].join(""));return n?t+="</tbody></table>":t="",t}function dk(n){for(let t=0;t<P.length;t+=1)if(P[t].resultid===n)return P[t].courseid}function hk(n){let t=n.coursename;const e=ci(n.courseid);e&&(t+=e.length===void 0?"":": "+e.length+" km");let i=`<div class="d-flex w-100"><div class="flex-grow-1 runners-table-course-header" data-runners="" data-courseid="${n.courseid}">${t}</div>`,s=`<div class="px-2"><input class='showcourse' data-courseid="${n.courseid}"`;return s+=` type=checkbox name ="course" title='Show course' ></input ></div >`,{title:i,check:s}}function fk(n){return{id:P[n].resultid,token:P[n].token}}function pk(){let n=[];for(let t=0;t<P.length;t+=1)if(P[t].displayTrack){let e={};e.trackColour=P[t].trackColour,e.course=DP(P[t].courseid),e.name=P[t].name,e.resultid=P[t].resultid,e.rawid=P[t].rawid,n.push(e)}return n}function mb(n){for(let t=0;t<P.length;t+=1)if(P[t].resultid===n)return P[t]}function vb(n){for(let t=0;t<P.length;t+=1)if(P[t].resultid===n)return P[t]}function Op(n,t){let e;return n.rawid===n.resultid?e=n.name:e="<i>"+n.name+"</i>",n.isScoreEvent&&(e=`<input class='showscorecourse' data-courseid=${t} type=checkbox></input> ${e}`),`<div>${e}</div>`}function gk(n){let t=P.findIndex(e=>e.resultid===n);return t>-1?P[t].displayOrder:n}function mk(){let n={results:0,drawnroutes:0,gpsroutes:0,secs:0};for(let t=0;t<P.length;t+=1){const e=P[t];e.resultid<F.GPS_RESULT_OFFSET&&(n.results+=1,e.time&&(n.secs+=e.splits[e.splits.length-1])),e.hasValidTrack&&(e.resultid<F.GPS_RESULT_OFFSET?n.drawnroutes+=1:n.gpsroutes+=1)}return n.totalroutes=n.drawnroutes+n.gpsroutes,n.results>0?n.percent=(100*n.totalroutes/n.results).toFixed(1):n.percent=0,n.time=sk(n.secs),n}function vk(n,t){const e=mk(),i=CP(),s=vs();let r="";if(t){const a=Hy(),l=1e6;r=`. ${U("Map is georeferenced")}: ${parseInt(a.F*l)/l}`,r+=`, ${parseInt(a.C*l)/l}.`}return[`<tr><td>${U("Courses")}</td><td>${i.length}</td></tr>`,`<tr><td>${U("Controls")}</td><td>${n}</td></tr>`,`<tr><td>${U("Results")}</td><td>${e.results}</td></tr>`,`<tr><td>${U("Routes")}</td><td>${e.totalroutes} (${e.percent}%)</td></tr>`,`<tr><td>${U("Drawn routes")}</td><td>${e.drawnroutes}</td></tr>`,`<tr><td>${U("GPS routes")}</td><td>${e.gpsroutes}</td></tr>`,`<tr><td>${U("Total time")}</td><td>${e.time}</td></tr>`,`<tr><td>${U("Map")} ID ${aP()}</td><td>${s.width}  x ${s.height} pixels${r}</td></tr>`].join("")}function bk(){let n=[];for(let t=0;t<P.length;t+=1)if(P[t].hasValidTrack){let e={};e.id=t,e.resultid=P[t].resultid,e.name=P[t].name,e.time=P[t].time,e.coursename=P[t].coursename,n.push(e)}return n}function yk(n){for(let t=0;t<P.length;t+=1)if(n===P[t].resultid)return{time:P[t].time,splits:P[t].splits};return{time:F.TIME_NOT_FOUND,splits:[]}}function ed(){let n=[];for(let t=0;t<P.length;t+=1){const e=P[t];e.displayTrack&&n.push(e.resultid)}return n}function xk(){let n,t,e=[];for(let i=0;i<P.length;i+=1)if(P[i].courseid!==n&&(n=P[i].courseid,t=ci(n)),t.excludeType===F.EXCLUDED_REAL_SPLITS){e.indexOf(n)===-1&&e.push(n);let s=0;for(let r=1;r<t.exclude.length;r+=1)t.exclude[r]&&(s=s+Math.min(P[i].splits[r]-P[i].splits[r-1],t.allowed[r]));P[i].timeInSecs=Math.max(P[i].splits[P[i].splits.length-1]-s,0),P[i].time=fe(P[i].timeInSecs)}for(let i=0;i<e.length;i+=1){let s=P.filter(a=>a.courseid===e[i]);for(let a=0;a<s.length;a+=1)if(s[a].rawid!==s[a].resultid){let l=s.findIndex(d=>d.resultid===s[a].rawid);l>-1&&(s[a].status=s[l].status)}s.sort(function(a,l){return a.status!=="ok"||a.timeInSecs===0?l.status!=="ok"||l.timeInSecs===0?0:1:l.status!=="ok"||l.timeInSecs===0?-1:a.timeInSecs-l.timeInSecs});let r=0,o=0;for(let a=0;a<s.length;a+=1){if(s[a].status!=="ok"||s[a].timeInSecs===0){s[a].position="";continue}o!==s[a].timeInSecs?(r=r+1,o=s[a].timeInSecs):a>0&&s[a].rawid!==s[a-1].rawid&&(r=r+1),s[a].position=r}for(let a=0;a<s.length;a+=1){let l=P.findIndex(d=>d.resultid===s[a].resultid);l>-1&&(P[l].position=s[a].position,P[l].displayOrder=a)}}}function _k(){P.sort(Lk);let n,t=!1;for(let e=0;e<P.length;e+=1)P[e].rawid===n?t&&P[e].hasValidTrack&&(P[e-1].showResult=!1,P[e].position=P[e-1].position,t=!1):(t=!P[e].hasValidTrack,n=P[e].rawid)}function Ek(){for(let n=0;n<P.length;n+=1)P[n].speedColour.length=0}function wk(n){for(let t=0;t<P.length;t+=1)if(n===P[t].resultid)return!0;return!1}function Sk(n){let t,e;for(let i=0;i<P.length;i+=1){P[i].courseid!==t&&(t=P[i].courseid,e=ci(t)),P[i].legSplits=[],P[i].legSplits[0]=0;let s=0,r=!1;for(let o=1;o<P[i].splits.length;o+=1)P[i].splits[o]-s===0?e.exclude[o]?(P[i].legSplits[o]=P[i].splits[o]-s,s=P[i].splits[o]):(P[i].legSplits[o]=0,r=!0,P[i].lastValidSplit===void 0&&(P[i].lastValidSplit=o-1)):r?(P[i].legSplits[o]=0,s=P[i].splits[o],r=!1):(P[i].legSplits[o]=P[i].splits[o]-s,s=P[i].splits[o]);if(P[i].lastValidSplit===void 0&&(P[i].lastValidSplit=P[i].splits.length-1),!n){const o=MP(P[i].courseid)+2;for(;P[i].splits.length<o;)P[i].splits.push(P[i].splits[P[i].splits.length-1]),P[i].legSplits.push(0)}}}function Tk(n){document.getElementById("rg2-load-progress-label").textContent=U("Saving results",""),jy()>0&&GA(n,Ra()),BP(),Ra()&&(rk(),Xe.generateControlList())}function Ak(n){if(document.getElementById("rg2-load-progress-label").textContent=U("Saving routes",""),jy()>0&&KA(n),yP(),tk(),F.managing())J1();else{if(document.getElementById(F.TAB_COURSES).removeAttribute("disabled"),document.getElementById(F.TAB_RESULTS).removeAttribute("disabled"),$y()?document.getElementById(F.TAB_DRAW).setAttribute("disabled",""):document.getElementById(F.TAB_DRAW).removeAttribute("disabled"),bo()!==F.TAB_DRAW){const s=u1();document.getElementById(s).click()}const e=c1();for(let s=0;s<e.length;s+=1){let r=new Event("click",{bubbles:!0});const o=document.querySelector(`.showtrack[data-id='${e[s]}']`);o&&(o.checked=!0,o.dispatchEvent(r))}const i=a1();for(let s=0;s<i.length;s+=1){let r=new Event("click",{bubbles:!0});const o=document.querySelector(`.showcourse[data-courseid='${i[s]}']`);o&&(o.checked=!0,o.dispatchEvent(r))}}document.getElementById("rg2-load-progress").classList.add("d-none"),wt()}function kk(){const n=fr();let t=[];const e=$t.drawnRoutes;for(let i=0;i<e.length;i+=1)e[i].eventid===n&&t.push(e[i]);for(let i=0;i<t.length;i+=1)for(let s=0;s<P.length;s+=1)P[s].resultid===t[i].id&&(P[s].canDelete=!0,P[s].token=t[i].token)}function bb(){document.getElementById("rg2-result-table").querySelectorAll("#results-accordion .accordion-item").forEach(e=>{const i=e.querySelectorAll(".resulttable tbody tr:not(.d-none)");e.querySelector(".runners-table-course-header").setAttribute("data-runners",i.length)})}function Dk(){for(let n=0;n<P.length;n+=1)P[n].resultid<F.GPS_RESULT_OFFSET?P[n].displayOrder=n:P[n].displayOrder=gk(P[n].rawid)}function Ck(n,t){for(let e=0;e<P.length;e+=1)P[e].rawid===n&&(P[e].userColour=t,P[e].trackColour=t)}function Ik(){let n=document.getElementById("rg2-result-search");if(P.length===0){n.classList.add("d-none");return}n.innerHTML=`<form class="d-flex pb-2" role="search">
  <input class="form-control mx-2" type="search" aria-label="${U("Search")}">
  <i class="bi-search mx-2"></i>
  </form>`;let t=document.getElementById("rg2-result-table");n.addEventListener("keyup",e=>{const i=e.target.value.toUpperCase(),s=t.querySelectorAll("tbody tr");for(let r=0;r<s.length;r+=1)s[r].innerText.toUpperCase().indexOf(i)>-1?s[r].classList.remove("d-none"):s[r].classList.add("d-none");bb()})}function Ta(n,t){for(let e=0;e<P.length;e+=1)P[e].resultid===n&&(P[e].displayScoreCourse=t)}function Ok(){for(let n=0;n<P.length;n+=1)if(P[n].resultid>=F.GPS_RESULT_OFFSET){const t=vb(P[n].rawid);t!==void 0&&t.scorex!==void 0&&(P[n].scorex=t.scorex,P[n].scorey=t.scorey,P[n].scorecodes=t.scorecodes)}}function Mp(n,t){for(let e=0;e<P.length;e+=1)(P[e].courseid===n||F.DISPLAY_ALL_COURSES===n)&&P[e].setTrackDisplay(t);yf()}function Mk(n,t){for(let e=0;e<P.length;e+=1)P[e].resultid===parseInt(n,10)&&P[e].setTrackDisplay(t);yf()}function Lk(n,t){return n.courseid>t.courseid?1:t.courseid>n.courseid?-1:n.rawid===t.rawid?n.resultid-t.resultid:n.displayOrder-t.displayOrder}class yb{constructor(t){const e=mb(t);this.name=e.name,this.initials=e.initials,this.resultid=t,this.rawid=e.rawid,this.starttime=e.starttime,this.splits=e.splits,this.trackColour=e.trackColour,this.userColour=e.userColour;let i;e.isScoreEvent?(i={},i.name=e.coursename,i.x=e.scorex,i.y=e.scorey,i.codes=e.scorecodes):i=ci(e.courseid),this.coursename=i.name,this.nextStopTime=F.VERY_HIGH_TIME_IN_SECS,this.x=[],this.y=[],this.cumulativeDistance=[],this.cumulativeDistance[0]=0,this.legTrackDistance=[],this.legTrackDistance[0]=0,this.cumulativeTrackDistance=[],this.cumulativeTrackDistance[0]=0,e.hasValidTrack?this.expandTrack(e.trackx,e.tracky,e.xysecs):this.expandTrack(i.x,i.y,e.splits),this.addTrackDistances(i,e)}addTrackDistances(t,e){const i=this.cumulativeDistance.length-1;if(t.codes!==void 0)if(e.splits.length>1)for(let s=1;s<t.codes.length;s+=1){let r;e.splits[s]<=i?r=e.splits[s]:r=i,this.cumulativeTrackDistance[s]=this.cumulativeDistance[r],this.legTrackDistance[s]=this.cumulativeTrackDistance[s]-this.cumulativeTrackDistance[s-1]}else this.legTrackDistance[1]=this.cumulativeDistance[i],this.cumulativeTrackDistance[1]=this.cumulativeDistance[i]}expandTrack(t,e,i){let s=0,r=0,o=t[0],a=e[0],l=0,d=0;this.x[0]=t[0],this.y[0]=e[0];let f=mu();f===void 0&&(f=1);for(let p=1;p<i.length;p+=1){let v=t[p],y=e[p],E=v-o,w=y-a;d=d+$e(v,y,o,a)*f;let T=d-l;r=i[p],r===0&&(r=s+1);let O=r-s;for(let R=s+1;R<r;R+=1)this.x[R]=Math.round(o+(R-s)*E/O),this.y[R]=Math.round(a+(R-s)*w/O),this.cumulativeDistance[R]=Math.round(l+(R-s)*T/O);this.x[r]=v,this.y[r]=y,this.cumulativeDistance[r]=Math.round(d),o=v,a=y,l=d,s=r}}}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Za(n){return n+.5|0}const rs=(n,t,e)=>Math.max(Math.min(n,e),t);function ea(n){return rs(Za(n*2.55),0,255)}function ds(n){return rs(Za(n*255),0,255)}function Di(n){return rs(Za(n/2.55)/100,0,1)}function Lp(n){return rs(Za(n*100),0,100)}const An={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bd=[..."0123456789ABCDEF"],Pk=n=>Bd[n&15],Rk=n=>Bd[(n&240)>>4]+Bd[n&15],Ll=n=>(n&240)>>4===(n&15),Nk=n=>Ll(n.r)&&Ll(n.g)&&Ll(n.b)&&Ll(n.a);function Bk(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&An[n[1]]*17,g:255&An[n[2]]*17,b:255&An[n[3]]*17,a:t===5?An[n[4]]*17:255}:(t===7||t===9)&&(e={r:An[n[1]]<<4|An[n[2]],g:An[n[3]]<<4|An[n[4]],b:An[n[5]]<<4|An[n[6]],a:t===9?An[n[7]]<<4|An[n[8]]:255})),e}const Fk=(n,t)=>n<255?t(n):"";function $k(n){var t=Nk(n)?Pk:Rk;return n?"#"+t(n.r)+t(n.g)+t(n.b)+Fk(n.a,t):void 0}const Vk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function xb(n,t,e){const i=t*Math.min(e,1-e),s=(r,o=(r+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function Hk(n,t,e){const i=(s,r=(s+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function zk(n,t,e){const i=xb(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function qk(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function zh(n){const e=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(e,i,s),o=Math.min(e,i,s),a=(r+o)/2;let l,d,f;return r!==o&&(f=r-o,d=a>.5?f/(2-r-o):f/(r+o),l=qk(e,i,s,f,r),l=l*60+.5),[l|0,d||0,a]}function qh(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ds)}function jh(n,t,e){return qh(xb,n,t,e)}function jk(n,t,e){return qh(zk,n,t,e)}function Uk(n,t,e){return qh(Hk,n,t,e)}function _b(n){return(n%360+360)%360}function Wk(n){const t=Vk.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?ea(+t[5]):ds(+t[5]));const s=_b(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=jk(s,r,o):t[1]==="hsv"?i=Uk(s,r,o):i=jh(s,r,o),{r:i[0],g:i[1],b:i[2],a:e}}function Yk(n,t){var e=zh(n);e[0]=_b(e[0]+t),e=jh(e),n.r=e[0],n.g=e[1],n.b=e[2]}function Xk(n){if(!n)return;const t=zh(n),e=t[0],i=Lp(t[1]),s=Lp(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${Di(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const Pp={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Rp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Gk(){const n={},t=Object.keys(Rp),e=Object.keys(Pp);let i,s,r,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],s=0;s<e.length;s++)r=e[s],a=a.replace(r,Pp[r]);r=parseInt(Rp[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let Pl;function Kk(n){Pl||(Pl=Gk(),Pl.transparent=[0,0,0,0]);const t=Pl[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Jk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Zk(n){const t=Jk.exec(n);let e=255,i,s,r;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?ea(o):rs(o*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?ea(i):rs(i,0,255)),s=255&(t[4]?ea(s):rs(s,0,255)),r=255&(t[6]?ea(r):rs(r,0,255)),{r:i,g:s,b:r,a:e}}}function Qk(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Di(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const nd=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Br=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function tD(n,t,e){const i=Br(Di(n.r)),s=Br(Di(n.g)),r=Br(Di(n.b));return{r:ds(nd(i+e*(Br(Di(t.r))-i))),g:ds(nd(s+e*(Br(Di(t.g))-s))),b:ds(nd(r+e*(Br(Di(t.b))-r))),a:n.a+e*(t.a-n.a)}}function Rl(n,t,e){if(n){let i=zh(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=jh(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Eb(n,t){return n&&Object.assign(t||{},n)}function Np(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ds(n[3]))):(t=Eb(n,{r:0,g:0,b:0,a:1}),t.a=ds(t.a)),t}function eD(n){return n.charAt(0)==="r"?Zk(n):Wk(n)}class Aa{constructor(t){if(t instanceof Aa)return t;const e=typeof t;let i;e==="object"?i=Np(t):e==="string"&&(i=Bk(t)||Kk(t)||eD(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Eb(this._rgb);return t&&(t.a=Di(t.a)),t}set rgb(t){this._rgb=Np(t)}rgbString(){return this._valid?Qk(this._rgb):void 0}hexString(){return this._valid?$k(this._rgb):void 0}hslString(){return this._valid?Xk(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,l=i.a-s.a,d=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-d,i.r=255&d*i.r+r*s.r+.5,i.g=255&d*i.g+r*s.g+.5,i.b=255&d*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=tD(this._rgb,t._rgb,e)),this}clone(){return new Aa(this.rgb)}alpha(t){return this._rgb.a=ds(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Za(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Rl(this._rgb,2,t),this}darken(t){return Rl(this._rgb,2,-t),this}saturate(t){return Rl(this._rgb,1,t),this}desaturate(t){return Rl(this._rgb,1,-t),this}rotate(t){return Yk(this._rgb,t),this}}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Ti(){}const nD=(()=>{let n=0;return()=>n++})();function Kt(n){return n===null||typeof n>"u"}function ae(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Wt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function xe(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function gn(n,t){return xe(n)?n:t}function Lt(n,t){return typeof n>"u"?t:n}const iD=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,wb=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function ne(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function ee(n,t,e,i){let s,r,o;if(ae(n))if(r=n.length,i)for(s=r-1;s>=0;s--)t.call(e,n[s],s);else for(s=0;s<r;s++)t.call(e,n[s],s);else if(Wt(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)t.call(e,n[o[s]],o[s])}function Ac(n,t){let e,i,s,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],r=t[e],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function kc(n){if(ae(n))return n.map(kc);if(Wt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=kc(n[e[s]]);return t}return n}function Sb(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function sD(n,t,e,i){if(!Sb(n))return;const s=t[n],r=e[n];Wt(s)&&Wt(r)?ka(s,r,i):t[n]=kc(r)}function ka(n,t,e){const i=ae(t)?t:[t],s=i.length;if(!Wt(n))return n;e=e||{};const r=e.merger||sD;let o;for(let a=0;a<s;++a){if(o=i[a],!Wt(o))continue;const l=Object.keys(o);for(let d=0,f=l.length;d<f;++d)r(l[d],n,o,e)}return n}function ha(n,t){return ka(n,t,{merger:rD})}function rD(n,t,e){if(!Sb(n))return;const i=t[n],s=e[n];Wt(i)&&Wt(s)?ha(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=kc(s))}const Bp={"":n=>n,x:n=>n.x,y:n=>n.y};function oD(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function aD(n){const t=oD(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function gs(n,t){return(Bp[t]||(Bp[t]=aD(t)))(n)}function Uh(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Da=n=>typeof n<"u",ms=n=>typeof n=="function",Fp=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function lD(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const ce=Math.PI,le=2*ce,cD=le+ce,Dc=Number.POSITIVE_INFINITY,uD=ce/180,Se=ce/2,Vs=ce/4,$p=ce*2/3,os=Math.log10,li=Math.sign;function fa(n,t,e){return Math.abs(n-t)<e}function Vp(n){const t=Math.round(n);n=fa(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(os(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function dD(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,r)=>s-r).pop(),t}function ro(n){return!isNaN(parseFloat(n))&&isFinite(n)}function hD(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function Tb(n,t,e){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Vn(n){return n*(ce/180)}function Wh(n){return n*(180/ce)}function Hp(n){if(!xe(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function Ab(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let r=Math.atan2(i,e);return r<-.5*ce&&(r+=le),{angle:r,distance:s}}function Fd(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function fD(n,t){return(n-t+cD)%le-ce}function vn(n){return(n%le+le)%le}function Ca(n,t,e,i){const s=vn(n),r=vn(t),o=vn(e),a=vn(r-s),l=vn(o-s),d=vn(s-r),f=vn(s-o);return s===r||s===o||i&&r===o||a>l&&d<f}function Fe(n,t,e){return Math.max(t,Math.min(e,n))}function pD(n){return Fe(n,-32768,32767)}function Mi(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Yh(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,e(r)?s=r:i=r;return{lo:s,hi:i}}const Li=(n,t,e,i)=>Yh(n,e,i?s=>{const r=n[s][t];return r<e||r===e&&n[s+1][t]===e}:s=>n[s][t]<e),gD=(n,t,e)=>Yh(n,e,i=>n[i][t]>=e);function mD(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const kb=["push","pop","shift","splice","unshift"];function vD(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),kb.forEach(e=>{const i="_onData"+Uh(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function zp(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(kb.forEach(r=>{delete n[r]}),delete n._chartjs)}function Db(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const Cb=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Ib(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,Cb.call(window,()=>{i=!1,n.apply(t,e)}))}}function bD(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const Xh=n=>n==="start"?"left":n==="end"?"right":"center",Ye=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,yD=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function Ob(n,t,e){const i=t.length;let s=0,r=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:d,max:f,minDefined:p,maxDefined:v}=o.getUserBounds();p&&(s=Fe(Math.min(Li(a,l,d).lo,e?i:Li(t,l,o.getPixelForValue(d)).lo),0,i-1)),v?r=Fe(Math.max(Li(a,o.axis,f,!0).hi+1,e?0:Li(t,l,o.getPixelForValue(f),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function Mb(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),r}const Nl=n=>n===0||n===1,qp=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*le/e)),jp=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*le/e)+1,pa={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Se)+1,easeOutSine:n=>Math.sin(n*Se),easeInOutSine:n=>-.5*(Math.cos(ce*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Nl(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Nl(n)?n:qp(n,.075,.3),easeOutElastic:n=>Nl(n)?n:jp(n,.075,.3),easeInOutElastic(n){return Nl(n)?n:n<.5?.5*qp(n*2,.1125,.45):.5+.5*jp(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-pa.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?pa.easeInBounce(n*2)*.5:pa.easeOutBounce(n*2-1)*.5+.5};function Gh(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Up(n){return Gh(n)?n:new Aa(n)}function id(n){return Gh(n)?n:new Aa(n).saturate(.5).darken(.1).hexString()}const xD=["x","y","borderWidth","radius","tension"],_D=["color","borderColor","backgroundColor"];function ED(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:_D},numbers:{type:"number",properties:xD}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function wD(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Wp=new Map;function SD(n,t){t=t||{};const e=n+JSON.stringify(t);let i=Wp.get(e);return i||(i=new Intl.NumberFormat(n,t),Wp.set(e,i)),i}function Qa(n,t,e){return SD(t,e).format(n)}const Lb={values(n){return ae(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(e.length>1){const d=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(d<1e-4||d>1e15)&&(s="scientific"),r=TD(n,e)}const o=os(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Qa(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(os(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?Lb.numeric.call(this,n,t,e):""}};function TD(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var uu={formatters:Lb};function AD(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uu.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const ar=Object.create(null),$d=Object.create(null);function ga(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const r=e[i];n=n[r]||(n[r]=Object.create(null))}return n}function sd(n,t,e){return typeof t=="string"?ka(ga(n,t),e):ka(ga(n,""),t)}class kD{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>id(s.backgroundColor),this.hoverBorderColor=(i,s)=>id(s.borderColor),this.hoverColor=(i,s)=>id(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return sd(this,t,e)}get(t){return ga(this,t)}describe(t,e){return sd($d,t,e)}override(t,e){return sd(ar,t,e)}route(t,e,i,s){const r=ga(this,t),o=ga(this,i),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],d=o[s];return Wt(l)?Object.assign({},d,l):Lt(l,d)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var _e=new kD({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ED,wD,AD]);function DD(n){return!n||Kt(n.size)||Kt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Cc(n,t,e,i,s){let r=t[s];return r||(r=t[s]=n.measureText(s).width,e.push(s)),r>i&&(i=r),i}function CD(n,t,e,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(s=i.data={},r=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0;const a=e.length;let l,d,f,p,v;for(l=0;l<a;l++)if(p=e[l],p!=null&&!ae(p))o=Cc(n,s,r,o,p);else if(ae(p))for(d=0,f=p.length;d<f;d++)v=p[d],v!=null&&!ae(v)&&(o=Cc(n,s,r,o,v));n.restore();const y=r.length/2;if(y>e.length){for(l=0;l<y;l++)delete s[r[l]];r.splice(0,y)}return o}function Hs(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function Yp(n,t){t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore()}function Vd(n,t,e,i){Pb(n,t,e,i,null)}function Pb(n,t,e,i,s){let r,o,a,l,d,f,p,v;const y=t.pointStyle,E=t.rotation,w=t.radius;let T=(E||0)*uD;if(y&&typeof y=="object"&&(r=y.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(T),n.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),n.restore();return}if(!(isNaN(w)||w<=0)){switch(n.beginPath(),y){default:s?n.ellipse(e,i,s/2,w,0,0,le):n.arc(e,i,w,0,le),n.closePath();break;case"triangle":f=s?s/2:w,n.moveTo(e+Math.sin(T)*f,i-Math.cos(T)*w),T+=$p,n.lineTo(e+Math.sin(T)*f,i-Math.cos(T)*w),T+=$p,n.lineTo(e+Math.sin(T)*f,i-Math.cos(T)*w),n.closePath();break;case"rectRounded":d=w*.516,l=w-d,o=Math.cos(T+Vs)*l,p=Math.cos(T+Vs)*(s?s/2-d:l),a=Math.sin(T+Vs)*l,v=Math.sin(T+Vs)*(s?s/2-d:l),n.arc(e-p,i-a,d,T-ce,T-Se),n.arc(e+v,i-o,d,T-Se,T),n.arc(e+p,i+a,d,T,T+Se),n.arc(e-v,i+o,d,T+Se,T+ce),n.closePath();break;case"rect":if(!E){l=Math.SQRT1_2*w,f=s?s/2:l,n.rect(e-f,i-l,2*f,2*l);break}T+=Vs;case"rectRot":p=Math.cos(T)*(s?s/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,v=Math.sin(T)*(s?s/2:w),n.moveTo(e-p,i-a),n.lineTo(e+v,i-o),n.lineTo(e+p,i+a),n.lineTo(e-v,i+o),n.closePath();break;case"crossRot":T+=Vs;case"cross":p=Math.cos(T)*(s?s/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,v=Math.sin(T)*(s?s/2:w),n.moveTo(e-p,i-a),n.lineTo(e+p,i+a),n.moveTo(e+v,i-o),n.lineTo(e-v,i+o);break;case"star":p=Math.cos(T)*(s?s/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,v=Math.sin(T)*(s?s/2:w),n.moveTo(e-p,i-a),n.lineTo(e+p,i+a),n.moveTo(e+v,i-o),n.lineTo(e-v,i+o),T+=Vs,p=Math.cos(T)*(s?s/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,v=Math.sin(T)*(s?s/2:w),n.moveTo(e-p,i-a),n.lineTo(e+p,i+a),n.moveTo(e+v,i-o),n.lineTo(e-v,i+o);break;case"line":o=s?s/2:Math.cos(T)*w,a=Math.sin(T)*w,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(T)*(s?s/2:w),i+Math.sin(T)*w);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Pi(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function du(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function hu(n){n.restore()}function ID(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){const r=(t.x+e.x)/2;n.lineTo(r,t.y),n.lineTo(r,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function OD(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function MD(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Kt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function LD(n,t,e,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,d=e+r.actualBoundingBoxDescent,f=s.strikethrough?(l+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,f),n.lineTo(a,f),n.stroke()}}function PD(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function lr(n,t,e,i,s,r={}){const o=ae(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,d;for(n.save(),n.font=s.string,MD(n,r),l=0;l<o.length;++l)d=o[l],r.backdrop&&PD(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),Kt(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(d,e,i,r.maxWidth)),n.fillText(d,e,i,r.maxWidth),LD(n,e,i,d,r),i+=Number(s.lineHeight);n.restore()}function Ia(n,t){const{x:e,y:i,w:s,h:r,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*ce,ce,!0),n.lineTo(e,i+r-o.bottomLeft),n.arc(e+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,ce,Se,!0),n.lineTo(e+s-o.bottomRight,i+r),n.arc(e+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Se,0,!0),n.lineTo(e+s,i+o.topRight),n.arc(e+s-o.topRight,i+o.topRight,o.topRight,0,-Se,!0),n.lineTo(e+o.topLeft,i)}const RD=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ND=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function BD(n,t){const e=(""+n).match(RD);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const FD=n=>+n||0;function Kh(n,t){const e={},i=Wt(t),s=i?Object.keys(t):t,r=Wt(n)?i?o=>Lt(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of s)e[o]=FD(r(o));return e}function Rb(n){return Kh(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Zs(n){return Kh(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ke(n){const t=Rb(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ne(n,t){n=n||{},t=t||_e.font;let e=Lt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Lt(n.style,t.style);i&&!(""+i).match(ND)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Lt(n.family,t.family),lineHeight:BD(Lt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Lt(n.weight,t.weight),string:""};return s.string=DD(s),s}function na(n,t,e,i){let s=!0,r,o,a;for(r=0,o=n.length;r<o;++r)if(a=n[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),e!==void 0&&ae(a)&&(a=a[e%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function $D(n,t,e){const{min:i,max:s}=n,r=wb(t,(s-i)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Es(n,t){return Object.assign(Object.create(n),t)}function Jh(n,t=[""],e,i,s=()=>n[0]){const r=e||n;typeof i>"u"&&(i=$b("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>Jh([a,...n],t,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return Bb(a,l,()=>YD(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return Gp(a).includes(l)},ownKeys(a){return Gp(a)},set(a,l,d){const f=a._storage||(a._storage=s());return a[l]=f[l]=d,delete a._keys,!0}})}function oo(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Nb(n,i),setContext:r=>oo(n,r,e,i),override:r=>oo(n.override(r),t,e,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return Bb(r,o,()=>HD(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function Nb(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:ms(e)?e:()=>e,isIndexable:ms(i)?i:()=>i}}const VD=(n,t)=>n?n+Uh(t):t,Zh=(n,t)=>Wt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Bb(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t))return n[t];const i=e();return n[t]=i,i}function HD(n,t,e){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[t];return ms(a)&&o.isScriptable(t)&&(a=zD(t,a,n,e)),ae(a)&&a.length&&(a=qD(t,a,n,o.isIndexable)),Zh(t,a)&&(a=oo(a,s,r&&r[t],o)),a}function zD(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(r,o||i);return a.delete(n),Zh(n,l)&&(l=Qh(s._scopes,s,n,l)),l}function qD(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&i(n))return t[r.index%t.length];if(Wt(t[0])){const l=t,d=s._scopes.filter(f=>f!==l);t=[];for(const f of l){const p=Qh(d,s,n,f);t.push(oo(p,r,o&&o[n],a))}}return t}function Fb(n,t,e){return ms(n)?n(t,e):n}const jD=(n,t)=>n===!0?t:typeof n=="string"?gs(t,n):void 0;function UD(n,t,e,i,s){for(const r of t){const o=jD(e,r);if(o){n.add(o);const a=Fb(o._fallback,e,s);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function Qh(n,t,e,i){const s=t._rootScopes,r=Fb(t._fallback,e,i),o=[...n,...s],a=new Set;a.add(i);let l=Xp(a,o,e,r||e,i);return l===null||typeof r<"u"&&r!==e&&(l=Xp(a,o,r,l,i),l===null)?!1:Jh(Array.from(a),[""],s,r,()=>WD(t,e,i))}function Xp(n,t,e,i,s){for(;e;)e=UD(n,t,e,i,s);return e}function WD(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return ae(s)&&Wt(e)?e:s||{}}function YD(n,t,e,i){let s;for(const r of t)if(s=$b(VD(r,n),e),typeof s<"u")return Zh(n,s)?Qh(e,i,n,s):s}function $b(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function Gp(n){let t=n._keys;return t||(t=n._keys=XD(n._scopes)),t}function XD(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function Vb(n,t,e,i){const{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i);let a,l,d,f;for(a=0,l=i;a<l;++a)d=a+e,f=t[d],o[a]={r:s.parse(gs(f,r),d)};return o}const GD=Number.EPSILON||1e-14,ao=(n,t)=>t<n.length&&!n[t].skip&&n[t],Hb=n=>n==="x"?"y":"x";function KD(n,t,e,i){const s=n.skip?t:n,r=t,o=e.skip?t:e,a=Fd(r,s),l=Fd(o,r);let d=a/(a+l),f=l/(a+l);d=isNaN(d)?0:d,f=isNaN(f)?0:f;const p=i*d,v=i*f;return{previous:{x:r.x-p*(o.x-s.x),y:r.y-p*(o.y-s.y)},next:{x:r.x+v*(o.x-s.x),y:r.y+v*(o.y-s.y)}}}function JD(n,t,e){const i=n.length;let s,r,o,a,l,d=ao(n,0);for(let f=0;f<i-1;++f)if(l=d,d=ao(n,f+1),!(!l||!d)){if(fa(t[f],0,GD)){e[f]=e[f+1]=0;continue}s=e[f]/t[f],r=e[f+1]/t[f],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[f]=s*o*t[f],e[f+1]=r*o*t[f])}}function ZD(n,t,e="x"){const i=Hb(e),s=n.length;let r,o,a,l=ao(n,0);for(let d=0;d<s;++d){if(o=a,a=l,l=ao(n,d+1),!a)continue;const f=a[e],p=a[i];o&&(r=(f-o[e])/3,a[`cp1${e}`]=f-r,a[`cp1${i}`]=p-r*t[d]),l&&(r=(l[e]-f)/3,a[`cp2${e}`]=f+r,a[`cp2${i}`]=p+r*t[d])}}function QD(n,t="x"){const e=Hb(t),i=n.length,s=Array(i).fill(0),r=Array(i);let o,a,l,d=ao(n,0);for(o=0;o<i;++o)if(a=l,l=d,d=ao(n,o+1),!!l){if(d){const f=d[t]-l[t];s[o]=f!==0?(d[e]-l[e])/f:0}r[o]=a?d?li(s[o-1])!==li(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}JD(n,s,r),ZD(n,r,t)}function Bl(n,t,e){return Math.max(Math.min(n,e),t)}function tC(n,t){let e,i,s,r,o,a=Pi(n[0],t);for(e=0,i=n.length;e<i;++e)o=r,r=a,a=e<i-1&&Pi(n[e+1],t),r&&(s=n[e],o&&(s.cp1x=Bl(s.cp1x,t.left,t.right),s.cp1y=Bl(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=Bl(s.cp2x,t.left,t.right),s.cp2y=Bl(s.cp2y,t.top,t.bottom)))}function eC(n,t,e,i,s){let r,o,a,l;if(t.spanGaps&&(n=n.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")QD(n,s);else{let d=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=KD(d,a,n[Math.min(r+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,d=a}t.capBezierPoints&&tC(n,e)}function tf(){return typeof window<"u"&&typeof document<"u"}function ef(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Ic(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const fu=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function nC(n,t){return fu(n).getPropertyValue(t)}const iC=["top","right","bottom","left"];function Qs(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const r=iC[s];i[r]=parseFloat(n[t+"-"+r+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const sC=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function rC(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(sC(s,r,n.target))a=s,l=r;else{const d=t.getBoundingClientRect();a=i.clientX-d.left,l=i.clientY-d.top,o=!0}return{x:a,y:l,box:o}}function js(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=fu(e),r=s.boxSizing==="border-box",o=Qs(s,"padding"),a=Qs(s,"border","width"),{x:l,y:d,box:f}=rC(n,e),p=o.left+(f&&a.left),v=o.top+(f&&a.top);let{width:y,height:E}=t;return r&&(y-=o.width+a.width,E-=o.height+a.height),{x:Math.round((l-p)/y*e.width/i),y:Math.round((d-v)/E*e.height/i)}}function oC(n,t,e){let i,s;if(t===void 0||e===void 0){const r=ef(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{const o=r.getBoundingClientRect(),a=fu(r),l=Qs(a,"border","width"),d=Qs(a,"padding");t=o.width-d.width-l.width,e=o.height-d.height-l.height,i=Ic(a.maxWidth,r,"clientWidth"),s=Ic(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:i||Dc,maxHeight:s||Dc}}const Fl=n=>Math.round(n*10)/10;function aC(n,t,e,i){const s=fu(n),r=Qs(s,"margin"),o=Ic(s.maxWidth,n,"clientWidth")||Dc,a=Ic(s.maxHeight,n,"clientHeight")||Dc,l=oC(n,t,e);let{width:d,height:f}=l;if(s.boxSizing==="content-box"){const v=Qs(s,"border","width"),y=Qs(s,"padding");d-=y.width+v.width,f-=y.height+v.height}return d=Math.max(0,d-r.width),f=Math.max(0,i?d/i:f-r.height),d=Fl(Math.min(d,o,l.maxWidth)),f=Fl(Math.min(f,a,l.maxHeight)),d&&!f&&(f=Fl(d/2)),(t!==void 0||e!==void 0)&&i&&l.height&&f>l.height&&(f=l.height,d=Fl(Math.floor(f*i))),{width:d,height:f}}function Kp(n,t,e){const i=t||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const lC=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};tf()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function Jp(n,t){const e=nC(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Us(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function cC(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function uC(n,t,e,i){const s={x:n.cp2x,y:n.cp2y},r={x:t.cp1x,y:t.cp1y},o=Us(n,s,e),a=Us(s,r,e),l=Us(r,t,e),d=Us(o,a,e),f=Us(a,l,e);return Us(d,f,e)}const dC=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},hC=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Wr(n,t,e){return n?dC(t,e):hC()}function zb(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function qb(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function jb(n){return n==="angle"?{between:Ca,compare:fD,normalize:vn}:{between:Mi,compare:(t,e)=>t-e,normalize:t=>t}}function Zp({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function fC(n,t,e){const{property:i,start:s,end:r}=e,{between:o,normalize:a}=jb(i),l=t.length;let{start:d,end:f,loop:p}=n,v,y;if(p){for(d+=l,f+=l,v=0,y=l;v<y&&o(a(t[d%l][i]),s,r);++v)d--,f--;d%=l,f%=l}return f<d&&(f+=l),{start:d,end:f,loop:p,style:n.style}}function Ub(n,t,e){if(!e)return[n];const{property:i,start:s,end:r}=e,o=t.length,{compare:a,between:l,normalize:d}=jb(i),{start:f,end:p,loop:v,style:y}=fC(n,t,e),E=[];let w=!1,T=null,O,R,j;const $=()=>l(s,j,O)&&a(s,j)!==0,V=()=>a(r,O)===0||l(r,j,O),X=()=>w||$(),C=()=>!w||V();for(let Z=f,it=f;Z<=p;++Z)R=t[Z%o],!R.skip&&(O=d(R[i]),O!==j&&(w=l(O,s,r),T===null&&X()&&(T=a(O,s)===0?Z:it),T!==null&&C()&&(E.push(Zp({start:T,end:Z,loop:v,count:o,style:y})),T=null),it=Z,j=O));return T!==null&&E.push(Zp({start:T,end:p,loop:v,count:o,style:y})),E}function Wb(n,t){const e=[],i=n.segments;for(let s=0;s<i.length;s++){const r=Ub(i[s],n.points,t);r.length&&e.push(...r)}return e}function pC(n,t,e,i){let s=0,r=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(r+=s);r>s&&n[r%t].skip;)r--;return r%=t,{start:s,end:r}}function gC(n,t,e,i){const s=n.length,r=[];let o=t,a=n[t],l;for(l=t+1;l<=e;++l){const d=n[l%s];d.skip||d.stop?a.skip||(i=!1,r.push({start:t%s,end:(l-1)%s,loop:i}),t=o=d.stop?l:null):(o=l,a.skip&&(t=l)),a=d}return o!==null&&r.push({start:t%s,end:o%s,loop:i}),r}function mC(n,t){const e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];const r=!!n._loop,{start:o,end:a}=pC(e,s,r,i);if(i===!0)return Qp(n,[{start:o,end:a,loop:r}],e,t);const l=a<o?a+s:a,d=!!n._fullLoop&&o===0&&a===s-1;return Qp(n,gC(e,o,l,d),e,t)}function Qp(n,t,e,i){return!i||!i.setContext||!e?t:vC(n,t,e,i)}function vC(n,t,e,i){const s=n._chart.getContext(),r=tg(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,d=[];let f=r,p=t[0].start,v=p;function y(E,w,T,O){const R=a?-1:1;if(E!==w){for(E+=l;e[E%l].skip;)E-=R;for(;e[w%l].skip;)w+=R;E%l!==w%l&&(d.push({start:E%l,end:w%l,loop:T,style:O}),f=O,p=w%l)}}for(const E of t){p=a?p:E.start;let w=e[p%l],T;for(v=p+1;v<=E.end;v++){const O=e[v%l];T=tg(i.setContext(Es(s,{type:"segment",p0:w,p1:O,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),bC(T,f)&&y(p,v-1,E.loop,f),w=O,f=T}p<v-1&&y(p,v-1,E.loop,f)}return d}function tg(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function bC(n,t){if(!t)return!1;const e=[],i=function(s,r){return Gh(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(t,i)}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class yC{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const r=e.listeners[s],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Cb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ai=new yC;const eg="transparent",xC={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=Up(n||eg),s=i.valid&&Up(t||eg);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class _C{constructor(t,e,i,s){const r=e[i];s=na([t.to,s,r,t.from]);const o=na([t.from,r,s]);this._active=!0,this._fn=t.fn||xC[t.type||typeof o],this._easing=pa[t.easing]||pa.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=na([t.to,e,s,t.from]),this._from=na([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||e<i),!this._active){this._target[s]=a,this._notify(!0);return}if(e<0){this._target[s]=r;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class Yb{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Wt(t))return;const e=Object.keys(_e.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!Wt(r))return;const o={};for(const a of e)o[a]=r[a];(ae(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){const i=e.options,s=wC(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&EC(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const d=o[l];if(d.charAt(0)==="$")continue;if(d==="options"){s.push(...this._animateOptions(t,e));continue}const f=e[d];let p=r[d];const v=i.get(d);if(p)if(v&&p.active()){p.update(v,f,a);continue}else p.cancel();if(!v||!v.duration){t[d]=f;continue}r[d]=p=new _C(v,t,d,f),s.push(p)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return Ai.add(this._chart,i),!0}}function EC(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function wC(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function ng(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function SC(n,t,e){if(e===!1)return!1;const i=ng(n,e),s=ng(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function TC(n){let t,e,i,s;return Wt(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function Xb(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)e.push(i[s].index);return e}function ig(n,t,e,i={}){const s=n.keys,r=i.mode==="single";let o,a,l,d;if(t!==null){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===e){if(i.all)continue;break}d=n.values[l],xe(d)&&(r||t===0||li(t)===li(d))&&(t+=d)}return t}}function AC(n){const t=Object.keys(n),e=new Array(t.length);let i,s,r;for(i=0,s=t.length;i<s;++i)r=t[i],e[i]={x:r,y:n[r]};return e}function sg(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function kC(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function DC(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function CC(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function rg(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(e&&r>0||!e&&r<0)return s.index}return null}function og(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,d=o.axis,f=kC(r,o,i),p=t.length;let v;for(let y=0;y<p;++y){const E=t[y],{[l]:w,[d]:T}=E,O=E._stacks||(E._stacks={});v=O[d]=CC(s,f,w),v[a]=T,v._top=rg(v,o,!0,i.type),v._bottom=rg(v,o,!1,i.type);const R=v._visualValues||(v._visualValues={});R[a]=T}}function rd(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function IC(n,t){return Es(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function OC(n,t,e){return Es(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Xo(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const r=s._stacks;if(!r||r[i]===void 0||r[i][e]===void 0)return;delete r[i][e],r[i]._visualValues!==void 0&&r[i]._visualValues[e]!==void 0&&delete r[i]._visualValues[e]}}}const od=n=>n==="reset"||n==="none",ag=(n,t)=>t?n:Object.assign({},n),MC=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Xb(e,!0),values:null};class zn{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=sg(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Xo(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(p,v,y,E)=>p==="x"?v:p==="r"?E:y,r=e.xAxisID=Lt(i.xAxisID,rd(t,"x")),o=e.yAxisID=Lt(i.yAxisID,rd(t,"y")),a=e.rAxisID=Lt(i.rAxisID,rd(t,"r")),l=e.indexAxis,d=e.iAxisID=s(l,r,o,a),f=e.vAxisID=s(l,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(d),e.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&zp(this._data,this),t._stacked&&Xo(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Wt(e))this._data=AC(e);else if(i!==e){if(i){zp(i,this);const s=this._cachedMeta;Xo(s),s._parsed=[]}e&&Object.isExtensible(e)&&vD(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=e._stacked;e._stacked=sg(e.vScale,e),e.stack!==i.stack&&(s=!0,Xo(e),e.stack=i.stack),this._resyncElements(t),(s||r!==e._stacked)&&og(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=t===0&&e===s.length?!0:i._sorted,d=t>0&&i._parsed[t-1],f,p,v;if(this._parsing===!1)i._parsed=s,i._sorted=!0,v=s;else{ae(s[t])?v=this.parseArrayData(i,s,t,e):Wt(s[t])?v=this.parseObjectData(i,s,t,e):v=this.parsePrimitiveData(i,s,t,e);const y=()=>p[a]===null||d&&p[a]<d[a];for(f=0;f<e;++f)i._parsed[f+t]=p=v[f],l&&(y()&&(l=!1),d=p);i._sorted=l}o&&og(this,v)}parsePrimitiveData(t,e,i,s){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,d=r.getLabels(),f=r===o,p=new Array(s);let v,y,E;for(v=0,y=s;v<y;++v)E=v+i,p[v]={[a]:f||r.parse(d[E],E),[l]:o.parse(e[E],E)};return p}parseArrayData(t,e,i,s){const{xScale:r,yScale:o}=t,a=new Array(s);let l,d,f,p;for(l=0,d=s;l<d;++l)f=l+i,p=e[f],a[l]={x:r.parse(p[0],f),y:o.parse(p[1],f)};return a}parseObjectData(t,e,i,s){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,d=new Array(s);let f,p,v,y;for(f=0,p=s;f<p;++f)v=f+i,y=e[v],d[f]={x:r.parse(gs(y,a),v),y:o.parse(gs(y,l),v)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,r=this._cachedMeta,o=e[t.axis],a={keys:Xb(s,!0),values:e._stacks[t.axis]._visualValues};return ig(a,o,r.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const r=i[e.axis];let o=r===null?NaN:r;const a=s&&i._stacks[e.axis];s&&a&&(s.values=a,o=ig(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,o=s.length,a=this._getOtherScale(t),l=MC(e,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:p}=DC(a);let v,y;function E(){y=s[v];const w=y[a.axis];return!xe(y[t.axis])||f>w||p<w}for(v=0;v<o&&!(!E()&&(this.updateRangeFromParsed(d,t,y,l),r));++v);if(r){for(v=o-1;v>=0;--v)if(!E()){this.updateRangeFromParsed(d,t,y,l);break}}return d}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=e.length;s<r;++s)o=e[s][t.axis],xe(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=TC(Lt(this.options.clip,SC(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],r=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,d=this.options.drawActiveElementsOnTop;let f;for(i.dataset&&i.dataset.draw(t,r,a,l),f=a;f<a+l;++f){const p=s[f];p.hidden||(p.active&&d?o.push(p):p.draw(t,r))}for(f=0;f<o.length;++f)o[f].draw(t,r)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=OC(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=IC(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",r=this._cachedDataOpts,o=t+"-"+e,a=r[o],l=this.enableOptionSharing&&Da(i);if(a)return ag(a,l);const d=this.chart.config,f=d.datasetElementScopeKeys(this._type,t),p=s?[`${t}Hover`,"hover",t,""]:[t,""],v=d.getOptionScopes(this.getDataset(),f),y=Object.keys(_e.elements[t]),E=()=>this.getContext(i,s,e),w=d.resolveNamedOptions(v,y,E,p);return w.$shared&&(w.$shared=l,r[o]=Object.freeze(ag(w,l))),w}_resolveAnimations(t,e,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const f=this.chart.config,p=f.datasetAnimationScopeKeys(this._type,e),v=f.getOptionScopes(this.getDataset(),p);l=f.createResolver(v,this.getContext(t,i,e))}const d=new Yb(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||od(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(e,r)||r!==s;return this.updateSharedOptions(r,e,i),{sharedOptions:r,includeOptions:o}}updateElement(t,e,i,s){od(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!od(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const r=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,l,d]of this._syncList)this[a](l,d);this._syncList=[];const s=i.length,r=e.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,e,i=!0){const s=this._cachedMeta,r=s.data,o=t+e;let a;const l=d=>{for(d.length+=e,a=d.length-1;a>=o;a--)d[a]=d[a-e]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,e),i&&this.updateElements(r,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&Xo(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}et(zn,"defaults",{}),et(zn,"datasetElementType",null),et(zn,"dataElementType",null);function LC(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let s=0,r=e.length;s<r;s++)i=i.concat(e[s].controller.getAllParsedValues(n));n._cache.$bar=Db(i.sort((s,r)=>s-r))}return n._cache.$bar}function PC(n){const t=n.iScale,e=LC(t,n.type);let i=t._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(Da(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=e.length;s<r;++s)o=t.getPixelForValue(e[s]),l();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),l();return i}function RC(n,t,e,i){const s=e.barThickness;let r,o;return Kt(s)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:t.pixels[n]-r/2}}function NC(n,t,e,i){const s=t.pixels,r=s[n];let o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const l=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const d=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:d}}function BC(n,t,e,i){const s=e.parse(n[0],i),r=e.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,d=a;Math.abs(o)>Math.abs(a)&&(l=a,d=o),t[e.axis]=d,t._custom={barStart:l,barEnd:d,start:s,end:r,min:o,max:a}}function Gb(n,t,e,i){return ae(n)?BC(n,t,e,i):t[e.axis]=e.parse(n,i),t}function lg(n,t,e,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,l=[];let d,f,p,v;for(d=e,f=e+i;d<f;++d)v=t[d],p={},p[s.axis]=a||s.parse(o[d],d),l.push(Gb(v,p,r,d));return l}function ad(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function FC(n,t,e){return n!==0?li(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function $C(n){let t,e,i,s,r;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:e,end:i,reverse:t,top:s,bottom:r}}function VC(n,t,e,i){let s=t.borderSkipped;const r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:d,bottom:f}=$C(n);s==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?s=d:(e._bottom||0)===i?s=f:(r[cg(f,o,a,l)]=!0,s=d)),r[cg(s,o,a,l)]=!0,n.borderSkipped=r}function cg(n,t,e,i){return i?(n=HC(n,t,e),n=ug(n,e,t)):n=ug(n,t,e),n}function HC(n,t,e){return n===t?e:n===e?t:n}function ug(n,t,e){return n==="start"?t:n==="end"?e:n}function zC(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class ac extends zn{parsePrimitiveData(t,e,i,s){return lg(t,e,i,s)}parseArrayData(t,e,i,s){return lg(t,e,i,s)}parseObjectData(t,e,i,s){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,d=r.axis==="x"?a:l,f=o.axis==="x"?a:l,p=[];let v,y,E,w;for(v=i,y=i+s;v<y;++v)w=e[v],E={},E[r.axis]=r.parse(gs(w,d),v),p.push(Gb(gs(w,f),E,o,v));return p}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);const r=i._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:s}=e,r=this.getParsed(t),o=r._custom,a=ad(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),d=a.isHorizontal(),f=this._getRuler(),{sharedOptions:p,includeOptions:v}=this._getSharedOptions(e,s);for(let y=e;y<e+i;y++){const E=this.getParsed(y),w=r||Kt(E[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(y),T=this._calculateBarIndexPixels(y,f),O=(E._stacks||{})[a.axis],R={horizontal:d,base:w.base,enableBorderRadius:!O||ad(E._custom)||o===O._top||o===O._bottom,x:d?w.head:T.center,y:d?T.center:w.head,height:d?T.size:Math.abs(w.size),width:d?Math.abs(w.size):T.size};v&&(R.options=p||this.resolveDataElementOptions(y,t[y].active?"active":s));const j=R.options||t[y].options;VC(R,j,O,o),zC(R,j,f.ratio),this.updateElement(t[y],y,R,s)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=i.options.stacked,o=[],a=l=>{const d=l.controller.getParsed(e),f=d&&d[l.vScale.axis];if(Kt(f)||isNaN(f))return!0};for(const l of s)if(!(e!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const s=this._getStacks(t,i),r=e!==void 0?s.indexOf(e):-1;return r===-1?s.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,s=[];let r,o;for(r=0,o=e.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=t.barThickness;return{min:a||PC(e),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),d=l._custom,f=ad(d);let p=l[e.axis],v=0,y=i?this.applyStack(e,l,i):p,E,w;y!==p&&(v=y-p,y=p),f&&(p=d.barStart,y=d.barEnd-d.barStart,p!==0&&li(p)!==li(d.barEnd)&&(v=0),v+=p);const T=!Kt(r)&&!f?r:v;let O=e.getPixelForValue(T);if(this.chart.getDataVisibility(t)?E=e.getPixelForValue(v+y):E=O,w=E-O,Math.abs(w)<o){w=FC(w,e,a)*o,p===a&&(O-=w/2);const R=e.getPixelForDecimal(0),j=e.getPixelForDecimal(1),$=Math.min(R,j),V=Math.max(R,j);O=Math.max(Math.min(O,V),$),E=O+w,i&&!f&&(l._stacks[e.axis]._visualValues[s]=e.getValueForPixel(E)-e.getValueForPixel(O))}if(O===e.getPixelForValue(a)){const R=li(w)*e.getLineWidthForValue(a)/2;O+=R,w-=R}return{size:w,base:O,head:E,center:E+w/2}}_calculateBarIndexPixels(t,e){const i=e.scale,s=this.options,r=s.skipNull,o=Lt(s.maxBarThickness,1/0);let a,l;if(e.grouped){const d=r?this._getStackCount(t):e.stackCount,f=s.barThickness==="flex"?NC(t,e,s,d):RC(t,e,s,d),p=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=f.start+f.chunk*p+f.chunk/2,l=Math.min(o,f.chunk*f.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[e.axis]!==null&&i[r].draw(this._ctx)}}et(ac,"id","bar"),et(ac,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),et(ac,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class lc extends zn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,s){const r=super.parsePrimitiveData(t,e,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(t,e,i,s){const r=super.parseArrayData(t,e,i,s);for(let o=0;o<r.length;o++){const a=e[i+o];r[o]._custom=Lt(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(t,e,i,s){const r=super.parseObjectData(t,e,i,s);for(let o=0;o<r.length;o++){const a=e[i+o];r[o]._custom=Lt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=e,o=this.getParsed(t),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),d=o._custom;return{label:i[t]||"",value:"("+a+", "+l+(d?", "+d:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:d}=this._getSharedOptions(e,s),f=o.axis,p=a.axis;for(let v=e;v<e+i;v++){const y=t[v],E=!r&&this.getParsed(v),w={},T=w[f]=r?o.getPixelForDecimal(.5):o.getPixelForValue(E[f]),O=w[p]=r?a.getBasePixel():a.getPixelForValue(E[p]);w.skip=isNaN(T)||isNaN(O),d&&(w.options=l||this.resolveDataElementOptions(v,y.active?"active":s),r&&(w.options.radius=0)),this.updateElement(y,v,w,s)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return e!=="active"&&(s.radius=0),s.radius+=Lt(i&&i._custom,r),s}}et(lc,"id","bubble"),et(lc,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),et(lc,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function qC(n,t,e){let i=1,s=1,r=0,o=0;if(t<le){const a=n,l=a+t,d=Math.cos(a),f=Math.sin(a),p=Math.cos(l),v=Math.sin(l),y=(j,$,V)=>Ca(j,a,l,!0)?1:Math.max($,$*e,V,V*e),E=(j,$,V)=>Ca(j,a,l,!0)?-1:Math.min($,$*e,V,V*e),w=y(0,d,p),T=y(Se,f,v),O=E(ce,d,p),R=E(ce+Se,f,v);i=(w-O)/2,s=(T-R)/2,r=-(w+O)/2,o=-(T+R)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class Gs extends zn{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(Wt(i[t])){const{key:l="value"}=this._parsing;r=d=>+gs(i[d],l)}let o,a;for(o=t,a=t+e;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return Vn(this.options.rotation-90)}_getCircumference(){return Vn(this.options.circumference)}_getRotationExtents(){let t=le,e=-le;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(iD(this.options.cutout,a),1),d=this._getRingWeight(this.index),{circumference:f,rotation:p}=this._getRotationExtents(),{ratioX:v,ratioY:y,offsetX:E,offsetY:w}=qC(p,f,l),T=(i.width-o)/v,O=(i.height-o)/y,R=Math.max(Math.min(T,O)/2,0),j=wb(this.options.radius,R),$=Math.max(j*l,0),V=(j-$)/this._getVisibleDatasetWeightTotal();this.offsetX=E*j,this.offsetY=w*j,s.total=this.calculateTotal(),this.outerRadius=j-V*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-V*d,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/le)}updateElements(t,e,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,d=o.options.animation,f=(a.left+a.right)/2,p=(a.top+a.bottom)/2,v=r&&d.animateScale,y=v?0:this.innerRadius,E=v?0:this.outerRadius,{sharedOptions:w,includeOptions:T}=this._getSharedOptions(e,s);let O=this._getRotation(),R;for(R=0;R<e;++R)O+=this._circumference(R,r);for(R=e;R<e+i;++R){const j=this._circumference(R,r),$=t[R],V={x:f+this.offsetX,y:p+this.offsetY,startAngle:O,endAngle:O+j,circumference:j,outerRadius:E,innerRadius:y};T&&(V.options=w||this.resolveDataElementOptions(R,$.active?"active":s)),O+=j,this.updateElement($,R,V,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,s;for(s=0;s<e.length;s++){const r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?le*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Qa(e._parsed[t],i.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,r,o,a,l;if(!t){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),t=o.data,a=o.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const r=this.resolveDataElementOptions(i);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(Lt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}et(Gs,"id","doughnut"),et(Gs,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),et(Gs,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),et(Gs,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class cc extends zn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:l}=Ob(e,s,o);this._drawStart=a,this._drawCount=l,Mb(e)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:d},t),this.updateElements(s,a,l,t)}updateElements(t,e,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:d}=this._cachedMeta,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,s),v=o.axis,y=a.axis,{spanGaps:E,segment:w}=this.options,T=ro(E)?E:Number.POSITIVE_INFINITY,O=this.chart._animationsDisabled||r||s==="none",R=e+i,j=t.length;let $=e>0&&this.getParsed(e-1);for(let V=0;V<j;++V){const X=t[V],C=O?X:{};if(V<e||V>=R){C.skip=!0;continue}const Z=this.getParsed(V),it=Kt(Z[y]),ut=C[v]=o.getPixelForValue(Z[v],V),ft=C[y]=r||it?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,Z,l):Z[y],V);C.skip=isNaN(ut)||isNaN(ft)||it,C.stop=V>0&&Math.abs(Z[v]-$[v])>T,w&&(C.parsed=Z,C.raw=d.data[V]),p&&(C.options=f||this.resolveDataElementOptions(V,X.active?"active":s)),O||this.updateElement(X,V,C,s),$=Z}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}et(cc,"id","line"),et(cc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),et(cc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ma extends zn{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Qa(e._parsed[t].r,i.options.locale);return{label:s[t]||"",value:r}}parseObjectData(t,e,i,s){return Vb.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,s=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,d=this._cachedMeta.rScale,f=d.xCenter,p=d.yCenter,v=d.getIndexAngle(0)-.5*ce;let y=v,E;const w=360/this.countVisibleElements();for(E=0;E<e;++E)y+=this._computeAngle(E,s,w);for(E=e;E<e+i;E++){const T=t[E];let O=y,R=y+this._computeAngle(E,s,w),j=o.getDataVisibility(E)?d.getDistanceFromCenterForValue(this.getParsed(E).r):0;y=R,r&&(l.animateScale&&(j=0),l.animateRotate&&(O=R=v));const $={x:f,y:p,innerRadius:0,outerRadius:j,startAngle:O,endAngle:R,options:this.resolveDataElementOptions(E,T.active?"active":s)};this.updateElement(T,E,$,s)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Vn(this.resolveDataElementOptions(t,e).angle||i):0}}et(ma,"id","polarArea"),et(ma,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),et(ma,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Hd extends Gs{}et(Hd,"id","pie"),et(Hd,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class uc extends zn{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,s){return Vb.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta,i=e.dataset,s=e.data||[],r=e.iScale.getLabels();if(i.points=s,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,t)}this.updateElements(s,0,s.length,t)}updateElements(t,e,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=e;a<e+i;a++){const l=t[a],d=this.resolveDataElementOptions(a,l.active?"active":s),f=r.getPointPositionForValue(a,this.getParsed(a).r),p=o?r.xCenter:f.x,v=o?r.yCenter:f.y,y={x:p,y:v,angle:f.angle,skip:isNaN(p)||isNaN(v),options:d};this.updateElement(l,a,y,s)}}}et(uc,"id","radar"),et(uc,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),et(uc,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class dc extends zn{getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=e,o=this.getParsed(t),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[t]||"",value:"("+a+", "+l+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,s=this.chart._animationsDisabled;let{start:r,count:o}=Ob(e,i,s);if(this._drawStart=r,this._drawCount=o,Mb(e)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const d=this.resolveDatasetElementOptions(t);d.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:d},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:d}=this._cachedMeta,f=this.resolveDataElementOptions(e,s),p=this.getSharedOptions(f),v=this.includeOptions(s,p),y=o.axis,E=a.axis,{spanGaps:w,segment:T}=this.options,O=ro(w)?w:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||r||s==="none";let j=e>0&&this.getParsed(e-1);for(let $=e;$<e+i;++$){const V=t[$],X=this.getParsed($),C=R?V:{},Z=Kt(X[E]),it=C[y]=o.getPixelForValue(X[y],$),ut=C[E]=r||Z?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,X,l):X[E],$);C.skip=isNaN(it)||isNaN(ut)||Z,C.stop=$>0&&Math.abs(X[y]-j[y])>O,T&&(C.parsed=X,C.raw=d.data[$]),v&&(C.options=p||this.resolveDataElementOptions($,V.active?"active":s)),R||this.updateElement(V,$,C,s),j=X}this.updateSharedOptions(p,s,f)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let l=e.length-1;l>=0;--l)a=Math.max(a,e[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!e.length)return s;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(s,r,o)/2}}et(dc,"id","scatter"),et(dc,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),et(dc,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var jC=Object.freeze({__proto__:null,BarController:ac,BubbleController:lc,DoughnutController:Gs,LineController:cc,PieController:Hd,PolarAreaController:ma,RadarController:uc,ScatterController:dc});function zs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class nf{constructor(t){et(this,"options");this.options=t||{}}static override(t){Object.assign(nf.prototype,t)}init(){}formats(){return zs()}parse(){return zs()}format(){return zs()}add(){return zs()}diff(){return zs()}startOf(){return zs()}endOf(){return zs()}}var UC={_date:nf};function WC(n,t,e,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?gD:Li;if(i){if(s._sharedOptions){const d=r[0],f=typeof d.getRange=="function"&&d.getRange(t);if(f){const p=l(r,t,e-f),v=l(r,t,e+f);return{lo:p.lo,hi:v.hi}}}}else return l(r,t,e)}return{lo:0,hi:r.length-1}}function tl(n,t,e,i,s){const r=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){const{index:d,data:f}=r[a],{lo:p,hi:v}=WC(r[a],t,o,s);for(let y=p;y<=v;++y){const E=f[y];E.skip||i(E,d,y)}}}function YC(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const r=t?Math.abs(i.x-s.x):0,o=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function ld(n,t,e,i,s){const r=[];return!s&&!n.isPointInArea(t)||tl(n,e,t,function(a,l,d){!s&&!Pi(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&r.push({element:a,datasetIndex:l,index:d})},!0),r}function XC(n,t,e,i){let s=[];function r(o,a,l){const{startAngle:d,endAngle:f}=o.getProps(["startAngle","endAngle"],i),{angle:p}=Ab(o,{x:t.x,y:t.y});Ca(p,d,f)&&s.push({element:o,datasetIndex:a,index:l})}return tl(n,e,t,r),s}function GC(n,t,e,i,s,r){let o=[];const a=YC(e);let l=Number.POSITIVE_INFINITY;function d(f,p,v){const y=f.inRange(t.x,t.y,s);if(i&&!y)return;const E=f.getCenterPoint(s);if(!(!!r||n.isPointInArea(E))&&!y)return;const T=a(t,E);T<l?(o=[{element:f,datasetIndex:p,index:v}],l=T):T===l&&o.push({element:f,datasetIndex:p,index:v})}return tl(n,e,t,d),o}function cd(n,t,e,i,s,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!i?XC(n,t,e,s):GC(n,t,e,i,s,r)}function dg(n,t,e,i,s){const r=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return tl(n,e,t,(l,d,f)=>{l[o](t[e],s)&&(r.push({element:l,datasetIndex:d,index:f}),a=a||l.inRange(t.x,t.y,s))}),i&&!a?[]:r}var KC={evaluateInteractionItems:tl,modes:{index(n,t,e,i){const s=js(t,n),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?ld(n,s,r,i,o):cd(n,s,r,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const f=a[0].index,p=d.data[f];p&&!p.skip&&l.push({element:p,datasetIndex:d.index,index:f})}),l):[]},dataset(n,t,e,i){const s=js(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?ld(n,s,r,i,o):cd(n,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,d=n.getDatasetMeta(l).data;a=[];for(let f=0;f<d.length;++f)a.push({element:d[f],datasetIndex:l,index:f})}return a},point(n,t,e,i){const s=js(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return ld(n,s,r,i,o)},nearest(n,t,e,i){const s=js(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return cd(n,s,r,e.intersect,i,o)},x(n,t,e,i){const s=js(t,n);return dg(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=js(t,n);return dg(n,s,"y",e.intersect,i)}}};const Kb=["left","top","right","bottom"];function Go(n,t){return n.filter(e=>e.pos===t)}function hg(n,t){return n.filter(e=>Kb.indexOf(e.pos)===-1&&e.box.axis===t)}function Ko(n,t){return n.sort((e,i)=>{const s=t?i:e,r=t?e:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function JC(n){const t=[];let e,i,s,r,o,a;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:e,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function ZC(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:r}=e;if(!i||!Kb.includes(s))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function QC(n,t){const e=ZC(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,d=e[a.stack],f=d&&a.stackWeight/d.weight;a.horizontal?(a.width=f?f*i:l&&t.availableWidth,a.height=s):(a.width=i,a.height=f?f*s:l&&t.availableHeight)}return e}function tI(n){const t=JC(n),e=Ko(t.filter(d=>d.box.fullSize),!0),i=Ko(Go(t,"left"),!0),s=Ko(Go(t,"right")),r=Ko(Go(t,"top"),!0),o=Ko(Go(t,"bottom")),a=hg(t,"x"),l=hg(t,"y");return{fullSize:e,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Go(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function fg(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function Jb(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function eI(n,t,e,i){const{pos:s,box:r}=e,o=n.maxPadding;if(!Wt(s)){e.size&&(n[s]-=e.size);const p=i[e.stack]||{size:0,count:1};p.size=Math.max(p.size,e.horizontal?r.height:r.width),e.size=p.size/p.count,n[s]+=e.size}r.getPadding&&Jb(o,r.getPadding());const a=Math.max(0,t.outerWidth-fg(o,n,"left","right")),l=Math.max(0,t.outerHeight-fg(o,n,"top","bottom")),d=a!==n.w,f=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:d,other:f}:{same:f,other:d}}function nI(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function iI(n,t){const e=t.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return i(n?["left","right"]:["top","bottom"])}function ia(n,t,e,i){const s=[];let r,o,a,l,d,f;for(r=0,o=n.length,d=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||t.w,a.height||t.h,iI(a.horizontal,t));const{same:p,other:v}=eI(t,e,a,i);d|=p&&s.length,f=f||v,l.fullSize||s.push(a)}return d&&ia(s,t,e,i)||f}function $l(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function pg(n,t,e,i){const s=e.padding;let{x:r,y:o}=t;for(const a of n){const l=a.box,d=i[a.stack]||{count:1,placed:0,weight:1},f=a.stackWeight/d.weight||1;if(a.horizontal){const p=t.w*f,v=d.size||l.height;Da(d.start)&&(o=d.start),l.fullSize?$l(l,s.left,o,e.outerWidth-s.right-s.left,v):$l(l,t.left+d.placed,o,p,v),d.start=o,d.placed+=p,o=l.bottom}else{const p=t.h*f,v=d.size||l.width;Da(d.start)&&(r=d.start),l.fullSize?$l(l,r,s.top,v,e.outerHeight-s.bottom-s.top):$l(l,r,t.top+d.placed,v,p),d.start=r,d.placed+=p,r=l.right}}t.x=r,t.y=o}var Ge={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=Ke(n.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(e-s.height,0),a=tI(n.boxes),l=a.vertical,d=a.horizontal;ee(n.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const f=l.reduce((w,T)=>T.box.options&&T.box.options.display===!1?w:w+1,0)||1,p=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/f,hBoxMaxHeight:o/2}),v=Object.assign({},s);Jb(v,Ke(i));const y=Object.assign({maxPadding:v,w:r,h:o,x:s.left,y:s.top},s),E=QC(l.concat(d),p);ia(a.fullSize,y,p,E),ia(l,y,p,E),ia(d,y,p,E)&&ia(l,y,p,E),nI(y),pg(a.leftAndTop,y,p,E),y.x+=y.w,y.y+=y.h,pg(a.rightAndBottom,y,p,E),n.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},ee(a.chartArea,w=>{const T=w.box;Object.assign(T,n.chartArea),T.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class Zb{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class sI extends Zb{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const hc="$chartjs",rI={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},gg=n=>n===null||n==="";function oI(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[hc]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",gg(s)){const r=Jp(n,"width");r!==void 0&&(n.width=r)}if(gg(i))if(n.style.height==="")n.height=n.width/(t||2);else{const r=Jp(n,"height");r!==void 0&&(n.height=r)}return n}const Qb=lC?{passive:!0}:!1;function aI(n,t,e){n&&n.addEventListener(t,e,Qb)}function lI(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Qb)}function cI(n,t){const e=rI[n.type]||n.type,{x:i,y:s}=js(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Oc(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function uI(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Oc(a.addedNodes,i),o=o&&!Oc(a.removedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function dI(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Oc(a.removedNodes,i),o=o&&!Oc(a.addedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const Oa=new Map;let mg=0;function ty(){const n=window.devicePixelRatio;n!==mg&&(mg=n,Oa.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function hI(n,t){Oa.size||window.addEventListener("resize",ty),Oa.set(n,t)}function fI(n){Oa.delete(n),Oa.size||window.removeEventListener("resize",ty)}function pI(n,t,e){const i=n.canvas,s=i&&ef(i);if(!s)return;const r=Ib((a,l)=>{const d=s.clientWidth;e(a,l),d<s.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],d=l.contentRect.width,f=l.contentRect.height;d===0&&f===0||r(d,f)});return o.observe(s),hI(n,r),o}function ud(n,t,e){e&&e.disconnect(),t==="resize"&&fI(n)}function gI(n,t,e){const i=n.canvas,s=Ib(r=>{n.ctx!==null&&e(cI(r,n))},n);return aI(i,t,s),s}class mI extends Zb{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(oI(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[hc])return!1;const i=e[hc].initial;["height","width"].forEach(r=>{const o=i[r];Kt(o)?e.removeAttribute(r):e.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{e.style[r]=s[r]}),e.width=e.width,delete e[hc],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),o={attach:uI,detach:dI,resize:pI}[e]||gI;s[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:ud,detach:ud,resize:ud}[e]||lI)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return aC(t,e,i,s)}isAttached(t){const e=ef(t);return!!(e&&e.isConnected)}}function vI(n){return!tf()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?sI:mI}var Jl;let Hi=(Jl=class{constructor(){et(this,"x");et(this,"y");et(this,"active",!1);et(this,"options");et(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ro(this.x)&&ro(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},et(Jl,"defaults",{}),et(Jl,"defaultRoutes"),Jl);function bI(n,t){const e=n.options.ticks,i=yI(n),s=Math.min(e.maxTicksLimit||i,i),r=e.major.enabled?_I(t):[],o=r.length,a=r[0],l=r[o-1],d=[];if(o>s)return EI(t,d,r,o/s),d;const f=xI(r,t,s);if(o>0){let p,v;const y=o>1?Math.round((l-a)/(o-1)):null;for(Vl(t,d,f,Kt(y)?0:a-y,a),p=0,v=o-1;p<v;p++)Vl(t,d,f,r[p],r[p+1]);return Vl(t,d,f,l,Kt(y)?t.length:l+y),d}return Vl(t,d,f),d}function yI(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function xI(n,t,e){const i=wI(n),s=t.length/e;if(!i)return Math.max(s,1);const r=dD(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function _I(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function EI(n,t,e,i){let s=0,r=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(t.push(n[o]),s++,r=e[s*i])}function Vl(n,t,e,i,s){const r=Lt(i,0),o=Math.min(Lt(s,n.length),n.length);let a=0,l,d,f;for(e=Math.ceil(e),s&&(l=s-i,e=l/Math.floor(l/e)),f=r;f<0;)a++,f=Math.round(r+a*e);for(d=Math.max(r,0);d<o;d++)d===f&&(t.push(n[d]),a++,f=Math.round(r+a*e))}function wI(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const SI=n=>n==="left"?"right":n==="right"?"left":n,vg=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,bg=(n,t)=>Math.min(t||n,n);function yg(n,t){const e=[],i=n.length/t,s=n.length;let r=0;for(;r<s;r+=i)e.push(n[Math.floor(r)]);return e}function TI(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(s),d;if(!(e&&(i===1?d=Math.max(l-r,o-l):t===0?d=(n.getPixelForTick(1)-l)/2:d=(l-n.getPixelForTick(s-1))/2,l+=s<t?d:-d,l<r-a||l>o+a)))return l}function AI(n,t){ee(n,e=>{const i=e.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete e.data[i[r]];i.splice(0,s)}})}function Jo(n){return n.drawTicks?n.tickLength:0}function xg(n,t){if(!n.display)return 0;const e=Ne(n.font,t),i=Ke(n.padding);return(ae(n.text)?n.text.length:1)*e.lineHeight+i.height}function kI(n,t){return Es(n,{scale:t,type:"scale"})}function DI(n,t,e){return Es(n,{tick:e,index:t,type:"tick"})}function CI(n,t,e){let i=Xh(n);return(e&&t!=="right"||!e&&t==="right")&&(i=SI(i)),i}function II(n,t,e,i){const{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:d,scales:f}=l;let p=0,v,y,E;const w=o-s,T=a-r;if(n.isHorizontal()){if(y=Ye(i,r,a),Wt(e)){const O=Object.keys(e)[0],R=e[O];E=f[O].getPixelForValue(R)+w-t}else e==="center"?E=(d.bottom+d.top)/2+w-t:E=vg(n,e,t);v=a-r}else{if(Wt(e)){const O=Object.keys(e)[0],R=e[O];y=f[O].getPixelForValue(R)-T+t}else e==="center"?y=(d.left+d.right)/2-T+t:y=vg(n,e,t);E=Ye(i,o,s),p=e==="left"?-Se:Se}return{titleX:y,titleY:E,maxWidth:v,rotation:p}}class hr extends Hi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=gn(t,Number.POSITIVE_INFINITY),e=gn(e,Number.NEGATIVE_INFINITY),i=gn(i,Number.POSITIVE_INFINITY),s=gn(s,Number.NEGATIVE_INFINITY),{min:gn(t,i),max:gn(e,s),minDefined:xe(t),maxDefined:xe(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,d=a.length;l<d;++l)o=a[l].controller.getMinMax(this,t),s||(e=Math.min(e,o.min)),r||(i=Math.max(i,o.max));return e=r&&e>i?i:e,i=s&&e>i?e:i,{min:gn(e,gn(i,e)),max:gn(i,gn(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ne(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=$D(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?yg(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=bI(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ne(this.options.afterUpdate,[this])}beforeSetDimensions(){ne(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ne(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ne(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ne(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=ne(e.callback,[r.value,i,t],this)}afterTickToLabelConversion(){ne(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ne(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=bg(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,r=e.maxRotation;let o=s,a,l,d;if(!this._isVisible()||!e.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const f=this._getLabelSizes(),p=f.widest.width,v=f.highest.height,y=Fe(this.chart.width-p,0,this.maxWidth);a=t.offset?this.maxWidth/i:y/(i-1),p+6>a&&(a=y/(i-(t.offset?.5:1)),l=this.maxHeight-Jo(t.grid)-e.padding-xg(t.title,this.chart.options.font),d=Math.sqrt(p*p+v*v),o=Wh(Math.min(Math.asin(Fe((f.highest.height+6)/a,-1,1)),Math.asin(Fe(l/d,-1,1))-Math.asin(Fe(v/d,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){ne(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ne(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=xg(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=Jo(r)+l):(t.height=this.maxHeight,t.width=Jo(r)+l),i.display&&this.ticks.length){const{first:d,last:f,widest:p,highest:v}=this._getLabelSizes(),y=i.padding*2,E=Vn(this.labelRotation),w=Math.cos(E),T=Math.sin(E);if(a){const O=i.mirror?0:T*p.width+w*v.height;t.height=Math.min(this.maxHeight,t.height+O+y)}else{const O=i.mirror?0:w*p.width+T*v.height;t.width=Math.min(this.maxWidth,t.width+O+y)}this._calculatePadding(d,f,T,w)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,d=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,y=0;l?d?(v=s*t.width,y=i*e.height):(v=i*t.height,y=s*e.width):r==="start"?y=e.width:r==="end"?v=t.width:r!=="inner"&&(v=t.width/2,y=e.width/2),this.paddingLeft=Math.max((v-f+o)*this.width/(this.width-f),0),this.paddingRight=Math.max((y-p+o)*this.width/(this.width-p),0)}else{let f=e.height/2,p=t.height/2;r==="start"?(f=0,p=t.height):r==="end"&&(f=e.height,p=0),this.paddingTop=f+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ne(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Kt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=yg(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(e/bg(e,i));let d=0,f=0,p,v,y,E,w,T,O,R,j,$,V;for(p=0;p<e;p+=l){if(E=t[p].label,w=this._resolveTickFontOptions(p),s.font=T=w.string,O=r[T]=r[T]||{data:{},gc:[]},R=w.lineHeight,j=$=0,!Kt(E)&&!ae(E))j=Cc(s,O.data,O.gc,j,E),$=R;else if(ae(E))for(v=0,y=E.length;v<y;++v)V=E[v],!Kt(V)&&!ae(V)&&(j=Cc(s,O.data,O.gc,j,V),$+=R);o.push(j),a.push($),d=Math.max(j,d),f=Math.max($,f)}AI(r,e);const X=o.indexOf(d),C=a.indexOf(f),Z=it=>({width:o[it]||0,height:a[it]||0});return{first:Z(0),last:Z(e-1),widest:Z(X),highest:Z(C),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return pD(this._alignToPixels?Hs(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=DI(this.getContext(),t,i))}return this.$context||(this.$context=kI(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Vn(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,d=this.isHorizontal(),p=this.ticks.length+(l?1:0),v=Jo(r),y=[],E=a.setContext(this.getContext()),w=E.display?E.width:0,T=w/2,O=function(bt){return Hs(i,bt,w)};let R,j,$,V,X,C,Z,it,ut,ft,pt,It;if(o==="top")R=O(this.bottom),C=this.bottom-v,it=R-T,ft=O(t.top)+T,It=t.bottom;else if(o==="bottom")R=O(this.top),ft=t.top,It=O(t.bottom)-T,C=R+T,it=this.top+v;else if(o==="left")R=O(this.right),X=this.right-v,Z=R-T,ut=O(t.left)+T,pt=t.right;else if(o==="right")R=O(this.left),ut=t.left,pt=O(t.right)-T,X=R+T,Z=this.left+v;else if(e==="x"){if(o==="center")R=O((t.top+t.bottom)/2+.5);else if(Wt(o)){const bt=Object.keys(o)[0],Ct=o[bt];R=O(this.chart.scales[bt].getPixelForValue(Ct))}ft=t.top,It=t.bottom,C=R+T,it=C+v}else if(e==="y"){if(o==="center")R=O((t.left+t.right)/2);else if(Wt(o)){const bt=Object.keys(o)[0],Ct=o[bt];R=O(this.chart.scales[bt].getPixelForValue(Ct))}X=R-T,Z=X-v,ut=t.left,pt=t.right}const Nt=Lt(s.ticks.maxTicksLimit,p),xt=Math.max(1,Math.ceil(p/Nt));for(j=0;j<p;j+=xt){const bt=this.getContext(j),Ct=r.setContext(bt),Ee=a.setContext(bt),qt=Ct.lineWidth,be=Ct.color,en=Ee.dash||[],Ve=Ee.dashOffset,qe=Ct.tickWidth,Te=Ct.tickColor,Ae=Ct.tickBorderDash||[],te=Ct.tickBorderDashOffset;$=TI(this,j,l),$!==void 0&&(V=Hs(i,$,qt),d?X=Z=ut=pt=V:C=it=ft=It=V,y.push({tx1:X,ty1:C,tx2:Z,ty2:it,x1:ut,y1:ft,x2:pt,y2:It,width:qt,color:be,borderDash:en,borderDashOffset:Ve,tickWidth:qe,tickColor:Te,tickBorderDash:Ae,tickBorderDashOffset:te}))}return this._ticksLength=p,this._borderValue=R,y}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:d,padding:f,mirror:p}=r,v=Jo(i.grid),y=v+f,E=p?-f:y,w=-Vn(this.labelRotation),T=[];let O,R,j,$,V,X,C,Z,it,ut,ft,pt,It="middle";if(s==="top")X=this.bottom-E,C=this._getXAxisLabelAlignment();else if(s==="bottom")X=this.top+E,C=this._getXAxisLabelAlignment();else if(s==="left"){const xt=this._getYAxisLabelAlignment(v);C=xt.textAlign,V=xt.x}else if(s==="right"){const xt=this._getYAxisLabelAlignment(v);C=xt.textAlign,V=xt.x}else if(e==="x"){if(s==="center")X=(t.top+t.bottom)/2+y;else if(Wt(s)){const xt=Object.keys(s)[0],bt=s[xt];X=this.chart.scales[xt].getPixelForValue(bt)+y}C=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")V=(t.left+t.right)/2-y;else if(Wt(s)){const xt=Object.keys(s)[0],bt=s[xt];V=this.chart.scales[xt].getPixelForValue(bt)}C=this._getYAxisLabelAlignment(v).textAlign}e==="y"&&(l==="start"?It="top":l==="end"&&(It="bottom"));const Nt=this._getLabelSizes();for(O=0,R=a.length;O<R;++O){j=a[O],$=j.label;const xt=r.setContext(this.getContext(O));Z=this.getPixelForTick(O)+r.labelOffset,it=this._resolveTickFontOptions(O),ut=it.lineHeight,ft=ae($)?$.length:1;const bt=ft/2,Ct=xt.color,Ee=xt.textStrokeColor,qt=xt.textStrokeWidth;let be=C;o?(V=Z,C==="inner"&&(O===R-1?be=this.options.reverse?"left":"right":O===0?be=this.options.reverse?"right":"left":be="center"),s==="top"?d==="near"||w!==0?pt=-ft*ut+ut/2:d==="center"?pt=-Nt.highest.height/2-bt*ut+ut:pt=-Nt.highest.height+ut/2:d==="near"||w!==0?pt=ut/2:d==="center"?pt=Nt.highest.height/2-bt*ut:pt=Nt.highest.height-ft*ut,p&&(pt*=-1),w!==0&&!xt.showLabelBackdrop&&(V+=ut/2*Math.sin(w))):(X=Z,pt=(1-ft)*ut/2);let en;if(xt.showLabelBackdrop){const Ve=Ke(xt.backdropPadding),qe=Nt.heights[O],Te=Nt.widths[O];let Ae=pt-Ve.top,te=0-Ve.left;switch(It){case"middle":Ae-=qe/2;break;case"bottom":Ae-=qe;break}switch(C){case"center":te-=Te/2;break;case"right":te-=Te;break;case"inner":O===R-1?te-=Te:O>0&&(te-=Te/2);break}en={left:te,top:Ae,width:Te+Ve.width,height:qe+Ve.height,color:xt.backdropColor}}T.push({label:$,font:it,textOffset:pt,options:{rotation:w,color:Ct,strokeColor:Ee,strokeWidth:qt,textAlign:be,textBaseline:It,translation:[V,X],backdrop:en}})}return T}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Vn(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let d,f;return e==="left"?s?(f=this.right+r,i==="near"?d="left":i==="center"?(d="center",f+=l/2):(d="right",f+=l)):(f=this.right-a,i==="near"?d="right":i==="center"?(d="center",f-=l/2):(d="left",f=this.left)):e==="right"?s?(f=this.left+r,i==="near"?d="right":i==="center"?(d="center",f-=l/2):(d="left",f-=l)):(f=this.left+a,i==="near"?d="left":i==="center"?(d="center",f+=l/2):(d="right",f=this.right)):d="right",{textAlign:d,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,d,f)=>{!f.width||!f.color||(i.save(),i.lineWidth=f.width,i.strokeStyle=f.color,i.setLineDash(f.borderDash||[]),i.lineDashOffset=f.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(e.display)for(r=0,o=s.length;r<o;++r){const l=s[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let d,f,p,v;this.isHorizontal()?(d=Hs(t,this.left,o)-o/2,f=Hs(t,this.right,a)+a/2,p=v=l):(p=Hs(t,this.top,o)-o/2,v=Hs(t,this.bottom,a)+a/2,d=f=l),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(d,p),e.lineTo(f,v),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&du(i,s);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,d=o.label,f=o.textOffset;lr(i,d,0,f,l,a)}s&&hu(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const r=Ne(i.font),o=Ke(i.padding),a=i.align;let l=r.lineHeight/2;e==="bottom"||e==="center"||Wt(e)?(l+=o.bottom,ae(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:d,titleY:f,maxWidth:p,rotation:v}=II(this,l,e,a);lr(t,i.text,0,0,r,{color:i.color,maxWidth:p,rotation:v,textAlign:CI(a,e,s),textBaseline:"middle",translation:[d,f]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Lt(t.grid&&t.grid.z,-1),s=Lt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==hr.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=e.length;r<o;++r){const a=e[r];a[i]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Ne(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Hl{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;LI(e)&&(i=this.register(e));const s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,OI(t,o,i),this.override&&_e.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in _e[s]&&(delete _e[s][i],this.override&&delete ar[i])}}function OI(n,t,e){const i=ka(Object.create(null),[e?_e.get(e):{},_e.get(t),n.defaults]);_e.set(t,i),n.defaultRoutes&&MI(t,n.defaultRoutes),n.descriptors&&_e.describe(t,n.descriptors)}function MI(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),r=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");_e.route(r,s,l,a)})}function LI(n){return"id"in n&&"defaults"in n}class PI{constructor(){this.controllers=new Hl(zn,"datasets",!0),this.elements=new Hl(Hi,"elements"),this.plugins=new Hl(Object,"plugins"),this.scales=new Hl(hr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):ee(s,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const s=Uh(t);ne(i["before"+s],[],i),e[t](i),ne(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var Zn=new PI;class RI{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,e,i);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(const r of t){const o=r.plugin,a=o[i],l=[e,s,r.options];if(ne(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Kt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=Lt(i.options&&i.options.plugins,{}),r=NI(i);return s===!1&&!e?[]:FI(t,r,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function NI(n){const t={},e=[],i=Object.keys(Zn.plugins.items);for(let r=0;r<i.length;r++)e.push(Zn.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function BI(n,t){return!t&&n===!1?null:n===!0?{}:n}function FI(n,{plugins:t,localIds:e},i,s){const r=[],o=n.getContext();for(const a of t){const l=a.id,d=BI(i[l],s);d!==null&&r.push({plugin:a,options:$I(n.config,{plugin:a,local:e[l]},d,o)})}return r}function $I(n,{plugin:t,local:e},i,s){const r=n.pluginScopeKeys(t),o=n.getOptionScopes(i,r);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function zd(n,t){const e=_e.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function VI(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function HI(n,t){return n===t?"_index_":"_value_"}function _g(n){if(n==="x"||n==="y"||n==="r")return n}function zI(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function qd(n,...t){if(_g(n))return n;for(const e of t){const i=e.axis||zI(e.position)||n.length>1&&_g(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Eg(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function qI(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return Eg(n,"x",e[0])||Eg(n,"y",e[0])}return{}}function jI(n,t){const e=ar[n.type]||{scales:{}},i=t.scales||{},s=zd(n.type,t),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Wt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=qd(o,a,qI(o,n),_e.scales[a.type]),d=HI(l,s),f=e.scales||{};r[o]=ha(Object.create(null),[{axis:l},a,f[l],f[d]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||zd(a,t),f=(ar[a]||{}).scales||{};Object.keys(f).forEach(p=>{const v=VI(p,l),y=o[v+"AxisID"]||v;r[y]=r[y]||Object.create(null),ha(r[y],[{axis:v},i[y],f[p]])})}),Object.keys(r).forEach(o=>{const a=r[o];ha(a,[_e.scales[a.type],_e.scale])}),r}function ey(n){const t=n.options||(n.options={});t.plugins=Lt(t.plugins,{}),t.scales=jI(n,t)}function ny(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function UI(n){return n=n||{},n.data=ny(n.data),ey(n),n}const wg=new Map,iy=new Set;function zl(n,t){let e=wg.get(n);return e||(e=t(),wg.set(n,e),iy.add(e)),e}const Zo=(n,t,e)=>{const i=gs(t,e);i!==void 0&&n.add(i)};class WI{constructor(t){this._config=UI(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ny(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),ey(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return zl(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return zl(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return zl(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return zl(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:r}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const l=new Set;e.forEach(f=>{t&&(l.add(t),f.forEach(p=>Zo(l,t,p))),f.forEach(p=>Zo(l,s,p)),f.forEach(p=>Zo(l,ar[r]||{},p)),f.forEach(p=>Zo(l,_e,p)),f.forEach(p=>Zo(l,$d,p))});const d=Array.from(l);return d.length===0&&d.push(Object.create(null)),iy.has(e)&&o.set(e,d),d}chartOptionScopes(){const{options:t,type:e}=this;return[t,ar[e]||{},_e.datasets[e]||{},{type:e},_e,$d]}resolveNamedOptions(t,e,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Sg(this._resolverCache,t,s);let l=o;if(XI(o,e)){r.$shared=!1,i=ms(i)?i():i;const d=this.createResolver(t,i,a);l=oo(o,i,d)}for(const d of e)r[d]=l[d];return r}createResolver(t,e,i=[""],s){const{resolver:r}=Sg(this._resolverCache,t,i);return Wt(e)?oo(r,e,void 0,s):r}}function Sg(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let r=i.get(s);return r||(r={resolver:Jh(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const YI=n=>Wt(n)&&Object.getOwnPropertyNames(n).some(t=>ms(n[t]));function XI(n,t){const{isScriptable:e,isIndexable:i}=Nb(n);for(const s of t){const r=e(s),o=i(s),a=(o||r)&&n[s];if(r&&(ms(a)||YI(a))||o&&ae(a))return!0}return!1}var GI="4.4.2";const KI=["top","bottom","left","right","chartArea"];function Tg(n,t){return n==="top"||n==="bottom"||KI.indexOf(n)===-1&&t==="x"}function Ag(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function kg(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),ne(e&&e.onComplete,[n],t)}function JI(n){const t=n.chart,e=t.options.animation;ne(e&&e.onProgress,[n],t)}function sy(n){return tf()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const fc={},Dg=n=>{const t=sy(n);return Object.values(fc).filter(e=>e.canvas===t).pop()};function ZI(n,t,e){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=t){const o=n[s];delete n[s],(e>0||r>t)&&(n[r+e]=o)}}}function QI(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}function ql(n,t,e){return n.options.clip?n[e]:t[e]}function tO(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:ql(e,t,"left"),right:ql(e,t,"right"),top:ql(i,t,"top"),bottom:ql(i,t,"bottom")}:t}class ei{static register(...t){Zn.add(...t),Cg()}static unregister(...t){Zn.remove(...t),Cg()}constructor(t,e){const i=this.config=new WI(e),s=sy(t),r=Dg(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||vI(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,d=l&&l.height,f=l&&l.width;if(this.id=nD(),this.ctx=a,this.canvas=l,this.width=f,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new RI,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=bD(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],fc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ai.listen(this,"complete",kg),Ai.listen(this,"progress",JI),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:r}=this;return Kt(t)?e&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Zn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Kp(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Yp(this.canvas,this.ctx),this}stop(){return Ai.stop(this),this}resize(t,e){Ai.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Kp(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ne(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ee(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const a=e[o],l=qd(o,a),d=l==="r",f=l==="x";return{options:a,dposition:d?"chartArea":f?"bottom":"left",dtype:d?"radialLinear":f?"category":"linear"}}))),ee(r,o=>{const a=o.options,l=a.id,d=qd(l,a),f=Lt(a.type,o.dtype);(a.position===void 0||Tg(a.position,d)!==Tg(o.dposition))&&(a.position=o.dposition),s[l]=!0;let p=null;if(l in i&&i[l].type===f)p=i[l];else{const v=Zn.getScale(f);p=new v({id:l,type:f,ctx:this.ctx,chart:this}),i[p.id]=p}p.init(a,t)}),ee(s,(o,a)=>{o||delete i[a]}),ee(i,o=>{Ge.configure(this,o,o.options),Ge.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(Ag("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const r=e[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||zd(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Zn.getController(a),{datasetElementType:d,dataElementType:f}=_e.datasets[a];Object.assign(l,{dataElementType:Zn.getElement(f),datasetElementType:d&&Zn.getElement(d)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){ee(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,f=this.data.datasets.length;d<f;d++){const{controller:p}=this.getDatasetMeta(d),v=!s&&r.indexOf(p)===-1;p.buildOrUpdateElements(v),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||ee(r,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ag("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ee(this.scales,t=>{Ge.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Fp(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of e){const o=i==="_removeElements"?-r:r;ZI(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<e;r++)if(!Fp(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ge.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],ee(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,ms(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ai.has(this)?this.attached&&!Ai.running(this)&&Ai.start(this):(this.draw(),kg({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,r;for(s=0,r=e.length;s<r;++s){const o=e[s];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,s=!i.disabled,r=tO(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&du(e,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),t.controller.draw(),s&&hu(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Pi(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const r=KC.modes[e];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Es(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);Da(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ai.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Yp(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete fc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};ee(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,d)=>{e.addEventListener(this,l,d),t[l]=d},s=(l,d)=>{t[l]&&(e.removeEventListener(this,l,d),delete t[l])},r=(l,d)=>{this.canvas&&this.resize(l,d)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){ee(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ee(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let r,o,a,l;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Ac(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,r=(l,d)=>l.filter(f=>!d.some(p=>f.datasetIndex===p.datasetIndex&&f.index===p.index)),o=r(e,t),a=i?t:r(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:r}=this,o=e,a=this._getActiveElements(t,s,i,o),l=lD(t),d=QI(t,this._lastEvent,i,l);i&&(this._lastEvent=null,ne(r.onHover,[t,a,this],this),l&&ne(r.onClick,[t,a,this],this));const f=!Ac(a,s);return(f||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=d,f}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}}et(ei,"defaults",_e),et(ei,"instances",fc),et(ei,"overrides",ar),et(ei,"registry",Zn),et(ei,"version",GI),et(ei,"getChart",Dg);function Cg(){return ee(ei.instances,n=>n._plugins.invalidate())}function eO(n,t,e){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=t;let d=s/a;n.beginPath(),n.arc(r,o,a,i-d,e+d),l>s?(d=s/l,n.arc(r,o,l,e+d,i-d,!0)):n.arc(r,o,s,e+Se,i-Se),n.closePath(),n.clip()}function nO(n){return Kh(n,["outerStart","outerEnd","innerStart","innerEnd"])}function iO(n,t,e,i){const s=nO(n.options.borderRadius),r=(e-t)/2,o=Math.min(r,i*t/2),a=l=>{const d=(e-Math.min(r,l))*i/2;return Fe(l,0,Math.min(r,d))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Fe(s.innerStart,0,o),innerEnd:Fe(s.innerEnd,0,o)}}function Fr(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Mc(n,t,e,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:d,innerRadius:f}=t,p=Math.max(t.outerRadius+i+e-d,0),v=f>0?f+i+e+d:0;let y=0;const E=s-l;if(i){const xt=f>0?f-i:0,bt=p>0?p-i:0,Ct=(xt+bt)/2,Ee=Ct!==0?E*Ct/(Ct+i):E;y=(E-Ee)/2}const w=Math.max(.001,E*p-e/ce)/p,T=(E-w)/2,O=l+T+y,R=s-T-y,{outerStart:j,outerEnd:$,innerStart:V,innerEnd:X}=iO(t,v,p,R-O),C=p-j,Z=p-$,it=O+j/C,ut=R-$/Z,ft=v+V,pt=v+X,It=O+V/ft,Nt=R-X/pt;if(n.beginPath(),r){const xt=(it+ut)/2;if(n.arc(o,a,p,it,xt),n.arc(o,a,p,xt,ut),$>0){const qt=Fr(Z,ut,o,a);n.arc(qt.x,qt.y,$,ut,R+Se)}const bt=Fr(pt,R,o,a);if(n.lineTo(bt.x,bt.y),X>0){const qt=Fr(pt,Nt,o,a);n.arc(qt.x,qt.y,X,R+Se,Nt+Math.PI)}const Ct=(R-X/v+(O+V/v))/2;if(n.arc(o,a,v,R-X/v,Ct,!0),n.arc(o,a,v,Ct,O+V/v,!0),V>0){const qt=Fr(ft,It,o,a);n.arc(qt.x,qt.y,V,It+Math.PI,O-Se)}const Ee=Fr(C,O,o,a);if(n.lineTo(Ee.x,Ee.y),j>0){const qt=Fr(C,it,o,a);n.arc(qt.x,qt.y,j,O-Se,it)}}else{n.moveTo(o,a);const xt=Math.cos(it)*p+o,bt=Math.sin(it)*p+a;n.lineTo(xt,bt);const Ct=Math.cos(ut)*p+o,Ee=Math.sin(ut)*p+a;n.lineTo(Ct,Ee)}n.closePath()}function sO(n,t,e,i,s){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){Mc(n,t,e,i,l,s);for(let d=0;d<r;++d)n.fill();isNaN(a)||(l=o+(a%le||le))}return Mc(n,t,e,i,l,s),n.fill(),l}function rO(n,t,e,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:d,borderJoinStyle:f,borderDash:p,borderDashOffset:v}=l,y=l.borderAlign==="inner";if(!d)return;n.setLineDash(p||[]),n.lineDashOffset=v,y?(n.lineWidth=d*2,n.lineJoin=f||"round"):(n.lineWidth=d,n.lineJoin=f||"bevel");let E=t.endAngle;if(r){Mc(n,t,e,i,E,s);for(let w=0;w<r;++w)n.stroke();isNaN(a)||(E=o+(a%le||le))}y&&eO(n,t,E),r||(Mc(n,t,e,i,E,s),n.stroke())}class sa extends Hi{constructor(e){super();et(this,"circumference");et(this,"endAngle");et(this,"fullCircles");et(this,"innerRadius");et(this,"outerRadius");et(this,"pixelMargin");et(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,s){const r=this.getProps(["x","y"],s),{angle:o,distance:a}=Ab(r,{x:e,y:i}),{startAngle:l,endAngle:d,innerRadius:f,outerRadius:p,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),y=(this.options.spacing+this.options.borderWidth)/2,w=Lt(v,d-l)>=le||Ca(o,l,d),T=Mi(a,f+y,p+y);return w&&T}getCenterPoint(e){const{x:i,y:s,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:f}=this.options,p=(r+o)/2,v=(a+l+f+d)/2;return{x:i+Math.cos(p)*v,y:s+Math.sin(p)*v}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:s}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>le?Math.floor(s/le):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*r,Math.sin(l)*r);const d=1-Math.sin(Math.min(ce,s||0)),f=r*d;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,sO(e,this,f,o,a),rO(e,this,f,o,a),e.restore()}}et(sa,"id","arc"),et(sa,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),et(sa,"defaultRoutes",{backgroundColor:"backgroundColor"}),et(sa,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function ry(n,t,e=t){n.lineCap=Lt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Lt(e.borderDash,t.borderDash)),n.lineDashOffset=Lt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Lt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Lt(e.borderWidth,t.borderWidth),n.strokeStyle=Lt(e.borderColor,t.borderColor)}function oO(n,t,e){n.lineTo(e.x,e.y)}function aO(n){return n.stepped?ID:n.tension||n.cubicInterpolationMode==="monotone"?OD:oO}function oy(n,t,e={}){const i=n.length,{start:s=0,end:r=i-1}=e,{start:o,end:a}=t,l=Math.max(s,o),d=Math.min(r,a),f=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:t.loop,ilen:d<l&&!f?i+d-l:d-l}}function lO(n,t,e,i){const{points:s,options:r}=t,{count:o,start:a,loop:l,ilen:d}=oy(s,e,i),f=aO(r);let{move:p=!0,reverse:v}=i||{},y,E,w;for(y=0;y<=d;++y)E=s[(a+(v?d-y:y))%o],!E.skip&&(p?(n.moveTo(E.x,E.y),p=!1):f(n,w,E,v,r.stepped),w=E);return l&&(E=s[(a+(v?d:0))%o],f(n,w,E,v,r.stepped)),!!l}function cO(n,t,e,i){const s=t.points,{count:r,start:o,ilen:a}=oy(s,e,i),{move:l=!0,reverse:d}=i||{};let f=0,p=0,v,y,E,w,T,O;const R=$=>(o+(d?a-$:$))%r,j=()=>{w!==T&&(n.lineTo(f,T),n.lineTo(f,w),n.lineTo(f,O))};for(l&&(y=s[R(0)],n.moveTo(y.x,y.y)),v=0;v<=a;++v){if(y=s[R(v)],y.skip)continue;const $=y.x,V=y.y,X=$|0;X===E?(V<w?w=V:V>T&&(T=V),f=(p*f+$)/++p):(j(),n.lineTo($,V),E=X,p=0,w=T=V),O=V}j()}function jd(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?cO:lO}function uO(n){return n.stepped?cC:n.tension||n.cubicInterpolationMode==="monotone"?uC:Us}function dO(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),ry(n,t.options),n.stroke(s)}function hO(n,t,e,i){const{segments:s,options:r}=t,o=jd(t);for(const a of s)ry(n,r,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const fO=typeof Path2D=="function";function pO(n,t,e,i){fO&&!t.options.segment?dO(n,t,e,i):hO(n,t,e,i)}class as extends Hi{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;eC(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=mC(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],r=this.points,o=Wb(this,{property:e,start:s,end:s});if(!o.length)return;const a=[],l=uO(i);let d,f;for(d=0,f=o.length;d<f;++d){const{start:p,end:v}=o[d],y=r[p],E=r[v];if(y===E){a.push(y);continue}const w=Math.abs((s-y[e])/(E[e]-y[e])),T=l(y,E,w,i.stepped);T[e]=t[e],a.push(T)}return a.length===1?a[0]:a}pathSegment(t,e,i){return jd(this)(t,this,e,i)}path(t,e,i){const s=this.segments,r=jd(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const a of s)o&=r(t,this,a,{start:e,end:e+i-1});return!!o}draw(t,e,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),pO(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}et(as,"id","line"),et(as,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),et(as,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),et(as,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Ig(n,t,e,i){const s=n.options,{[e]:r}=n.getProps([e],i);return Math.abs(t-r)<s.radius+s.hitRadius}class pc extends Hi{constructor(e){super();et(this,"parsed");et(this,"skip");et(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(e-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,i){return Ig(this,e,"x",i)}inYRange(e,i){return Ig(this,e,"y",i)}getCenterPoint(e){const{x:i,y:s}=this.getProps(["x","y"],e);return{x:i,y:s}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const s=i&&e.borderWidth||0;return(i+s)*2}draw(e,i){const s=this.options;this.skip||s.radius<.1||!Pi(this,i,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,Vd(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}et(pc,"id","point"),et(pc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),et(pc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ay(n,t){const{x:e,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],t);let a,l,d,f,p;return n.horizontal?(p=o/2,a=Math.min(e,s),l=Math.max(e,s),d=i-p,f=i+p):(p=r/2,a=e-p,l=e+p,d=Math.min(i,s),f=Math.max(i,s)),{left:a,top:d,right:l,bottom:f}}function ls(n,t,e,i){return n?0:Fe(t,e,i)}function gO(n,t,e){const i=n.options.borderWidth,s=n.borderSkipped,r=Rb(i);return{t:ls(s.top,r.top,0,e),r:ls(s.right,r.right,0,t),b:ls(s.bottom,r.bottom,0,e),l:ls(s.left,r.left,0,t)}}function mO(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=Zs(s),o=Math.min(t,e),a=n.borderSkipped,l=i||Wt(s);return{topLeft:ls(!l||a.top||a.left,r.topLeft,0,o),topRight:ls(!l||a.top||a.right,r.topRight,0,o),bottomLeft:ls(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:ls(!l||a.bottom||a.right,r.bottomRight,0,o)}}function vO(n){const t=ay(n),e=t.right-t.left,i=t.bottom-t.top,s=gO(n,e/2,i/2),r=mO(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function dd(n,t,e,i){const s=t===null,r=e===null,a=n&&!(s&&r)&&ay(n,i);return a&&(s||Mi(t,a.left,a.right))&&(r||Mi(e,a.top,a.bottom))}function bO(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function yO(n,t){n.rect(t.x,t.y,t.w,t.h)}function hd(n,t,e={}){const i=n.x!==e.x?-t:0,s=n.y!==e.y?-t:0,r=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}class gc extends Hi{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=vO(this),a=bO(o.radius)?Ia:yO;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,hd(o,e,r)),t.clip(),a(t,hd(r,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,hd(r,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return dd(this,t,e,i)}inXRange(t,e){return dd(this,t,null,e)}inYRange(t,e){return dd(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+s)/2:e,y:r?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}et(gc,"id","bar"),et(gc,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),et(gc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var xO=Object.freeze({__proto__:null,ArcElement:sa,BarElement:gc,LineElement:as,PointElement:pc});const Ud=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Og=Ud.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function ly(n){return Ud[n%Ud.length]}function cy(n){return Og[n%Og.length]}function _O(n,t){return n.borderColor=ly(t),n.backgroundColor=cy(t),++t}function EO(n,t){return n.backgroundColor=n.data.map(()=>ly(t++)),t}function wO(n,t){return n.backgroundColor=n.data.map(()=>cy(t++)),t}function SO(n){let t=0;return(e,i)=>{const s=n.getDatasetMeta(i).controller;s instanceof Gs?t=EO(e,t):s instanceof ma?t=wO(e,t):s&&(t=_O(e,t))}}function Mg(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function TO(n){return n&&(n.borderColor||n.backgroundColor)}var AO={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:s}=n.config,{elements:r}=s;if(!e.forceOverride&&(Mg(i)||TO(s)||r&&Mg(r)))return;const o=SO(n);i.forEach(o)}};function kO(n,t,e,i,s){const r=s.samples||i;if(r>=e)return n.slice(t,t+e);const o=[],a=(e-2)/(r-2);let l=0;const d=t+e-1;let f=t,p,v,y,E,w;for(o[l++]=n[f],p=0;p<r-2;p++){let T=0,O=0,R;const j=Math.floor((p+1)*a)+1+t,$=Math.min(Math.floor((p+2)*a)+1,e)+t,V=$-j;for(R=j;R<$;R++)T+=n[R].x,O+=n[R].y;T/=V,O/=V;const X=Math.floor(p*a)+1+t,C=Math.min(Math.floor((p+1)*a)+1,e)+t,{x:Z,y:it}=n[f];for(y=E=-1,R=X;R<C;R++)E=.5*Math.abs((Z-T)*(n[R].y-it)-(Z-n[R].x)*(O-it)),E>y&&(y=E,v=n[R],w=R);o[l++]=v,f=w}return o[l++]=n[d],o}function DO(n,t,e,i){let s=0,r=0,o,a,l,d,f,p,v,y,E,w;const T=[],O=t+e-1,R=n[t].x,$=n[O].x-R;for(o=t;o<t+e;++o){a=n[o],l=(a.x-R)/$*i,d=a.y;const V=l|0;if(V===f)d<E?(E=d,p=o):d>w&&(w=d,v=o),s=(r*s+a.x)/++r;else{const X=o-1;if(!Kt(p)&&!Kt(v)){const C=Math.min(p,v),Z=Math.max(p,v);C!==y&&C!==X&&T.push({...n[C],x:s}),Z!==y&&Z!==X&&T.push({...n[Z],x:s})}o>0&&X!==y&&T.push(n[X]),T.push(a),f=V,r=0,E=w=d,p=v=y=o}}return T}function uy(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Lg(n){n.data.datasets.forEach(t=>{uy(t)})}function CO(n,t){const e=t.length;let i=0,s;const{iScale:r}=n,{min:o,max:a,minDefined:l,maxDefined:d}=r.getUserBounds();return l&&(i=Fe(Li(t,r.axis,o).lo,0,e-1)),d?s=Fe(Li(t,r.axis,a).hi+1,i,e)-i:s=e-i,{start:i,count:s}}var IO={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){Lg(n);return}const i=n.width;n.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=n.getDatasetMeta(r),d=o||s.data;if(na([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const f=n.scales[l.xAxisID];if(f.type!=="linear"&&f.type!=="time"||n.options.parsing)return;let{start:p,count:v}=CO(l,d);const y=e.threshold||4*i;if(v<=y){uy(s);return}Kt(o)&&(s._data=d,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(w){this._data=w}}));let E;switch(e.algorithm){case"lttb":E=kO(d,p,v,i,e);break;case"min-max":E=DO(d,p,v,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}s._decimated=E})},destroy(n){Lg(n)}};function OO(n,t,e){const i=n.segments,s=n.points,r=t.points,o=[];for(const a of i){let{start:l,end:d}=a;d=sf(l,d,s);const f=Wd(e,s[l],s[d],a.loop);if(!t.segments){o.push({source:a,target:f,start:s[l],end:s[d]});continue}const p=Wb(t,f);for(const v of p){const y=Wd(e,r[v.start],r[v.end],v.loop),E=Ub(a,s,y);for(const w of E)o.push({source:w,target:v,start:{[e]:Pg(f,y,"start",Math.max)},end:{[e]:Pg(f,y,"end",Math.min)}})}}return o}function Wd(n,t,e,i){if(i)return;let s=t[n],r=e[n];return n==="angle"&&(s=vn(s),r=vn(r)),{property:n,start:s,end:r}}function MO(n,t){const{x:e=null,y:i=null}=n||{},s=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=sf(o,a,s);const l=s[o],d=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:d.x,y:i})):e!==null&&(r.push({x:e,y:l.y}),r.push({x:e,y:d.y}))}),r}function sf(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Pg(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function dy(n,t){let e=[],i=!1;return ae(n)?(i=!0,e=n):e=MO(n,t),e.length?new as({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function Rg(n){return n&&n.fill!==!1}function LO(n,t,e){let s=n[t].fill;const r=[t];let o;if(!e)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!xe(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function PO(n,t,e){const i=FO(n);if(Wt(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return xe(s)&&Math.floor(s)===s?RO(i[0],t,s,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function RO(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function NO(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Wt(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function BO(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:Wt(n)?i=n.value:i=t.getBaseValue(),i}function FO(n){const t=n.options,e=t.fill;let i=Lt(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function $O(n){const{scale:t,index:e,line:i}=n,s=[],r=i.segments,o=i.points,a=VO(t,e);a.push(dy({x:null,y:t.bottom},i));for(let l=0;l<r.length;l++){const d=r[l];for(let f=d.start;f<=d.end;f++)HO(s,o[f],a)}return new as({points:s,options:{}})}function VO(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function HO(n,t,e){const i=[];for(let s=0;s<e.length;s++){const r=e[s],{first:o,last:a,point:l}=zO(r,t,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function zO(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const s=i[e],r=n.segments,o=n.points;let a=!1,l=!1;for(let d=0;d<r.length;d++){const f=r[d],p=o[f.start][e],v=o[f.end][e];if(Mi(s,p,v)){a=s===p,l=s===v;break}}return{first:a,last:l,point:i}}class hy{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:s,y:r,radius:o}=this;return e=e||{start:0,end:le},t.arc(s,r,o,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:s}=this,r=t.angle;return{x:e+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function qO(n){const{chart:t,fill:e,line:i}=n;if(xe(e))return jO(t,e);if(e==="stack")return $O(n);if(e==="shape")return!0;const s=UO(n);return s instanceof hy?s:dy(s,i)}function jO(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function UO(n){return(n.scale||{}).getPointPositionForValue?YO(n):WO(n)}function WO(n){const{scale:t={},fill:e}=n,i=NO(e,t);if(xe(i)){const s=t.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function YO(n){const{scale:t,fill:e}=n,i=t.options,s=t.getLabels().length,r=i.reverse?t.max:t.min,o=BO(e,t,r),a=[];if(i.grid.circular){const l=t.getPointPositionForValue(0,r);return new hy({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(t.getPointPositionForValue(l,o));return a}function fd(n,t,e){const i=qO(t),{line:s,scale:r,axis:o}=t,a=s.options,l=a.fill,d=a.backgroundColor,{above:f=d,below:p=d}=l||{};i&&s.points.length&&(du(n,e),XO(n,{line:s,target:i,above:f,below:p,area:e,scale:r,axis:o}),hu(n))}function XO(n,t){const{line:e,target:i,above:s,below:r,area:o,scale:a}=t,l=e._loop?"angle":t.axis;n.save(),l==="x"&&r!==s&&(Ng(n,i,o.top),Bg(n,{line:e,target:i,color:s,scale:a,property:l}),n.restore(),n.save(),Ng(n,i,o.bottom)),Bg(n,{line:e,target:i,color:r,scale:a,property:l}),n.restore()}function Ng(n,t,e){const{segments:i,points:s}=t;let r=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:d}=a,f=s[l],p=s[sf(l,d,s)];r?(n.moveTo(f.x,f.y),r=!1):(n.lineTo(f.x,e),n.lineTo(f.x,f.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(p.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function Bg(n,t){const{line:e,target:i,property:s,color:r,scale:o}=t,a=OO(e,i,s);for(const{source:l,target:d,start:f,end:p}of a){const{style:{backgroundColor:v=r}={}}=l,y=i!==!0;n.save(),n.fillStyle=v,GO(n,o,y&&Wd(s,f,p)),n.beginPath();const E=!!e.pathSegment(n,l);let w;if(y){E?n.closePath():Fg(n,i,p,s);const T=!!i.pathSegment(n,d,{move:E,reverse:!0});w=E&&T,w||Fg(n,i,f,s)}n.closePath(),n.fill(w?"evenodd":"nonzero"),n.restore()}}function GO(n,t,e){const{top:i,bottom:s}=t.chart.chartArea,{property:r,start:o,end:a}=e||{};r==="x"&&(n.beginPath(),n.rect(o,i,a-o,s-i),n.clip())}function Fg(n,t,e,i){const s=t.interpolate(e,i);s&&n.lineTo(s.x,s.y)}var KO={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof as&&(l={visible:n.isDatasetVisible(o),index:o,fill:PO(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=LO(s,o,e.propagate))},beforeDraw(n,t,e){const i=e.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&fd(n.ctx,a,r))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;Rg(r)&&fd(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!Rg(i)||e.drawTime!=="beforeDatasetDraw"||fd(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const $g=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},JO=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class Vg extends Hi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=ne(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=Ne(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=$g(i,r);let d,f;e.font=s.string,this.isHorizontal()?(d=this.maxWidth,f=this._fitRows(o,r,a,l)+10):(f=this.maxHeight,d=this._fitCols(o,s,a,l)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(f,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],d=this.lineWidths=[0],f=s+a;let p=t;r.textAlign="left",r.textBaseline="middle";let v=-1,y=-f;return this.legendItems.forEach((E,w)=>{const T=i+e/2+r.measureText(E.text).width;(w===0||d[d.length-1]+T+2*a>o)&&(p+=f,d[d.length-(w>0?0:1)]=0,y+=f,v++),l[w]={left:0,top:y,row:v,width:T,height:s},d[d.length-1]+=T+a}),p}_fitCols(t,e,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],d=this.columnSizes=[],f=o-t;let p=a,v=0,y=0,E=0,w=0;return this.legendItems.forEach((T,O)=>{const{itemWidth:R,itemHeight:j}=ZO(i,e,r,T,s);O>0&&y+j+2*a>f&&(p+=v+a,d.push({width:v,height:y}),E+=v+a,w++,v=y=0),l[O]={left:E,top:y,col:w,width:R,height:j},v=Math.max(v,R),y+=j+a}),p+=v,d.push({width:v,height:y}),p}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Wr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ye(i,this.left+s,this.right-this.lineWidths[a]);for(const d of e)a!==d.row&&(a=d.row,l=Ye(i,this.left+s,this.right-this.lineWidths[a])),d.top+=this.top+t+s,d.left=o.leftForLtr(o.x(l),d.width),l+=d.width+s}else{let a=0,l=Ye(i,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const d of e)d.col!==a&&(a=d.col,l=Ye(i,this.top+t+s,this.bottom-this.columnSizes[a].height)),d.top=l,d.left+=this.left+s,d.left=o.leftForLtr(o.x(d.left),d.width),l+=d.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;du(t,this),this._draw(),hu(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:r,labels:o}=t,a=_e.color,l=Wr(t.rtl,this.left,this.width),d=Ne(o.font),{padding:f}=o,p=d.size,v=p/2;let y;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=d.string;const{boxWidth:E,boxHeight:w,itemHeight:T}=$g(o,p),O=function(X,C,Z){if(isNaN(E)||E<=0||isNaN(w)||w<0)return;s.save();const it=Lt(Z.lineWidth,1);if(s.fillStyle=Lt(Z.fillStyle,a),s.lineCap=Lt(Z.lineCap,"butt"),s.lineDashOffset=Lt(Z.lineDashOffset,0),s.lineJoin=Lt(Z.lineJoin,"miter"),s.lineWidth=it,s.strokeStyle=Lt(Z.strokeStyle,a),s.setLineDash(Lt(Z.lineDash,[])),o.usePointStyle){const ut={radius:w*Math.SQRT2/2,pointStyle:Z.pointStyle,rotation:Z.rotation,borderWidth:it},ft=l.xPlus(X,E/2),pt=C+v;Pb(s,ut,ft,pt,o.pointStyleWidth&&E)}else{const ut=C+Math.max((p-w)/2,0),ft=l.leftForLtr(X,E),pt=Zs(Z.borderRadius);s.beginPath(),Object.values(pt).some(It=>It!==0)?Ia(s,{x:ft,y:ut,w:E,h:w,radius:pt}):s.rect(ft,ut,E,w),s.fill(),it!==0&&s.stroke()}s.restore()},R=function(X,C,Z){lr(s,Z.text,X,C+T/2,d,{strikethrough:Z.hidden,textAlign:l.textAlign(Z.textAlign)})},j=this.isHorizontal(),$=this._computeTitleHeight();j?y={x:Ye(r,this.left+f,this.right-i[0]),y:this.top+f+$,line:0}:y={x:this.left+f,y:Ye(r,this.top+$+f,this.bottom-e[0].height),line:0},zb(this.ctx,t.textDirection);const V=T+f;this.legendItems.forEach((X,C)=>{s.strokeStyle=X.fontColor,s.fillStyle=X.fontColor;const Z=s.measureText(X.text).width,it=l.textAlign(X.textAlign||(X.textAlign=o.textAlign)),ut=E+v+Z;let ft=y.x,pt=y.y;l.setWidth(this.width),j?C>0&&ft+ut+f>this.right&&(pt=y.y+=V,y.line++,ft=y.x=Ye(r,this.left+f,this.right-i[y.line])):C>0&&pt+V>this.bottom&&(ft=y.x=ft+e[y.line].width+f,y.line++,pt=y.y=Ye(r,this.top+$+f,this.bottom-e[y.line].height));const It=l.x(ft);if(O(It,pt,X),ft=yD(it,ft+E+v,j?ft+ut:this.right,t.rtl),R(l.x(ft),pt,X),j)y.x+=ut+f;else if(typeof X.text!="string"){const Nt=d.lineHeight;y.y+=fy(X,Nt)+f}else y.y+=V}),qb(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Ne(e.font),s=Ke(e.padding);if(!e.display)return;const r=Wr(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=i.size/2,d=s.top+l;let f,p=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),f=this.top+d,p=Ye(t.align,p,this.right-v);else{const E=this.columnSizes.reduce((w,T)=>Math.max(w,T.height),0);f=d+Ye(t.align,this.top,this.bottom-E-t.labels.padding-this._computeTitleHeight())}const y=Ye(a,p,p+v);o.textAlign=r.textAlign(Xh(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,lr(o,e.text,y,f,i)}_computeTitleHeight(){const t=this.options.title,e=Ne(t.font),i=Ke(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,r;if(Mi(t,this.left,this.right)&&Mi(e,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Mi(t,s.left,s.left+s.width)&&Mi(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!eM(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=JO(s,i);s&&!r&&ne(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&ne(e.onHover,[t,i,this],this)}else i&&ne(e.onClick,[t,i,this],this)}}function ZO(n,t,e,i,s){const r=QO(i,n,t,e),o=tM(s,i,t.lineHeight);return{itemWidth:r,itemHeight:o}}function QO(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+i.measureText(s).width}function tM(n,t,e){let i=n;return typeof t.text!="string"&&(i=fy(t,e)),i}function fy(n,t){const e=n.text?n.text.length:0;return t*e}function eM(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var nM={id:"legend",_element:Vg,start(n,t,e){const i=n.legend=new Vg({ctx:n.ctx,options:e,chart:n});Ge.configure(n,i,e),Ge.addBox(n,i)},stop(n){Ge.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Ge.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const d=l.controller.getStyle(e?0:void 0),f=Ke(d.borderWidth);return{text:t[l.index].label,fillStyle:d.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:s||d.textAlign,borderRadius:o&&(a||d.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class rf extends Hi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=ae(i.text)?i.text.length:1;this._padding=Ke(i.padding);const r=s*Ne(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,d,f,p;return this.isHorizontal()?(f=Ye(a,i,r),p=e+t,d=r-i):(o.position==="left"?(f=i+t,p=Ye(a,s,e),l=ce*-.5):(f=r-t,p=Ye(a,e,s),l=ce*.5),d=s-e),{titleX:f,titleY:p,maxWidth:d,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Ne(e.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:d}=this._drawArgs(r);lr(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:d,textAlign:Xh(e.align),textBaseline:"middle",translation:[o,a]})}}function iM(n,t){const e=new rf({ctx:n.ctx,options:t,chart:n});Ge.configure(n,e,t),Ge.addBox(n,e),n.titleBlock=e}var sM={id:"title",_element:rf,start(n,t,e){iM(n,e)},stop(n){const t=n.titleBlock;Ge.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Ge.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const jl=new WeakMap;var rM={id:"subtitle",start(n,t,e){const i=new rf({ctx:n.ctx,options:e,chart:n});Ge.configure(n,i,e),Ge.addBox(n,i),jl.set(n,i)},stop(n){Ge.removeBox(n,jl.get(n)),jl.delete(n)},beforeUpdate(n,t,e){const i=jl.get(n);Ge.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ra={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,r=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const d=l.getCenterPoint(),f=Fd(t,d);f<s&&(s=f,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function Jn(n,t){return t&&(ae(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function ki(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function oM(n,t){const{element:e,datasetIndex:i,index:s}=t,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function Hg(n,t){const e=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=t,l=Ne(t.bodyFont),d=Ne(t.titleFont),f=Ne(t.footerFont),p=r.length,v=s.length,y=i.length,E=Ke(t.padding);let w=E.height,T=0,O=i.reduce(($,V)=>$+V.before.length+V.lines.length+V.after.length,0);if(O+=n.beforeBody.length+n.afterBody.length,p&&(w+=p*d.lineHeight+(p-1)*t.titleSpacing+t.titleMarginBottom),O){const $=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=y*$+(O-y)*l.lineHeight+(O-1)*t.bodySpacing}v&&(w+=t.footerMarginTop+v*f.lineHeight+(v-1)*t.footerSpacing);let R=0;const j=function($){T=Math.max(T,e.measureText($).width+R)};return e.save(),e.font=d.string,ee(n.title,j),e.font=l.string,ee(n.beforeBody.concat(n.afterBody),j),R=t.displayColors?o+2+t.boxPadding:0,ee(i,$=>{ee($.before,j),ee($.lines,j),ee($.after,j)}),R=0,e.font=f.string,ee(n.footer,j),e.restore(),T+=E.width,{width:T,height:w}}function aM(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function lM(n,t,e,i){const{x:s,width:r}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&s+r+o>t.width||n==="right"&&s-r-o<0)return!0}function cM(n,t,e,i){const{x:s,width:r}=e,{width:o,chartArea:{left:a,right:l}}=n;let d="center";return i==="center"?d=s<=(a+l)/2?"left":"right":s<=r/2?d="left":s>=o-r/2&&(d="right"),lM(d,n,t,e)&&(d="center"),d}function zg(n,t,e){const i=e.yAlign||t.yAlign||aM(n,e);return{xAlign:e.xAlign||t.xAlign||cM(n,t,e,i),yAlign:i}}function uM(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function dM(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function qg(n,t,e,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,d=s+r,{topLeft:f,topRight:p,bottomLeft:v,bottomRight:y}=Zs(o);let E=uM(t,a);const w=dM(t,l,d);return l==="center"?a==="left"?E+=d:a==="right"&&(E-=d):a==="left"?E-=Math.max(f,v)+s:a==="right"&&(E+=Math.max(p,y)+s),{x:Fe(E,0,i.width-t.width),y:Fe(w,0,i.height-t.height)}}function Ul(n,t,e){const i=Ke(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function jg(n){return Jn([],ki(n))}function hM(n,t,e){return Es(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Ug(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const py={beforeTitle:Ti,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Ti,beforeBody:Ti,beforeLabel:Ti,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Kt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ti,afterBody:Ti,beforeFooter:Ti,footer:Ti,afterFooter:Ti};function on(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?py[t].call(e,i):s}class Yd extends Hi{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,r=new Yb(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=hM(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=on(i,"beforeTitle",this,t),r=on(i,"title",this,t),o=on(i,"afterTitle",this,t);let a=[];return a=Jn(a,ki(s)),a=Jn(a,ki(r)),a=Jn(a,ki(o)),a}getBeforeBody(t,e){return jg(on(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return ee(t,r=>{const o={before:[],lines:[],after:[]},a=Ug(i,r);Jn(o.before,ki(on(a,"beforeLabel",this,r))),Jn(o.lines,on(a,"label",this,r)),Jn(o.after,ki(on(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,e){return jg(on(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=on(i,"beforeFooter",this,t),r=on(i,"footer",this,t),o=on(i,"afterFooter",this,t);let a=[];return a=Jn(a,ki(s)),a=Jn(a,ki(r)),a=Jn(a,ki(o)),a}_createItems(t){const e=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,d;for(l=0,d=e.length;l<d;++l)a.push(oM(this.chart,e[l]));return t.filter&&(a=a.filter((f,p,v)=>t.filter(f,p,v,i))),t.itemSort&&(a=a.sort((f,p)=>t.itemSort(f,p,i))),ee(a,f=>{const p=Ug(t.callbacks,f);s.push(on(p,"labelColor",this,f)),r.push(on(p,"labelPointStyle",this,f)),o.push(on(p,"labelTextColor",this,f))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=ra[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Hg(this,i),d=Object.assign({},a,l),f=zg(this.chart,i,d),p=qg(i,d,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,r={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const r=this.getCaretPosition(t,i,s);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:d,bottomLeft:f,bottomRight:p}=Zs(a),{x:v,y}=t,{width:E,height:w}=e;let T,O,R,j,$,V;return r==="center"?($=y+w/2,s==="left"?(T=v,O=T-o,j=$+o,V=$-o):(T=v+E,O=T+o,j=$-o,V=$+o),R=T):(s==="left"?O=v+Math.max(l,f)+o:s==="right"?O=v+E-Math.max(d,p)-o:O=this.caretX,r==="top"?(j=y,$=j-o,T=O-o,R=O+o):(j=y+w,$=j+o,T=O+o,R=O-o),V=j),{x1:T,x2:O,x3:R,y1:j,y2:$,y3:V}}drawTitle(t,e,i){const s=this.title,r=s.length;let o,a,l;if(r){const d=Wr(i.rtl,this.x,this.width);for(t.x=Ul(this,i.titleAlign,i),e.textAlign=d.textAlign(i.titleAlign),e.textBaseline="middle",o=Ne(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,l=0;l<r;++l)e.fillText(s[l],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:d}=r,f=Ne(r.bodyFont),p=Ul(this,"left",r),v=s.x(p),y=l<f.lineHeight?(f.lineHeight-l)/2:0,E=e.y+y;if(r.usePointStyle){const w={radius:Math.min(d,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=s.leftForLtr(v,d)+d/2,O=E+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Vd(t,w,T,O),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Vd(t,w,T,O)}else{t.lineWidth=Wt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const w=s.leftForLtr(v,d),T=s.leftForLtr(s.xPlus(v,1),d-2),O=Zs(o.borderRadius);Object.values(O).some(R=>R!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Ia(t,{x:w,y:E,w:d,h:l,radius:O}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Ia(t,{x:T,y:E+1,w:d-2,h:l-2,radius:O}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(w,E,d,l),t.strokeRect(w,E,d,l),t.fillStyle=o.backgroundColor,t.fillRect(T,E+1,d-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:d,boxPadding:f}=i,p=Ne(i.bodyFont);let v=p.lineHeight,y=0;const E=Wr(i.rtl,this.x,this.width),w=function(Z){e.fillText(Z,E.x(t.x+y),t.y+v/2),t.y+=v+r},T=E.textAlign(o);let O,R,j,$,V,X,C;for(e.textAlign=o,e.textBaseline="middle",e.font=p.string,t.x=Ul(this,T,i),e.fillStyle=i.bodyColor,ee(this.beforeBody,w),y=a&&T!=="right"?o==="center"?d/2+f:d+2+f:0,$=0,X=s.length;$<X;++$){for(O=s[$],R=this.labelTextColors[$],e.fillStyle=R,ee(O.before,w),j=O.lines,a&&j.length&&(this._drawColorBox(e,t,$,E,i),v=Math.max(p.lineHeight,l)),V=0,C=j.length;V<C;++V)w(j[V]),v=p.lineHeight;ee(O.after,w)}y=0,v=p.lineHeight,ee(this.afterBody,w),t.y-=r}drawFooter(t,e,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Wr(i.rtl,this.x,this.width);for(t.x=Ul(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",o=Ne(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(s[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:d,height:f}=i,{topLeft:p,topRight:v,bottomLeft:y,bottomRight:E}=Zs(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(a+p,l),o==="top"&&this.drawCaret(t,e,i,s),e.lineTo(a+d-v,l),e.quadraticCurveTo(a+d,l,a+d,l+v),o==="center"&&r==="right"&&this.drawCaret(t,e,i,s),e.lineTo(a+d,l+f-E),e.quadraticCurveTo(a+d,l+f,a+d-E,l+f),o==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(a+y,l+f),e.quadraticCurveTo(a,l+f,a,l+f-y),o==="center"&&r==="left"&&this.drawCaret(t,e,i,s),e.lineTo(a,l+p),e.quadraticCurveTo(a,l,a+p,l),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=ra[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Hg(this,t),l=Object.assign({},o,this._size),d=zg(e,t,l),f=qg(t,l,d,e);(s._to!==f.x||r._to!==f.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Ke(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,e),zb(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),qb(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:a,index:l})=>{const d=this.chart.getDatasetMeta(a);if(!d)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:d.data[l],index:l}}),r=!Ac(i,s),o=this._positionChanged(s,e);(r||o)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,i),a=this._positionChanged(o,t),l=e||!Ac(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:s,options:r}=this,o=ra[r.position].call(this,t,e);return o!==!1&&(i!==o.x||s!==o.y)}}et(Yd,"positioners",ra);var fM={id:"tooltip",_element:Yd,positioners:ra,afterInit(n,t,e){e&&(n.tooltip=new Yd({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:py},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},pM=Object.freeze({__proto__:null,Colors:AO,Decimation:IO,Filler:KO,Legend:nM,SubTitle:rM,Title:sM,Tooltip:fM});const gM=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function mM(n,t,e,i){const s=n.indexOf(t);if(s===-1)return gM(n,t,e,i);const r=n.lastIndexOf(t);return s!==r?e:s}const vM=(n,t)=>n===null?null:Fe(Math.round(n),0,t);function Wg(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class Xd extends hr{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:r}of e)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Kt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:mM(i,t,Lt(e,t),this._addedLabels),vM(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)s.push({value:o});return s}getLabelForValue(t){return Wg.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}et(Xd,"id","category"),et(Xd,"defaults",{ticks:{callback:Wg}});function bM(n,t){const e=[],{bounds:s,step:r,min:o,max:a,precision:l,count:d,maxTicks:f,maxDigits:p,includeBounds:v}=n,y=r||1,E=f-1,{min:w,max:T}=t,O=!Kt(o),R=!Kt(a),j=!Kt(d),$=(T-w)/(p+1);let V=Vp((T-w)/E/y)*y,X,C,Z,it;if(V<1e-14&&!O&&!R)return[{value:w},{value:T}];it=Math.ceil(T/V)-Math.floor(w/V),it>E&&(V=Vp(it*V/E/y)*y),Kt(l)||(X=Math.pow(10,l),V=Math.ceil(V*X)/X),s==="ticks"?(C=Math.floor(w/V)*V,Z=Math.ceil(T/V)*V):(C=w,Z=T),O&&R&&r&&hD((a-o)/r,V/1e3)?(it=Math.round(Math.min((a-o)/V,f)),V=(a-o)/it,C=o,Z=a):j?(C=O?o:C,Z=R?a:Z,it=d-1,V=(Z-C)/it):(it=(Z-C)/V,fa(it,Math.round(it),V/1e3)?it=Math.round(it):it=Math.ceil(it));const ut=Math.max(Hp(V),Hp(C));X=Math.pow(10,Kt(l)?ut:l),C=Math.round(C*X)/X,Z=Math.round(Z*X)/X;let ft=0;for(O&&(v&&C!==o?(e.push({value:o}),C<o&&ft++,fa(Math.round((C+ft*V)*X)/X,o,Yg(o,$,n))&&ft++):C<o&&ft++);ft<it;++ft){const pt=Math.round((C+ft*V)*X)/X;if(R&&pt>a)break;e.push({value:pt})}return R&&v&&Z!==a?e.length&&fa(e[e.length-1].value,a,Yg(a,$,n))?e[e.length-1].value=a:e.push({value:a}):(!R||Z===a)&&e.push({value:Z}),e}function Yg(n,t,{horizontal:e,minRotation:i}){const s=Vn(i),r=(e?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+n).length;return Math.min(t/r,o)}class Lc extends hr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Kt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=e?s:l,a=l=>r=i?r:l;if(t){const l=li(s),d=li(r);l<0&&d<0?a(0):l>0&&d>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(s-l)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=bM(s,r);return t.bounds==="ticks"&&Tb(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Qa(t,this.chart.options.locale,this.options.ticks.format)}}class Gd extends Lc{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=xe(t)?t:0,this.max=xe(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Vn(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}et(Gd,"id","linear"),et(Gd,"defaults",{ticks:{callback:uu.formatters.numeric}});const Ma=n=>Math.floor(os(n)),qs=(n,t)=>Math.pow(10,Ma(n)+t);function Xg(n){return n/Math.pow(10,Ma(n))===1}function Gg(n,t,e){const i=Math.pow(10,e),s=Math.floor(n/i);return Math.ceil(t/i)-s}function yM(n,t){const e=t-n;let i=Ma(e);for(;Gg(n,t,i)>10;)i++;for(;Gg(n,t,i)<10;)i--;return Math.min(i,Ma(n))}function xM(n,{min:t,max:e}){t=gn(n.min,t);const i=[],s=Ma(t);let r=yM(t,e),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,d=Math.round((t-l)*o)/o,f=Math.floor((t-l)/a/10)*a*10;let p=Math.floor((d-f)/Math.pow(10,r)),v=gn(n.min,Math.round((l+f+p*Math.pow(10,r))*o)/o);for(;v<e;)i.push({value:v,major:Xg(v),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(r++,p=2,o=r>=0?1:o),v=Math.round((l+f+p*Math.pow(10,r))*o)/o;const y=gn(n.max,v);return i.push({value:y,major:Xg(y),significand:p}),i}class Kd extends hr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Lc.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return xe(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=xe(t)?Math.max(0,t):null,this.max=xe(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!xe(this._userMin)&&(this.min=t===qs(this.min,0)?qs(this.min,-1):qs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=t?i:a,o=a=>s=e?s:a;i===s&&(i<=0?(r(1),o(10)):(r(qs(i,-1)),o(qs(s,1)))),i<=0&&r(qs(s,-1)),s<=0&&o(qs(i,1)),this.min=i,this.max=s}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=xM(e,this);return t.bounds==="ticks"&&Tb(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Qa(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=os(t),this._valueRange=os(this.max)-os(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(os(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}et(Kd,"id","logarithmic"),et(Kd,"defaults",{ticks:{callback:uu.formatters.logarithmic,major:{enabled:!0}}});function Jd(n){const t=n.ticks;if(t.display&&n.display){const e=Ke(t.backdropPadding);return Lt(t.font&&t.font.size,_e.font.size)+e.height}return 0}function _M(n,t,e){return e=ae(e)?e:[e],{w:CD(n,t.string,e),h:e.length*t.lineHeight}}function Kg(n,t,e,i,s){return n===i||n===s?{start:t-e/2,end:t+e/2}:n<i||n>s?{start:t-e,end:t}:{start:t,end:t+e}}function EM(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?ce/r:0;for(let l=0;l<r;l++){const d=o.setContext(n.getPointLabelContext(l));s[l]=d.padding;const f=n.getPointPosition(l,n.drawingArea+s[l],a),p=Ne(d.font),v=_M(n.ctx,p,n._pointLabels[l]);i[l]=v;const y=vn(n.getIndexAngle(l)+a),E=Math.round(Wh(y)),w=Kg(E,f.x,v.w,0,180),T=Kg(E,f.y,v.h,90,270);wM(e,t,y,w,T)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=AM(n,i,s)}function wM(n,t,e,i,s){const r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/r,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/r,n.r=Math.max(n.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/o,n.t=Math.min(n.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function SM(n,t,e){const i=n.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=e,l=n.getPointPosition(t,i+s+o,r),d=Math.round(Wh(vn(l.angle+Se))),f=CM(l.y,a.h,d),p=kM(d),v=DM(l.x,a.w,p);return{visible:!0,x:l.x,y:f,textAlign:p,left:v,top:f,right:v+a.w,bottom:f+a.h}}function TM(n,t){if(!t)return!0;const{left:e,top:i,right:s,bottom:r}=n;return!(Pi({x:e,y:i},t)||Pi({x:e,y:r},t)||Pi({x:s,y:i},t)||Pi({x:s,y:r},t))}function AM(n,t,e){const i=[],s=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Jd(r)/2,additionalAngle:o?ce/s:0};let d;for(let f=0;f<s;f++){l.padding=e[f],l.size=t[f];const p=SM(n,f,l);i.push(p),a==="auto"&&(p.visible=TM(p,d),p.visible&&(d=p))}return i}function kM(n){return n===0||n===180?"center":n<180?"left":"right"}function DM(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function CM(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function IM(n,t,e){const{left:i,top:s,right:r,bottom:o}=e,{backdropColor:a}=t;if(!Kt(a)){const l=Zs(t.borderRadius),d=Ke(t.backdropPadding);n.fillStyle=a;const f=i-d.left,p=s-d.top,v=r-i+d.width,y=o-s+d.height;Object.values(l).some(E=>E!==0)?(n.beginPath(),Ia(n,{x:f,y:p,w:v,h:y,radius:l}),n.fill()):n.fillRect(f,p,v,y)}}function OM(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let s=t-1;s>=0;s--){const r=n._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(n.getPointLabelContext(s));IM(e,o,r);const a=Ne(o.font),{x:l,y:d,textAlign:f}=r;lr(e,n._pointLabels[s],l,d+a.lineHeight/2,a,{color:o.color,textAlign:f,textBaseline:"middle"})}}function gy(n,t,e,i){const{ctx:s}=n;if(e)s.arc(n.xCenter,n.yCenter,t,0,le);else{let r=n.getPointPosition(0,t);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,t),s.lineTo(r.x,r.y)}}function MM(n,t,e,i,s){const r=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash),r.lineDashOffset=s.dashOffset,r.beginPath(),gy(n,e,o,i),r.closePath(),r.stroke(),r.restore())}function LM(n,t,e){return Es(n,{label:e,index:t,type:"pointLabel"})}class oa extends Lc{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Ke(Jd(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=xe(t)&&!isNaN(t)?t:0,this.max=xe(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Jd(this.options))}generateTickLabels(t){Lc.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const s=ne(this.options.pointLabels.callback,[e,i],this);return s||s===0?s:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?EM(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){const e=le/(this._pointLabels.length||1),i=this.options.startAngle||0;return vn(t*e+Vn(i))}getDistanceFromCenterForValue(t){if(Kt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Kt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return LM(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const s=this.getIndexAngle(t)-Se+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:s,bottom:r}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),gy(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:s,border:r}=e,o=this._pointLabels.length;let a,l,d;if(e.pointLabels.display&&OM(this,o),s.display&&this.ticks.forEach((f,p)=>{if(p!==0||p===0&&this.min<0){l=this.getDistanceFromCenterForValue(f.value);const v=this.getContext(p),y=s.setContext(v),E=r.setContext(v);MM(this,y,l,o,E)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const f=i.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:v}=f;!v||!p||(t.lineWidth=v,t.strokeStyle=p,t.setLineDash(f.borderDash),t.lineDashOffset=f.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),d=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(d.x,d.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const d=i.setContext(this.getContext(l)),f=Ne(d.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),d.showLabelBackdrop){t.font=f.string,o=t.measureText(a.label).width,t.fillStyle=d.backdropColor;const p=Ke(d.backdropPadding);t.fillRect(-o/2-p.left,-r-f.size/2-p.top,o+p.width,f.size+p.height)}lr(t,a.label,0,-r,f,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),t.restore()}drawTitle(){}}et(oa,"id","radialLinear"),et(oa,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:uu.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),et(oa,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),et(oa,"descriptors",{angleLines:{_fallback:"grid"}});const pu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ln=Object.keys(pu);function Jg(n,t){return n-t}function Zg(n,t){if(Kt(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),xe(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(s&&(o=s==="week"&&(ro(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,s)),+o)}function Qg(n,t,e,i){const s=ln.length;for(let r=ln.indexOf(n);r<s-1;++r){const o=pu[ln[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return ln[r]}return ln[s-1]}function PM(n,t,e,i,s){for(let r=ln.length-1;r>=ln.indexOf(e);r--){const o=ln[r];if(pu[o].common&&n._adapter.diff(s,i,o)>=t-1)return o}return ln[e?ln.indexOf(e):0]}function RM(n){for(let t=ln.indexOf(n)+1,e=ln.length;t<e;++t)if(pu[ln[t]].common)return ln[t]}function tm(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=Yh(e,t),r=e[i]>=t?e[i]:e[s];n[r]=!0}}function NM(n,t,e,i){const s=n._adapter,r=+s.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function em(n,t,e){const i=[],s={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,i.push({value:a,major:!1});return r===0||!e?i:NM(n,i,s,e)}class La extends hr{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new UC._date(t.adapters.date);s.init(e),ha(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Zg(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(d){!o&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!a&&!isNaN(d.max)&&(r=Math.max(r,d.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=xe(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),r=xe(r)&&!isNaN(r)?r:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=mD(s,r,o);return this._unit=e.unit||(i.autoSkip?Qg(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):PM(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:RM(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),em(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=Fe(e,0,o),i=Fe(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Qg(r.minUnit,e,i,this._getLabelCapacity(e)),a=Lt(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,d=ro(l)||l===!0,f={};let p=e,v,y;if(d&&(p=+t.startOf(p,"isoWeek",l)),p=+t.startOf(p,d?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);const E=s.ticks.source==="data"&&this.getDataTimestamps();for(v=p,y=0;v<i;v=+t.add(v,a,o),y++)tm(f,v,E);return(v===i||s.bounds==="ticks"||y===1)&&tm(f,v,E),Object.keys(f).sort(Jg).map(w=>+w)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,r=this._unit,o=e||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,s){const r=this.options,o=r.ticks.callback;if(o)return ne(o,[t,e,i],this);const a=r.time.displayFormats,l=this._unit,d=this._majorUnit,f=l&&a[l],p=d&&a[d],v=i[e],y=d&&p&&v&&v.major;return this._adapter.format(t,s||(y?p:f))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Vn(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,r=this._tickFormatFunction(t,0,em(this,[t],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(Zg(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Db(t.sort(Jg))}}et(La,"id","time"),et(La,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Wl(n,t,e){let i=0,s=n.length-1,r,o,a,l;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=Li(n,"pos",t)),{pos:r,time:a}=n[i],{pos:o,time:l}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=Li(n,"time",t)),{time:r,pos:a}=n[i],{time:o,pos:l}=n[s]);const d=o-r;return d?a+(l-a)*(t-r)/d:a}class Zd extends La{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Wl(e,this.min),this._tableRange=Wl(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],r=[];let o,a,l,d,f;for(o=0,a=t.length;o<a;++o)d=t[o],d>=e&&d<=i&&s.push(d);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)f=s[o+1],l=s[o-1],d=s[o],Math.round((f+l)/2)!==d&&r.push({time:d,pos:o/(a-1)});return r}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Wl(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Wl(this._table,i*this._tableRange+this._minPos,!0)}}et(Zd,"id","timeseries"),et(Zd,"defaults",La.defaults);var BM=Object.freeze({__proto__:null,CategoryScale:Xd,LinearScale:Gd,LogarithmicScale:Kd,RadialLinearScale:oa,TimeScale:La,TimeSeriesScale:Zd});const FM=[jC,xO,pM,BM];ei.register(...FM);A0.registerModules([k0]);const mc=[{id:"rg2-stats-summary",title:"Summary",active:"true"},{id:"rg2-legs",title:"Leg times"},{id:"rg2-cumulative",title:"Cumulative times"},{id:"rg2-split-times",title:"Split times"},{id:"rg2-time-loss",title:"Time loss"}],$M=['<div id="rg2-stats-summary" class="container"></div><div style="height: 400px;"><canvas id="rg2-splits-chart"></canvas></div>','<div id="rg2-leg-table" style="width: 950px; height: 100%" class="ag-theme-balham"></div>','<div id="rg2-race-table" style="width: 950px; height: 100%;" class="ag-theme-balham"></div>',`<div id="rg2-results-table" class="rg2-results-table-container">
     <div id="rg2-results-grid-wrapper">
       <div id="rg2-results-grid" style="height: 100%" class="ag-theme-balham"></div>
     </div>
   </div>`,`<div id="rg2-time-loss" class="container">
      <div class="rg2-control-slider-grid d-flex flex-column">
        <div class="d-flex">
          <div id="rg2-control-number"></div>
          <div id="rg2-control-slider"></div>
        </div>
        <div id="rg2-loss-details" class="d-flex justify-content-center"></div>
      </div>
      <canvas id="rg2-loss-chart"></canvas>
    </div>`];let ve=null,va=null,H=[],Qd=!1,Ut=null,Pe=0,Qn=[],ti=[],Mt=null,Yl,Xl,Le=1,my=9,Ie=2;function VM(){if(Ut.excludeType===F.EXCLUDED_REAL_SPLITS)for(let n=0;n<H.length;n+=1){let t=0;for(let e=1;e<Ut.exclude.length;e+=1){if(Ut.exclude[e]){const i=Math.min(H[n].splits[e]-H[n].splits[e-1]-t,Ut.allowed[e]);t=t+i}H[n].splits[e]=H[n].splits[e]-t,H[n].legSplits[e]=H[n].splits[e]-H[n].splits[e-1]}}}function HM(n){for(let t=0;t<H.length;t+=1){n===0&&(H[t].predictedSplits=[],H[t].loss=[],H[t].totalLoss=[]),H[t].predictedSplits[n]=[],H[t].predictedSplits[n][0]=0,H[t].loss[n]=[],H[t].loss[n][0]=0;let e=0;for(let i=0;i<Pe;i+=1)H[t].performanceIndex[n]>0?H[t].predictedSplits[n][i]=parseInt(Ut.refLegTime[n][i]/H[t].normalPerformanceIndex[n],10):H[t].predictedSplits[n][i]=H[t].legSplits[i],H[t].loss[n][i]=H[t].legSplits[i]-H[t].predictedSplits[n][i],H[t].loss[n][i]<0&&(H[t].loss[n][i]=0),e=e+H[t].loss[n][i];H[t].totalLoss[n]=e}}function zM(n){n===0&&(Ut.refLegTime=[],Ut.refTime=[]);let t=[],e=[];for(let i=0;i<Pe;i+=1){if(t.length=0,!Ut.exclude[i])for(let r=0;r<H.length;r+=1)H[r].iterSplits[n][i]!==0&&t.push(H[r].iterSplits[n][i]);const s=th(t,25);e.push(s.median)}Ut.refLegTime[n]=e.slice(0),Ut.refTime[n]=e.reduce((i,s)=>i+s);for(let i=0;i<H.length;i+=1){n===0&&(H[i].refRatio=[],H[i].performanceIndex=[],H[i].normalPerformanceIndex=[],H[i].totalSecs=[]),H[i].refRatio[n]=[];const s=[];for(let d=0;d<Pe;d+=1)H[i].iterSplits[n][d]===0?H[i].refRatio[n][d]=0:H[i].refRatio[n][d]=Ut.refLegTime[n][d]/H[i].iterSplits[n][d],s.push(H[i].refRatio[n][d]);const r=s.filter(d=>d>0),o=th(r,100);H[i].performanceIndex[n]=o.median,H[i].totalSecs[n]=H[i].iterSplits[n].reduce((d,f)=>d+f);let a=0,l=0;for(let d=0;d<Pe;d+=1)H[i].iterSplits[n][d]!==0&&(a=a+H[i].refRatio[n][d]*Ut.refLegTime[n][d],l=l+Ut.refLegTime[n][d]);a===0?H[i].normalPerformanceIndex[n]=0:H[i].normalPerformanceIndex[n]=a/l}}function qM(n){for(let t=0;t<H.length;t+=1){n===0&&(H[t].iterSplits=[]);let e=[];for(let i=0;i<Pe;i+=1)n===0?e.push(H[t].legSplits[i]):e.push(H[t].predictedSplits[n-1][i]);H[t].iterSplits[n]=e.slice(0)}}function jM(){Ie=Math.max(Ie-1,0),Ay()}function UM(n){let t="",e="";ve.splits.length-1===Le?t=U("Finish"):(t=U("Control"),e=": "+Le);let i=`<div>${t}${e}</div>`;if(document.getElementById("rg2-control-number").innerHTML=i,i="",Ut.exclude[Le])i=U("Control excluded","");else{const s=n.filter(o=>o.loss>0).map(o=>o.loss),r=th(s,100);i=`<div class="px-2 fw-bold">${U("Runners")}: ${r.count}</div >`,i+=`<div class="px-2 fw-bold">${U("Average")}: ${parseInt(r.mean,10)}s (${parseInt(r.mean*1e3/Ut.refLegTime[Ie][Le],10)/10}%)</div>`,i+=`<div class="px-2 fw-bold">${U("Median")}: ${r.median}s (${parseInt(r.median*1e3/Ut.refLegTime[Ie][Le],10)/10}%)</div>`}document.getElementById("rg2-loss-details").innerHTML=i}function WM(){document.getElementById("rg2-stats-panel-tab-headers").addEventListener("show.bs.tab",n=>{ZM(n)}),document.getElementById("rg2-stats-summary-tab-label").click()}function of(){Xl!==void 0&&(Xl.destroy(),Xl=void 0);const n=document.getElementById("rg2-loss-chart"),t=p=>i.length===0?F.DARK_GREEN_30:i[p.dataIndex].activeRunner?F.DARK_GREEN:F.DARK_GREEN_30,e=p=>i.length===0?F.RED_30:i[p.dataIndex].activeRunner?F.RED:F.RED_30,i=[];Ut.exclude[Le]||H.map(p=>{if(parseInt(p.legSplits[Le],10)>0){let v={};v.loss=parseInt(p.loss[Ie][Le],10),v.total=parseInt(p.legSplits[Le],10),v.predicted=v.total-v.loss,v.pos=p.legpos[Le],v.name=p.name,p.rawid===va&&(v.activeRunner=!0),i.push(v)}}),i.sort((p,v)=>p.total-v.total);const s=i.map(p=>p.predicted),r=i.map(p=>p.loss),o=i.map(p=>p.pos),a=i.map(()=>Ut.refLegTime[Ie][Le]),l=H.reduce((p,v)=>Math.max(p,v.legSplits[Le]),0),d=parseInt((l+299)/300,10)*300;UM(i),Xl=new ei(n,{data:{labels:o,datasets:[{label:"Predicted",type:"bar",data:s,backgroundColor:t},{label:"Loss",type:"bar",data:r,yAxisID:"yLoss",backgroundColor:e},{label:"Reference time",type:"line",data:a,borderColor:F.RED,backgroundColor:F.WHITE,borderDash:[5,5],yAxisID:"yLoss",pointStyle:"circle",pointRadius:0,pointHoverRadius:0}]},options:{scales:{x:{stacked:!0,title:{display:!0,text:"Position"}},yLoss:{stacked:!0,min:0,max:d,title:{display:!0,text:"Time (s)"}}},plugins:{tooltip:{callbacks:{label(p){let v=p.dataset.label+": ";return p.dataset.label==="Loss"?v+=fe(i[p.dataIndex].loss):v+=fe(i[p.dataIndex].predicted),v},title(p){return i[p[0].dataIndex].name+": "+fe(i[p[0].dataIndex].total)}}}}}});const f=document.querySelector("#rg2-loss-chart");f.onwheel=p=>{p.preventDefault(),p.deltaY<0?Le=Le===ve.splits.length-1?1:Le+1:Le=Le>1?Le-1:ve.splits.length-1,of()}}function YM(){Le=1,of()}function XM(){let n=[];for(let t=1;t<Ut.codes.length;t+=1){n.length=0;for(let s=0;s<H.length;s+=1)H[s].resultid===H[s].rawid&&(H[s].isScoreEvent?H[s].variant===Ut.courseid&&n.push({time:H[s].legSplits[t],id:s}):H[s].courseid===Ut.courseid&&n.push({time:H[s].legSplits[t],id:s}));n.sort(rm);let e=0,i=0;for(let s=0;s<n.length;s+=1){if(Ut.exclude[t]){H[n[s].id].legpos[t]=0;continue}n[s].time!==i?n[s].time===0?(H[n[s].id].legpos[t]=0,i=0,e=0):(H[n[s].id].legpos[t]=s+1,i=n[s].time,e=s+1):H[n[s].id].legpos[t]=e}}n.length=0;for(let t=1;t<Ut.codes.length;t+=1){n.length=0;let e=0;for(let r=0;r<H.length;r+=1)H[r].resultid===H[r].rawid&&(H[r].isScoreEvent?H[r].variant===Ut.courseid&&(t>H[r].lastValidSplit?e=0:e=H[r].splits[t],n.push({time:e,id:r})):H[r].courseid===Ut.courseid&&(t>H[r].lastValidSplit?e=0:e=H[r].splits[t],n.push({time:e,id:r})));n.sort(rm);let i=0,s=0;for(let r=0;r<n.length;r+=1)n[r].time!==s?n[r].time===0?(H[n[r].id].racepos[t]=0,i=0,s=0):(H[n[r].id].racepos[t]=r+1,s=n[r].time,i=r+1):H[n[r].id].racepos[t]=i}}function vy(){Yl!==void 0&&(Yl.destroy(),Yl=void 0);const n=(f,p)=>f.p0.skip||f.p1.skip?p:void 0,t=document.getElementById("rg2-splits-chart"),e=H[Mt].legpos.map((f,p,v)=>p===v.length-1?"F":p),i=Ey(),s=H[Mt].legpos.map(f=>f===0?NaN:f),r=H[Mt].loss[Ie].map((f,p)=>H[Mt].legpos[p]===0?NaN:f),o=H[Mt].legpos.map(()=>i.average),a=H[Mt].loss[Ie].reduce((f,p)=>Math.max(f,p),0),l=parseInt((a+299)/300,10)*300;Yl=new ei(t,{data:{labels:e,datasets:[{label:"Leg position",type:"line",data:s,borderColor:F.RED,backgroundColor:F.RED_30,yAxisID:"yPosition",segment:{borderColor:f=>n(f,"rgb(0,0,0,0.2)"),borderDash:f=>n(f,[6,6])},spanGaps:!0},{label:"Average leg position",type:"line",data:o,borderColor:F.RED,backgroundColor:F.WHITE,borderDash:[5,5],yAxisID:"yPosition",pointStyle:"circle",pointRadius:0,pointHoverRadius:0},{label:"Time loss",type:"bar",data:r,borderColor:F.DARK_GREEN,backgroundColor:F.DARK_GREEN_30,yAxisID:"yLoss",segment:{borderColor:f=>n(f,"rgb(0,0,0,0.2)"),borderDash:f=>n(f,[6,6])},spanGaps:!0}]},options:{maintainAspectRatio:!1,responsive:!0,scales:{x:{min:1,title:{display:!0,text:U("Control","")}},yPosition:{type:"linear",display:!0,position:"left",min:0,max:parseInt((H.length+9)/10,10)*10,title:{display:!0,text:"Leg position"}},yLoss:{type:"linear",display:!0,position:"right",min:0,max:l,grid:{drawOnChartArea:!1},title:{display:!0,text:"Time loss"}}},plugins:{tooltip:{callbacks:{label:function(f){return f.dataset.label==="Time loss"?"Loss: "+fe(r[f.dataIndex]):f.dataset.label==="Leg position"?"Position: "+s[f.dataIndex]:""},title:function(f){return f[0].label==="F"?U("Finish",""):U("Control","")+" "+f[0].label}}}}}});const d=document.querySelector("#rg2-splits-chart");d.onwheel=f=>{f.preventDefault(),f.deltaY<0?Mt=Mt===H.length-1?0:Mt+1:Mt=Mt>0?Mt-1:H.length-1,Sy(H[Mt].rawid)}}function by(){const n=[{headerName:U("Pos",""),field:"position",cellDataType:"text",width:60,pinned:"left",sortable:!0},{headerName:U("Name",""),field:"name",cellDataType:"text",headerClass:"align-left",cellClass:"align-left",width:150,pinned:"left"},{headerName:U("Time",""),field:"time",cellDataType:"text",width:85}];for(let o=1;o<Pe-1;o+=1)n.push({headerName:o+" ("+Ut.codes[o]+")",field:"C"+o,cellDataType:"text",cellRenderer:sm,width:110});n.push({headerName:U("F",""),field:"finish",cellDataType:"text",cellRenderer:sm,width:110}),n.push({headerName:U("Loss",""),field:"loss",cellDataType:"text",width:100}),n.push({headerName:U("Performance",""),field:"performance",cellDataType:"text",width:100}),n.push({headerName:U("Consistency",""),field:"consistency",cellDataType:"text",width:100});let t=[];H.sort(function(o,a){return o.racepos[o.splits.length-1]<=0?1:a.racepos[a.splits.length-1]<=0?-1:o.racepos[o.splits.length-1]-a.racepos[a.splits.length-1]}),Mt=ky(va);for(let o=0;o<H.length;o+=1){let a={};const l=H[o];l.racepos[Pe-1]==0?a.position="":a.position=l.racepos[Pe-1],a.name=l.name,a.time=l.time;for(let f=1;f<Pe-1;f+=1)l.splits[f]===l.splits[f-1]?a["C"+f]={split:"0:00",pos:l.racepos[f],loss:!1}:a["C"+f]={split:fe(l.splits[f]),pos:l.racepos[f],loss:!1};a.finish={split:fe(l.splits[Pe-1]),pos:l.racepos[Pe-1]},a.loss=fe(l.timeInSecs-l.totalLoss[Ie]),a.performance=(l.performanceIndex[0]*100).toFixed(1);const d=l.refRatio[0].filter(f=>f>0);a.consistency=(100*wy(d)).toFixed(1),t.push(a),a={};for(let f=1;f<Pe-1;f+=1)a["C"+f]={split:fe(l.legSplits[f]),pos:l.legpos[f],loss:l.loss[Ie][f]>19};a.finish={split:fe(l.legSplits[Pe-1]),pos:l.legpos[Pe-1],loss:l.loss[Ie][Pe-1]>19},a.loss=fe(l.totalLoss[Ie]),t.push(a)}const e={columnDefs:n,rowData:t,defaultColDef:{headerClass:"align-center",cellClass:"align-center"}},i=document.getElementById("rg2-map-canvas").height*.98-120,s=document.getElementById("rg2-results-grid-wrapper");s.removeAttribute("style"),s.setAttribute("style","height: "+i+"px;");const r=document.getElementById("rg2-results-grid");r.innerHTML="",ah(r,e)}function yy(){const n=Ey(),t=r=>`${r}`;let e=t(`<div>${U("Name")}</div><div>${ve.name}</div>`);e+=t(`<div>${U("Course")}</div><div>${ve.coursename}</div>`),e+=t(`<div>${U("Time")}</div><div>${ve.time}</div>`),e+=t(`<div>${U("Position")}</div><div>${H[Mt].racepos[Pe-1]} / ${H.length}</div>`),e+=t(`<div>${U("Average leg position")}</div><div>${n.average} (${U("Best","")}: ${n.best}, ${U("Worst")}: ${n.worst})</div >`);let i="";nL(ve.timeInSecs)&&(i=` (${(100*H[Mt].totalLoss[Ie]/ve.timeInSecs).toFixed(1)}%)`),e+=t(`<div>${U("Estimated loss")}</div><div>${fe(H[Mt].totalLoss[Ie])}${i}</div>`),e+=t(`<div>${U("Performance")}</div><div>${(ve.performanceIndex[0]*100).toFixed(1)}%</div>`);const s=H[Mt].refRatio[0].filter(r=>r>0);e+=t(`<div>${U("Consistency")}</div><div>${(100*wy(s)).toFixed(1)}%</div>`),document.getElementById("rg2-stats-summary").innerHTML=e}function xy(){const n=[];for(let i=0;i<H[Mt].splits.length;i+=1){let s={};if(i===0?s.control="S":i==H[Mt].splits.length-1?s.control="F":s.control=i+" ("+Ut.codes[i]+")",i===0?s.time="0:00":s.time=fe(H[Mt].legSplits[i]),i===0||H[Mt].legpos[i]===0||Ut.exclude[i]?s.position="-":s.position=H[Mt].legpos[i],i===0||Ut.exclude[i]?s.performance="-":s.performance=(100*H[Mt].refRatio[0][i]).toFixed(1),Ut.exclude[i]?s.best="-":s.best=fe(Qn[i][0].t),i===0||Ut.exclude[i])s.who="-";else{let o=Qn[i][0].name;for(let a=1;a<Qn[i].length&&Qn[i][0].t===Qn[i][a].t;a+=1)o+=", "+Qn[i][a].name;s.who=o}const r=H[Mt].legSplits[i]-Qn[i][0].t;i===0||H[Mt].legSplits[i]<=0?s.behind="-":s.behind=fe(r),i===0||H[Mt].legSplits[i]<=0?s.percent=0:s.percent=parseInt(r*100/Qn[i][0].t,10),Ut.exclude[i]?s.predicted="-":s.predicted=fe(H[Mt].predictedSplits[Ie][i]),H[Mt].legSplits[i]<=0?s.loss="-":s.loss=fe(H[Mt].loss[Ie][i]),n.push(s)}const t={columnDefs:[{headerName:U("Control",""),field:"control",width:80},{headerName:U("Time",""),field:"time",width:80,comparator:Gl.bind(this)},{headerName:U("Position",""),field:"position",width:75},{headerName:U("Performance",""),field:"performance",width:95,comparator:rL.bind(this)},{headerName:U("Best",""),field:"best",width:80},{headerName:U("Who",""),field:"who",headerClass:"align-left",cellClass:"align-left",flex:1,tooltipField:"who"},{headerName:U("Behind",""),field:"behind",width:80,comparator:Gl.bind(this)},{headerName:"%",field:"percent",width:60},{headerName:U("Predicted",""),field:"predicted",width:100,comparator:Gl.bind(this)},{headerName:U("Loss",""),field:"loss",width:75,comparator:Gl.bind(this)}],rowData:n,domLayout:"autoHeight",defaultColDef:{headerClass:"align-center",cellClass:"align-center",sortable:!0}},e=document.getElementById("rg2-leg-table");e.innerHTML="",ah(e,t)}function _y(){const n=[];let t=0;for(let s=0;s<H[Mt].splits.length;s+=1){let r={};if(s==0?r.control="S":s==H[Mt].splits.length-1?r.control="F":r.control=s+" ("+Ut.codes[s]+")",s==0?r.time="0:00":H[Mt].splits[s]===H[Mt].splits[s-1]?r.time="":r.time=fe(H[Mt].splits[s]),s===0||H[Mt].racepos[s]===0?r.position="-":r.position=H[Mt].racepos[s],r.best=fe(ti[s][0].t),s===0)r.who="-";else{let a=ti[s][0].name;for(let l=1;l<ti[s].length&&ti[s][0].t===ti[s][l].t;l+=1)a+=", "+ti[s][l].name;r.who=a}const o=H[Mt].splits[s]-ti[s][0].t;s===0||H[Mt].racepos[s]===0?r.behind="-":r.behind=fe(o),s===0||H[Mt].racepos[s]===0?r.percent="-":r.percent=parseInt(o*100/ti[s][0].t,10),t=t+H[Mt].loss[Ie][s],r.loss=fe(t),n.push(r)}const e={columnDefs:[{headerName:U("Control",""),field:"control",width:88},{headerName:U("Time",""),field:"time",width:85},{headerName:U("Position",""),field:"position",width:100},{headerName:U("Best",""),field:"best",width:85},{headerName:U("Who",""),field:"who",headerClass:"align-left",cellClass:"align-left",flex:1,tooltipField:"who"},{headerName:U("Behind",""),field:"behind",width:85},{headerName:"%",field:"percent",width:85},{headerName:"Loss",field:"loss",width:100}],rowData:n,domLayout:"autoHeight",defaultColDef:{headerClass:"align-center",cellClass:"align-center"}},i=document.getElementById("rg2-race-table");i.innerHTML="",ah(i,e)}function th(n,t){let e=n.slice();if(e.length===0)return{mean:0,median:0,count:0};e.sort(function(a,l){return a-l});let i=0,s=e.length;if(t<100){const o=Math.max(parseInt(s*t/100,10),3);e.splice(o),s=e.length}for(let o=0;o<s;o+=1)i=i+e[o];let r;return s===1?r=e[0]:s%2===0?r=(e[s/2-1]+e[s/2])/2:r=e[Math.floor(s/2)],{mean:i/s,median:r,count:s}}function Ey(){let n=0,t=0,e=0,i=9999;for(let r=1;r<ve.legpos.length;r+=1)ve.legpos[r]!==0&&(n+=ve.legpos[r],t+=1,i>ve.legpos[r]&&(i=ve.legpos[r]),e<ve.legpos[r]&&(e=ve.legpos[r]));let s;return t>0?s=(n/t).toFixed(1):(s=0,i=0,e=0),{best:i,worst:e,average:s}}function GM(n){return n.reduce((t,e)=>t+e,0)/n.length}function nm(n){return n==="-"?0:parseFloat(n)}function wy(n){if(n.length===0)return 0;const t=GM(n);return Math.sqrt(n.reduce((e,i)=>e+Math.pow(i-t,2),0)/n.length)}function KM(){let n='<ul class="nav nav-pills" id="rg2-stats-panel-tab-headers" role="tablist">';for(let t of mc){const e=U(t.title),i=t.active?" active":"",s=t.active?"":"tabindex='-1'";n+=`<li class="nav-item${i}" role="presentation">
    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#${t.id}-tab"
      type="button" role="tab" ${s}>
      <div id="${t.id}-tab-label">${e}</div>
    </button>
    </li>`}return n+="</ul>",n}function JM(){let n='<div id="rg2-stats-table"><div class="tab-content" id="rg2-stats-panel-tab-body">';for(let t=0;t<mc.length;t+=1){const e=mc[t].active?" active":"";n+=`<div class="tab-pane fade ${e} pt-2" id="${mc[t].id}-tab" role="tabpanel" tabindex="${t}">
      ${$M[t]}</div>`}return n+="</div></div></div>",n}function im(n){return n==="-"?0:parseFloat(n.replace(":","."))}function ZM(n){if(n.currentTarget)switch(n.currentTarget.id){case"rg2-iter-plus-text":QM(),n.preventDefault();break;case"rg2-iter-minus-text":jM(),n.preventDefault();break;case"rg2-iter-text":n.preventDefault();break}}function QM(){Ie=Math.min(Ie+1,my),Ay()}function tL(n){va=n,Qd=Ra(),ve=vb(va),Qd?H=ak(ve.variant):H=ok(ve.courseid),eL(ve.courseid),VM(),XM(),Mt=ky(va)}function eL(n){if(Qd?Ut={courseid:ve.variant,codes:ve.scorecodes,exclude:!1}:Ut=ci(n),Pe=Ut.codes.length,Pe<=2)throw new Ty(U("No splits available."));Qn.length=0,ti.length=0;let t=[],e=[];for(let i=0;i<Pe;i+=1){t.length=0,e.length=0;for(let s=0;s<H.length;s+=1)i===0?(t.push({t:0,name:"",pos:0}),e.push({t:0,name:"",pos:0})):(t.push({t:H[s].legSplits[i],name:H[s].name,pos:H[s].legpos[i]}),i<=H[s].lastValidSplit&&e.push({t:H[s].splits[i],name:H[s].name,pos:H[s].racepos[i]}));t.sort(function(s,r){return s.t===0?1:r.t===0?-1:s.t-r.t}),e.sort(function(s,r){return s.t-r.t}),Qn.push(t.slice()),ti.push(e.slice())}}function nL(n){return!isNaN(parseFloat(n))&&isFinite(n)?n>0:!1}function iL(){for(let n=0;n<=my;n+=1)qM(n),zM(n),HM(n)}function sL(n){return hf()?(Sy(n),!0):(yt(U("Statistics",""),U("No statistics available for this event format.","")),!1)}function rL(n,t){return nm(n)-nm(t)}function Sy(n){try{tL(n),iL(),yy(),vy(),YM(),xy(),_y(),by(),WM()}catch(t){t instanceof Ty?yt(U("Statistics"),t.message):yt(U("Statistics",""),U("Data inconsistency.",""));return}}function sm(n){if(n.value.split==="0:00")return"";let t=n.value.split,e="";return n.value.pos!==0&&(t+=" ("+n.value.pos+")",n.value.pos===1&&(e="rg2-first"),n.value.pos===2&&(e="rg2-second"),n.value.pos===3&&(e="rg2-third")),n.value.loss&&(e+=" rg2-lost-time"),'<span class="'+e+'">'+t+"</span>"}function Ty(n){this.message=n}function Ay(){document.getElementById("rg2-iter-count-tab-label").innerText=Ie+1,of(),yy(),vy(),xy(),_y(),by()}function ky(n){for(let t=0;t<H.length;t+=1)if(H[t].rawid===n)return ve=H[t],t;return null}function rm(n,t){return n.time===0?1:t.time===0?-1:n.time-t.time}function Gl(n,t){return im(n)-im(t)}const eh=document.getElementById("rg2-show-info-panel-control"),tr=document.getElementById("rg2-right-info-panel"),af=document.getElementById("rg2-right-info-panel-title"),lf=new hi(tr,{backdrop:!1}),Yr=document.getElementById("rg2-left-info-panel"),om=document.getElementById("rg2-left-info-panel-title");let am=document.getElementById("rg2-left-info-panel-body");const Dy=new hi(Yr,{backdrop:!1});Yr.style.width="420px";Yr.addEventListener("hidden.bs.offcanvas",()=>{eh.classList.remove("d-none")});cf();const pd=10,gd=-10;function oL(){return!document.getElementById("rg2-animation-controls").classList.contains("d-none")}function aL(){document.querySelector("label[for=rg2-select-course]").innerHTML=`${U("Select course")}`,document.querySelector("label[for=rg2-select-name]").innerHTML=`${U("Select name")}`,document.querySelector("label[for=rg2-name-entry]").innerHTML=U("Name"),document.querySelector("#rg2-name-entry").addEventListener("input",()=>{fm()}),document.querySelector("label[for=rg2-time-entry]").innerHTML=U("Time"),document.querySelector("#rg2-time-entry").addEventListener("input",()=>{fm()});const n=document.getElementById("rg2-new-comments");n.setAttribute("placeholder",U(F.DEFAULT_NEW_COMMENT,"")),n.addEventListener("focus",()=>{document.getElementById("rg2-new-comments").setAttribute("placeholder","")});const t=document.getElementById("btn-three-seconds");t.innerHTML=U("+3 secs"),t.addEventListener("click",f=>{f.preventDefault(),QL()});const e=document.getElementById("btn-undo");e.innerHTML=U("Undo"),e.addEventListener("click",f=>{f.preventDefault(),ZL()});const i=document.getElementById("btn-save-route");i.innerHTML=U("Save"),i.addEventListener("click",f=>{f.preventDefault(),WL()});const s=document.getElementById("btn-reset-drawing");s.innerHTML=U("Reset"),s.addEventListener("click",f=>{f.preventDefault(),zL()}),document.getElementById("rg2-load-gps-title").innerHTML=U("Load GPS file (GPX or TCX)"),document.getElementById("btn-offset-plus").addEventListener("click",()=>{const f=document.getElementById("rg2-offset-value");let p=parseInt(f.value,10);p<pd&&(p=p+1,f.value=p,md(p))}),document.getElementById("btn-offset-minus").addEventListener("click",()=>{const f=document.getElementById("rg2-offset-value");let p=parseInt(f.value,10);p>gd&&(p=p-1,f.value=p,md(p))}),document.getElementById("rg2-offset-value").addEventListener("input",()=>{const f=document.getElementById("rg2-offset-value");let p=parseInt(f.value,10);isNaN(p)&&(p=0),p<gd&&(p=gd),p>pd&&(p=pd),f.value=p,md(p)});const r=document.getElementById("btn-undo-gps-adjust");r.innerHTML=U("Undo"),r.addEventListener("click",f=>{f.preventDefault(),JL()});const o=document.getElementById("btn-autofit-gps");o.innerHTML=U("Autofit"),o.addEventListener("click",f=>{f.preventDefault(),wL()}),document.querySelector("label[for=chk-move-all]").innerHTML=U("Move track and map together (or right click-drag)");const a=document.getElementById("btn-save-gps-route");a.innerHTML=U("Save GPS route"),a.addEventListener("click",f=>{f.preventDefault(),UL()}),["Left click to add/lock/unlock a handle","Green - draggable","Red - locked","Right click to delete a handle","Drag a handle to adjust track around locked point(s)"].forEach((f,p)=>{const v=document.getElementById(`draw-text-${p+1}`);v.innerHTML=`${U(f)}.`}),document.getElementById("rg2-load-gps-file").addEventListener("input",f=>{HL(f)})}function lL(){document.querySelector("label[for=rg2-select-language]").innerHTML=`${U("Language")}`,UT(F.languages),vc("chk-show-GPS-speed","showGPSSpeed","Show GPS speed colours"),vc("chk-snap-toggle","snap","Snap to control when drawing"),vc("chk-show-three-seconds","showThreeSeconds","Show +3 time loss for GPS routes"),$r("map-intensity","perCentMapIntensity","Map intensity","%"),$r("route-intensity","perCentRouteIntensity","Route intensity","%"),$r("control-circle","circleSize","Control circle size"),$r("course-width","courseWidth","Course overprint width"),$r("route-width","routeWidth","Route width"),$r("name-font-size","replayFontSize","Replay label font size");const n=document.getElementById("rg2-gps-speed-slider");n.setAttribute("value1",$t.maxSpeed),n.setAttribute("value2",$t.minSpeed),n.addEventListener("change",pL),document.getElementById("rg2-min-gps-speed-label").innerHTML=Iy(),document.getElementById("rg2-max-gps-speed-label").innerHTML=Cy()}function vc(n,t,e){document.querySelector(`label[for=${n}]`).innerHTML=`${U(e)}`;const i=document.getElementById(n);i.addEventListener("click",s=>{$t[t]=s.target.checked,nu(),wt()}),i.checked=$t[t]}function $r(n,t,e,i=""){let s=document.querySelector(`label[for=spn-${n}]`);s.innerHTML=`${U(e)} ${$t[t]}${i}`;let r=document.getElementById(`spn-${n}`);r.setAttribute("value",$t[t]),r.addEventListener("change",o=>{s1(t,parseInt(o.target.value,10)),s=document.querySelector(`label[for=spn-${n}`),s.innerHTML=`${U(e)} ${$t[t]}${i}`,wt()})}function cL(n){return sL(n)}function uL(){document.body.addEventListener("contextmenu",i=>{i.preventDefault()}),window.addEventListener("resize",()=>{cf(),u0()}),document.getElementById("rg2-left-info-panel-body").addEventListener("scroll",i=>{document.getElementById("rg2-info-panel").setAttribute(Oy(),i.target.scrollTop)}),mL(),F.managing()||aL(),lm(),document.getElementById("rg2-logo").addEventListener("click",()=>{Dy.toggle()}),document.querySelector("#rg2-info-panel-tab-headers").querySelectorAll('button[data-bs-toggle="tab"]').forEach(i=>{i.addEventListener("shown.bs.tab",s=>{yL(s)})}),eh.addEventListener("click",()=>{lm(),eh.classList.add("d-none")}),gL()}function dL(){if(F.managing())return;let n=document.getElementById("rg2-event-list");n.innerHTML=iP();let t=document.getElementById("rg2-event-table"),e=document.getElementById("rg2-event-search");e.innerHTML=`<form class="d-flex pb-2" role="search">
  <input class="form-control mr-2" type="search" aria-label="${U("Search")}">
  <i class="bi-search ms-2 mt-2"></i>
  </form>`,e.addEventListener("keyup",i=>{let s=i.target.value.toUpperCase(),r=t.getElementsByTagName("tr");for(let o=0;o<r.length;o+=1)r[o].innerText.toUpperCase().indexOf(s)>-1?r[o].classList.remove("d-none"):r[o].classList.add("d-none")}),t.addEventListener("click",i=>{const s=i.target.closest("tr"),r=parseInt(s.dataset.kartatid,10);isNaN(r)||el(r)})}function hL(){tr.style.width="800px",af.innerHTML="RG2 Version "+F.RG2VERSION,document.getElementById("rg2-about-dialog").classList.remove("d-none"),document.getElementById("rg2-option-controls").classList.add("d-none"),document.getElementById("rg2-stats-dialog").classList.add("d-none");let n=document.getElementById("rg2-event-stats");n.innerHTML=cP(),document.getElementById("rg2-manager-link").innerHTML=`<a href="${rg2Config.api_url.replace("rg2api.php","?manage")}">Manager Login</a>`,lf.show()}function lm(){Dy.show()}function fL(){tr.style.width="420px",af.innerHTML=U("Configuration options"),document.getElementById("rg2-about-dialog").classList.add("d-none"),document.getElementById("rg2-option-controls").classList.remove("d-none"),document.getElementById("rg2-stats-dialog").classList.add("d-none"),lL(),lf.show()}function cm(n){tr.style.width="1000px",af.innerHTML=KM(),document.getElementById("rg2-stats-dialog").innerHTML=JM(),document.getElementById("rg2-about-dialog").classList.add("d-none"),document.getElementById("rg2-option-controls").classList.add("d-none"),document.getElementById("rg2-stats-dialog").classList.remove("d-none"),cL(n)&&lf.show()}function bo(){return document.querySelector("#rg2-info-panel-tab-headers button.active").id}function um(n){let t='<div id="rg2-info-panel">';t+='<div class="tab-content" id="rg2-info-panel-tab-body">';for(let e=0;e<n.length;e=e+1){const i=document.getElementById(n[e].body),s=n[e].active?" active show":"";t+=`<div class="tab-pane fade ${s}" id="rg2-${n[e].name}-body" role="tabpanel" 
    aria-labelledby="${n[e].name}" tabindex="${e}">${i.innerHTML}</div>`,i.remove()}return t+="</div></div>",t}function dm(n){let t='<ul class="nav nav-pills" id="rg2-info-panel-tab-headers" role="tablist">';for(let e=0;e<n.length;e=e+1){const i=n[e].hidden?" d-none":"",s=n[e].active?" active":"",r=n[e].disabled?" disabled ":"";t+=`
    <li class="nav-item" role="presentation">
      <button class="nav-link${s}${i}"${r}id="${n[e].name}" data-bs-toggle="tab"
      data-bs-target="#rg2-${n[e].name}-body"
        type="button" role="tab"><div id="${n[e].name}-label">${U(n[e].title)}</div>
      </button>
    </li>`}return t+="</ul>",t}function Cy(){return`<i class="bi-emoji-smile rg2-run-green"></i> ${$t.maxSpeed.toFixed(1)} min/km`}function Iy(){return`<i class="bi-emoji-smile rg2-run-red"></i> ${$t.minSpeed.toFixed(1)} min/km`}function Oy(){return`scroll-${bo()}`}function pL(n){$t.maxSpeed=n.detail.value1,$t.minSpeed=n.detail.value2;const t=document.getElementById("rg2-min-gps-speed-label");t.innerHTML=Iy();const e=document.getElementById("rg2-max-gps-speed-label");e.innerHTML=Cy(),Ek(),wt()}function gL(){document.getElementById("btn-about").addEventListener("click",t=>{hL()}),document.getElementById("btn-settings").addEventListener("click",t=>{fL()}),document.getElementById("btn-splitsbrowser").addEventListener("click",()=>{window.open(rg2Config.api_url+"?type=splitsbrowser&id="+fr()+"&_="+Date.now())}),document.getElementById("btn-measure").setAttribute("disabled",""),document.getElementById("btn-runners").setAttribute("disabled","");const n=document.getElementById("btn-toggle-controls");n.setAttribute("disabled",""),n.addEventListener("click",()=>{Xe.toggleControlDisplay(),wt()})}function mL(){const n=[{name:F.TAB_EVENTS,title:"Events",body:"rg2-event-body",active:!0},{name:F.TAB_COURSES,title:"Courses",body:"rg2-course-body",disabled:!0},{name:F.TAB_RESULTS,title:"Results",body:"rg2-result-body",disabled:!0},{name:F.TAB_DRAW,title:"Draw",body:"rg2-draw-body",disabled:!0}],t=[{name:F.TAB_LOGIN,title:"Login",body:"rg2-login-body",active:!0},{name:F.TAB_CREATE,title:"Add event",body:"rg2-add-event-body",hidden:!0},{name:F.TAB_EDIT,title:"Edit event",body:"rg2-edit-event-body",hidden:!0},{name:F.TAB_MAP,title:"Add map",body:"rg2-add-map-body",hidden:!0},{name:F.TAB_DELETE_MAP,title:"Delete maps",body:"rg2-delete-maps-body",hidden:!0}];F.managing()?(om.innerHTML=dm(t),am.innerHTML=um(t)):(om.innerHTML=dm(n),am.innerHTML=um(n))}function vL(){bP(),gb(void 0),document.getElementById("rg2-select-name").setAttribute("disabled",""),hf()?(document.getElementById("rg2-name-select").classList.remove("d-none"),document.getElementById("rg2-enter-name-and-time").classList.add("d-none")):(document.getElementById("rg2-name-select").classList.add("d-none"),document.getElementById("rg2-enter-name-and-time").classList.remove("d-none")),vc("chk-align-map","alignMap","Align map to next control"),document.getElementById("btn-three-seconds").setAttribute("disabled",""),document.getElementById("btn-undo").setAttribute("disabled",""),document.getElementById("btn-save-route").setAttribute("disabled",""),document.getElementById("btn-reset-drawing").setAttribute("disabled",""),document.getElementById("rg2-load-gps-file").setAttribute("disabled",""),document.getElementById("btn-autofit-gps").setAttribute("disabled",""),document.getElementById("btn-undo-gps-adjust").setAttribute("disabled",""),document.getElementById("btn-save-gps-route").setAttribute("disabled",""),document.getElementById("chk-move-all").checked=!1}function cf(){const n=document.getElementById("rg2-header-container").offsetHeight,t=oL()?document.getElementById("rg2-animation-controls").offsetHeight:0;Yr.style.top=`${n}px`,tr.style.top=`${n}px`,Yr.style.bottom=`${t}px`,tr.style.bottom=`${t}px`,Yr.style.maxWidth=`${window.innerWidth}px`,tr.style.maxWidth=`${window.innerWidth}px`,document.getElementById("rg2-track-names").style.maxHeight=`${window.innerHeight-n-10}px`}function bL(){document.querySelectorAll(".showcourse").forEach(f=>{f.addEventListener("click",p=>{const v=parseInt(p.target.dataset.courseid,10);nl(v,p.target.checked);const y=document.querySelectorAll(".showcourse");for(let w of y)parseInt(w.dataset.courseid,10)===v&&(w.checked=p.target.checked);const E=document.querySelector(".showallcourses");E.checked=vP(),ya(v),xp(gm()),wt()})}),document.querySelector(".showallcourses").addEventListener("click",f=>{Uy(f.target.checked);const p=document.querySelectorAll(".showcourse");for(let v of p)v.checked=f.target.checked;mm(),xp(gm()),wt()}),document.querySelectorAll(".showscorecourse").forEach(f=>{f.addEventListener("click",p=>{nk(parseInt(p.target.dataset.courseid,10),p.target.checked),wt()})}),document.querySelectorAll(".showtrack").forEach(f=>{f.addEventListener("click",p=>{const v=parseInt(p.target.dataset.id,10);Mk(v,p.target.checked);const y=parseInt(p.target.dataset.courseid,10);document.querySelectorAll(".allcoursetracks").forEach(T=>{parseInt(T.dataset.courseid,10)===y&&(T.checked=JA(y))}),document.querySelectorAll(".alltracks").forEach(T=>{T.checked=kp()}),ya(y),Zu(ed()),wt()})});const s=document.querySelectorAll(".deleteroute");for(let f of s)f.addEventListener("click",p=>{AL(parseInt(p.target.dataset.resultidx,10))});const r=document.querySelectorAll(".allcoursetracks");for(let f of r)f.addEventListener("click",p=>{let v=parseInt(p.target.dataset.courseid,10);Mp(v,p.target.checked);const y=document.querySelectorAll(".allcoursetracks");for(let T of y)parseInt(T.dataset.courseid,10)===v&&(T.checked=p.target.checked);const E=document.querySelectorAll(".showtrack");for(let T of E)parseInt(T.dataset.courseid,10)===v&&(T.checked=p.target.checked);const w=document.querySelectorAll(".alltracks");for(let T of w)T.checked=kp();ya(v),Zu(ed()),wt()});const o=document.querySelectorAll(".alltracks");for(let f of o)f.addEventListener("click",p=>{Mp(F.DISPLAY_ALL_COURSES,p.target.checked);const v=document.querySelectorAll(".allcoursetracks");for(let E of v)E.checked=p.target.checked;const y=document.querySelectorAll(".showtrack");for(let E of y)E.checked=p.target.checked;mm(p.target.checked),Zu(ed()),wt()});const a=document.querySelectorAll(".showreplay");for(let f of a)f.addEventListener("click",p=>{let v=parseInt(p.target.dataset.id,10);p.target.checked?Gy(new yb(v)):t0(v);const y=dk(v),E=document.querySelectorAll(".allcoursetracksreplay");for(let T of E)parseInt(T.dataset.courseid,10)===y&&(T.checked=Dp(y));const w=document.querySelectorAll(".allcoursereplay");for(let T of w)T.checked=Ap(y);wt()});const l=document.querySelectorAll(".allcoursetracksreplay");for(let f of l)f.addEventListener("click",p=>{let v=parseInt(p.target.dataset.courseid,10);const y=ck(v);bm(y,p.target.checked);const E=document.querySelectorAll(".showreplay.showtrackreplay");for(let O of E)parseInt(O.dataset.courseid,10)===v&&(O.checked=p.target.checked);const w=document.querySelectorAll(".allcoursetracksreplay");for(let O of w)parseInt(O.dataset.courseid,10)===v&&(O.checked=p.target.checked);let T=document.querySelectorAll(".allcoursereplay");for(let O of T)parseInt(O.dataset.courseid,10)===v&&(O.checked=Ap(v));wt()});const d=document.querySelectorAll(".allcoursereplay");for(let f of d)f.addEventListener("click",p=>{const v=parseInt(p.target.dataset.courseid,10),y=lk(v);bm(y,p.target.checked);const E=document.querySelectorAll(".showreplay");for(let T of E)parseInt(T.dataset.courseid,10)===v&&(T.checked=p.target.checked);const w=document.querySelectorAll(".allcoursetracksreplay");for(let T of w)parseInt(T.dataset.courseid,10)===v&&(T.checked=Dp(v));wt()})}function yL(n){switch(n.target.id){case F.TAB_DRAW:Uy(!1),KL();break}const t=document.getElementById("rg2-info-panel").getAttribute(Oy());document.getElementById("rg2-left-info-panel-body").scrollTop=t,wt()}const xL=50,Qo=20;let Pc=null,Rc=[],Pa=!1,hm="#ff0000",My=null,B=new Jv;B.routeData=new iu;let gu=null,pe=[],Ce=[],uf=[],he=0,cs=0,lo=!1;function _L(n,t){Pa&&(SL(n,t)?(nh(pe[he],Ce[he]),Py(he),cs=he,he=Ny(he),he===pe.length&&(document.getElementById("btn-save-route").removeAttribute("disabled"),sl())):nh(Math.round(n),Math.round(t)),document.getElementById("btn-undo").removeAttribute("disabled"),wt())}function nh(n,t){B.routeData.x.push(n),B.routeData.y.push(t)}function EL(n,t,e){const i=B.handles.getPreviousLockedHandle(e),s=B.handles.getNextLockedHandle(e);ba(n,t,i,i.time,e.time),ba(n,t,s,e.time,s.time)}function md(n){B.adjustOffset(n)}function Ly(n,t,e=void 0){if(document.getElementById("chk-move-all").checked||e===F.RIGHT_CLICK)D.translate(t.x-n.x,t.y-n.y);else if(B.handles.handlesLocked()>0)if(B.handles.handlesLocked()===1)ba(n,t,B.handles.getSingleLockedHandle(),B.handles.getStartHandle().time,B.handles.getFinishHandle().time);else{let r=B.handles.getHandleClicked(n);if(r===void 0||r.locked)return;const o=B.handles.getEarliestLockedHandle(),a=B.handles.getLatestLockedHandle();o.time>=r.time?ba(n,t,o,B.handles.getStartHandle().time,o.time):a.time<r.time?ba(n,t,a,a.time,B.handles.getFinishHandle().time):EL(n,t,r)}else OL(t.x-n.x,t.y-n.y)}function Py(n){if($t.alignMap&&n<pe.length-1){Pa=!1,Rc=[];const t=pe[n],e=Ce[n],i=pe[n+1],s=Ce[n+1],r=xf(),o=o0(),a=$e(t,e,i,s),l=$e(r.x,r.y,o.x,o.y);let d=Math.min(l/a,F.MAX_ZOOM);d=Math.max(d,F.MIN_ZOOM);let f;lo?f=or(pe[n],Ce[n],pe[n+1],Ce[n+1]):f=uf[n];let p=(D.displayAngle-f-Math.PI/2)%(Math.PI*2);p<-1*Math.PI&&(p=p+2*Math.PI);for(let v=1;v<=Qo;v=v+1){let y={};y.x=r.x-(r.x-t)*v/Qo,y.y=r.y-(r.y-e)*v/Qo,y.angle=(D.displayAngle-p*v/Qo)%(Math.PI*2),y.scale=Math.pow(d,1/Qo),Rc.push(y)}Pc=setInterval(()=>{$L()},xL)}else xu(0,pe[n],Ce[n],!1,1),Pa=!0,Pc=null}function wL(){B.autofitTrack()}function SL(n,t){let e=$t.snap?8:2;return console.log(n,t,pe[he],Ce[he]),Math.abs(n-pe[he])<e&&Math.abs(t-Ce[he])<e}function TL(){let n={};n.body="The route you have started to draw will be discarded. Are you sure you want to change the course?",n.title="Confirm course change",n.doText="Change course",n.onDo=DL,n.onCancel=kL,gi(n)}function AL(n){My=n;let t={};t.body="This route will be permanently deleted. Are you sure?",t.title="Confirm route delete",t.doText="Delete route",t.onDo=CL,gi(t)}function kL(){document.getElementById("rg2-select-course").value=B.routeData.courseid,document.getElementById("rg2-select-name").value=B.routeData.resultid,gu=null}function DL(){df(),ih(gu)}function CL(){const n=fk(My),t={type:"deletemyroute",id:fr(),routeid:n.id};pi(JSON.stringify({token:n.token}),t,BL,"Route save failed")}function df(){B.routeData.courseid!==null&&nl(B.routeData.courseid,!1),B.routeData.resultid!==null&&Ta(B.routeData.resultid,!1),By()}function Ry(){YL();const n={type:"addroute",id:B.routeData.eventid};pi(JSON.stringify(B.routeData),n,FL(B.routeData.name),"Route save failed"),df()}function IL(){B.fileLoaded&&(B.savedBaseX=B.baseX.slice(0),B.savedBaseY=B.baseY.slice(0),B.baseX=B.routeData.x.slice(0),B.baseY=B.routeData.y.slice(0),B.handles.saveForUndo(),B.handles.rebaselineXY(),document.getElementById("btn-undo-gps-adjust").removeAttribute("disabled"))}function OL(n,t){for(let e=0;e<B.baseX.length;e+=1)B.routeData.x[e]=B.baseX[e]+n,B.routeData.y[e]=B.baseY[e]+t;B.handles.dragHandles(n,t)}function vd(n){D.arc(pe[he],Ce[he],n,0,2*Math.PI,!1),D.fill()}function ML(){const n=Ya();D.lineWidth=n.overprintWidth,D.strokeStyle=F.RED,D.fillStyle=F.RED_30,he>0&&!B.fileLoaded&&(D.beginPath(),he<pe.length-1?vd(n.controlRadius):(vd(n.finishInnerRadius),D.stroke(),D.beginPath(),vd(n.finishOuterRadius)),D.fillRect(pe[he]-1,Ce[he]-1,3,3),D.stroke()),D.strokeStyle=hm,D.fillStyle=hm,D.font="10pt Arial",D.textAlign="left",D.globalAlpha=.6,LL(),B.handles.drawHandles()}function LL(){if(B.routeData.x.length>1){D.beginPath(),D.moveTo(B.routeData.x[0],B.routeData.y[0]);for(let n=1;n<B.routeData.x.length;n+=1)D.lineTo(B.routeData.x[n],B.routeData.y[n]);D.stroke()}}function PL(){return{x:pe,y:Ce}}function Ny(n){const t=B.routeData.splits;if(t.length===2)return n+1;for(let e=n+1;e<t.length;e+=1)if(t[e]!==t[e-1])return e;return t.length}function RL(n){const t=B.routeData.splits;if(t.length===2)return n-1;for(let e=n-1;e>0;e-=1)if(t[e]!==t[e-1])return e;return 0}function NL(){return B.fileLoaded}function BL(n){n.ok?(yt(U("Route deleted"),U("Route has been deleted")),n1({eventid:parseInt(n.eventid,10),id:parseInt(n.routeid,10)}),yo()):yt(U("Delete failed"),U("Delete failed"))}const FL=n=>t=>{t.ok?jL(t,n):yt(n,U("Your route was not saved. Please try again"))};function $L(){if(Rc.length===0)clearInterval(Pc),Pc=null,Pa=!0;else{const n=Rc.shift();xu(n.angle,n.x,n.y,!0,n.scale)}wt()}function ih(n){gu=null,B.routeData=new iu,B.routeData.eventid=fr(),B.routeData.courseid=n;const t=ci(n);lo=t.isScoreCourse,lo||(nl(n,!0),B.routeData.coursename=t.name,t.excludeType===F.EXCLUDED_ZERO_SPLITS?B.routeData.controlsToAdjust=t.exclude.indexOf(!0):B.routeData.controlsToAdjust=t.x.length-1,pe=t.x.slice(),Ce=t.y.slice(),B.routeData.x.length=0,B.routeData.y.length=0,B.routeData.x[0]=pe[0],B.routeData.y[0]=Ce[0],B.routeData.controlx=pe.slice(),B.routeData.controly=Ce.slice(),uf=t.angle.slice()),document.getElementById("rg2-select-course").value=B.routeData.courseid,gb(n),wt()}function By(){B=new Jv,B.routeData=new iu,pe.length=0,Ce.length=0,uf.length=0,he=0,cs=0,lo=!1,B.initialiseGPS(),vL(),wt()}function VL(n,t,e){if(bo()===F.TAB_DRAW)if(B.fileLoaded){const s=B.handles.getHandleClicked({x:n,y:t});if(s!==void 0)e===F.RIGHT_CLICK&&s.index!==0&&s.index!==B.handles.length?s.locked?B.handles.unlockHandle(s.index):B.handles.deleteHandle(s.index):s.locked?B.handles.unlockHandle(s.index):B.handles.lockHandle(s.index);else for(let r=0;r<B.baseX.length;r+=1)if(B.baseX[r]+3>=n&&B.baseX[r]-3<=n&&B.baseY[r]+3>=t&&B.baseY[r]-3<=t){B.handles.addHandle(n,t,r);break}}else B.routeData.resultid!==null&&B.routeData.courseid!==null?_L(n,t):yt("No course/name","Please select course, name and time before you start drawing a route or upload a file.")}function HL(n){sl(),B.readGPS(n)}function zL(){let n={};n.body="All information you have entered will be removed. Are you sure you want to reset?",n.title="Confirm reset",n.doText="Reset",n.onDo=df,gi(n)}function qL(n,t,e){let i={};return i.x=Math.cos(e)*n-Math.sin(e)*t,i.y=Math.sin(e)*n+Math.cos(e)*t,i}function jL(n,t){yt(t,U("Your route has been saved")),i1({eventid:parseInt(n.eventid,10),id:n.newid,token:n.token}),el(fr())}function UL(){const n=B.routeData.time[B.routeData.time.length-1]-B.routeData.time[0];B.routeData.totaltime=fe(n);const e=new Date().getTimezoneOffset()*60;B.routeData.startsecs=B.routeData.time[0]-e;for(let i=0;i<B.routeData.x.length;i+=1)B.routeData.x[i]=Math.round(B.routeData.x[i]),B.routeData.y[i]=Math.round(B.routeData.y[i]),B.routeData.time[i]-=B.routeData.startsecs;for(B.routeData.resultid+=F.GPS_RESULT_OFFSET;wk(B.routeData.resultid);)B.routeData.resultid+=F.GPS_RESULT_OFFSET,B.routeData.name+="*";B.routeData.comments=document.getElementById("rg2-new-comments").value,document.getElementById("btn-undo-gps-adjust").setAttribute("disabled",""),Ry()}function WL(){B.routeData.comments=document.getElementById("rg2-new-comments").value,B.routeData.controlx=pe,B.routeData.controly=Ce,B.routeData.controlx.splice(0,1),B.routeData.controly.splice(0,1),Ry()}function ba(n,t,e,i,s){const r=$e(t.x,t.y,e.x,e.y)/$e(n.x,n.y,e.x,e.y),o=or(t.x,t.y,e.x,e.y)-or(n.x,n.y,e.x,e.y);for(let a=i;a<=s;a+=1){const l=qL(B.baseX[a]-e.x,B.baseY[a]-e.y,o);B.routeData.x[a]=l.x*r+e.x,B.routeData.y[a]=l.y*r+e.y}B.handles.alignHandles(B.routeData)}function YL(){for(let n=B.routeData.x.length-1;n>0;n-=1)B.routeData.x[n]=B.routeData.x[n]-B.routeData.x[n-1],B.routeData.y[n]=B.routeData.y[n]-B.routeData.y[n-1];for(let n=B.routeData.time.length-1;n>0;n-=1)B.routeData.time[n]=B.routeData.time[n]-B.routeData.time[n-1]}function XL(n){isNaN(n)||(B.routeData.courseid!==null?B.routeData.x.length>1?(gu=n,TL()):(B.routeData.resultid!==null&&Ta(B.routeData.resultid,!1),nl(B.routeData.courseid,!1),ih(n)):ih(n))}function GL(n){if(!isNaN(n)){const t=mb(n);if(t.hasValidTrack){const e=U("If you draw a new route it will overwrite the old route for this runner.")+" "+U("GPS routes are saved separately and will not be overwritten.");yt(U("Route already drawn"),e)}B.routeData.resultid!==null&&Ta(B.routeData.resultid,!1),B.routeData.resultid=t.resultid,B.routeData.name=t.name,B.routeData.splits=t.splits,lo?(Ta(t.resultid,!0),pe=t.scorex,Ce=t.scorey,B.routeData.x.length=0,B.routeData.y.length=0,B.routeData.x[0]=pe[0],B.routeData.y[0]=Ce[0],B.routeData.controlx=pe,B.routeData.controly=Ce,he=1,wt()):(he=Ny(0),cs=0),Fy()}}function fm(){const n=document.getElementById("rg2-name-entry"),t=n.value.trim();t?n.classList.add("is-valid"):n.classList.remove("is-valid");const e=document.getElementById("rg2-time-entry");let i=e.value.trim();if(i.match(/\d+[:.][0-5]\d$/)?e.classList.add("is-valid"):(e.classList.remove("is-valid"),i=null),t&&i&&B.routeData.courseid!==null){i=i.replace(".",":"),B.routeData.name=t,B.routeData.resultid=0,B.routeData.totaltime=i,B.routeData.startsecs=0,B.routeData.time[0]=Ii(i),B.routeData.totalsecs=Ii(i),he=1;const s=kP(B.routeData.courseid),r=s[s.length-1];let o=[];for(let a=0;a<s.length;a=a+1)o[a]=parseInt(s[a]/r*B.routeData.totalsecs,10);B.routeData.splits=o,cs=0,Fy()}}function KL(){B.routeData.courseid!==null&&(lo?Ta(B.routeData.resultid,!0):nl(B.routeData.courseid,!0))}function Fy(){document.getElementById("btn-three-seconds").removeAttribute("disabled"),document.getElementById("btn-reset-drawing").removeAttribute("disabled",""),document.getElementById("rg2-load-gps-file").removeAttribute("disabled"),Py(0),wt()}function JL(){B.baseX=B.savedBaseX.slice(0),B.baseY=B.savedBaseY.slice(0),B.routeData.x=B.savedBaseX.slice(0),B.routeData.y=B.savedBaseY.slice(0),B.handles.undo(),document.getElementById("btn-undo-gps-adjust").setAttribute("disabled",""),wt()}function ZL(){if(Pa){const n=B.routeData.x.length;n>1&&(pe[cs]===B.routeData.x[n-1]&&Ce[cs]===B.routeData.y[n-1]&&(he===pe.length&&document.getElementById("btn-save-route").setAttribute("disabled",""),he=cs,cs=RL(he)),B.routeData.x.pop(),B.routeData.y.pop()),B.routeData.x.length>1?document.getElementById("btn-undo").removeAttribute("disabled"):document.getElementById("btn-undo").setAttribute("disabled",""),wt()}}function QL(){nh(B.routeData.x[B.routeData.x.length-1],B.routeData.y[B.routeData.y.length-1]),wt()}let tP=class{constructor(t){switch(this.kartatid=t.id,this.mapid=t.mapid,this.format=t.format,this.name=t.name,this.date=t.date,this.club=t.club,this.rawtype=t.type,t.type){case"I":this.type="International event";break;case"N":this.type="National event";break;case"R":this.type="Regional event";break;case"L":this.type="Local event";break;case"T":this.type="Training event";break;default:this.type="Unknown";break}this.comment=t.comment,this.locked=t.locked,this.courses=0,t.suffix===void 0?this.mapfilename=this.mapid+".jpg":this.mapfilename=this.mapid+"."+t.suffix,this.worldfile=new si(t)}},Ht=[],Qt=null,sh=!1;function eP(n){const t=document.querySelectorAll("#rg2-event-table tr");for(let i of t)parseInt(i.dataset.kartatid,10)===n?i.classList.add("table-success"):i.classList.remove("table-success");const e=document.getElementById("btn-splitsbrowser");rg2Config.enable_splitsbrowser&&hf()?e.classList.remove("d-none"):e.classList.add("d-none"),document.getElementById("btn-toggle-controls").removeAttribute("disabled"),document.getElementById("btn-runners").removeAttribute("disabled"),document.getElementById("btn-measure").removeAttribute("disabled")}function nP(n){bu(null),eu({type:"event",id:n},hP,"Event request failed")}function yo(){eu({type:"events"},fP,"Events request failed")}function $y(){return Qt===null?!1:Ht[Qt].locked}function iP(){let n="<table class='table table-striped table-hover table-sm'><tbody id='rg2-event-table'>";for(let t=Ht.length-1;t>=0;t-=1){let e=U(Ht[t].type,"")+": "+Ht[t].date;Ht[t].comment!==""&&(e+=": "+Ht[t].comment);let i="";Ht[t].comment!==""&&(i=`<i class='bi-info-circle' id='info-${t}'></i>`);let s="";Ht[t].worldfile.valid&&(s=`<i class='bi-globe' id='info-${t}'></i>`);let r="";Ht[t].locked&&(r=`<i class='bi-lock-fill' id='info-${t}'></i>`),n+=`<tr data-kartatid="${Ht[t].kartatid}"><td class="event-date">${Ht[t].date}</td><td title='${e}'>`,n+=`${Ht[t].name} ${r} ${s} ${i}</td ></tr >`}return n+="</tbody></table>",n}function sP(){return Qt!==null?Ht[Qt].date:""}function Vy(){return Qt}function rP(){if(Qt!==null)return Ht[Qt].kartatid}function oP(){return Qt!==null?Ht[Qt].name:"Routegadget 2"}function aP(){return Qt!==null?Ht[Qt].mapid:null}function lP(n){for(let t=0;t<Ht.length;t+=1)if(Ht[t].kartatid===n)return t}function hf(){return Qt!==null?Ht[Qt].format===F.FORMAT_NORMAL||Ht[Qt].format===F.FORMAT_SCORE_EVENT:!0}function ff(n){n=n||fr();const t=lP(n);let e=Ht[t];return e.id=t,e.controls=Xe.getControlCount(),e.exclude=IP(),e}function cP(){if(Qt===null)return"";const n=fr(),t=ff(parseInt(n,10));let e=`<div class='fs-4 fw-bolder pb-3'>${U("Event statistics")}</div>`;return e+="<table class='table table-sm table-striped-columns table-bordered'><tbody>",e+=`<tr><td>${U("Event")}</td><td>${t.name}:&nbsp;${t.date}</td></tr>`,t.comment&&(e+=`<tr><td>${U("Comments")}</td><td>${t.comment}</td></tr>`),e+=vk(t.controls,t.worldfile.valid),e+="</tbody></table>",e+='<hr class="border border-primary opacity-75" />',e+=uk(),e=e.replace(/&amp;/g,"&"),e}function fr(){return Qt===null?null:Ht[Qt].kartatid}function uP(){return Qt===null||!vu()?"px":"m"}function dP(n){for(let t=0;t<Ht.length;t+=1)if(Ht[t].kartatid===n)return Ht[t].mapfilename;return""}function mu(){if(Qt===null||!vu())return;const n=vs(),t=$e(0,0,n.width,n.height),e=Ht[Qt].worldfile,i=e.C,s=e.F,r=e.A*n.width+e.B*n.height+e.C,o=e.D*n.width+e.E*n.height+e.F;return Pd(s,i,o,r)/t}function Hy(){return Qt===null?null:Ht[Qt].worldfile}function hP(n,t){sh=!1,h1(t),bu(t),pf(),NP(n.courses),Tk(n.results),Ak(n.routes),By(),eP(t)}function fP(n){Ht.length=0,Qt=null;for(const e of n.events)Ht.push(new tP(e));dL();const t=l1();t&&el(t),F.managing()&&Z1(Ht)}function Ra(){return Qt!==null?Ht[Qt].format===F.FORMAT_SCORE_EVENT||Ht[Qt].format===F.FORMAT_SCORE_EVENT_NO_RESULTS:!1}function zy(n){for(let t=0;t<Ht.length;t+=1)if(Ht[t].kartatid===n)return!0;return!1}function el(n){sh||!zy(n)||(sh=!0,eR(),ek(),qy(),_f(rg2Config.maps_url+dP(n)),document.getElementById("rg2-load-progress-label").textContent=U("Loading event",""),document.getElementById("rg2-load-progress").classList.remove("d-none"),nP(n),wt())}function pP(n){for(let t=0;t<Ht.length;t+=1)if(Ht[t].mapid===n)return!0;return!1}function vu(){return Qt===null?!1:Ht[Qt].worldfile.valid}function bu(n){Qt=null;for(let t=0;t<Ht.length;t+=1)if(Ht[t].kartatid===n){Qt=t;break}}function pf(){let n="";n=sP()+" "+Hn(oP()),document.title=n,vu()&&(n="<i class='bi-globe'>&nbsp;</i>"+n),$y()&&(n="<i class='bi-lock-fill'>&nbsp;</i>"+n),document.getElementById("rg2-event-title").innerHTML=n}class gP{constructor(t,e){this.name=t.name,this.trackcount=0,this.display=!1,this.courseid=t.courseid,this.codes=t.codes,this.setExcluded(t),this.filterTo=this.codes.length,this.filterFrom=0,this.x=t.xpos,this.y=t.ypos,this.isScoreCourse=e,this.resultcount=0,this.angle=[],this.textAngle=[],this.setAngles(),this.length=this.setLength()}drawCourse(t){if(this.display){const e=Ya();if(D.globalAlpha=t,Xe.drawStart(this.x[0],this.y[0],"",this.angle[0],e),!this.isScoreCourse){const i={from:this.filterFrom,to:this.filterTo};this.drawLinesBetweenControls({x:this.x,y:this.y},this.angle,e,i)}if(this.isScoreCourse)for(let i=1;i<this.x.length;i+=1)this.codes[i].indexOf("F")===0||this.codes[i].indexOf("M")===0?Xe.drawFinish(this.x[i],this.y[i],"",e):Xe.drawSingleControl(this.x[i],this.y[i],this.codes[i],this.textAngle[i],e);else{const i=Math.max(this.filterFrom,1),s=Math.min(this.filterTo+1,this.x.length-1);for(let r=i;r<s;r+=1)Xe.drawSingleControl(this.x[r],this.y[r],r,this.textAngle[r],e);Xe.drawFinish(this.x[this.x.length-1],this.y[this.y.length-1],"",e)}}}drawLinesBetweenControls(t,e,i,s){let r;for(let o=s.from;o<s.to;o+=1){o===0?r=i.startTriangleLength:r=i.controlRadius;const a=t.x[o]+r*Math.cos(e[o]),l=t.y[o]+r*Math.sin(e[o]);o===this.x.length-2?r=i.finishOuterRadius:r=i.controlRadius;const d=t.x[o+1]-r*Math.cos(e[o]),f=t.y[o+1]-r*Math.sin(e[o]);D.beginPath(),D.moveTo(a,l),D.lineTo(d,f),D.stroke()}}getLegLengths(){let t=[];if(this.isScoreCourse)return t[1]=1,t;t[0]=0;for(let e=1;e<this.x.length;e+=1)t[e]=parseInt(t[e-1]+$e(this.x[e],this.y[e],this.x[e-1],this.y[e-1]),0);return t}incrementTracksCount(){this.trackcount+=1}setAngles(){for(let t=0;t<this.x.length-1;t+=1)if(this.isScoreCourse)this.angle[t]=Math.PI*1.5,this.textAngle[t]=Math.PI*.25;else{this.angle[t]=or(this.x[t],this.y[t],this.x[t+1],this.y[t+1]);const e=Math.sin(this.angle[t-1]),i=Math.cos(this.angle[t-1]),s=Math.sin(this.angle[t])+e,r=Math.cos(this.angle[t])+i,o=s/2,a=r/2;this.textAngle[t]=or(o,a,e,i)}this.angle[this.x.length-1]=Math.PI*1.5,this.textAngle[this.x.length-1]=Math.PI*1.5}setDisplay(t){this.display=t}setExcluded(t){this.excludeType=t.excludeType,this.exclude=t.codes.map((e,i)=>t.exclude.findIndex(s=>s===i)>-1),this.allowed=t.codes.map((e,i)=>t.exclude.findIndex(s=>s===i)>-1?t.allowed[t.exclude.findIndex(s=>s===i)]:0)}setLength(){let t=0;const e=mu();if(!(e===void 0||this.isScoreCourse)){for(let i=1;i<this.x.length;i+=1)t+=$e(this.x[i],this.y[i],this.x[i-1],this.y[i-1]);if(t!==0)return(t*e/1e3).toFixed(1)}}}(()=>{var n=Object.defineProperty,t=Math.pow,e=(k,L,W)=>L in k?n(k,L,{enumerable:!0,configurable:!0,writable:!0,value:W}):k[L]=W,i=(k,L,W)=>(e(k,typeof L!="symbol"?L+"":L,W),W),s=(k,L)=>` ${L&&L.length>0?L.map(W=>`<link rel="stylesheet" href="${W}" />`).join(""):""} <style> ${k} </style> <div class="range-slider-box"> <div class="row"> <div id="range-slider" class="range-slider"> <div class="container"> <div class="panel"></div> <div class="panel-fill"></div> <div class="container"> <div class="pointer" tabindex="0" role="slider"> <div class="pointer-shape"></div> </div> </div> </div> </div> </div> </div>`,r=":host{--width:300px;--height:.25rem;--opacity:.4;--panel-bg:#cbd5e1;--panel-bg-hover:#94a3b8;--panel-bg-fill:#475569;--panel-bg-border-radius:1rem;--pointer-width:1rem;--pointer-height:1rem;--pointer-bg:#fff;--pointer-bg-hover:#dcdcdc;--pointer-bg-focus:#dcdcdc;--pointer-shadow:0 0 2px rgba(0,0,0,0.8);--pointer-shadow-hover:0 0 2px #000;--pointer-shadow-focus:var(--pointer-shadow-hover);--pointer-border:1px solid hsla(0,0%,88%,0.5);--pointer-border-hover:1px solid #94a3b8;--pointer-border-focus:var(--pointer-border-hover);--pointer-border-radius:100%;--animate-onclick:.3s}:host{max-width:100%}.range-slider-box{display:flex;position:relative;flex-direction:column}.range-slider{position:relative;width:var(--width,100%);height:var(--height,0.25rem);touch-action:none;max-width:100%;box-sizing:border-box;cursor:pointer}.row{width:100%;display:flex;align-items:center}.range-slider.disabled{opacity:var(--opacity,0.4);cursor:default}.pointer.disabled{-webkit-filter:brightness(0.8);filter:brightness(0.8);cursor:default}.range-slider *{box-sizing:border-box}.container{position:absolute;width:100%;height:100%}.panel{position:absolute;z-index:10;width:100%;height:100%;background:var(--panel-bg,#2d4373);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;transition:.3s all ease}.panel-fill{background:var(--panel-bg-fill,#000);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;height:100%;position:absolute;z-index:10}.panel:hover{background:var(--panel-bg-hover,#5f79b7)}.disabled .panel:hover{background:var(--panel-bg,#5f79b7)}.pointer{position:absolute;z-index:20;outline:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;box-shadow:var(--pointer-shadow);border:var(--pointer-border);border-radius:var(--pointer-border-radius,100%);-webkit-transform:translateX(-50%);transform:translateX(-50%);width:var(--pointer-width,15px);height:var(--pointer-height,15px);transition:.3s all ease}.pointer-shape:hover{background:var(--pointer-bg-hover,#fff);background-size:contain;border:var(--pointer-border-hover);box-shadow:var(--pointer-shadow-hover)}.disabled .pointer-shape:hover{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.pointer:focus .pointer-shape{background:var(--pointer-bg-focus,#fff);background-size:contain;border:var(--pointer-border-focus);box-shadow:var(--pointer-shadow-focus)}.disabled .pointer:focus .pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.type-vertical .range-slider{--width:.25rem;--height:300px;max-height:100%}.type-vertical .range-slider .pointer{left:50%}.type-vertical .range-slider .panel-fill{width:100%}.type-vertical.range-slider-box{flex-direction:row}.type-vertical .row{flex-direction:column}.animate-on-click .pointer,.animate-on-click .panel-fill{transition:all var(--animate-onclick)}.range-dragging .panel-fill{cursor:move}",o="pointers-overlap",a="pointers-min-distance",l="pointers-max-distance",d="range-dragging",f="data",p="min",v="max",y="step",E="round",w="type",T="theme",O="rtl",R="btt",j="disabled",$="keyboard-disabled",V="mousewheel-disabled",X="slider-width",C="slider-height",Z="slider-radius",it="slider-bg",ut="slider-bg-hover",ft="slider-bg-fill",pt="pointer-width",It="pointer-height",Nt="pointer-radius",xt="pointer-bg",bt="pointer-bg-hover",Ct="pointer-bg-focus",Ee="pointer-shadow",qt="pointer-shadow-hover",be="pointer-shadow-focus",en="pointer-border",Ve="pointer-border-hover",qe="pointer-border-focus",Te="animate-onclick",Ae="css-links",te="vertical",nn="horizontal",sn=(k,L,W,z,st)=>{let Et=L-k;return Et===0?W:(z-W)*(st-k)/Et+W},at=k=>!isNaN(parseFloat(k))&&isFinite(k),se=(k,L)=>at(k)?Number(k):L,En=(k,L)=>L===0?0:Math.round(k/L)*L,zi=(k,L=1/0)=>{if(L===1/0)return k;let W=t(10,L);return Math.round(k*W)/W},ue=k=>k==null?!1:typeof k=="boolean"?k:k.trim().toLowerCase()==="true",qi=(k,L)=>{k.dispatchEvent(new CustomEvent("onPointerClicked",{detail:{$pointer:L}}))},mi=(k,L)=>{k.dispatchEvent(new CustomEvent("onMouseDown",{detail:{nativeEvent:L}}))},wn=(k,L)=>{k.dispatchEvent(new CustomEvent("onMouseUp",{detail:{nativeEvent:L}}))},Ss=(k,L)=>{k.dispatchEvent(new CustomEvent("onKeyDown",{detail:{nativeEvent:L}}))},vi=(k,L)=>{if(!L||L.length<=0)return;let W=L.map(st=>at(st)?se(st,st):st),z={values:W||[]};z.value=W[0],z.value0=W[0],z.value1=W[0];for(let st=1;st<W.length;st++)z[`value${st+1}`]=W[st];k.dispatchEvent(new CustomEvent("change",{detail:z}))},Ts=(k,L,W)=>{let z=0,st,Et,Pt,ot,lt=!1,Bt=(Tt,Zt,ke,we,ge,me)=>{let Ue=z;ke!==void 0&&Tt>ke&&(Tt=ke),Zt!==void 0&&Tt<Zt&&(Tt=Zt),z=Tt;let He=z;return(we===te&&me||we===nn&&ge)&&(He=100-He),we===te?L.style.top=`${He}%`:L.style.left=`${He}%`,Ue!==z},zt=Tt=>Tt===L||L.contains(Tt),mt=(Tt,Zt,ke,we)=>{st=Tt,Et=Zt,Pt=ke,ot=we},Xt=Tt=>{lt=Tt,L.classList.toggle("disabled",lt),lt?L.setAttribute("aria-disabled","true"):L.hasAttribute("aria-disabled")&&L.removeAttribute("aria-disabled")},je=(Tt,Zt)=>{Zt==null?L.removeAttribute(Tt):L.setAttribute(Tt,Zt)},Me=Tt=>L.getAttribute(Tt),St=Tt=>{if(!lt){switch(Tt.key){case"ArrowLeft":{Tt.preventDefault(),typeof st=="function"&&st(W);break}case"ArrowRight":{Tt.preventDefault(),typeof Et=="function"&&Et(W);break}case"ArrowUp":{Tt.preventDefault(),typeof Pt=="function"&&Pt(W);break}case"ArrowDown":{Tt.preventDefault(),typeof ot=="function"&&ot(W);break}}Ss(k,Tt)}},Ft=()=>{lt||qi(k,L)};return L.className=`pointer pointer-${W}`,L.addEventListener("keydown",St),L.addEventListener("click",Ft),{$pointer:L,get percent(){return z},get disabled(){return lt},set disabled(Tt){Xt(Tt)},updatePosition:Bt,isClicked:zt,setCallbacks:mt,setAttr:je,getAttr:Me,destroy:()=>{L.removeEventListener("keydown",St),L.removeEventListener("click",Ft),L.remove()}}},rn=k=>{if(k==null)return;if(Array.isArray(k))return k;if(k.trim()==="")return;let L=k.split(","),W=[],z=!0;for(let st=0;st<L.length;st++){let Et=L[st].trim();Et!==""&&(W.push(Et),at(Et)||(z=!1))}return z?W.map(st=>Number(st)):W},Pn=(k,L)=>L?L.findIndex(W=>W===k||W.toString().trim()===k.toString().trim()):-1,As=k=>({updatePosition:(L,W,z,st)=>{if(W.length<=0)return;let Et=W.length===1,Pt=W[0],ot=W[W.length-1];L===te?(k.style.removeProperty("width"),k.style.removeProperty("right"),k.style.removeProperty("left"),Et?k.style.height=`${Pt}%`:k.style.height=`${Math.abs(Pt-ot)}%`,st?(k.style.bottom="0%",Et?k.style.top="auto":k.style.top=`${Math.min(100-ot,100-Pt)}%`):(k.style.bottom="auto",Et?k.style.top="0%":k.style.top=`${Math.min(Pt,ot)}%`)):(k.style.removeProperty("height"),k.style.removeProperty("top"),k.style.removeProperty("bottom"),Et?k.style.width=`${Pt}%`:k.style.width=`${Math.abs(Pt-ot)}%`,z?(k.style.right="0%",Et?k.style.left="auto":k.style.left=`${Math.min(100-ot,100-Pt)}%`):(k.style.right="auto",Et?k.style.left="0%":k.style.left=`${Math.min(Pt,ot)}%`))}}),ji="--animate-onclick",Un="--width",ks="--height",Wn="--panel-bg-border-radius",gr="--panel-bg",Ui="--panel-bg-hover",rl="--panel-bg-fill",_o="--pointer-width",Eo="--pointer-height",wo="--pointer-border-radius",ol="--pointer-bg",al="--pointer-bg-hover",mr="--pointer-bg-focus",ll="--pointer-shadow",cl="--pointer-shadow-hover",Ds="--pointer-shadow-focus",Cs="--pointer-border",Wi="--pointer-border-hover",ul="--pointer-border-focus",Yi=(k,L,W)=>{let z=new Map;for(let st of k.attributes){let Et=st.nodeName.trim().toLowerCase();if(!L.test(Et))continue;let Pt=Et.replace(/\D/g,"").trim(),ot=Pt===""||Pt==="0"||Pt==="1"?0:se(Pt,0)-1,lt=W&&typeof W=="function"?W(st.value):st.value;z.set(ot,lt)}return z},dl=k=>{if(!k)return null;let L=k.getAttribute(Ae);if(!L)return null;let W=L.split(";"),z=[];for(let st of W)st.trim()!==""&&z.push(st.trim());return z},vr=[[Un,X,"sliderWidth",null],[ks,C,"sliderHeight",null],[Wn,Z,"sliderRadius",null],[gr,it,"sliderBg",null],[Ui,ut,"sliderBgHover",null],[rl,ft,"sliderBgFill",null],[_o,pt,"pointer#Width",/^pointer([0-9]*)-width$/],[Eo,It,"pointer#Height",/^pointer([0-9]*)-height$/],[wo,Nt,"pointer#Radius",/^pointer([0-9]*)-radius$/],[ol,xt,"pointer#Bg",/^pointer([0-9]*)-bg$/],[al,bt,"pointer#BgHover",/^pointer([0-9]*)-bg-hover$/],[mr,Ct,"pointer#BgFocus",/^pointer([0-9]*)-bg-focus$/],[ll,Ee,"pointer#Shadow",/^pointer([0-9]*)-shadow$/],[cl,qt,"pointer#ShadowHover",/^pointer([0-9]*)-shadow-hover$/],[Ds,be,"pointer#ShadowFocus",/^pointer([0-9]*)-shadow-focus$/],[Cs,en,"pointer#Border",/^pointer([0-9]*)-border$/],[Wi,Ve,"pointer#BorderHover",/^pointer([0-9]*)-border-hover$/],[ul,qe,"pointer#BorderFocus",/^pointer([0-9]*)-border-focus$/]],So=(k,L,W)=>{let z=null,st=[],Et=new Map,Pt=(St,Ft=L)=>{let Tt=[...Ft.classList];for(let Zt of Tt)Zt.startsWith(St)&&L.classList.remove(Zt)},ot=()=>{Pt("shape");let St=L.querySelectorAll(".pointer");for(let Ft of St)Pt("shape",Ft)},lt=St=>{z=St,Pt("theme-"),typeof St=="string"&&L.classList.add(`theme-${St}`)},Bt=()=>{if(ot(),!(st.length<=0)){L.classList.add("shape",`shape-${st[0]}`);for(let St=1;St<st.length;St++){let Ft=st[St];if(!Ft)continue;let Tt=L.querySelector(`.pointer-${St}`);!Tt||Tt.classList.add("shape",`shape-${Ft}`)}}},zt=(St,Ft)=>{st[St]=Ft,Bt()},mt=()=>{ot();let St=Yi(k,/^pointer([0-9]*)-shape$/);if(!(St.size<=0)){for(let Ft of St){let Tt=Ft[0];st[Tt]=Ft[1]}Bt()}},Xt=(St,Ft)=>`${St}-${Ft}`,je=(St,Ft,Tt)=>{let Zt=W[Tt];if(!Zt)return;let ke=Tt===0?L:Zt.$pointer;if(Ft==null){Et.has(Xt(St,Tt))&&Et.delete(Xt(St,Tt)),ke.style.removeProperty(St);return}Et.set(Xt(St,Tt),Ft),ke.style.setProperty(St,Ft)},Me=(St,Ft)=>Et.get(Xt(St,Ft));return(()=>{for(let St of vr){let[Ft,Tt,Zt,ke]=St;if(ke){let ge=Yi(k,ke);for(let me of ge){let Ue=me[0],He=me[1];je(Ft,He,Ue)}}else{let ge=k.getAttribute(Tt);je(Ft,ge,0)}let we=[];if(Zt.indexOf("#")===-1)we.push([Zt,0]);else{we.push([Zt.replace("#",""),0]),we.push([Zt.replace("#","0"),0]),we.push([Zt.replace("#","1"),0]);for(let ge=1;ge<W.length;ge++)we.push([Zt.replace("#",(ge+1).toString()),ge])}for(let ge of we)try{let me=ge[0],Ue=ge[1];Object.prototype.hasOwnProperty.call(k,me)||Object.defineProperty(k,me,{get(){return Me(Ft,Ue)},set:He=>{je(Ft,He,Ue)}})}catch(me){console.error(me)}}lt(k.getAttribute(T)),mt()})(),{setStyle:je,getStyle:Me,get theme(){return z},set theme(St){lt(St)},get pointerShapes(){return st},setPointerShape:zt}},bi="animate-on-click",To="range-dragging",_u=(k,L,W,z)=>{let st=[],Et=zt=>{for(let mt of st)mt.update&&typeof mt.update=="function"&&mt.update(zt)},Pt=()=>{for(let zt of st)zt.destroy&&typeof zt.destroy=="function"&&zt.destroy()},ot=(zt,mt)=>{for(let Xt of st)Xt.onAttrChange&&typeof Xt.onAttrChange=="function"&&Xt.onAttrChange(zt,mt)},lt=zt=>{if(zt.gettersAndSetters){for(let mt of zt.gettersAndSetters)if(!(!mt.name||!mt.attributes))try{Object.prototype.hasOwnProperty.call(k,mt.name)||Object.defineProperty(k,mt.name,mt.attributes)}catch(Xt){console.error("defineSettersGetters error:",Xt)}}},Bt=zt=>{var mt;if(!zt.css)return;let Xt=(mt=k.shadowRoot)==null?void 0:mt.querySelector("style");!Xt||(Xt.innerHTML+=zt.css)};return{init:()=>{if(window.tcRangeSliderPlugins)for(let zt of window.tcRangeSliderPlugins){let mt=zt();st.push(mt),mt.init&&typeof mt.init=="function"&&(mt.init(k,L,W,z),lt(mt),Bt(mt))}},update:Et,onAttrChange:ot,destroy:Pt}},Ao=10,br=20,Eu=(k,L)=>{let W=new Map,z=/^value([0-9]*)$/;for(let ot of k.attributes){let lt=ot.nodeName.trim().toLowerCase();if(!z.test(lt))continue;let Bt=lt.replace("value","").trim(),zt=Bt===""||Bt==="0"||Bt==="1"?0:se(Bt,0)-1,mt=at(ot.value)?se(ot.value,0):ot.value;W.set(zt,mt)}let st=Math.max(...Array.from(W.keys())),Et=[];Et.push([Ts(k,L,0),W.get(0)]);let Pt=L;for(let ot=1;ot<=st;ot++){let lt=L.cloneNode(!0);Pt.after(lt),Pt=lt,Et.push([Ts(k,lt,ot),W.get(ot)])}return Et},hl=(k,L,W,z,st,Et,Pt)=>{try{Object.defineProperty(k,z,{configurable:!0,get(){if(!L)return;let ot=L.pointers[W];if(!ot)return;let lt=L.getTextValue(ot.percent);return at(lt)?se(lt,lt):lt},set:ot=>{L.pointers[W]?L==null||L.setValue(ot,W):L==null||L.addPointer(ot)}}),Object.defineProperty(k,st,{configurable:!0,get(){var ot,lt;return(lt=(ot=L==null?void 0:L.pointers[W])==null?void 0:ot.getAttr("aria-label"))!=null?lt:void 0},set:ot=>{!L||L.setAriaLabel(W,ot)}}),Object.defineProperty(k,Et,{configurable:!0,get(){var ot,lt;return(lt=(ot=L==null?void 0:L.styles)==null?void 0:ot.pointerShapes[W])!=null?lt:null},set:ot=>{!L||!L.styles||L.styles.setPointerShape(W,ot)}}),Object.defineProperty(k,Pt,{configurable:!0,get(){var ot;return(ot=L==null?void 0:L.pointers[W].disabled)!=null?ot:!1},set:ot=>{if(!L)return;let lt=L==null?void 0:L.pointers[W];!lt||(lt.disabled=ot)}})}catch(ot){console.error(ot)}},fl=(k,L)=>{let W=[["value","ariaLabel","pointerShape","pointerDisabled",0],["value0","ariaLabel0","pointerShape0","pointer0Disabled",0],["value1","ariaLabel1","pointerShape1","pointer1Disabled",0]];for(let z=2;z<Ao;z++)W.push([`value${z}`,`ariaLabel${z}`,`pointer${z}Shape`,`pointer${z}Disabled`,z-1]);for(let z of W)hl(k,L,z[4],z[0],z[1],z[2],z[3])},Sn=(k,L,W)=>{var z;let st=(z=W.shadowRoot)==null?void 0:z.querySelector(".container");if(st)for(let Et of k)L?st.prepend(Et.$pointer):st.append(Et.$pointer)},yi=(k,L)=>{if(!(!L||k.length<=1)){for(let W of k)W.$pointer.style.zIndex=br.toString();L.$pointer.style.zIndex=(br*2).toString()}},un=0,Is=100,Xi=2,ko="0.3s",Yn=(k,L,W)=>{let z=W.map(M=>M[0]),st=null,Et=null,Pt=null,ot=null,lt=un,Bt=Is,zt,mt,Xt=nn,je=Xi,Me=!1,St=!1,Ft=!1,Tt=0,Zt=1/0,ke=!1,we,ge,me=!1,Ue=!1,He=!1,dn=ko,xi=[],xr=M=>{me||(M.preventDefault&&M.preventDefault(),Ei(M),window.addEventListener("mousemove",Ei),window.addEventListener("mouseup",_i),mi(k,M))},_i=M=>{me||(we=void 0,ge=void 0,window.removeEventListener("mousemove",Ei),window.removeEventListener("mouseup",_i),dn&&L.classList.add(bi),wn(k,M))},Xn=(M,G)=>{if(z.length<=0)return;if(z.length===1)return z[0].isClicked(M)&&dn&&L.classList.remove(bi),z[0];let ht=wu(M);if(ke){let Gt=G,fn=Ls(Gt);fn!==void 0&&(Gt=En(Gt,fn)),ht?(we=Gt,ge=0,dn&&L.classList.remove(bi)):we!==void 0&&(ge=Gt-we,we=Gt)}if(!vl(M)&&!ht){for(let Gt of z)if(!(!Gt.isClicked(M)||Gt.disabled))return dn&&L.classList.remove(bi),Gt;for(let Gt of z)if(st===Gt)return Gt}let Jt=1/0,re=null;for(let Gt of z){if(Gt.disabled)continue;let fn=Math.abs(G-Gt.percent);fn<Jt&&(Jt=fn,re=Gt)}return re},Gi=()=>z.findIndex(M=>st===M&&!M.disabled),Ei=M=>{let G;if(Xt===te){let{height:Jt,top:re}=L.getBoundingClientRect(),Gt=M.type.indexOf("mouse")!==-1?M.clientY:M.touches[0].clientY;G=Math.min(Math.max(0,Gt-re),Jt)*100/Jt}else{let{width:Jt,left:re}=L.getBoundingClientRect(),Gt=M.type.indexOf("mouse")!==-1?M.clientX:M.touches[0].clientX;G=Math.min(Math.max(0,Gt-re),Jt)*100/Jt}if((Me||St)&&(G=100-G),st=Xn(M.target,G),st&&yi(z,st),ke&&z.length>1&&ge!==void 0){let Jt=z[0],re=z[z.length-1],Gt=Jt.percent+ge<0,fn=re.percent+ge>100;if(Gt||fn)return;for(let $s=0;$s<z.length;$s++)We($s,z[$s].percent+ge);return}let ht=Gi();ht!==-1&&(We(ht,G),st==null||st.$pointer.focus())},Os=M=>{if(me||document.activeElement!==k||st!=null&&st.disabled)return;M.stopPropagation(),M.preventDefault();let G=M.deltaY<0,ht=Me||St,Jt=G?!ht:ht,re=Gi();re!==-1&&(Jt?Ms(re,z[re].percent):Ki(re,z[re].percent))},Do=M=>{me||Ue||(Xt===te?St?We(M,100):We(M,0):Me?Ki(M,z[M].percent):Ms(M,z[M].percent))},_r=M=>{me||Ue||(Xt===te?St?We(M,0):We(M,100):Me?Ms(M,z[M].percent):Ki(M,z[M].percent))},gl=M=>{me||Ue||(Xt===te?St?Ki(M,z[M].percent):Ms(M,z[M].percent):Me?We(M,100):We(M,0))},ml=M=>{me||Ue||(Xt===te?St?Ms(M,z[M].percent):Ki(M,z[M].percent):Me?We(M,0):We(M,100))},vl=M=>M.classList.contains("panel"),wu=M=>M.classList.contains("panel-fill"),Ms=(M,G)=>{if(G===void 0)return;let ht=Ls(G);ht==null&&(ht=1),G-=ht,G<0&&(G=0),We(M,G)},Ki=(M,G)=>{if(G===void 0)return;let ht=Ls(G);ht==null&&(ht=1),G+=ht,G>100&&(G=100),We(M,G)},Gn=()=>{!ot||ot.update({percents:Io(),values:Oo(),$pointers:yl(),min:Zi(),max:Ps(),data:Mo(),step:wr(),round:Sr(),type:Rs(),textMin:wi(),textMax:Er(),rightToLeft:Tr(),bottomToTop:Bs(),pointersOverlap:No(),pointersMinDistance:Lo(),pointersMaxDistance:Ns(),rangeDragging:Bo(),disabled:Po(),keyboardDisabled:Ro(),mousewheelDisabled:Tn()})},Su=()=>{Gn()},Co=M=>{if(!(Ft||z.length<=1||Bt===lt))if(M===0){let G=Zt*100/(Bt-lt);return Math.max(0,z[M+1].percent-G)}else{let G=Tt*100/(Bt-lt);return Math.min(z[M-1].percent+G,100)}},Tu=M=>{if(!(Ft||z.length<=1||Bt===lt))if(M===z.length-1){let G=Zt*100/(Bt-lt);return Math.min(z[M-1].percent+G,100)}else{let G=Tt*100/(Bt-lt);return Math.max(0,z[M+1].percent-G)}},Ls=M=>{let G;if(typeof zt=="function"){let ht=sn(0,100,lt,Bt,M);G=zt(ht,M)}else G=zt;if(at(G)){let ht=Bt-lt;return G=ht===0?0:G*100/ht,G}},Ji=M=>{if(M===void 0)return;let G=sn(0,100,lt,Bt,M);return mt!==void 0?mt[Math.round(G)]:zi(G,je)},wi=()=>mt!==void 0?mt[lt]:lt,Er=()=>mt!==void 0?mt[Bt]:Bt,wr=()=>zt,bl=M=>{var G;return M<=0||Ft?wi():(G=Ji(z[M-1].percent))!=null?G:""},Au=M=>{var G;return z.length<=1||M>=z.length-1||Ft?Er():(G=Ji(z[M+1].percent))!=null?G:""},Io=()=>z.map(M=>M.percent),Oo=()=>z.map(M=>Ji(M.percent)),yl=()=>z.map(M=>M.$pointer),Zi=()=>lt,Ps=()=>Bt,Mo=()=>mt,Rs=()=>Xt,Sr=()=>je,Lo=()=>Tt,Ns=()=>Zt,xl=M=>xi[M],Tr=()=>Me,Bs=()=>St,Po=()=>me,Ro=()=>Ue,Tn=()=>He,No=()=>Ft,Bo=()=>ke,We=(M,G)=>{if(G===void 0)return;let ht=Ls(G);ht!==void 0&&(G=En(G,ht));let Jt=z[M];if(!Jt)return;let re=Jt.updatePosition(G,Co(M),Tu(M),Xt,Me,St);Et==null||Et.updatePosition(Xt,z.map(Gt=>Gt.percent),Me,St),Gn();for(let Gt of z){let fn=Ji(Gt.percent);fn!==void 0&&(Gt.setAttr("aria-valuenow",fn.toString()),Gt.setAttr("aria-valuetext",fn.toString()))}ze(),re&&vi(k,z.map(Gt=>Ji(Gt.percent)))},hn=()=>{for(let M=0;M<z.length;M++)We(M,z[M].percent)},_l=(M,G)=>{lt=mt!==void 0?0:se(M,un),Bt=mt!==void 0?mt.length-1:se(G,Is),Ar(lt),kr(Bt)},ze=()=>{var M,G;for(let ht=0;ht<z.length;ht++){let Jt=z[ht];Jt.setAttr("aria-valuemin",((M=bl(ht))!=null?M:"").toString()),Jt.setAttr("aria-valuemax",((G=Au(ht))!=null?G:"").toString())}},Ar=M=>{lt=se(M,un),lt>Bt&&(Bt=lt+Is),hn()},kr=M=>{Bt=se(M,Is),Bt<lt&&(Bt=lt+Is),hn()},El=M=>{Ft=!0;for(let G=0;G<M.length;G++)Dr(M[G],G);Ft=!1;for(let G=0;G<M.length;G++)Dr(M[G],G)},Dr=(M,G)=>{let ht;mt!==void 0?(ht=M==null?0:Pn(M,mt),ht===-1&&(ht=0)):(ht=se(M,lt),ht<lt&&(ht=lt),ht>Bt&&(ht=Bt));let Jt=sn(lt,Bt,0,100,ht);We(G,Jt)},Cr=M=>{if(M==null){zt=void 0;return}if(typeof M=="function"){zt=M,hn();return}if(at(M)){zt=se(M,1);let G=Math.abs(Bt-lt);zt>G&&(zt=void 0),hn();return}zt=void 0},Fo=M=>{Ft=M,hn()},$o=M=>{(!at(M)||M<0)&&(M=0),Tt=M},Vo=M=>{(!at(M)||M<0)&&(M=1/0),Zt=M},Ir=M=>{me=M,L.classList.toggle("disabled",me),me?L.setAttribute("aria-disabled","true"):L.hasAttribute("aria-disabled")&&L.removeAttribute("aria-disabled")},Fs=M=>{Ue=M},Kn=M=>{He=M,He?document.removeEventListener("wheel",Os):document.addEventListener("wheel",Os,{passive:!1})},Qi=M=>{if(M==null){mt=void 0;return}if(mt=rn(M),mt===void 0||mt.length<=0){mt=void 0;return}Ar(0),kr(mt.length-1),zt===void 0&&Cr(1)},Ho=M=>{var G;typeof M=="string"?Xt=M.trim().toLowerCase()===te?te:nn:Xt=nn;let ht=(G=k.shadowRoot)==null?void 0:G.querySelector(".range-slider-box");if(!ht)return;ht.className=`range-slider-box type-${Xt}`,hn();let Jt=Xt===te?"vertical":"horizontal";for(let re of z)re.setAttr("aria-orientation",Jt)},Or=M=>{Me=M,z.length>1&&Sn(z,Me,k),hn(),Gn()},Mr=M=>{St=M,z.length>1&&Sn(z,St,k),hn(),Gn()},Lr=M=>{je=se(M,Xi),je<0&&(je=Xi),Gn()},ts=M=>{M==null||M.toString().trim().toLowerCase()==="false"?(dn=void 0,L.style.removeProperty(ji),L.classList.remove(bi)):(dn=M.toString(),L.style.setProperty(ji,dn),L.classList.add(bi))},wl=(M,G)=>{let ht=z[M];!ht||(ht.setAttr("aria-label",G),xi[M]=G)},Pr=M=>{if(we=void 0,z.length<=1){ke=!1,L.classList.remove(To);return}ke=M,L.classList.toggle(To,ke)},ku=()=>{Ir(ue(k.getAttribute(j))),Ue=ue(k.getAttribute($)),He=ue(k.getAttribute(V));let M=Yi(k,/^pointer([0-9]*)-disabled$/,G=>ue(G));for(let G of M){let ht=G[0];!z[ht]||(z[ht].disabled=G[1])}},Du=()=>{let M=Yi(k,/^aria-label([0-9]*)$/);for(let G of M){let ht=G[0];wl(ht,G[1])}},Cu=M=>{let G=z.length,ht=z[G-1].$pointer,Jt=ht.cloneNode(!0);ht.after(Jt);let re=Ts(k,Jt,G);return re.setCallbacks(Do,_r,gl,ml),z.push(re),Dr(M,G),hn(),Gn(),G},Iu=()=>{let M=z.length,G=z[M-1];return G?(G.destroy(),z.pop(),z.length<=1&&Pr(!1),hn(),Gn(),M-1):-1};return(()=>{var M,G;for(let Jt of z)Jt.setCallbacks(Do,_r,gl,ml);let ht=(M=k.shadowRoot)==null?void 0:M.querySelector(".panel-fill");ht&&(Et=As(ht)),Ho(k.getAttribute(w)),Or(ue(k.getAttribute(O))),Mr(ue(k.getAttribute(R))),_l(k.getAttribute(p),k.getAttribute(v)),Cr(k.getAttribute(y)),Qi(k.getAttribute(f)),El(W.map(Jt=>Jt[1])),Fo(ue(k.getAttribute(o))),$o(se(k.getAttribute(a),0)),Vo(se(k.getAttribute(l),1/0)),Pr(ue(k.getAttribute(d))),Lr(se(k.getAttribute(E),Xi)),ku(),Du(),Pt=So(k,L,z),ts((G=k.getAttribute(Te))!=null?G:ko),L.addEventListener("mousedown",xr),L.addEventListener("mouseup",_i),L.addEventListener("touchmove",Ei),L.addEventListener("touchstart",Ei),He||document.addEventListener("wheel",Os,{passive:!1}),ot=_u(k,Su,{setValues:El,setMin:Ar,setMax:kr,setStep:Cr,setPointersOverlap:Fo,setPointersMinDistance:$o,setPointersMaxDistance:Vo,setDisabled:Ir,setType:Ho,setRightToLeft:Or,setBottomToTop:Mr,setRound:Lr,setKeyboardDisabled:Fs,setMousewheelDisabled:Kn,setRangeDragging:Pr,setData:Qi},{getPercents:Io,getValues:Oo,getPointerElements:yl,getMin:Zi,getMax:Ps,getStep:wr,getData:Mo,getType:Rs,getRound:Sr,getTextMin:wi,getTextMax:Er,isRightToLeft:Tr,isBottomToTop:Bs,isDisabled:Po,isKeyboardDisabled:Ro,isMousewheelDisabled:Tn,isPointersOverlap:No,isRangeDraggingEnabled:Bo,getPointersMinDistance:Lo,getPointersMaxDistance:Ns}),ot.init()})(),{get pointers(){return z},get styles(){return Pt},get pluginsManager(){return ot},get min(){return wi()},get max(){return Er()},get step(){return wr()},get pointersOverlap(){return No()},set pointersOverlap(M){Fo(M)},get pointersMinDistance(){return Lo()},set pointersMinDistance(M){$o(M)},get pointersMaxDistance(){return Ns()},set pointersMaxDistance(M){Vo(M)},get disabled(){return Po()},set disabled(M){Ir(M)},get data(){return Mo()},get type(){return Rs()},set type(M){Ho(M)},get rightToLeft(){return Tr()},set rightToLeft(M){Or(M)},get bottomToTop(){return Bs()},set bottomToTop(M){Mr(M)},get round(){return Sr()},set round(M){Lr(M)},get animateOnClick(){return dn},set animateOnClick(M){ts(M)},get keyboardDisabled(){return Ro()},set keyboardDisabled(M){Fs(M)},get mousewheelDisabled(){return Tn()},set mousewheelDisabled(M){Kn(M)},get rangeDragging(){return Bo()},set rangeDragging(M){Pr(M)},setMin:Ar,setMax:kr,setValue:Dr,setStep:Cr,setData:Qi,getTextValue:Ji,setAriaLabel:wl,getAriaLabel:xl,addPointer:Cu,removePointer:Iu,destroy:()=>{L.removeEventListener("mousedown",xr),L.removeEventListener("mouseup",_i),L.removeEventListener("touchmove",Ei),L.removeEventListener("touchstart",Ei),document.removeEventListener("wheel",Os);for(let M of z)M.destroy();ot==null||ot.destroy()}}},_t=(k,L,W)=>{let z=vr.find(([ot,lt,Bt,zt])=>lt.replace("#","")===L.replace(/\d+/g,""));if(z&&k.styles){let[ot,lt,Bt,zt]=z,mt=L.replace(/\D/g,"").trim(),Xt=mt===""||mt==="0"||mt==="1"?0:se(mt,0)-1;k.styles.setStyle(ot,W,Xt);return}switch(k&&k.pluginsManager&&k.pluginsManager.onAttrChange(L,W),L){case p:{k.setMin(W);break}case v:{k.setMax(W);break}case y:{k.setStep(W);break}case o:{k.pointersOverlap=ue(W);break}case a:{k.pointersMinDistance=se(W,0);break}case d:{k.rangeDragging=ue(W);break}case l:{k.pointersMaxDistance=se(W,1/0);break}case j:{k.disabled=ue(W);break}case $:{k.keyboardDisabled=ue(W);break}case V:{k.mousewheelDisabled=ue(W);break}case f:{k.setData(W);break}case w:{k.type=W;break}case O:{k.rightToLeft=ue(W);break}case R:{k.bottomToTop=ue(W);break}case E:{k.round=se(W,Xi);break}case T:{k.styles&&(k.styles.theme=W);break}case Te:{k.animateOnClick=W;break}}let st=null;if(/^value([0-9]*)$/.test(L)&&(st="value"),/^pointer([0-9]*)-disabled$/.test(L)&&(st="pointer-disabled"),/^aria-label([0-9]*)$/.test(L)&&(st="aria-label"),/^pointer([0-9]*)-shape$/.test(L)&&(st="pointer-shape"),!st)return;let Et=L.replace(/\D/g,"").trim(),Pt=Et===""||Et==="0"||Et==="1"?0:se(Et,0)-1;switch(st){case"value":{k.setValue(W,Pt);break}case"pointer-disabled":{let ot=k==null?void 0:k.pointers[Pt];if(!ot)return;ot.disabled=ue(W);break}case"aria-label":{k.setAriaLabel(Pt,W);break}case"pointer-shape":{k.styles&&k.styles.setPointerShape(Pt,W);break}}},pl=class extends HTMLElement{constructor(){super(),i(this,"slider"),i(this,"_externalCSSList",[]),i(this,"_observer",null),this.attachShadow({mode:"open"})}set step(k){this.slider&&this.slider.setStep(k)}get step(){var k;return(k=this.slider)==null?void 0:k.step}set disabled(k){this.slider&&(this.slider.disabled=k)}get disabled(){var k,L;return(L=(k=this.slider)==null?void 0:k.disabled)!=null?L:!1}set data(k){var L;(L=this.slider)==null||L.setData(k)}get data(){var k;return(k=this.slider)==null?void 0:k.data}set min(k){var L;(L=this.slider)==null||L.setMin(k)}get min(){var k;return(k=this.slider)==null?void 0:k.min}set max(k){var L;(L=this.slider)==null||L.setMax(k)}get max(){var k;return(k=this.slider)==null?void 0:k.max}set round(k){!this.slider||(this.slider.round=k)}get round(){var k,L;return(L=(k=this.slider)==null?void 0:k.round)!=null?L:Xi}set type(k){!this.slider||(this.slider.type=k??nn)}get type(){var k;return((k=this.slider)==null?void 0:k.type)||nn}set pointersOverlap(k){!this.slider||(this.slider.pointersOverlap=k)}get pointersOverlap(){var k,L;return(L=(k=this.slider)==null?void 0:k.pointersOverlap)!=null?L:!1}set pointersMinDistance(k){!this.slider||(this.slider.pointersMinDistance=k)}get pointersMinDistance(){var k,L;return(L=(k=this.slider)==null?void 0:k.pointersMinDistance)!=null?L:0}set pointersMaxDistance(k){!this.slider||(this.slider.pointersMaxDistance=k)}get pointersMaxDistance(){var k,L;return(L=(k=this.slider)==null?void 0:k.pointersMaxDistance)!=null?L:1/0}set theme(k){!this.slider||!this.slider.styles||(this.slider.styles.theme=k)}get theme(){var k,L,W;return(W=(L=(k=this.slider)==null?void 0:k.styles)==null?void 0:L.theme)!=null?W:null}set rtl(k){!this.slider||(this.slider.rightToLeft=k)}get rtl(){var k,L;return(L=(k=this.slider)==null?void 0:k.rightToLeft)!=null?L:!1}set btt(k){!this.slider||(this.slider.bottomToTop=k)}get btt(){var k,L;return(L=(k=this.slider)==null?void 0:k.bottomToTop)!=null?L:!1}set keyboardDisabled(k){!this.slider||(this.slider.keyboardDisabled=k)}get keyboardDisabled(){var k,L;return(L=(k=this.slider)==null?void 0:k.keyboardDisabled)!=null?L:!1}set mousewheelDisabled(k){!this.slider||(this.slider.mousewheelDisabled=k)}get mousewheelDisabled(){var k,L;return(L=(k=this.slider)==null?void 0:k.mousewheelDisabled)!=null?L:!1}set animateOnClick(k){!this.slider||(this.slider.animateOnClick=k)}get animateOnClick(){var k;return(k=this.slider)==null?void 0:k.animateOnClick}get rangeDragging(){var k,L;return(L=(k=this.slider)==null?void 0:k.rangeDragging)!=null?L:!1}set rangeDragging(k){this.slider&&(this.slider.rangeDragging=ue(k))}get externalCSSList(){return this._externalCSSList}addPointer(k){var L,W;if(!this.slider)return;let z=(W=(L=this.slider)==null?void 0:L.addPointer(k))!=null?W:0;hl(this,this.slider,z,`value${z+1}`,`ariaLabel${z+1}`,`pointerShape${z+1}`,`pointer${z+1}Disabled`)}removePointer(){var k;!this.slider||(k=this.slider)==null||k.removePointer()}addCSS(k){if(!this.shadowRoot)return;let L=document.createElement("style");L.textContent=k,this.shadowRoot.appendChild(L)}connectedCallback(){var k,L;if(!this.shadowRoot)return;this._externalCSSList=dl(this),this.shadowRoot.innerHTML=s(r,this._externalCSSList);let W=(k=this.shadowRoot)==null?void 0:k.querySelector(".pointer");if(!W)return;let z=(L=this.shadowRoot)==null?void 0:L.getElementById("range-slider");if(!z)return;let st=Eu(this,W);this.slider=Yn(this,z,st),fl(this,this.slider),this._observer=new MutationObserver(Et=>{Et.forEach(Pt=>{var ot;if(!this.slider||Pt.type!=="attributes")return;let lt=Pt.attributeName;!lt||_t(this.slider,lt,(ot=this.getAttribute(lt))!=null?ot:"")})}),this._observer.observe(this,{attributes:!0})}disconnectedCallback(){this._observer&&this._observer.disconnect(),this.slider&&this.slider.destroy()}},yr=pl;window.tcRangeSlider=yr,customElements.get("toolcool-range-slider")||customElements.define("toolcool-range-slider",yr),customElements.get("tc-range-slider")||customElements.define("tc-range-slider",class extends yr{})})();let nt=[],Xe,Nc=0,gf=0,rh=0;function mP(n){nt[n.courseid]=new gP(n,Ra()),gf+=1,nt[n.courseid].codes!==void 0&&nt[n.courseid].codes.length>rh&&(rh=nt[n.courseid].codes.length-1)}function vP(){for(let n=0;n<nt.length;n+=1)if(nt[n]!==void 0&&!nt[n].display)return!1;return!0}function bP(){let n=document.getElementById("rg2-select-course");n.innerHTML="",n.options.add(io(null,U("Select course","")));for(let t=0;t<nt.length;t=t+1)nt[t]!==void 0&&n.options.add(io(t,Hn(nt[t].name)));n.addEventListener("change",t=>{XL(parseInt(t.target.value,10))})}function yP(){const n=document.getElementById("rg2-course-table");n.innerHTML=SP();const t=document.getElementById("rg2-course-filter-table");t.innerHTML=wP(),document.querySelectorAll("[data-course-filter]").forEach(i=>{i.addEventListener("change",_P)})}function qy(){nt.length=0,Nc=0,gf=0,rh=0}function pm(n){for(let t=0;t<nt.length;t+=1)nt[t]!==void 0&&nt[t].drawCourse(n)}function xP(n,t,e,i,s){nt[e].drawLinesBetweenControls(n,t,i,s)}function _P(n){const t=parseInt(n.target.dataset.courseFilter,10);nt[t].filterFrom=n.detail.value1,nt[t].filterTo=n.detail.value2,wt()}function EP(){let n={html:"",res:0,coursecount:0};for(let t=0;t<nt.length;t+=1)nt[t]!==void 0&&(n.coursecount=n.coursecount+1,n.html+=[`<tr><td>${nt[t].name}</td >`,`<td><input class='showcourse' data-courseid=${t} type='checkbox' name='course'></input></td>`,`<td class='text-center'>${nt[t].resultcount}</td><td class='text-center'>${nt[t].trackcount}</td><td>`].join(""),n.res+=nt[t].resultcount,nt[t].trackcount>0?(n.html+=`<input data-courseid=${nt[t].courseid} class='allcoursetracks' type=checkbox name=track></input></td>`,n.html+=`<td><input data-courseid=${nt[t].courseid} class='allcoursetracksreplay' type=checkbox name=replay></input>`):n.html+="</td><td>",n.html+="</td></tr>");return n}function wP(){let n="";for(let t=0;t<nt.length;t+=1)nt[t]!==void 0&&!nt[t].isScoreCourse&&nt[t].codes.length>2&&(n+=[`<div id='course-filter-${nt[t].courseid}' data-display="false" data-course="${nt[t].courseid}" class="row">`,`<div class="col-3">${nt[t].name}</div>`,'<div class="col-9 pt-2">',`  <tc-range-slider step="1" min="0" max="${nt[t].codes.length}" value1="0"`,`value2="${nt[t].codes.length}" round="0" data-course-filter="${nt[t].courseid}>"`,"</tc-range-slider></div></div>"].join(""));return n}function SP(){let n=["<table class='table table-striped table-hover table-sm'><thead>",`<tr><th>${U("Course")}</th><th><i class='bi-eye-fill'></i></th><th>${U("Runners")}</th>`,`<th>${U("Routes")}</th><th><i class='bi-pencil'></i></th><th><i class='bi-play-fill'></i></th></tr>`,'</thead><tbody class="table-group-divider">'].join("");const t=EP();return n+=t.html+`</tbody><tfoot class="table-group-divider"><tr class='allitemsrow'><td>${U("All")}</td>
    <td><input class='showallcourses' data-id="all" type=checkbox name=course></input></td>
    <td class='text-center'>${t.res}</td><td class='text-center'>${Nc}</td><td>`,Nc>0&&(n+=`<input data-id="all" class='alltracks' type=checkbox name=track></input>`),n+="</td><td></td></tr></tfoot></table>",n}function TP(){return nt}function ci(n){return nt[n]}function AP(n){return nt.find(t=>t?t.name===n:!1)}function kP(n){return nt[n].getLegLengths()}function DP(n){return nt[n].name}function CP(){let n=[];for(let t=0;t<nt.length;t+=1)if(nt[t]!==void 0){let e={};e.id=nt[t].courseid,e.name=nt[t].name,e.results=nt[t].resultcount,n.push(e)}return n}function gm(){let n=[];for(let t=0;t<nt.length;t+=1)nt[t]!==void 0&&nt[t].display&&n.push(t);return n}function IP(){let n="";for(let t=0;t<nt.length;t+=1)nt[t]!==void 0&&nt[t].excludeType!==F.EXCLUDED_NONE&&(n=n+nt[t].courseid+"|"+nt[t].excludeType,n=n+nt[t].exclude.reduce((e,i,s)=>i?e+"|"+s+","+nt[t].allowed[s]:e,""),n=n+`
`);return n}function OP(n){let t={};return t.filterFrom=nt[n].filterFrom,t.filterTo=nt[n].filterTo,t}function MP(n){return nt[n].codes.length-2}function jy(){return gf}function LP(n){nt[n].incrementTracksCount(),Nc+=1}function PP(){Xe=new Mh}function RP(n){return n in nt}function NP(n){qy(),Xe.deleteAllControls(),document.getElementById("rg2-load-progress-label").innerHTML=U("Saving courses");for(const t of n)mP(t);Xe.generateControlList()}function Uy(n){for(let t=0;t<nt.length;t+=1)nt[t]!==void 0&&nt[t].setDisplay(n)}function mm(){for(let n=0;n<nt.length;n+=1)nt[n]!==void 0&&ya(n)}function nl(n,t){nt[n]!==void 0&&(nt[n].setDisplay(t),ya(n))}function ya(n){n=parseInt(n,10);const t=nt[n].display||ZA(n);document.querySelectorAll("[data-display]").forEach(e=>{parseInt(e.dataset.course,10)===n&&(e.dataset.display=t)})}function BP(){for(let n=0;n<nt.length;n+=1)nt[n]!==void 0&&(nt[n].resultcount=QA(n))}function FP(n,t,e,i){for(let s=0;s<nt.length;s+=1)if(nt[s]!==void 0&&nt[s].courseid===n){nt[s].codes=t,nt[s].x=e,nt[s].y=i,nt[s].setAngles();break}}var Bc={exports:{}};Bc.exports;(function(n,t){(function(e,i){n.exports=i()})(xd,function(){function e(u,c){var h=Object.keys(u);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(u);c&&(g=g.filter(function(m){return Object.getOwnPropertyDescriptor(u,m).enumerable})),h.push.apply(h,g)}return h}function i(u){for(var c=1;c<arguments.length;c++){var h=arguments[c]!=null?arguments[c]:{};c%2?e(Object(h),!0).forEach(function(g){l(u,g,h[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(h)):e(Object(h)).forEach(function(g){Object.defineProperty(u,g,Object.getOwnPropertyDescriptor(h,g))})}return u}function s(u){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},s(u)}function r(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}function o(u,c){for(var h=0;h<c.length;h++){var g=c[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,w(g.key),g)}}function a(u,c,h){return c&&o(u.prototype,c),h&&o(u,h),Object.defineProperty(u,"prototype",{writable:!1}),u}function l(u,c,h){return(c=w(c))in u?Object.defineProperty(u,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):u[c]=h,u}function d(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(c&&c.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),c&&p(u,c)}function f(u){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},f(u)}function p(u,c){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,g){return h.__proto__=g,h},p(u,c)}function v(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function y(u){var c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var h,g=f(u);if(c){var m=f(this).constructor;h=Reflect.construct(g,arguments,m)}else h=g.apply(this,arguments);return function(b,x){if(x&&(typeof x=="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v(b)}(this,h)}}function E(){return E=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(u,c,h){var g=function(b,x){for(;!Object.prototype.hasOwnProperty.call(b,x)&&(b=f(b))!==null;);return b}(u,c);if(g){var m=Object.getOwnPropertyDescriptor(g,c);return m.get?m.get.call(arguments.length<3?u:h):m.value}},E.apply(this,arguments)}function w(u){var c=function(h,g){if(typeof h!="object"||h===null)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var b=m.call(h,g||"default");if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(h)}(u,"string");return typeof c=="symbol"?c:c+""}var T=function(u){return!(!u||!u.Window)&&u instanceof u.Window},O=void 0,R=void 0;function j(u){O=u;var c=u.document.createTextNode("");c.ownerDocument!==u.document&&typeof u.wrap=="function"&&u.wrap(c)===c&&(u=u.wrap(u)),R=u}function $(u){return T(u)?u:(u.ownerDocument||u).defaultView||R.window}typeof window<"u"&&window&&j(window);var V=function(u){return!!u&&s(u)==="object"},X=function(u){return typeof u=="function"},C={window:function(u){return u===R||T(u)},docFrag:function(u){return V(u)&&u.nodeType===11},object:V,func:X,number:function(u){return typeof u=="number"},bool:function(u){return typeof u=="boolean"},string:function(u){return typeof u=="string"},element:function(u){if(!u||s(u)!=="object")return!1;var c=$(u)||R;return/object|function/.test(typeof Element>"u"?"undefined":s(Element))?u instanceof Element||u instanceof c.Element:u.nodeType===1&&typeof u.nodeName=="string"},plainObject:function(u){return V(u)&&!!u.constructor&&/function Object\b/.test(u.constructor.toString())},array:function(u){return V(u)&&u.length!==void 0&&X(u.splice)}};function Z(u){var c=u.interaction;if(c.prepared.name==="drag"){var h=c.prepared.axis;h==="x"?(c.coords.cur.page.y=c.coords.start.page.y,c.coords.cur.client.y=c.coords.start.client.y,c.coords.velocity.client.y=0,c.coords.velocity.page.y=0):h==="y"&&(c.coords.cur.page.x=c.coords.start.page.x,c.coords.cur.client.x=c.coords.start.client.x,c.coords.velocity.client.x=0,c.coords.velocity.page.x=0)}}function it(u){var c=u.iEvent,h=u.interaction;if(h.prepared.name==="drag"){var g=h.prepared.axis;if(g==="x"||g==="y"){var m=g==="x"?"y":"x";c.page[m]=h.coords.start.page[m],c.client[m]=h.coords.start.client[m],c.delta[m]=0}}}var ut={id:"actions/drag",install:function(u){var c=u.actions,h=u.Interactable,g=u.defaults;h.prototype.draggable=ut.draggable,c.map.drag=ut,c.methodDict.drag="draggable",g.actions.drag=ut.defaults},listeners:{"interactions:before-action-move":Z,"interactions:action-resume":Z,"interactions:action-move":it,"auto-start:check":function(u){var c=u.interaction,h=u.interactable,g=u.buttons,m=h.options.drag;if(m&&m.enabled&&(!c.pointerIsDown||!/mouse|pointer/.test(c.pointerType)||g&h.options.drag.mouseButtons))return u.action={name:"drag",axis:m.lockAxis==="start"?m.startAxis:m.lockAxis},!1}},draggable:function(u){return C.object(u)?(this.options.drag.enabled=u.enabled!==!1,this.setPerAction("drag",u),this.setOnEvents("drag",u),/^(xy|x|y|start)$/.test(u.lockAxis)&&(this.options.drag.lockAxis=u.lockAxis),/^(xy|x|y)$/.test(u.startAxis)&&(this.options.drag.startAxis=u.startAxis),this):C.bool(u)?(this.options.drag.enabled=u,this):this.options.drag},beforeMove:Z,move:it,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(u){return u.search("drag")===0}},ft=ut,pt={init:function(u){var c=u;pt.document=c.document,pt.DocumentFragment=c.DocumentFragment||It,pt.SVGElement=c.SVGElement||It,pt.SVGSVGElement=c.SVGSVGElement||It,pt.SVGElementInstance=c.SVGElementInstance||It,pt.Element=c.Element||It,pt.HTMLElement=c.HTMLElement||pt.Element,pt.Event=c.Event,pt.Touch=c.Touch||It,pt.PointerEvent=c.PointerEvent||c.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function It(){}var Nt=pt,xt={init:function(u){var c=Nt.Element,h=u.navigator||{};xt.supportsTouch="ontouchstart"in u||C.func(u.DocumentTouch)&&Nt.document instanceof u.DocumentTouch,xt.supportsPointerEvent=h.pointerEnabled!==!1&&!!Nt.PointerEvent,xt.isIOS=/iP(hone|od|ad)/.test(h.platform),xt.isIOS7=/iP(hone|od|ad)/.test(h.platform)&&/OS 7[^\d]/.test(h.appVersion),xt.isIe9=/MSIE 9/.test(h.userAgent),xt.isOperaMobile=h.appName==="Opera"&&xt.supportsTouch&&/Presto/.test(h.userAgent),xt.prefixedMatchesSelector="matches"in c.prototype?"matches":"webkitMatchesSelector"in c.prototype?"webkitMatchesSelector":"mozMatchesSelector"in c.prototype?"mozMatchesSelector":"oMatchesSelector"in c.prototype?"oMatchesSelector":"msMatchesSelector",xt.pEventTypes=xt.supportsPointerEvent?Nt.PointerEvent===u.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,xt.wheelEvent=Nt.document&&"onmousewheel"in Nt.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},bt=xt;function Ct(u,c){if(u.contains)return u.contains(c);for(;c;){if(c===u)return!0;c=c.parentNode}return!1}function Ee(u,c){for(;C.element(u);){if(be(u,c))return u;u=qt(u)}return null}function qt(u){var c=u.parentNode;if(C.docFrag(c)){for(;(c=c.host)&&C.docFrag(c););return c}return c}function be(u,c){return R!==O&&(c=c.replace(/\/deep\//g," ")),u[bt.prefixedMatchesSelector](c)}var en=function(u){return u.parentNode||u.host};function Ve(u,c){for(var h,g=[],m=u;(h=en(m))&&m!==c&&h!==m.ownerDocument;)g.unshift(m),m=h;return g}function qe(u,c,h){for(;C.element(u);){if(be(u,c))return!0;if((u=qt(u))===h)return be(u,c)}return!1}function Te(u){return u.correspondingUseElement||u}function Ae(u){var c=u instanceof Nt.SVGElement?u.getBoundingClientRect():u.getClientRects()[0];return c&&{left:c.left,right:c.right,top:c.top,bottom:c.bottom,width:c.width||c.right-c.left,height:c.height||c.bottom-c.top}}function te(u){var c,h=Ae(u);if(!bt.isIOS7&&h){var g={x:(c=(c=$(u))||R).scrollX||c.document.documentElement.scrollLeft,y:c.scrollY||c.document.documentElement.scrollTop};h.left+=g.x,h.right+=g.x,h.top+=g.y,h.bottom+=g.y}return h}function nn(u){for(var c=[];u;)c.push(u),u=qt(u);return c}function sn(u){return!!C.string(u)&&(Nt.document.querySelector(u),!0)}function at(u,c){for(var h in c)u[h]=c[h];return u}function se(u,c,h){return u==="parent"?qt(h):u==="self"?c.getRect(h):Ee(h,u)}function En(u,c,h,g){var m=u;return C.string(m)?m=se(m,c,h):C.func(m)&&(m=m.apply(void 0,g)),C.element(m)&&(m=te(m)),m}function zi(u){return u&&{x:"x"in u?u.x:u.left,y:"y"in u?u.y:u.top}}function ue(u){return!u||"x"in u&&"y"in u||((u=at({},u)).x=u.left||0,u.y=u.top||0,u.width=u.width||(u.right||0)-u.x,u.height=u.height||(u.bottom||0)-u.y),u}function qi(u,c,h){u.left&&(c.left+=h.x),u.right&&(c.right+=h.x),u.top&&(c.top+=h.y),u.bottom&&(c.bottom+=h.y),c.width=c.right-c.left,c.height=c.bottom-c.top}function mi(u,c,h){var g=h&&u.options[h];return zi(En(g&&g.origin||u.options.origin,u,c,[u&&c]))||{x:0,y:0}}function wn(u,c){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(S){return!0},g=arguments.length>3?arguments[3]:void 0;if(g=g||{},C.string(u)&&u.search(" ")!==-1&&(u=Ss(u)),C.array(u))return u.forEach(function(S){return wn(S,c,h,g)}),g;if(C.object(u)&&(c=u,u=""),C.func(c)&&h(u))g[u]=g[u]||[],g[u].push(c);else if(C.array(c))for(var m=0,b=c;m<b.length;m++){var x=b[m];wn(u,x,h,g)}else if(C.object(c))for(var _ in c)wn(Ss(_).map(function(S){return"".concat(u).concat(S)}),c[_],h,g);return g}function Ss(u){return u.trim().split(/ +/)}var vi=function(u,c){return Math.sqrt(u*u+c*c)},Ts=["webkit","moz"];function rn(u,c){u.__set||(u.__set={});var h=function(m){if(Ts.some(function(b){return m.indexOf(b)===0}))return 1;typeof u[m]!="function"&&m!=="__set"&&Object.defineProperty(u,m,{get:function(){return m in u.__set?u.__set[m]:u.__set[m]=c[m]},set:function(b){u.__set[m]=b},configurable:!0})};for(var g in c)h(g);return u}function Pn(u,c){u.page=u.page||{},u.page.x=c.page.x,u.page.y=c.page.y,u.client=u.client||{},u.client.x=c.client.x,u.client.y=c.client.y,u.timeStamp=c.timeStamp}function As(u){u.page.x=0,u.page.y=0,u.client.x=0,u.client.y=0}function ji(u){return u instanceof Nt.Event||u instanceof Nt.Touch}function Un(u,c,h){return u=u||"page",(h=h||{}).x=c[u+"X"],h.y=c[u+"Y"],h}function ks(u,c){return c=c||{x:0,y:0},bt.isOperaMobile&&ji(u)?(Un("screen",u,c),c.x+=window.scrollX,c.y+=window.scrollY):Un("page",u,c),c}function Wn(u){return C.number(u.pointerId)?u.pointerId:u.identifier}function gr(u,c,h){var g=c.length>1?rl(c):c[0];ks(g,u.page),function(m,b){b=b||{},bt.isOperaMobile&&ji(m)?Un("screen",m,b):Un("client",m,b)}(g,u.client),u.timeStamp=h}function Ui(u){var c=[];return C.array(u)?(c[0]=u[0],c[1]=u[1]):u.type==="touchend"?u.touches.length===1?(c[0]=u.touches[0],c[1]=u.changedTouches[0]):u.touches.length===0&&(c[0]=u.changedTouches[0],c[1]=u.changedTouches[1]):(c[0]=u.touches[0],c[1]=u.touches[1]),c}function rl(u){for(var c={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},h=0;h<u.length;h++){var g=u[h];for(var m in c)c[m]+=g[m]}for(var b in c)c[b]/=u.length;return c}function _o(u){if(!u.length)return null;var c=Ui(u),h=Math.min(c[0].pageX,c[1].pageX),g=Math.min(c[0].pageY,c[1].pageY),m=Math.max(c[0].pageX,c[1].pageX),b=Math.max(c[0].pageY,c[1].pageY);return{x:h,y:g,left:h,top:g,right:m,bottom:b,width:m-h,height:b-g}}function Eo(u,c){var h=c+"X",g=c+"Y",m=Ui(u),b=m[0][h]-m[1][h],x=m[0][g]-m[1][g];return vi(b,x)}function wo(u,c){var h=c+"X",g=c+"Y",m=Ui(u),b=m[1][h]-m[0][h],x=m[1][g]-m[0][g];return 180*Math.atan2(x,b)/Math.PI}function ol(u){return C.string(u.pointerType)?u.pointerType:C.number(u.pointerType)?[void 0,void 0,"touch","pen","mouse"][u.pointerType]:/touch/.test(u.type||"")||u instanceof Nt.Touch?"touch":"mouse"}function al(u){var c=C.func(u.composedPath)?u.composedPath():u.path;return[Te(c?c[0]:u.target),Te(u.currentTarget)]}var mr=function(){function u(c){r(this,u),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=c}return a(u,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),u}();Object.defineProperty(mr.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var ll=function(u,c){for(var h=0;h<c.length;h++){var g=c[h];u.push(g)}return u},cl=function(u){return ll([],u)},Ds=function(u,c){for(var h=0;h<u.length;h++)if(c(u[h],h,u))return h;return-1},Cs=function(u,c){return u[Ds(u,c)]},Wi=function(u){d(h,u);var c=y(h);function h(g,m,b){var x;r(this,h),(x=c.call(this,m._interaction)).dropzone=void 0,x.dragEvent=void 0,x.relatedTarget=void 0,x.draggable=void 0,x.propagationStopped=!1,x.immediatePropagationStopped=!1;var _=b==="dragleave"?g.prev:g.cur,S=_.element,I=_.dropzone;return x.type=b,x.target=S,x.currentTarget=S,x.dropzone=I,x.dragEvent=m,x.relatedTarget=m.target,x.draggable=m.interactable,x.timeStamp=m.timeStamp,x}return a(h,[{key:"reject",value:function(){var g=this,m=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&m.cur.dropzone===this.dropzone&&m.cur.element===this.target)if(m.prev.dropzone=this.dropzone,m.prev.element=this.target,m.rejected=!0,m.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var b=m.activeDrops,x=Ds(b,function(S){var I=S.dropzone,A=S.element;return I===g.dropzone&&A===g.target});m.activeDrops.splice(x,1);var _=new h(m,this.dragEvent,"dropdeactivate");_.dropzone=this.dropzone,_.target=this.target,this.dropzone.fire(_)}else this.dropzone.fire(new h(m,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),h}(mr);function ul(u,c){for(var h=0,g=u.slice();h<g.length;h++){var m=g[h],b=m.dropzone,x=m.element;c.dropzone=b,c.target=x,b.fire(c),c.propagationStopped=c.immediatePropagationStopped=!1}}function Yi(u,c){for(var h=function(b,x){for(var _=[],S=0,I=b.interactables.list;S<I.length;S++){var A=I[S];if(A.options.drop.enabled){var N=A.options.drop.accept;if(!(C.element(N)&&N!==x||C.string(N)&&!be(x,N)||C.func(N)&&!N({dropzone:A,draggableElement:x})))for(var q=0,Q=A.getAllElements();q<Q.length;q++){var K=Q[q];K!==x&&_.push({dropzone:A,element:K,rect:A.getRect(K)})}}}return _}(u,c),g=0;g<h.length;g++){var m=h[g];m.rect=m.dropzone.getRect(m.element)}return h}function dl(u,c,h){for(var g=u.dropState,m=u.interactable,b=u.element,x=[],_=0,S=g.activeDrops;_<S.length;_++){var I=S[_],A=I.dropzone,N=I.element,q=I.rect,Q=A.dropCheck(c,h,m,b,N,q);x.push(Q?N:null)}var K=function(tt){for(var ct,rt,gt,Ot=[],jt=0;jt<tt.length;jt++){var At=tt[jt],Rt=tt[ct];if(At&&jt!==ct)if(Rt){var Je=en(At),de=en(Rt);if(Je!==At.ownerDocument)if(de!==At.ownerDocument)if(Je!==de){Ot=Ot.length?Ot:Ve(Rt);var pn=void 0;if(Rt instanceof Nt.HTMLElement&&At instanceof Nt.SVGElement&&!(At instanceof Nt.SVGSVGElement)){if(At===de)continue;pn=At.ownerSVGElement}else pn=At;for(var Rn=Ve(pn,Rt.ownerDocument),Si=0;Rn[Si]&&Rn[Si]===Ot[Si];)Si++;var Sl=[Rn[Si-1],Rn[Si],Ot[Si]];if(Sl[0])for(var qo=Sl[0].lastChild;qo;){if(qo===Sl[1]){ct=jt,Ot=Rn;break}if(qo===Sl[2])break;qo=qo.previousSibling}}else gt=Rt,(parseInt($(rt=At).getComputedStyle(rt).zIndex,10)||0)>=(parseInt($(gt).getComputedStyle(gt).zIndex,10)||0)&&(ct=jt);else ct=jt}else ct=jt}return ct}(x);return g.activeDrops[K]||null}function vr(u,c,h){var g=u.dropState,m={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return h.type==="dragstart"&&(m.activate=new Wi(g,h,"dropactivate"),m.activate.target=null,m.activate.dropzone=null),h.type==="dragend"&&(m.deactivate=new Wi(g,h,"dropdeactivate"),m.deactivate.target=null,m.deactivate.dropzone=null),g.rejected||(g.cur.element!==g.prev.element&&(g.prev.dropzone&&(m.leave=new Wi(g,h,"dragleave"),h.dragLeave=m.leave.target=g.prev.element,h.prevDropzone=m.leave.dropzone=g.prev.dropzone),g.cur.dropzone&&(m.enter=new Wi(g,h,"dragenter"),h.dragEnter=g.cur.element,h.dropzone=g.cur.dropzone)),h.type==="dragend"&&g.cur.dropzone&&(m.drop=new Wi(g,h,"drop"),h.dropzone=g.cur.dropzone,h.relatedTarget=g.cur.element),h.type==="dragmove"&&g.cur.dropzone&&(m.move=new Wi(g,h,"dropmove"),h.dropzone=g.cur.dropzone)),m}function So(u,c){var h=u.dropState,g=h.activeDrops,m=h.cur,b=h.prev;c.leave&&b.dropzone.fire(c.leave),c.enter&&m.dropzone.fire(c.enter),c.move&&m.dropzone.fire(c.move),c.drop&&m.dropzone.fire(c.drop),c.deactivate&&ul(g,c.deactivate),h.prev.dropzone=m.dropzone,h.prev.element=m.element}function bi(u,c){var h=u.interaction,g=u.iEvent,m=u.event;if(g.type==="dragmove"||g.type==="dragend"){var b=h.dropState;c.dynamicDrop&&(b.activeDrops=Yi(c,h.element));var x=g,_=dl(h,x,m);b.rejected=b.rejected&&!!_&&_.dropzone===b.cur.dropzone&&_.element===b.cur.element,b.cur.dropzone=_&&_.dropzone,b.cur.element=_&&_.element,b.events=vr(h,0,x)}}var To={id:"actions/drop",install:function(u){var c=u.actions,h=u.interactStatic,g=u.Interactable,m=u.defaults;u.usePlugin(ft),g.prototype.dropzone=function(b){return function(x,_){if(C.object(_)){if(x.options.drop.enabled=_.enabled!==!1,_.listeners){var S=wn(_.listeners),I=Object.keys(S).reduce(function(N,q){return N[/^(enter|leave)/.test(q)?"drag".concat(q):/^(activate|deactivate|move)/.test(q)?"drop".concat(q):q]=S[q],N},{}),A=x.options.drop.listeners;A&&x.off(A),x.on(I),x.options.drop.listeners=I}return C.func(_.ondrop)&&x.on("drop",_.ondrop),C.func(_.ondropactivate)&&x.on("dropactivate",_.ondropactivate),C.func(_.ondropdeactivate)&&x.on("dropdeactivate",_.ondropdeactivate),C.func(_.ondragenter)&&x.on("dragenter",_.ondragenter),C.func(_.ondragleave)&&x.on("dragleave",_.ondragleave),C.func(_.ondropmove)&&x.on("dropmove",_.ondropmove),/^(pointer|center)$/.test(_.overlap)?x.options.drop.overlap=_.overlap:C.number(_.overlap)&&(x.options.drop.overlap=Math.max(Math.min(1,_.overlap),0)),"accept"in _&&(x.options.drop.accept=_.accept),"checker"in _&&(x.options.drop.checker=_.checker),x}return C.bool(_)?(x.options.drop.enabled=_,x):x.options.drop}(this,b)},g.prototype.dropCheck=function(b,x,_,S,I,A){return function(N,q,Q,K,tt,ct,rt){var gt=!1;if(!(rt=rt||N.getRect(ct)))return!!N.options.drop.checker&&N.options.drop.checker(q,Q,gt,N,ct,K,tt);var Ot=N.options.drop.overlap;if(Ot==="pointer"){var jt=mi(K,tt,"drag"),At=ks(q);At.x+=jt.x,At.y+=jt.y;var Rt=At.x>rt.left&&At.x<rt.right,Je=At.y>rt.top&&At.y<rt.bottom;gt=Rt&&Je}var de=K.getRect(tt);if(de&&Ot==="center"){var pn=de.left+de.width/2,Rn=de.top+de.height/2;gt=pn>=rt.left&&pn<=rt.right&&Rn>=rt.top&&Rn<=rt.bottom}return de&&C.number(Ot)&&(gt=Math.max(0,Math.min(rt.right,de.right)-Math.max(rt.left,de.left))*Math.max(0,Math.min(rt.bottom,de.bottom)-Math.max(rt.top,de.top))/(de.width*de.height)>=Ot),N.options.drop.checker&&(gt=N.options.drop.checker(q,Q,gt,N,ct,K,tt)),gt}(this,b,x,_,S,I,A)},h.dynamicDrop=function(b){return C.bool(b)?(u.dynamicDrop=b,h):u.dynamicDrop},at(c.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),c.methodDict.drop="dropzone",u.dynamicDrop=!1,m.actions.drop=To.defaults},listeners:{"interactions:before-action-start":function(u){var c=u.interaction;c.prepared.name==="drag"&&(c.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(u,c){var h=u.interaction,g=(u.event,u.iEvent);if(h.prepared.name==="drag"){var m=h.dropState;m.activeDrops=[],m.events={},m.activeDrops=Yi(c,h.element),m.events=vr(h,0,g),m.events.activate&&(ul(m.activeDrops,m.events.activate),c.fire("actions/drop:start",{interaction:h,dragEvent:g}))}},"interactions:action-move":bi,"interactions:after-action-move":function(u,c){var h=u.interaction,g=u.iEvent;if(h.prepared.name==="drag"){var m=h.dropState;So(h,m.events),c.fire("actions/drop:move",{interaction:h,dragEvent:g}),m.events={}}},"interactions:action-end":function(u,c){if(u.interaction.prepared.name==="drag"){var h=u.interaction,g=u.iEvent;bi(u,c),So(h,h.dropState.events),c.fire("actions/drop:end",{interaction:h,dragEvent:g})}},"interactions:stop":function(u){var c=u.interaction;if(c.prepared.name==="drag"){var h=c.dropState;h&&(h.activeDrops=null,h.events=null,h.cur.dropzone=null,h.cur.element=null,h.prev.dropzone=null,h.prev.element=null,h.rejected=!1)}}},getActiveDrops:Yi,getDrop:dl,getDropEvents:vr,fireDropEvents:So,filterEventType:function(u){return u.search("drag")===0||u.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},_u=To;function Ao(u){var c=u.interaction,h=u.iEvent,g=u.phase;if(c.prepared.name==="gesture"){var m=c.pointers.map(function(I){return I.pointer}),b=g==="start",x=g==="end",_=c.interactable.options.deltaSource;if(h.touches=[m[0],m[1]],b)h.distance=Eo(m,_),h.box=_o(m),h.scale=1,h.ds=0,h.angle=wo(m,_),h.da=0,c.gesture.startDistance=h.distance,c.gesture.startAngle=h.angle;else if(x||c.pointers.length<2){var S=c.prevEvent;h.distance=S.distance,h.box=S.box,h.scale=S.scale,h.ds=0,h.angle=S.angle,h.da=0}else h.distance=Eo(m,_),h.box=_o(m),h.scale=h.distance/c.gesture.startDistance,h.angle=wo(m,_),h.ds=h.scale-c.gesture.scale,h.da=h.angle-c.gesture.angle;c.gesture.distance=h.distance,c.gesture.angle=h.angle,C.number(h.scale)&&h.scale!==1/0&&!isNaN(h.scale)&&(c.gesture.scale=h.scale)}}var br={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(u){var c=u.actions,h=u.Interactable,g=u.defaults;h.prototype.gesturable=function(m){return C.object(m)?(this.options.gesture.enabled=m.enabled!==!1,this.setPerAction("gesture",m),this.setOnEvents("gesture",m),this):C.bool(m)?(this.options.gesture.enabled=m,this):this.options.gesture},c.map.gesture=br,c.methodDict.gesture="gesturable",g.actions.gesture=br.defaults},listeners:{"interactions:action-start":Ao,"interactions:action-move":Ao,"interactions:action-end":Ao,"interactions:new":function(u){u.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(u){if(!(u.interaction.pointers.length<2)){var c=u.interactable.options.gesture;if(c&&c.enabled)return u.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(u){return u.search("gesture")===0}},Eu=br;function hl(u,c,h,g,m,b,x){if(!c)return!1;if(c===!0){var _=C.number(b.width)?b.width:b.right-b.left,S=C.number(b.height)?b.height:b.bottom-b.top;if(x=Math.min(x,Math.abs((u==="left"||u==="right"?_:S)/2)),_<0&&(u==="left"?u="right":u==="right"&&(u="left")),S<0&&(u==="top"?u="bottom":u==="bottom"&&(u="top")),u==="left"){var I=_>=0?b.left:b.right;return h.x<I+x}if(u==="top"){var A=S>=0?b.top:b.bottom;return h.y<A+x}if(u==="right")return h.x>(_>=0?b.right:b.left)-x;if(u==="bottom")return h.y>(S>=0?b.bottom:b.top)-x}return!!C.element(g)&&(C.element(c)?c===g:qe(g,c,m))}function fl(u){var c=u.iEvent,h=u.interaction;if(h.prepared.name==="resize"&&h.resizeAxes){var g=c;h.interactable.options.resize.square?(h.resizeAxes==="y"?g.delta.x=g.delta.y:g.delta.y=g.delta.x,g.axes="xy"):(g.axes=h.resizeAxes,h.resizeAxes==="x"?g.delta.y=0:h.resizeAxes==="y"&&(g.delta.x=0))}}var Sn,yi,un={id:"actions/resize",before:["actions/drag"],install:function(u){var c=u.actions,h=u.browser,g=u.Interactable,m=u.defaults;un.cursors=function(b){return b.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(h),un.defaultMargin=h.supportsTouch||h.supportsPointerEvent?20:10,g.prototype.resizable=function(b){return function(x,_,S){return C.object(_)?(x.options.resize.enabled=_.enabled!==!1,x.setPerAction("resize",_),x.setOnEvents("resize",_),C.string(_.axis)&&/^x$|^y$|^xy$/.test(_.axis)?x.options.resize.axis=_.axis:_.axis===null&&(x.options.resize.axis=S.defaults.actions.resize.axis),C.bool(_.preserveAspectRatio)?x.options.resize.preserveAspectRatio=_.preserveAspectRatio:C.bool(_.square)&&(x.options.resize.square=_.square),x):C.bool(_)?(x.options.resize.enabled=_,x):x.options.resize}(this,b,u)},c.map.resize=un,c.methodDict.resize="resizable",m.actions.resize=un.defaults},listeners:{"interactions:new":function(u){u.interaction.resizeAxes="xy"},"interactions:action-start":function(u){(function(c){var h=c.iEvent,g=c.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var m=h,b=g.rect;g._rects={start:at({},b),corrected:at({},b),previous:at({},b),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},m.edges=g.prepared.edges,m.rect=g._rects.corrected,m.deltaRect=g._rects.delta}})(u),fl(u)},"interactions:action-move":function(u){(function(c){var h=c.iEvent,g=c.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var m=h,b=g.interactable.options.resize.invert,x=b==="reposition"||b==="negate",_=g.rect,S=g._rects,I=S.start,A=S.corrected,N=S.delta,q=S.previous;if(at(q,A),x){if(at(A,_),b==="reposition"){if(A.top>A.bottom){var Q=A.top;A.top=A.bottom,A.bottom=Q}if(A.left>A.right){var K=A.left;A.left=A.right,A.right=K}}}else A.top=Math.min(_.top,I.bottom),A.bottom=Math.max(_.bottom,I.top),A.left=Math.min(_.left,I.right),A.right=Math.max(_.right,I.left);for(var tt in A.width=A.right-A.left,A.height=A.bottom-A.top,A)N[tt]=A[tt]-q[tt];m.edges=g.prepared.edges,m.rect=A,m.deltaRect=N}})(u),fl(u)},"interactions:action-end":function(u){var c=u.iEvent,h=u.interaction;if(h.prepared.name==="resize"&&h.prepared.edges){var g=c;g.edges=h.prepared.edges,g.rect=h._rects.corrected,g.deltaRect=h._rects.delta}},"auto-start:check":function(u){var c=u.interaction,h=u.interactable,g=u.element,m=u.rect,b=u.buttons;if(m){var x=at({},c.coords.cur.page),_=h.options.resize;if(_&&_.enabled&&(!c.pointerIsDown||!/mouse|pointer/.test(c.pointerType)||b&_.mouseButtons)){if(C.object(_.edges)){var S={left:!1,right:!1,top:!1,bottom:!1};for(var I in S)S[I]=hl(I,_.edges[I],x,c._latestPointer.eventTarget,g,m,_.margin||un.defaultMargin);S.left=S.left&&!S.right,S.top=S.top&&!S.bottom,(S.left||S.right||S.top||S.bottom)&&(u.action={name:"resize",edges:S})}else{var A=_.axis!=="y"&&x.x>m.right-un.defaultMargin,N=_.axis!=="x"&&x.y>m.bottom-un.defaultMargin;(A||N)&&(u.action={name:"resize",axes:(A?"x":"")+(N?"y":"")})}return!u.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(u){var c=u.edges,h=u.axis,g=u.name,m=un.cursors,b=null;if(h)b=m[g+h];else if(c){for(var x="",_=0,S=["top","bottom","left","right"];_<S.length;_++){var I=S[_];c[I]&&(x+=I)}b=m[x]}return b},filterEventType:function(u){return u.search("resize")===0},defaultMargin:null},Is=un,Xi={id:"actions",install:function(u){u.usePlugin(Eu),u.usePlugin(Is),u.usePlugin(ft),u.usePlugin(_u)}},ko=0,Yn={request:function(u){return Sn(u)},cancel:function(u){return yi(u)},init:function(u){if(Sn=u.requestAnimationFrame,yi=u.cancelAnimationFrame,!Sn)for(var c=["ms","moz","webkit","o"],h=0;h<c.length;h++){var g=c[h];Sn=u["".concat(g,"RequestAnimationFrame")],yi=u["".concat(g,"CancelAnimationFrame")]||u["".concat(g,"CancelRequestAnimationFrame")]}Sn=Sn&&Sn.bind(u),yi=yi&&yi.bind(u),Sn||(Sn=function(m){var b=Date.now(),x=Math.max(0,16-(b-ko)),_=u.setTimeout(function(){m(b+x)},x);return ko=b+x,_},yi=function(m){return clearTimeout(m)})}},_t={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(u){_t.isScrolling=!0,Yn.cancel(_t.i),u.autoScroll=_t,_t.interaction=u,_t.prevTime=_t.now(),_t.i=Yn.request(_t.scroll)},stop:function(){_t.isScrolling=!1,_t.interaction&&(_t.interaction.autoScroll=null),Yn.cancel(_t.i)},scroll:function(){var u=_t.interaction,c=u.interactable,h=u.element,g=u.prepared.name,m=c.options[g].autoScroll,b=pl(m.container,c,h),x=_t.now(),_=(x-_t.prevTime)/1e3,S=m.speed*_;if(S>=1){var I={x:_t.x*S,y:_t.y*S};if(I.x||I.y){var A=yr(b);C.window(b)?b.scrollBy(I.x,I.y):b&&(b.scrollLeft+=I.x,b.scrollTop+=I.y);var N=yr(b),q={x:N.x-A.x,y:N.y-A.y};(q.x||q.y)&&c.fire({type:"autoscroll",target:h,interactable:c,delta:q,interaction:u,container:b})}_t.prevTime=x}_t.isScrolling&&(Yn.cancel(_t.i),_t.i=Yn.request(_t.scroll))},check:function(u,c){var h;return(h=u.options[c].autoScroll)==null?void 0:h.enabled},onInteractionMove:function(u){var c=u.interaction,h=u.pointer;if(c.interacting()&&_t.check(c.interactable,c.prepared.name))if(c.simulation)_t.x=_t.y=0;else{var g,m,b,x,_=c.interactable,S=c.element,I=c.prepared.name,A=_.options[I].autoScroll,N=pl(A.container,_,S);if(C.window(N))x=h.clientX<_t.margin,g=h.clientY<_t.margin,m=h.clientX>N.innerWidth-_t.margin,b=h.clientY>N.innerHeight-_t.margin;else{var q=Ae(N);x=h.clientX<q.left+_t.margin,g=h.clientY<q.top+_t.margin,m=h.clientX>q.right-_t.margin,b=h.clientY>q.bottom-_t.margin}_t.x=m?1:x?-1:0,_t.y=b?1:g?-1:0,_t.isScrolling||(_t.margin=A.margin,_t.speed=A.speed,_t.start(c))}}};function pl(u,c,h){return(C.string(u)?se(u,c,h):u)||$(h)}function yr(u){return C.window(u)&&(u=window.document.body),{x:u.scrollLeft,y:u.scrollTop}}var k={id:"auto-scroll",install:function(u){var c=u.defaults,h=u.actions;u.autoScroll=_t,_t.now=function(){return u.now()},h.phaselessTypes.autoscroll=!0,c.perAction.autoScroll=_t.defaults},listeners:{"interactions:new":function(u){u.interaction.autoScroll=null},"interactions:destroy":function(u){u.interaction.autoScroll=null,_t.stop(),_t.interaction&&(_t.interaction=null)},"interactions:stop":_t.stop,"interactions:action-move":function(u){return _t.onInteractionMove(u)}}},L=k;function W(u,c){var h=!1;return function(){return h||(R.console.warn(c),h=!0),u.apply(this,arguments)}}function z(u,c){return u.name=c.name,u.axis=c.axis,u.edges=c.edges,u}function st(u){return C.bool(u)?(this.options.styleCursor=u,this):u===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Et(u){return C.func(u)?(this.options.actionChecker=u,this):u===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Pt={id:"auto-start/interactableMethods",install:function(u){var c=u.Interactable;c.prototype.getAction=function(h,g,m,b){var x=function(_,S,I,A,N){var q=_.getRect(A),Q=S.buttons||{0:1,1:4,3:8,4:16}[S.button],K={action:null,interactable:_,interaction:I,element:A,rect:q,buttons:Q};return N.fire("auto-start:check",K),K.action}(this,g,m,b,u);return this.options.actionChecker?this.options.actionChecker(h,g,x,this,b,m):x},c.prototype.ignoreFrom=W(function(h){return this._backCompatOption("ignoreFrom",h)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),c.prototype.allowFrom=W(function(h){return this._backCompatOption("allowFrom",h)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),c.prototype.actionChecker=Et,c.prototype.styleCursor=st}};function ot(u,c,h,g,m){return c.testIgnoreAllow(c.options[u.name],h,g)&&c.options[u.name].enabled&&mt(c,h,u,m)?u:null}function lt(u,c,h,g,m,b,x){for(var _=0,S=g.length;_<S;_++){var I=g[_],A=m[_],N=I.getAction(c,h,u,A);if(N){var q=ot(N,I,A,b,x);if(q)return{action:q,interactable:I,element:A}}}return{action:null,interactable:null,element:null}}function Bt(u,c,h,g,m){var b=[],x=[],_=g;function S(A){b.push(A),x.push(_)}for(;C.element(_);){b=[],x=[],m.interactables.forEachMatch(_,S);var I=lt(u,c,h,b,x,g,m);if(I.action&&!I.interactable.options[I.action.name].manualStart)return I;_=qt(_)}return{action:null,interactable:null,element:null}}function zt(u,c,h){var g=c.action,m=c.interactable,b=c.element;g=g||{name:null},u.interactable=m,u.element=b,z(u.prepared,g),u.rect=m&&g.name?m.getRect(b):null,Me(u,h),h.fire("autoStart:prepared",{interaction:u})}function mt(u,c,h,g){var m=u.options,b=m[h.name].max,x=m[h.name].maxPerElement,_=g.autoStart.maxInteractions,S=0,I=0,A=0;if(!(b&&x&&_))return!1;for(var N=0,q=g.interactions.list;N<q.length;N++){var Q=q[N],K=Q.prepared.name;if(Q.interacting()&&(++S>=_||Q.interactable===u&&((I+=K===h.name?1:0)>=b||Q.element===c&&(A++,K===h.name&&A>=x))))return!1}return _>0}function Xt(u,c){return C.number(u)?(c.autoStart.maxInteractions=u,this):c.autoStart.maxInteractions}function je(u,c,h){var g=h.autoStart.cursorElement;g&&g!==u&&(g.style.cursor=""),u.ownerDocument.documentElement.style.cursor=c,u.style.cursor=c,h.autoStart.cursorElement=c?u:null}function Me(u,c){var h=u.interactable,g=u.element,m=u.prepared;if(u.pointerType==="mouse"&&h&&h.options.styleCursor){var b="";if(m.name){var x=h.options[m.name].cursorChecker;b=C.func(x)?x(m,h,g,u._interacting):c.actions.map[m.name].getCursor(m)}je(u.element,b||"",c)}else c.autoStart.cursorElement&&je(c.autoStart.cursorElement,"",c)}var St={id:"auto-start/base",before:["actions"],install:function(u){var c=u.interactStatic,h=u.defaults;u.usePlugin(Pt),h.base.actionChecker=null,h.base.styleCursor=!0,at(h.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),c.maxInteractions=function(g){return Xt(g,u)},u.autoStart={maxInteractions:1/0,withinInteractionLimit:mt,cursorElement:null}},listeners:{"interactions:down":function(u,c){var h=u.interaction,g=u.pointer,m=u.event,b=u.eventTarget;h.interacting()||zt(h,Bt(h,g,m,b,c),c)},"interactions:move":function(u,c){(function(h,g){var m=h.interaction,b=h.pointer,x=h.event,_=h.eventTarget;m.pointerType!=="mouse"||m.pointerIsDown||m.interacting()||zt(m,Bt(m,b,x,_,g),g)})(u,c),function(h,g){var m=h.interaction;if(m.pointerIsDown&&!m.interacting()&&m.pointerWasMoved&&m.prepared.name){g.fire("autoStart:before-start",h);var b=m.interactable,x=m.prepared.name;x&&b&&(b.options[x].manualStart||!mt(b,m.element,m.prepared,g)?m.stop():(m.start(m.prepared,b,m.element),Me(m,g)))}}(u,c)},"interactions:stop":function(u,c){var h=u.interaction,g=h.interactable;g&&g.options.styleCursor&&je(h.element,"",c)}},maxInteractions:Xt,withinInteractionLimit:mt,validateAction:ot},Ft=St,Tt={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(u,c){var h=u.interaction,g=u.eventTarget,m=u.dx,b=u.dy;if(h.prepared.name==="drag"){var x=Math.abs(m),_=Math.abs(b),S=h.interactable.options.drag,I=S.startAxis,A=x>_?"x":x<_?"y":"xy";if(h.prepared.axis=S.lockAxis==="start"?A[0]:S.lockAxis,A!=="xy"&&I!=="xy"&&I!==A){h.prepared.name=null;for(var N=g,q=function(K){if(K!==h.interactable){var tt=h.interactable.options.drag;if(!tt.manualStart&&K.testIgnoreAllow(tt,N,g)){var ct=K.getAction(h.downPointer,h.downEvent,h,N);if(ct&&ct.name==="drag"&&function(rt,gt){if(!gt)return!1;var Ot=gt.options.drag.startAxis;return rt==="xy"||Ot==="xy"||Ot===rt}(A,K)&&Ft.validateAction(ct,K,N,g,c))return K}}};C.element(N);){var Q=c.interactables.forEachMatch(N,q);if(Q){h.prepared.name="drag",h.interactable=Q,h.element=N;break}N=qt(N)}}}}}};function Zt(u){var c=u.prepared&&u.prepared.name;if(!c)return null;var h=u.interactable.options;return h[c].hold||h[c].delay}var ke={id:"auto-start/hold",install:function(u){var c=u.defaults;u.usePlugin(Ft),c.perAction.hold=0,c.perAction.delay=0},listeners:{"interactions:new":function(u){u.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(u){var c=u.interaction,h=Zt(c);h>0&&(c.autoStartHoldTimer=setTimeout(function(){c.start(c.prepared,c.interactable,c.element)},h))},"interactions:move":function(u){var c=u.interaction,h=u.duplicate;c.autoStartHoldTimer&&c.pointerWasMoved&&!h&&(clearTimeout(c.autoStartHoldTimer),c.autoStartHoldTimer=null)},"autoStart:before-start":function(u){var c=u.interaction;Zt(c)>0&&(c.prepared.name=null)}},getHoldDuration:Zt},we=ke,ge={id:"auto-start",install:function(u){u.usePlugin(Ft),u.usePlugin(we),u.usePlugin(Tt)}},me=function(u){return/^(always|never|auto)$/.test(u)?(this.options.preventDefault=u,this):C.bool(u)?(this.options.preventDefault=u?"always":"never",this):this.options.preventDefault};function Ue(u){var c=u.interaction,h=u.event;c.interactable&&c.interactable.checkAndPreventDefault(h)}var He={id:"core/interactablePreventDefault",install:function(u){var c=u.Interactable;c.prototype.preventDefault=me,c.prototype.checkAndPreventDefault=function(h){return function(g,m,b){var x=g.options.preventDefault;if(x!=="never")if(x!=="always"){if(m.events.supportsPassive&&/^touch(start|move)$/.test(b.type)){var _=$(b.target).document,S=m.getDocOptions(_);if(!S||!S.events||S.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(b.type)||C.element(b.target)&&be(b.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||b.preventDefault()}else b.preventDefault()}(this,u,h)},u.interactions.docEvents.push({type:"dragstart",listener:function(h){for(var g=0,m=u.interactions.list;g<m.length;g++){var b=m[g];if(b.element&&(b.element===h.target||Ct(b.element,h.target)))return void b.interactable.checkAndPreventDefault(h)}}})},listeners:["down","move","up","cancel"].reduce(function(u,c){return u["interactions:".concat(c)]=Ue,u},{})};function dn(u,c){if(c.phaselessTypes[u])return!0;for(var h in c.map)if(u.indexOf(h)===0&&u.substr(h.length)in c.phases)return!0;return!1}function xi(u){var c={};for(var h in u){var g=u[h];C.plainObject(g)?c[h]=xi(g):C.array(g)?c[h]=cl(g):c[h]=g}return c}var xr=function(){function u(c){r(this,u),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=c,this.result=_i(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return a(u,[{key:"start",value:function(c,h){var g,m,b=c.phase,x=this.interaction,_=function(I){var A=I.interactable.options[I.prepared.name],N=A.modifiers;return N&&N.length?N:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(q){var Q=A[q];return Q&&Q.enabled&&{options:Q,methods:Q._methods}}).filter(function(q){return!!q})}(x);this.prepareStates(_),this.startEdges=at({},x.edges),this.edges=at({},this.startEdges),this.startOffset=(g=x.rect,m=h,g?{left:m.x-g.left,top:m.y-g.top,right:g.right-m.x,bottom:g.bottom-m.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var S=this.fillArg({phase:b,pageCoords:h,preEnd:!1});return this.result=_i(),this.startAll(S),this.result=this.setAll(S)}},{key:"fillArg",value:function(c){var h=this.interaction;return c.interaction=h,c.interactable=h.interactable,c.element=h.element,c.rect||(c.rect=h.rect),c.edges||(c.edges=this.startEdges),c.startOffset=this.startOffset,c}},{key:"startAll",value:function(c){for(var h=0,g=this.states;h<g.length;h++){var m=g[h];m.methods.start&&(c.state=m,m.methods.start(c))}}},{key:"setAll",value:function(c){var h=c.phase,g=c.preEnd,m=c.skipModifiers,b=c.rect,x=c.edges;c.coords=at({},c.pageCoords),c.rect=at({},b),c.edges=at({},x);for(var _=m?this.states.slice(m):this.states,S=_i(c.coords,c.rect),I=0;I<_.length;I++){var A,N=_[I],q=N.options,Q=at({},c.coords),K=null;(A=N.methods)!=null&&A.set&&this.shouldDo(q,g,h)&&(c.state=N,K=N.methods.set(c),qi(c.edges,c.rect,{x:c.coords.x-Q.x,y:c.coords.y-Q.y})),S.eventProps.push(K)}at(this.edges,c.edges),S.delta.x=c.coords.x-c.pageCoords.x,S.delta.y=c.coords.y-c.pageCoords.y,S.rectDelta.left=c.rect.left-b.left,S.rectDelta.right=c.rect.right-b.right,S.rectDelta.top=c.rect.top-b.top,S.rectDelta.bottom=c.rect.bottom-b.bottom;var tt=this.result.coords,ct=this.result.rect;if(tt&&ct){var rt=S.rect.left!==ct.left||S.rect.right!==ct.right||S.rect.top!==ct.top||S.rect.bottom!==ct.bottom;S.changed=rt||tt.x!==S.coords.x||tt.y!==S.coords.y}return S}},{key:"applyToInteraction",value:function(c){var h=this.interaction,g=c.phase,m=h.coords.cur,b=h.coords.start,x=this.result,_=this.startDelta,S=x.delta;g==="start"&&at(this.startDelta,x.delta);for(var I=0,A=[[b,_],[m,S]];I<A.length;I++){var N=A[I],q=N[0],Q=N[1];q.page.x+=Q.x,q.page.y+=Q.y,q.client.x+=Q.x,q.client.y+=Q.y}var K=this.result.rectDelta,tt=c.rect||h.rect;tt.left+=K.left,tt.right+=K.right,tt.top+=K.top,tt.bottom+=K.bottom,tt.width=tt.right-tt.left,tt.height=tt.bottom-tt.top}},{key:"setAndApply",value:function(c){var h=this.interaction,g=c.phase,m=c.preEnd,b=c.skipModifiers,x=this.setAll(this.fillArg({preEnd:m,phase:g,pageCoords:c.modifiedCoords||h.coords.cur.page}));if(this.result=x,!x.changed&&(!b||b<this.states.length)&&h.interacting())return!1;if(c.modifiedCoords){var _=h.coords.cur.page,S={x:c.modifiedCoords.x-_.x,y:c.modifiedCoords.y-_.y};x.coords.x+=S.x,x.coords.y+=S.y,x.delta.x+=S.x,x.delta.y+=S.y}this.applyToInteraction(c)}},{key:"beforeEnd",value:function(c){var h=c.interaction,g=c.event,m=this.states;if(m&&m.length){for(var b=!1,x=0;x<m.length;x++){var _=m[x];c.state=_;var S=_.options,I=_.methods,A=I.beforeEnd&&I.beforeEnd(c);if(A)return this.endResult=A,!1;b=b||!b&&this.shouldDo(S,!0,c.phase,!0)}b&&h.move({event:g,preEnd:!0})}}},{key:"stop",value:function(c){var h=c.interaction;if(this.states&&this.states.length){var g=at({states:this.states,interactable:h.interactable,element:h.element,rect:null},c);this.fillArg(g);for(var m=0,b=this.states;m<b.length;m++){var x=b[m];g.state=x,x.methods.stop&&x.methods.stop(g)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(c){this.states=[];for(var h=0;h<c.length;h++){var g=c[h],m=g.options,b=g.methods,x=g.name;this.states.push({options:m,methods:b,index:h,name:x})}return this.states}},{key:"restoreInteractionCoords",value:function(c){var h=c.interaction,g=h.coords,m=h.rect,b=h.modification;if(b.result){for(var x=b.startDelta,_=b.result,S=_.delta,I=_.rectDelta,A=0,N=[[g.start,x],[g.cur,S]];A<N.length;A++){var q=N[A],Q=q[0],K=q[1];Q.page.x-=K.x,Q.page.y-=K.y,Q.client.x-=K.x,Q.client.y-=K.y}m.left-=I.left,m.right-=I.right,m.top-=I.top,m.bottom-=I.bottom}}},{key:"shouldDo",value:function(c,h,g,m){return!(!c||c.enabled===!1||m&&!c.endOnly||c.endOnly&&!h||g==="start"&&!c.setStart)}},{key:"copyFrom",value:function(c){this.startOffset=c.startOffset,this.startDelta=c.startDelta,this.startEdges=c.startEdges,this.edges=c.edges,this.states=c.states.map(function(h){return xi(h)}),this.result=_i(at({},c.result.coords),at({},c.result.rect))}},{key:"destroy",value:function(){for(var c in this)this[c]=null}}]),u}();function _i(u,c){return{rect:c,coords:u,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Xn(u,c){var h=u.defaults,g={start:u.start,set:u.set,beforeEnd:u.beforeEnd,stop:u.stop},m=function(b){var x=b||{};for(var _ in x.enabled=x.enabled!==!1,h)_ in x||(x[_]=h[_]);var S={options:x,methods:g,name:c,enable:function(){return x.enabled=!0,S},disable:function(){return x.enabled=!1,S}};return S};return c&&typeof c=="string"&&(m._defaults=h,m._methods=g),m}function Gi(u){var c=u.iEvent,h=u.interaction.modification.result;h&&(c.modifiers=h.eventProps)}var Ei={id:"modifiers/base",before:["actions"],install:function(u){u.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(u){var c=u.interaction;c.modification=new xr(c)},"interactions:before-action-start":function(u){var c=u.interaction,h=u.interaction.modification;h.start(u,c.coords.start.page),c.edges=h.edges,h.applyToInteraction(u)},"interactions:before-action-move":function(u){var c=u.interaction,h=c.modification,g=h.setAndApply(u);return c.edges=h.edges,g},"interactions:before-action-end":function(u){var c=u.interaction,h=c.modification,g=h.beforeEnd(u);return c.edges=h.startEdges,g},"interactions:action-start":Gi,"interactions:action-move":Gi,"interactions:action-end":Gi,"interactions:after-action-start":function(u){return u.interaction.modification.restoreInteractionCoords(u)},"interactions:after-action-move":function(u){return u.interaction.modification.restoreInteractionCoords(u)},"interactions:stop":function(u){return u.interaction.modification.stop(u)}}},Os=Ei,Do={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},_r=function(u){d(h,u);var c=y(h);function h(g,m,b,x,_,S,I){var A;r(this,h),(A=c.call(this,g)).relatedTarget=null,A.screenX=void 0,A.screenY=void 0,A.button=void 0,A.buttons=void 0,A.ctrlKey=void 0,A.shiftKey=void 0,A.altKey=void 0,A.metaKey=void 0,A.page=void 0,A.client=void 0,A.delta=void 0,A.rect=void 0,A.x0=void 0,A.y0=void 0,A.t0=void 0,A.dt=void 0,A.duration=void 0,A.clientX0=void 0,A.clientY0=void 0,A.velocity=void 0,A.speed=void 0,A.swipe=void 0,A.axes=void 0,A.preEnd=void 0,_=_||g.element;var N=g.interactable,q=(N&&N.options||Do).deltaSource,Q=mi(N,_,b),K=x==="start",tt=x==="end",ct=K?v(A):g.prevEvent,rt=K?g.coords.start:tt?{page:ct.page,client:ct.client,timeStamp:g.coords.cur.timeStamp}:g.coords.cur;return A.page=at({},rt.page),A.client=at({},rt.client),A.rect=at({},g.rect),A.timeStamp=rt.timeStamp,tt||(A.page.x-=Q.x,A.page.y-=Q.y,A.client.x-=Q.x,A.client.y-=Q.y),A.ctrlKey=m.ctrlKey,A.altKey=m.altKey,A.shiftKey=m.shiftKey,A.metaKey=m.metaKey,A.button=m.button,A.buttons=m.buttons,A.target=_,A.currentTarget=_,A.preEnd=S,A.type=I||b+(x||""),A.interactable=N,A.t0=K?g.pointers[g.pointers.length-1].downTime:ct.t0,A.x0=g.coords.start.page.x-Q.x,A.y0=g.coords.start.page.y-Q.y,A.clientX0=g.coords.start.client.x-Q.x,A.clientY0=g.coords.start.client.y-Q.y,A.delta=K||tt?{x:0,y:0}:{x:A[q].x-ct[q].x,y:A[q].y-ct[q].y},A.dt=g.coords.delta.timeStamp,A.duration=A.timeStamp-A.t0,A.velocity=at({},g.coords.velocity[q]),A.speed=vi(A.velocity.x,A.velocity.y),A.swipe=tt||x==="inertiastart"?A.getSwipe():null,A}return a(h,[{key:"getSwipe",value:function(){var g=this._interaction;if(g.prevEvent.speed<600||this.timeStamp-g.prevEvent.timeStamp>150)return null;var m=180*Math.atan2(g.prevEvent.velocityY,g.prevEvent.velocityX)/Math.PI;m<0&&(m+=360);var b=112.5<=m&&m<247.5,x=202.5<=m&&m<337.5;return{up:x,down:!x&&22.5<=m&&m<157.5,left:b,right:!b&&(292.5<=m||m<67.5),angle:m,speed:g.prevEvent.speed,velocity:{x:g.prevEvent.velocityX,y:g.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),h}(mr);Object.defineProperties(_r.prototype,{pageX:{get:function(){return this.page.x},set:function(u){this.page.x=u}},pageY:{get:function(){return this.page.y},set:function(u){this.page.y=u}},clientX:{get:function(){return this.client.x},set:function(u){this.client.x=u}},clientY:{get:function(){return this.client.y},set:function(u){this.client.y=u}},dx:{get:function(){return this.delta.x},set:function(u){this.delta.x=u}},dy:{get:function(){return this.delta.y},set:function(u){this.delta.y=u}},velocityX:{get:function(){return this.velocity.x},set:function(u){this.velocity.x=u}},velocityY:{get:function(){return this.velocity.y},set:function(u){this.velocity.y=u}}});var gl=a(function u(c,h,g,m,b){r(this,u),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=c,this.pointer=h,this.event=g,this.downTime=m,this.downTarget=b}),ml=function(u){return u.interactable="",u.element="",u.prepared="",u.pointerIsDown="",u.pointerWasMoved="",u._proxy="",u}({}),vl=function(u){return u.start="",u.move="",u.end="",u.stop="",u.interacting="",u}({}),wu=0,Ms=function(){function u(c){var h=this,g=c.pointerType,m=c.scopeFire;r(this,u),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=W(function(A){this.move(A)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=wu++,this._scopeFire=m,this.pointerType=g;var b=this;this._proxy={};var x=function(A){Object.defineProperty(h._proxy,A,{get:function(){return b[A]}})};for(var _ in ml)x(_);var S=function(A){Object.defineProperty(h._proxy,A,{value:function(){return b[A].apply(b,arguments)}})};for(var I in vl)S(I);this._scopeFire("interactions:new",{interaction:this})}return a(u,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(c,h,g){var m=this.updatePointer(c,h,g,!0),b=this.pointers[m];this._scopeFire("interactions:down",{pointer:c,event:h,eventTarget:g,pointerIndex:m,pointerInfo:b,type:"down",interaction:this})}},{key:"start",value:function(c,h,g){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(c.name==="gesture"?2:1)||!h.options[c.name].enabled)&&(z(this.prepared,c),this.interactable=h,this.element=g,this.rect=h.getRect(g),this.edges=this.prepared.edges?at({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(c,h,g){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(c,h,g,!1);var m,b,x=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(m=this.coords.cur.client.x-this.coords.start.client.x,b=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=vi(m,b)>this.pointerMoveTolerance);var _,S,I,A=this.getPointerIndex(c),N={pointer:c,pointerIndex:A,pointerInfo:this.pointers[A],event:h,type:"move",eventTarget:g,dx:m,dy:b,duplicate:x,interaction:this};x||(_=this.coords.velocity,S=this.coords.delta,I=Math.max(S.timeStamp/1e3,.001),_.page.x=S.page.x/I,_.page.y=S.page.y/I,_.client.x=S.client.x/I,_.client.y=S.client.y/I,_.timeStamp=I),this._scopeFire("interactions:move",N),x||this.simulation||(this.interacting()&&(N.type=null,this.move(N)),this.pointerWasMoved&&Pn(this.coords.prev,this.coords.cur))}},{key:"move",value:function(c){c&&c.event||As(this.coords.delta),(c=at({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},c||{})).phase="move",this._doPhase(c)}},{key:"pointerUp",value:function(c,h,g,m){var b=this.getPointerIndex(c);b===-1&&(b=this.updatePointer(c,h,g,!1));var x=/cancel$/i.test(h.type)?"cancel":"up";this._scopeFire("interactions:".concat(x),{pointer:c,pointerIndex:b,pointerInfo:this.pointers[b],event:h,eventTarget:g,type:x,curEventTarget:m,interaction:this}),this.simulation||this.end(h),this.removePointer(c,h)}},{key:"documentBlur",value:function(c){this.end(c),this._scopeFire("interactions:blur",{event:c,type:"blur",interaction:this})}},{key:"end",value:function(c){var h;this._ending=!0,c=c||this._latestPointer.event,this.interacting()&&(h=this._doPhase({event:c,interaction:this,phase:"end"})),this._ending=!1,h===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(c){var h=Wn(c);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Ds(this.pointers,function(g){return g.id===h})}},{key:"getPointerInfo",value:function(c){return this.pointers[this.getPointerIndex(c)]}},{key:"updatePointer",value:function(c,h,g,m){var b,x,_,S=Wn(c),I=this.getPointerIndex(c),A=this.pointers[I];return m=m!==!1&&(m||/(down|start)$/i.test(h.type)),A?A.pointer=c:(A=new gl(S,c,h,null,null),I=this.pointers.length,this.pointers.push(A)),gr(this.coords.cur,this.pointers.map(function(N){return N.pointer}),this._now()),b=this.coords.delta,x=this.coords.prev,_=this.coords.cur,b.page.x=_.page.x-x.page.x,b.page.y=_.page.y-x.page.y,b.client.x=_.client.x-x.client.x,b.client.y=_.client.y-x.client.y,b.timeStamp=_.timeStamp-x.timeStamp,m&&(this.pointerIsDown=!0,A.downTime=this.coords.cur.timeStamp,A.downTarget=g,rn(this.downPointer,c),this.interacting()||(Pn(this.coords.start,this.coords.cur),Pn(this.coords.prev,this.coords.cur),this.downEvent=h,this.pointerWasMoved=!1)),this._updateLatestPointer(c,h,g),this._scopeFire("interactions:update-pointer",{pointer:c,event:h,eventTarget:g,down:m,pointerInfo:A,pointerIndex:I,interaction:this}),I}},{key:"removePointer",value:function(c,h){var g=this.getPointerIndex(c);if(g!==-1){var m=this.pointers[g];this._scopeFire("interactions:remove-pointer",{pointer:c,event:h,eventTarget:null,pointerIndex:g,pointerInfo:m,interaction:this}),this.pointers.splice(g,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(c,h,g){this._latestPointer.pointer=c,this._latestPointer.event=h,this._latestPointer.eventTarget=g}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(c,h,g,m){return new _r(this,c,this.prepared.name,h,this.element,g,m)}},{key:"_fireEvent",value:function(c){var h;(h=this.interactable)==null||h.fire(c),(!this.prevEvent||c.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=c)}},{key:"_doPhase",value:function(c){var h=c.event,g=c.phase,m=c.preEnd,b=c.type,x=this.rect;if(x&&g==="move"&&(qi(this.edges,x,this.coords.delta[this.interactable.options.deltaSource]),x.width=x.right-x.left,x.height=x.bottom-x.top),this._scopeFire("interactions:before-action-".concat(g),c)===!1)return!1;var _=c.iEvent=this._createPreparedEvent(h,g,m,b);return this._scopeFire("interactions:action-".concat(g),c),g==="start"&&(this.prevEvent=_),this._fireEvent(_),this._scopeFire("interactions:after-action-".concat(g),c),!0}},{key:"_now",value:function(){return Date.now()}}]),u}();function Ki(u){Gn(u.interaction)}function Gn(u){if(!function(h){return!(!h.offset.pending.x&&!h.offset.pending.y)}(u))return!1;var c=u.offset.pending;return Co(u.coords.cur,c),Co(u.coords.delta,c),qi(u.edges,u.rect,c),c.x=0,c.y=0,!0}function Su(u){var c=u.x,h=u.y;this.offset.pending.x+=c,this.offset.pending.y+=h,this.offset.total.x+=c,this.offset.total.y+=h}function Co(u,c){var h=u.page,g=u.client,m=c.x,b=c.y;h.x+=m,h.y+=b,g.x+=m,g.y+=b}vl.offsetBy="";var Tu={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(u){u.Interaction.prototype.offsetBy=Su},listeners:{"interactions:new":function(u){u.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(u){return function(c){c.pointerIsDown&&(Co(c.coords.cur,c.offset.total),c.offset.pending.x=0,c.offset.pending.y=0)}(u.interaction)},"interactions:before-action-start":Ki,"interactions:before-action-move":Ki,"interactions:before-action-end":function(u){var c=u.interaction;if(Gn(c))return c.move({offset:!0}),c.end(),!1},"interactions:stop":function(u){var c=u.interaction;c.offset.total.x=0,c.offset.total.y=0,c.offset.pending.x=0,c.offset.pending.y=0}}},Ls=Tu,Ji=function(){function u(c){r(this,u),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=c}return a(u,[{key:"start",value:function(c){var h=this.interaction,g=wi(h);if(!g||!g.enabled)return!1;var m=h.coords.velocity.client,b=vi(m.x,m.y),x=this.modification||(this.modification=new xr(h));if(x.copyFrom(h.modification),this.t0=h._now(),this.allowResume=g.allowResume,this.v0=b,this.currentOffset={x:0,y:0},this.startCoords=h.coords.cur.page,this.modifierArg=x.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-h.coords.cur.timeStamp<50&&b>g.minSpeed&&b>g.endSpeed)this.startInertia();else{if(x.result=x.setAll(this.modifierArg),!x.result.changed)return!1;this.startSmoothEnd()}return h.modification.result.rect=null,h.offsetBy(this.targetOffset),h._doPhase({interaction:h,event:c,phase:"inertiastart"}),h.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),h.modification.result.rect=null,this.active=!0,h.simulation=this,!0}},{key:"startInertia",value:function(){var c=this,h=this.interaction.coords.velocity.client,g=wi(this.interaction),m=g.resistance,b=-Math.log(g.endSpeed/this.v0)/m;this.targetOffset={x:(h.x-b)/m,y:(h.y-b)/m},this.te=b,this.lambda_v0=m/this.v0,this.one_ve_v0=1-g.endSpeed/this.v0;var x=this.modification,_=this.modifierArg;_.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},x.result=x.setAll(_),x.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+x.result.delta.x,y:this.targetOffset.y+x.result.delta.y}),this.onNextFrame(function(){return c.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var c=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return c.smoothEndTick()})}},{key:"onNextFrame",value:function(c){var h=this;this.timeout=Yn.request(function(){h.active&&c()})}},{key:"inertiaTick",value:function(){var c,h,g,m,b,x,_,S=this,I=this.interaction,A=wi(I).resistance,N=(I._now()-this.t0)/1e3;if(N<this.te){var q,Q=1-(Math.exp(-A*N)-this.lambda_v0)/this.one_ve_v0;this.isModified?(c=0,h=0,g=this.targetOffset.x,m=this.targetOffset.y,b=this.modifiedOffset.x,x=this.modifiedOffset.y,q={x:wr(_=Q,c,g,b),y:wr(_,h,m,x)}):q={x:this.targetOffset.x*Q,y:this.targetOffset.y*Q};var K={x:q.x-this.currentOffset.x,y:q.y-this.currentOffset.y};this.currentOffset.x+=K.x,this.currentOffset.y+=K.y,I.offsetBy(K),I.move(),this.onNextFrame(function(){return S.inertiaTick()})}else I.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var c=this,h=this.interaction,g=h._now()-this.t0,m=wi(h).smoothEndDuration;if(g<m){var b={x:bl(g,0,this.targetOffset.x,m),y:bl(g,0,this.targetOffset.y,m)},x={x:b.x-this.currentOffset.x,y:b.y-this.currentOffset.y};this.currentOffset.x+=x.x,this.currentOffset.y+=x.y,h.offsetBy(x),h.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return c.smoothEndTick()})}else h.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(c){var h=c.pointer,g=c.event,m=c.eventTarget,b=this.interaction;b.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),b.updatePointer(h,g,m,!0),b._doPhase({interaction:b,event:g,phase:"resume"}),Pn(b.coords.prev,b.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Yn.cancel(this.timeout)}}]),u}();function wi(u){var c=u.interactable,h=u.prepared;return c&&c.options&&h.name&&c.options[h.name].inertia}var Er={id:"inertia",before:["modifiers","actions"],install:function(u){var c=u.defaults;u.usePlugin(Ls),u.usePlugin(Os),u.actions.phases.inertiastart=!0,u.actions.phases.resume=!0,c.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(u){var c=u.interaction;c.inertia=new Ji(c)},"interactions:before-action-end":function(u){var c=u.interaction,h=u.event;return(!c._interacting||c.simulation||!c.inertia.start(h))&&null},"interactions:down":function(u){var c=u.interaction,h=u.eventTarget,g=c.inertia;if(g.active)for(var m=h;C.element(m);){if(m===c.element){g.resume(u);break}m=qt(m)}},"interactions:stop":function(u){var c=u.interaction.inertia;c.active&&c.stop()},"interactions:before-action-resume":function(u){var c=u.interaction.modification;c.stop(u),c.start(u,u.interaction.coords.cur.page),c.applyToInteraction(u)},"interactions:before-action-inertiastart":function(u){return u.interaction.modification.setAndApply(u)},"interactions:action-resume":Gi,"interactions:action-inertiastart":Gi,"interactions:after-action-inertiastart":function(u){return u.interaction.modification.restoreInteractionCoords(u)},"interactions:after-action-resume":function(u){return u.interaction.modification.restoreInteractionCoords(u)}}};function wr(u,c,h,g){var m=1-u;return m*m*c+2*m*u*h+u*u*g}function bl(u,c,h,g){return-h*(u/=g)*(u-2)+c}var Au=Er;function Io(u,c){for(var h=0;h<c.length;h++){var g=c[h];if(u.immediatePropagationStopped)break;g(u)}}var Oo=function(){function u(c){r(this,u),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=at({},c||{})}return a(u,[{key:"fire",value:function(c){var h,g=this.global;(h=this.types[c.type])&&Io(c,h),!c.propagationStopped&&g&&(h=g[c.type])&&Io(c,h)}},{key:"on",value:function(c,h){var g=wn(c,h);for(c in g)this.types[c]=ll(this.types[c]||[],g[c])}},{key:"off",value:function(c,h){var g=wn(c,h);for(c in g){var m=this.types[c];if(m&&m.length)for(var b=0,x=g[c];b<x.length;b++){var _=x[b],S=m.indexOf(_);S!==-1&&m.splice(S,1)}}}},{key:"getRect",value:function(c){return null}}]),u}(),yl=function(){function u(c){r(this,u),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=c,rn(this,c)}return a(u,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),u}();function Zi(u){return C.object(u)?{capture:!!u.capture,passive:!!u.passive}:{capture:!!u,passive:!1}}function Ps(u,c){return u===c||(typeof u=="boolean"?!!c.capture===u&&!c.passive:!!u.capture==!!c.capture&&!!u.passive==!!c.passive)}var Mo={id:"events",install:function(u){var c,h=[],g={},m=[],b={add:x,remove:_,addDelegate:function(A,N,q,Q,K){var tt=Zi(K);if(!g[q]){g[q]=[];for(var ct=0;ct<m.length;ct++){var rt=m[ct];x(rt,q,S),x(rt,q,I,!0)}}var gt=g[q],Ot=Cs(gt,function(jt){return jt.selector===A&&jt.context===N});Ot||(Ot={selector:A,context:N,listeners:[]},gt.push(Ot)),Ot.listeners.push({func:Q,options:tt})},removeDelegate:function(A,N,q,Q,K){var tt,ct=Zi(K),rt=g[q],gt=!1;if(rt)for(tt=rt.length-1;tt>=0;tt--){var Ot=rt[tt];if(Ot.selector===A&&Ot.context===N){for(var jt=Ot.listeners,At=jt.length-1;At>=0;At--){var Rt=jt[At];if(Rt.func===Q&&Ps(Rt.options,ct)){jt.splice(At,1),jt.length||(rt.splice(tt,1),_(N,q,S),_(N,q,I,!0)),gt=!0;break}}if(gt)break}}},delegateListener:S,delegateUseCapture:I,delegatedEvents:g,documents:m,targets:h,supportsOptions:!1,supportsPassive:!1};function x(A,N,q,Q){if(A.addEventListener){var K=Zi(Q),tt=Cs(h,function(ct){return ct.eventTarget===A});tt||(tt={eventTarget:A,events:{}},h.push(tt)),tt.events[N]||(tt.events[N]=[]),Cs(tt.events[N],function(ct){return ct.func===q&&Ps(ct.options,K)})||(A.addEventListener(N,q,b.supportsOptions?K:K.capture),tt.events[N].push({func:q,options:K}))}}function _(A,N,q,Q){if(A.addEventListener&&A.removeEventListener){var K=Ds(h,function(Je){return Je.eventTarget===A}),tt=h[K];if(tt&&tt.events)if(N!=="all"){var ct=!1,rt=tt.events[N];if(rt){if(q==="all"){for(var gt=rt.length-1;gt>=0;gt--){var Ot=rt[gt];_(A,N,Ot.func,Ot.options)}return}for(var jt=Zi(Q),At=0;At<rt.length;At++){var Rt=rt[At];if(Rt.func===q&&Ps(Rt.options,jt)){A.removeEventListener(N,q,b.supportsOptions?jt:jt.capture),rt.splice(At,1),rt.length===0&&(delete tt.events[N],ct=!0);break}}}ct&&!Object.keys(tt.events).length&&h.splice(K,1)}else for(N in tt.events)tt.events.hasOwnProperty(N)&&_(A,N,"all")}}function S(A,N){for(var q=Zi(N),Q=new yl(A),K=g[A.type],tt=al(A)[0],ct=tt;C.element(ct);){for(var rt=0;rt<K.length;rt++){var gt=K[rt],Ot=gt.selector,jt=gt.context;if(be(ct,Ot)&&Ct(jt,tt)&&Ct(jt,ct)){var At=gt.listeners;Q.currentTarget=ct;for(var Rt=0;Rt<At.length;Rt++){var Je=At[Rt];Ps(Je.options,q)&&Je.func(Q)}}}ct=qt(ct)}}function I(A){return S(A,!0)}return(c=u.document)==null||c.createElement("div").addEventListener("test",null,{get capture(){return b.supportsOptions=!0},get passive(){return b.supportsPassive=!0}}),u.events=b,b}},Rs={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(u){for(var c=0,h=Rs.methodOrder;c<h.length;c++){var g=h[c],m=Rs[g](u);if(m)return m}return null},simulationResume:function(u){var c=u.pointerType,h=u.eventType,g=u.eventTarget,m=u.scope;if(!/down|start/i.test(h))return null;for(var b=0,x=m.interactions.list;b<x.length;b++){var _=x[b],S=g;if(_.simulation&&_.simulation.allowResume&&_.pointerType===c)for(;S;){if(S===_.element)return _;S=qt(S)}}return null},mouseOrPen:function(u){var c,h=u.pointerId,g=u.pointerType,m=u.eventType,b=u.scope;if(g!=="mouse"&&g!=="pen")return null;for(var x=0,_=b.interactions.list;x<_.length;x++){var S=_[x];if(S.pointerType===g){if(S.simulation&&!Sr(S,h))continue;if(S.interacting())return S;c||(c=S)}}if(c)return c;for(var I=0,A=b.interactions.list;I<A.length;I++){var N=A[I];if(!(N.pointerType!==g||/down/i.test(m)&&N.simulation))return N}return null},hasPointer:function(u){for(var c=u.pointerId,h=0,g=u.scope.interactions.list;h<g.length;h++){var m=g[h];if(Sr(m,c))return m}return null},idle:function(u){for(var c=u.pointerType,h=0,g=u.scope.interactions.list;h<g.length;h++){var m=g[h];if(m.pointers.length===1){var b=m.interactable;if(b&&(!b.options.gesture||!b.options.gesture.enabled))continue}else if(m.pointers.length>=2)continue;if(!m.interacting()&&c===m.pointerType)return m}return null}};function Sr(u,c){return u.pointers.some(function(h){return h.id===c})}var Lo=Rs,Ns=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function xl(u,c){return function(h){var g=c.interactions.list,m=ol(h),b=al(h),x=b[0],_=b[1],S=[];if(/^touch/.test(h.type)){c.prevTouchTime=c.now();for(var I=0,A=h.changedTouches;I<A.length;I++){var N=A[I],q={pointer:N,pointerId:Wn(N),pointerType:m,eventType:h.type,eventTarget:x,curEventTarget:_,scope:c},Q=Tr(q);S.push([q.pointer,q.eventTarget,q.curEventTarget,Q])}}else{var K=!1;if(!bt.supportsPointerEvent&&/mouse/.test(h.type)){for(var tt=0;tt<g.length&&!K;tt++)K=g[tt].pointerType!=="mouse"&&g[tt].pointerIsDown;K=K||c.now()-c.prevTouchTime<500||h.timeStamp===0}if(!K){var ct={pointer:h,pointerId:Wn(h),pointerType:m,eventType:h.type,curEventTarget:_,eventTarget:x,scope:c},rt=Tr(ct);S.push([ct.pointer,ct.eventTarget,ct.curEventTarget,rt])}}for(var gt=0;gt<S.length;gt++){var Ot=S[gt],jt=Ot[0],At=Ot[1],Rt=Ot[2];Ot[3][u](jt,h,At,Rt)}}}function Tr(u){var c=u.pointerType,h=u.scope,g={interaction:Lo.search(u),searchDetails:u};return h.fire("interactions:find",g),g.interaction||h.interactions.new({pointerType:c})}function Bs(u,c){var h=u.doc,g=u.scope,m=u.options,b=g.interactions.docEvents,x=g.events,_=x[c];for(var S in g.browser.isIOS&&!m.events&&(m.events={passive:!1}),x.delegatedEvents)_(h,S,x.delegateListener),_(h,S,x.delegateUseCapture,!0);for(var I=m&&m.events,A=0;A<b.length;A++){var N=b[A];_(h,N.type,N.listener,I)}}var Po={id:"core/interactions",install:function(u){for(var c={},h=0;h<Ns.length;h++){var g=Ns[h];c[g]=xl(g,u)}var m,b=bt.pEventTypes;function x(){for(var _=0,S=u.interactions.list;_<S.length;_++){var I=S[_];if(I.pointerIsDown&&I.pointerType==="touch"&&!I._interacting)for(var A=function(){var Q=q[N];u.documents.some(function(K){return Ct(K.doc,Q.downTarget)})||I.removePointer(Q.pointer,Q.event)},N=0,q=I.pointers;N<q.length;N++)A()}}(m=Nt.PointerEvent?[{type:b.down,listener:x},{type:b.down,listener:c.pointerDown},{type:b.move,listener:c.pointerMove},{type:b.up,listener:c.pointerUp},{type:b.cancel,listener:c.pointerUp}]:[{type:"mousedown",listener:c.pointerDown},{type:"mousemove",listener:c.pointerMove},{type:"mouseup",listener:c.pointerUp},{type:"touchstart",listener:x},{type:"touchstart",listener:c.pointerDown},{type:"touchmove",listener:c.pointerMove},{type:"touchend",listener:c.pointerUp},{type:"touchcancel",listener:c.pointerUp}]).push({type:"blur",listener:function(_){for(var S=0,I=u.interactions.list;S<I.length;S++)I[S].documentBlur(_)}}),u.prevTouchTime=0,u.Interaction=function(_){d(I,_);var S=y(I);function I(){return r(this,I),S.apply(this,arguments)}return a(I,[{key:"pointerMoveTolerance",get:function(){return u.interactions.pointerMoveTolerance},set:function(A){u.interactions.pointerMoveTolerance=A}},{key:"_now",value:function(){return u.now()}}]),I}(Ms),u.interactions={list:[],new:function(_){_.scopeFire=function(I,A){return u.fire(I,A)};var S=new u.Interaction(_);return u.interactions.list.push(S),S},listeners:c,docEvents:m,pointerMoveTolerance:1},u.usePlugin(He)},listeners:{"scope:add-document":function(u){return Bs(u,"add")},"scope:remove-document":function(u){return Bs(u,"remove")},"interactable:unset":function(u,c){for(var h=u.interactable,g=c.interactions.list.length-1;g>=0;g--){var m=c.interactions.list[g];m.interactable===h&&(m.stop(),c.fire("interactions:destroy",{interaction:m}),m.destroy(),c.interactions.list.length>2&&c.interactions.list.splice(g,1))}}},onDocSignal:Bs,doOnInteractions:xl,methodNames:Ns},Ro=Po,Tn=function(u){return u[u.On=0]="On",u[u.Off=1]="Off",u}(Tn||{}),No=function(){function u(c,h,g,m){r(this,u),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new Oo,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=h.actions,this.target=c,this._context=h.context||g,this._win=$(sn(c)?this._context:c),this._doc=this._win.document,this._scopeEvents=m,this.set(h)}return a(u,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(c,h){return C.func(h.onstart)&&this.on("".concat(c,"start"),h.onstart),C.func(h.onmove)&&this.on("".concat(c,"move"),h.onmove),C.func(h.onend)&&this.on("".concat(c,"end"),h.onend),C.func(h.oninertiastart)&&this.on("".concat(c,"inertiastart"),h.oninertiastart),this}},{key:"updatePerActionListeners",value:function(c,h,g){var m,b=this,x=(m=this._actions.map[c])==null?void 0:m.filterEventType,_=function(S){return(x==null||x(S))&&dn(S,b._actions)};(C.array(h)||C.object(h))&&this._onOff(Tn.Off,c,h,void 0,_),(C.array(g)||C.object(g))&&this._onOff(Tn.On,c,g,void 0,_)}},{key:"setPerAction",value:function(c,h){var g=this._defaults;for(var m in h){var b=m,x=this.options[c],_=h[b];b==="listeners"&&this.updatePerActionListeners(c,x.listeners,_),C.array(_)?x[b]=cl(_):C.plainObject(_)?(x[b]=at(x[b]||{},xi(_)),C.object(g.perAction[b])&&"enabled"in g.perAction[b]&&(x[b].enabled=_.enabled!==!1)):C.bool(_)&&C.object(g.perAction[b])?x[b].enabled=_:x[b]=_}}},{key:"getRect",value:function(c){return c=c||(C.element(this.target)?this.target:null),C.string(this.target)&&(c=c||this._context.querySelector(this.target)),te(c)}},{key:"rectChecker",value:function(c){var h=this;return C.func(c)?(this.getRect=function(g){var m=at({},c.apply(h,g));return"width"in m||(m.width=m.right-m.left,m.height=m.bottom-m.top),m},this):c===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(c,h){if(sn(h)||C.object(h)){for(var g in this.options[c]=h,this._actions.map)this.options[g][c]=h;return this}return this.options[c]}},{key:"origin",value:function(c){return this._backCompatOption("origin",c)}},{key:"deltaSource",value:function(c){return c==="page"||c==="client"?(this.options.deltaSource=c,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var c=this.target;return C.string(c)?Array.from(this._context.querySelectorAll(c)):C.func(c)&&c.getAllElements?c.getAllElements():C.element(c)?[c]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(c){return this._context===c.ownerDocument||Ct(this._context,c)}},{key:"testIgnoreAllow",value:function(c,h,g){return!this.testIgnore(c.ignoreFrom,h,g)&&this.testAllow(c.allowFrom,h,g)}},{key:"testAllow",value:function(c,h,g){return!c||!!C.element(g)&&(C.string(c)?qe(g,c,h):!!C.element(c)&&Ct(c,g))}},{key:"testIgnore",value:function(c,h,g){return!(!c||!C.element(g))&&(C.string(c)?qe(g,c,h):!!C.element(c)&&Ct(c,g))}},{key:"fire",value:function(c){return this.events.fire(c),this}},{key:"_onOff",value:function(c,h,g,m,b){C.object(h)&&!C.array(h)&&(m=g,g=null);var x=wn(h,g,b);for(var _ in x){_==="wheel"&&(_=bt.wheelEvent);for(var S=0,I=x[_];S<I.length;S++){var A=I[S];dn(_,this._actions)?this.events[c===Tn.On?"on":"off"](_,A):C.string(this.target)?this._scopeEvents[c===Tn.On?"addDelegate":"removeDelegate"](this.target,this._context,_,A,m):this._scopeEvents[c===Tn.On?"add":"remove"](this.target,_,A,m)}}return this}},{key:"on",value:function(c,h,g){return this._onOff(Tn.On,c,h,g)}},{key:"off",value:function(c,h,g){return this._onOff(Tn.Off,c,h,g)}},{key:"set",value:function(c){var h=this._defaults;for(var g in C.object(c)||(c={}),this.options=xi(h.base),this._actions.methodDict){var m=g,b=this._actions.methodDict[m];this.options[m]={},this.setPerAction(m,at(at({},h.perAction),h.actions[m])),this[b](c[m])}for(var x in c)x!=="getRect"?C.func(this[x])&&this[x](c[x]):this.rectChecker(c.getRect);return this}},{key:"unset",value:function(){if(C.string(this.target))for(var c in this._scopeEvents.delegatedEvents)for(var h=this._scopeEvents.delegatedEvents[c],g=h.length-1;g>=0;g--){var m=h[g],b=m.selector,x=m.context,_=m.listeners;b===this.target&&x===this._context&&h.splice(g,1);for(var S=_.length-1;S>=0;S--)this._scopeEvents.removeDelegate(this.target,this._context,c,_[S][0],_[S][1])}else this._scopeEvents.remove(this.target,"all")}}]),u}(),Bo=function(){function u(c){var h=this;r(this,u),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=c,c.addListeners({"interactable:unset":function(g){var m=g.interactable,b=m.target,x=C.string(b)?h.selectorMap[b]:b[h.scope.id],_=Ds(x,function(S){return S===m});x.splice(_,1)}})}return a(u,[{key:"new",value:function(c,h){h=at(h||{},{actions:this.scope.actions});var g=new this.scope.Interactable(c,h,this.scope.document,this.scope.events);return this.scope.addDocument(g._doc),this.list.push(g),C.string(c)?(this.selectorMap[c]||(this.selectorMap[c]=[]),this.selectorMap[c].push(g)):(g.target[this.scope.id]||Object.defineProperty(c,this.scope.id,{value:[],configurable:!0}),c[this.scope.id].push(g)),this.scope.fire("interactable:new",{target:c,options:h,interactable:g,win:this.scope._win}),g}},{key:"getExisting",value:function(c,h){var g=h&&h.context||this.scope.document,m=C.string(c),b=m?this.selectorMap[c]:c[this.scope.id];if(b)return Cs(b,function(x){return x._context===g&&(m||x.inContext(c))})}},{key:"forEachMatch",value:function(c,h){for(var g=0,m=this.list;g<m.length;g++){var b=m[g],x=void 0;if((C.string(b.target)?C.element(c)&&be(c,b.target):c===b.target)&&b.inContext(c)&&(x=h(b)),x!==void 0)return x}}}]),u}(),We=function(){function u(){var c=this;r(this,u),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=bt,this.defaults=xi(Do),this.Eventable=Oo,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(g){var m=function b(x,_){var S=g.interactables.getExisting(x,_);return S||((S=g.interactables.new(x,_)).events.global=b.globalEvents),S};return m.getPointerAverage=rl,m.getTouchBBox=_o,m.getTouchDistance=Eo,m.getTouchAngle=wo,m.getElementRect=te,m.getElementClientRect=Ae,m.matchesSelector=be,m.closest=Ee,m.globalEvents={},m.version="1.10.27",m.scope=g,m.use=function(b,x){return this.scope.usePlugin(b,x),this},m.isSet=function(b,x){return!!this.scope.interactables.get(b,x&&x.context)},m.on=W(function(b,x,_){if(C.string(b)&&b.search(" ")!==-1&&(b=b.trim().split(/ +/)),C.array(b)){for(var S=0,I=b;S<I.length;S++){var A=I[S];this.on(A,x,_)}return this}if(C.object(b)){for(var N in b)this.on(N,b[N],x);return this}return dn(b,this.scope.actions)?this.globalEvents[b]?this.globalEvents[b].push(x):this.globalEvents[b]=[x]:this.scope.events.add(this.scope.document,b,x,{options:_}),this},"The interact.on() method is being deprecated"),m.off=W(function(b,x,_){if(C.string(b)&&b.search(" ")!==-1&&(b=b.trim().split(/ +/)),C.array(b)){for(var S=0,I=b;S<I.length;S++){var A=I[S];this.off(A,x,_)}return this}if(C.object(b)){for(var N in b)this.off(N,b[N],x);return this}var q;return dn(b,this.scope.actions)?b in this.globalEvents&&(q=this.globalEvents[b].indexOf(x))!==-1&&this.globalEvents[b].splice(q,1):this.scope.events.remove(this.scope.document,b,x,_),this},"The interact.off() method is being deprecated"),m.debug=function(){return this.scope},m.supportsTouch=function(){return bt.supportsTouch},m.supportsPointerEvent=function(){return bt.supportsPointerEvent},m.stop=function(){for(var b=0,x=this.scope.interactions.list;b<x.length;b++)x[b].stop();return this},m.pointerMoveTolerance=function(b){return C.number(b)?(this.scope.interactions.pointerMoveTolerance=b,this):this.scope.interactions.pointerMoveTolerance},m.addDocument=function(b,x){this.scope.addDocument(b,x)},m.removeDocument=function(b){this.scope.removeDocument(b)},m}(this),this.InteractEvent=_r,this.Interactable=void 0,this.interactables=new Bo(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(g){return c.removeDocument(g.target)};var h=this;this.Interactable=function(g){d(b,g);var m=y(b);function b(){return r(this,b),m.apply(this,arguments)}return a(b,[{key:"_defaults",get:function(){return h.defaults}},{key:"set",value:function(x){return E(f(b.prototype),"set",this).call(this,x),h.fire("interactable:set",{options:x,interactable:this}),this}},{key:"unset",value:function(){E(f(b.prototype),"unset",this).call(this);var x=h.interactables.list.indexOf(this);x<0||(h.interactables.list.splice(x,1),h.fire("interactable:unset",{interactable:this}))}}]),b}(No)}return a(u,[{key:"addListeners",value:function(c,h){this.listenerMaps.push({id:h,map:c})}},{key:"fire",value:function(c,h){for(var g=0,m=this.listenerMaps;g<m.length;g++){var b=m[g].map[c];if(b&&b(h,this,c)===!1)return!1}}},{key:"init",value:function(c){return this.isInitialized?this:function(h,g){return h.isInitialized=!0,C.window(g)&&j(g),Nt.init(g),bt.init(g),Yn.init(g),h.window=g,h.document=g.document,h.usePlugin(Ro),h.usePlugin(Mo),h}(this,c)}},{key:"pluginIsInstalled",value:function(c){var h=c.id;return h?!!this._plugins.map[h]:this._plugins.list.indexOf(c)!==-1}},{key:"usePlugin",value:function(c,h){if(!this.isInitialized)return this;if(this.pluginIsInstalled(c))return this;if(c.id&&(this._plugins.map[c.id]=c),this._plugins.list.push(c),c.install&&c.install(this,h),c.listeners&&c.before){for(var g=0,m=this.listenerMaps.length,b=c.before.reduce(function(_,S){return _[S]=!0,_[hn(S)]=!0,_},{});g<m;g++){var x=this.listenerMaps[g].id;if(x&&(b[x]||b[hn(x)]))break}this.listenerMaps.splice(g,0,{id:c.id,map:c.listeners})}else c.listeners&&this.listenerMaps.push({id:c.id,map:c.listeners});return this}},{key:"addDocument",value:function(c,h){if(this.getDocIndex(c)!==-1)return!1;var g=$(c);h=h?at({},h):{},this.documents.push({doc:c,options:h}),this.events.documents.push(c),c!==this.document&&this.events.add(g,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:c,window:g,scope:this,options:h})}},{key:"removeDocument",value:function(c){var h=this.getDocIndex(c),g=$(c),m=this.documents[h].options;this.events.remove(g,"unload",this.onWindowUnload),this.documents.splice(h,1),this.events.documents.splice(h,1),this.fire("scope:remove-document",{doc:c,window:g,scope:this,options:m})}},{key:"getDocIndex",value:function(c){for(var h=0;h<this.documents.length;h++)if(this.documents[h].doc===c)return h;return-1}},{key:"getDocOptions",value:function(c){var h=this.getDocIndex(c);return h===-1?null:this.documents[h].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),u}();function hn(u){return u&&u.replace(/\/.*$/,"")}var _l=new We,ze=_l.interactStatic,Ar=typeof globalThis<"u"?globalThis:window;_l.init(Ar);var kr=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(u){var c=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(g){var m=g[0],b=g[1];return m in u||b in u}),h=function(g,m){for(var b=u.range,x=u.limits,_=x===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:x,S=u.offset,I=S===void 0?{x:0,y:0}:S,A={range:b,grid:u,x:null,y:null},N=0;N<c.length;N++){var q=c[N],Q=q[0],K=q[1],tt=Math.round((g-I.x)/u[Q]),ct=Math.round((m-I.y)/u[K]);A[Q]=Math.max(_.left,Math.min(_.right,tt*u[Q]+I.x)),A[K]=Math.max(_.top,Math.min(_.bottom,ct*u[K]+I.y))}return A};return h.grid=u,h.coordFields=c,h}}),El={id:"snappers",install:function(u){var c=u.interactStatic;c.snappers=at(c.snappers||{},kr),c.createSnapGrid=c.snappers.grid}},Dr=El,Cr={start:function(u){var c=u.state,h=u.rect,g=u.edges,m=u.pageCoords,b=c.options,x=b.ratio,_=b.enabled,S=c.options,I=S.equalDelta,A=S.modifiers;x==="preserve"&&(x=h.width/h.height),c.startCoords=at({},m),c.startRect=at({},h),c.ratio=x,c.equalDelta=I;var N=c.linkedEdges={top:g.top||g.left&&!g.bottom,left:g.left||g.top&&!g.right,bottom:g.bottom||g.right&&!g.top,right:g.right||g.bottom&&!g.left};if(c.xIsPrimaryAxis=!(!g.left&&!g.right),c.equalDelta){var q=(N.left?1:-1)*(N.top?1:-1);c.edgeSign={x:q,y:q}}else c.edgeSign={x:N.left?-1:1,y:N.top?-1:1};if(_!==!1&&at(g,N),A!=null&&A.length){var Q=new xr(u.interaction);Q.copyFrom(u.interaction.modification),Q.prepareStates(A),c.subModification=Q,Q.startAll(i({},u))}},set:function(u){var c=u.state,h=u.rect,g=u.coords,m=c.linkedEdges,b=at({},g),x=c.equalDelta?Fo:$o;if(at(u.edges,m),x(c,c.xIsPrimaryAxis,g,h),!c.subModification)return null;var _=at({},h);qi(m,_,{x:g.x-b.x,y:g.y-b.y});var S=c.subModification.setAll(i(i({},u),{},{rect:_,edges:m,pageCoords:g,prevCoords:g,prevRect:_})),I=S.delta;return S.changed&&(x(c,Math.abs(I.x)>Math.abs(I.y),S.coords,S.rect),at(g,S.coords)),S.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Fo(u,c,h){var g=u.startCoords,m=u.edgeSign;c?h.y=g.y+(h.x-g.x)*m.y:h.x=g.x+(h.y-g.y)*m.x}function $o(u,c,h,g){var m=u.startRect,b=u.startCoords,x=u.ratio,_=u.edgeSign;if(c){var S=g.width/x;h.y=b.y+(S-m.height)*_.y}else{var I=g.height*x;h.x=b.x+(I-m.width)*_.x}}var Vo=Xn(Cr,"aspectRatio"),Ir=function(){};Ir._defaults={};var Fs=Ir;function Kn(u,c,h){return C.func(u)?En(u,c.interactable,c.element,[h.x,h.y,c]):En(u,c.interactable,c.element)}var Qi={start:function(u){var c=u.rect,h=u.startOffset,g=u.state,m=u.interaction,b=u.pageCoords,x=g.options,_=x.elementRect,S=at({left:0,top:0,right:0,bottom:0},x.offset||{});if(c&&_){var I=Kn(x.restriction,m,b);if(I){var A=I.right-I.left-c.width,N=I.bottom-I.top-c.height;A<0&&(S.left+=A,S.right+=A),N<0&&(S.top+=N,S.bottom+=N)}S.left+=h.left-c.width*_.left,S.top+=h.top-c.height*_.top,S.right+=h.right-c.width*(1-_.right),S.bottom+=h.bottom-c.height*(1-_.bottom)}g.offset=S},set:function(u){var c=u.coords,h=u.interaction,g=u.state,m=g.options,b=g.offset,x=Kn(m.restriction,h,c);if(x){var _=function(S){return!S||"left"in S&&"top"in S||((S=at({},S)).left=S.x||0,S.top=S.y||0,S.right=S.right||S.left+S.width,S.bottom=S.bottom||S.top+S.height),S}(x);c.x=Math.max(Math.min(_.right-b.right,c.x),_.left+b.left),c.y=Math.max(Math.min(_.bottom-b.bottom,c.y),_.top+b.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},Ho=Xn(Qi,"restrict"),Or={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Mr={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Lr(u,c){for(var h=0,g=["top","left","bottom","right"];h<g.length;h++){var m=g[h];m in u||(u[m]=c[m])}return u}var ts={noInner:Or,noOuter:Mr,start:function(u){var c,h=u.interaction,g=u.startOffset,m=u.state,b=m.options;b&&(c=zi(Kn(b.offset,h,h.coords.start.page))),c=c||{x:0,y:0},m.offset={top:c.y+g.top,left:c.x+g.left,bottom:c.y-g.bottom,right:c.x-g.right}},set:function(u){var c=u.coords,h=u.edges,g=u.interaction,m=u.state,b=m.offset,x=m.options;if(h){var _=at({},c),S=Kn(x.inner,g,_)||{},I=Kn(x.outer,g,_)||{};Lr(S,Or),Lr(I,Mr),h.top?c.y=Math.min(Math.max(I.top+b.top,_.y),S.top+b.top):h.bottom&&(c.y=Math.max(Math.min(I.bottom+b.bottom,_.y),S.bottom+b.bottom)),h.left?c.x=Math.min(Math.max(I.left+b.left,_.x),S.left+b.left):h.right&&(c.x=Math.max(Math.min(I.right+b.right,_.x),S.right+b.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},wl=Xn(ts,"restrictEdges"),Pr=at({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(u){}},Qi.defaults),ku=Xn({start:Qi.start,set:Qi.set,defaults:Pr},"restrictRect"),Du={width:-1/0,height:-1/0},Cu={width:1/0,height:1/0},Iu=Xn({start:function(u){return ts.start(u)},set:function(u){var c=u.interaction,h=u.state,g=u.rect,m=u.edges,b=h.options;if(m){var x=ue(Kn(b.min,c,u.coords))||Du,_=ue(Kn(b.max,c,u.coords))||Cu;h.options={endOnly:b.endOnly,inner:at({},ts.noInner),outer:at({},ts.noOuter)},m.top?(h.options.inner.top=g.bottom-x.height,h.options.outer.top=g.bottom-_.height):m.bottom&&(h.options.inner.bottom=g.top+x.height,h.options.outer.bottom=g.top+_.height),m.left?(h.options.inner.left=g.right-x.width,h.options.outer.left=g.right-_.width):m.right&&(h.options.inner.right=g.left+x.width,h.options.outer.right=g.left+_.width),ts.set(u),h.options=b}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),M={start:function(u){var c,h=u.interaction,g=u.interactable,m=u.element,b=u.rect,x=u.state,_=u.startOffset,S=x.options,I=S.offsetWithOrigin?function(q){var Q=q.interaction.element,K=zi(En(q.state.options.origin,null,null,[Q])),tt=K||mi(q.interactable,Q,q.interaction.prepared.name);return tt}(u):{x:0,y:0};if(S.offset==="startCoords")c={x:h.coords.start.page.x,y:h.coords.start.page.y};else{var A=En(S.offset,g,m,[h]);(c=zi(A)||{x:0,y:0}).x+=I.x,c.y+=I.y}var N=S.relativePoints;x.offsets=b&&N&&N.length?N.map(function(q,Q){return{index:Q,relativePoint:q,x:_.left-b.width*q.x+c.x,y:_.top-b.height*q.y+c.y}}):[{index:0,relativePoint:null,x:c.x,y:c.y}]},set:function(u){var c=u.interaction,h=u.coords,g=u.state,m=g.options,b=g.offsets,x=mi(c.interactable,c.element,c.prepared.name),_=at({},h),S=[];m.offsetWithOrigin||(_.x-=x.x,_.y-=x.y);for(var I=0,A=b;I<A.length;I++)for(var N=A[I],q=_.x-N.x,Q=_.y-N.y,K=0,tt=m.targets.length;K<tt;K++){var ct=m.targets[K],rt=void 0;(rt=C.func(ct)?ct(q,Q,c._proxy,N,K):ct)&&S.push({x:(C.number(rt.x)?rt.x:q)+N.x,y:(C.number(rt.y)?rt.y:Q)+N.y,range:C.number(rt.range)?rt.range:m.range,source:ct,index:K,offset:N})}for(var gt={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Ot=0;Ot<S.length;Ot++){var jt=S[Ot],At=jt.range,Rt=jt.x-_.x,Je=jt.y-_.y,de=vi(Rt,Je),pn=de<=At;At===1/0&&gt.inRange&&gt.range!==1/0&&(pn=!1),gt.target&&!(pn?gt.inRange&&At!==1/0?de/At<gt.distance/gt.range:At===1/0&&gt.range!==1/0||de<gt.distance:!gt.inRange&&de<gt.distance)||(gt.target=jt,gt.distance=de,gt.range=At,gt.inRange=pn,gt.delta.x=Rt,gt.delta.y=Je)}return gt.inRange&&(h.x=gt.target.x,h.y=gt.target.y),g.closest=gt,gt},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},G=Xn(M,"snap"),ht={start:function(u){var c=u.state,h=u.edges,g=c.options;if(!h)return null;u.state={options:{targets:null,relativePoints:[{x:h.left?0:1,y:h.top?0:1}],offset:g.offset||"self",origin:{x:0,y:0},range:g.range}},c.targetFields=c.targetFields||[["width","height"],["x","y"]],M.start(u),c.offsets=u.state.offsets,u.state=c},set:function(u){var c=u.interaction,h=u.state,g=u.coords,m=h.options,b=h.offsets,x={x:g.x-b[0].x,y:g.y-b[0].y};h.options=at({},m),h.options.targets=[];for(var _=0,S=m.targets||[];_<S.length;_++){var I=S[_],A=void 0;if(A=C.func(I)?I(x.x,x.y,c):I){for(var N=0,q=h.targetFields;N<q.length;N++){var Q=q[N],K=Q[0],tt=Q[1];if(K in A||tt in A){A.x=A[K],A.y=A[tt];break}}h.options.targets.push(A)}}var ct=M.set(u);return h.options=m,ct},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},Jt=Xn(ht,"snapSize"),re={aspectRatio:Vo,restrictEdges:wl,restrict:Ho,restrictRect:ku,restrictSize:Iu,snapEdges:Xn({start:function(u){var c=u.edges;return c?(u.state.targetFields=u.state.targetFields||[[c.left?"left":"right",c.top?"top":"bottom"]],ht.start(u)):null},set:ht.set,defaults:at(xi(ht.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:G,snapSize:Jt,spring:Fs,avoid:Fs,transform:Fs,rubberband:Fs},Gt={id:"modifiers",install:function(u){var c=u.interactStatic;for(var h in u.usePlugin(Os),u.usePlugin(Dr),c.modifiers=re,re){var g=re[h],m=g._defaults,b=g._methods;m._methods=b,u.defaults.perAction[h]=m}}},fn=Gt,$s=function(u){d(h,u);var c=y(h);function h(g,m,b,x,_,S){var I;if(r(this,h),rn(v(I=c.call(this,_)),b),b!==m&&rn(v(I),m),I.timeStamp=S,I.originalEvent=b,I.type=g,I.pointerId=Wn(m),I.pointerType=ol(m),I.target=x,I.currentTarget=null,g==="tap"){var A=_.getPointerIndex(m);I.dt=I.timeStamp-_.pointers[A].downTime;var N=I.timeStamp-_.tapTime;I.double=!!_.prevTap&&_.prevTap.type!=="doubletap"&&_.prevTap.target===I.target&&N<500}else g==="doubletap"&&(I.dt=m.timeStamp-_.tapTime,I.double=!0);return I}return a(h,[{key:"_subtractOrigin",value:function(g){var m=g.x,b=g.y;return this.pageX-=m,this.pageY-=b,this.clientX-=m,this.clientY-=b,this}},{key:"_addOrigin",value:function(g){var m=g.x,b=g.y;return this.pageX+=m,this.pageY+=b,this.clientX+=m,this.clientY+=b,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),h}(mr),zo={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(u){u.pointerEvents=zo,u.defaults.actions.pointerEvents=zo.defaults,at(u.actions.phaselessTypes,zo.types)},listeners:{"interactions:new":function(u){var c=u.interaction;c.prevTap=null,c.tapTime=0},"interactions:update-pointer":function(u){var c=u.down,h=u.pointerInfo;!c&&h.hold||(h.hold={duration:1/0,timeout:null})},"interactions:move":function(u,c){var h=u.interaction,g=u.pointer,m=u.event,b=u.eventTarget;u.duplicate||h.pointerIsDown&&!h.pointerWasMoved||(h.pointerIsDown&&Ou(u),es({interaction:h,pointer:g,event:m,eventTarget:b,type:"move"},c))},"interactions:down":function(u,c){(function(h,g){for(var m=h.interaction,b=h.pointer,x=h.event,_=h.eventTarget,S=h.pointerIndex,I=m.pointers[S].hold,A=nn(_),N={interaction:m,pointer:b,event:x,eventTarget:_,type:"hold",targets:[],path:A,node:null},q=0;q<A.length;q++){var Q=A[q];N.node=Q,g.fire("pointerEvents:collect-targets",N)}if(N.targets.length){for(var K=1/0,tt=0,ct=N.targets;tt<ct.length;tt++){var rt=ct[tt].eventable.options.holdDuration;rt<K&&(K=rt)}I.duration=K,I.timeout=setTimeout(function(){es({interaction:m,eventTarget:_,pointer:b,event:x,type:"hold"},g)},K)}})(u,c),es(u,c)},"interactions:up":function(u,c){Ou(u),es(u,c),function(h,g){var m=h.interaction,b=h.pointer,x=h.event,_=h.eventTarget;m.pointerWasMoved||es({interaction:m,eventTarget:_,pointer:b,event:x,type:"tap"},g)}(u,c)},"interactions:cancel":function(u,c){Ou(u),es(u,c)}},PointerEvent:$s,fire:es,collectEventTargets:Ef,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function es(u,c){var h=u.interaction,g=u.pointer,m=u.event,b=u.eventTarget,x=u.type,_=u.targets,S=_===void 0?Ef(u,c):_,I=new $s(x,g,m,b,h,c.now());c.fire("pointerEvents:new",{pointerEvent:I});for(var A={interaction:h,pointer:g,event:m,eventTarget:b,targets:S,type:x,pointerEvent:I},N=0;N<S.length;N++){var q=S[N];for(var Q in q.props||{})I[Q]=q.props[Q];var K=mi(q.eventable,q.node);if(I._subtractOrigin(K),I.eventable=q.eventable,I.currentTarget=q.node,q.eventable.fire(I),I._addOrigin(K),I.immediatePropagationStopped||I.propagationStopped&&N+1<S.length&&S[N+1].node!==I.currentTarget)break}if(c.fire("pointerEvents:fired",A),x==="tap"){var tt=I.double?es({interaction:h,pointer:g,event:m,eventTarget:b,type:"doubletap"},c):I;h.prevTap=tt,h.tapTime=tt.timeStamp}return I}function Ef(u,c){var h=u.interaction,g=u.pointer,m=u.event,b=u.eventTarget,x=u.type,_=h.getPointerIndex(g),S=h.pointers[_];if(x==="tap"&&(h.pointerWasMoved||!S||S.downTarget!==b))return[];for(var I=nn(b),A={interaction:h,pointer:g,event:m,eventTarget:b,type:x,path:I,targets:[],node:null},N=0;N<I.length;N++){var q=I[N];A.node=q,c.fire("pointerEvents:collect-targets",A)}return x==="hold"&&(A.targets=A.targets.filter(function(Q){var K,tt;return Q.eventable.options.holdDuration===((K=h.pointers[_])==null||(tt=K.hold)==null?void 0:tt.duration)})),A.targets}function Ou(u){var c=u.interaction,h=u.pointerIndex,g=c.pointers[h].hold;g&&g.timeout&&(clearTimeout(g.timeout),g.timeout=null)}var f0=Object.freeze({__proto__:null,default:zo});function p0(u){var c=u.interaction;c.holdIntervalHandle&&(clearInterval(c.holdIntervalHandle),c.holdIntervalHandle=null)}var g0={id:"pointer-events/holdRepeat",install:function(u){u.usePlugin(zo);var c=u.pointerEvents;c.defaults.holdRepeatInterval=0,c.types.holdrepeat=u.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(u,c){return u["pointerEvents:".concat(c)]=p0,u},{"pointerEvents:new":function(u){var c=u.pointerEvent;c.type==="hold"&&(c.count=(c.count||0)+1)},"pointerEvents:fired":function(u,c){var h=u.interaction,g=u.pointerEvent,m=u.eventTarget,b=u.targets;if(g.type==="hold"&&b.length){var x=b[0].eventable.options.holdRepeatInterval;x<=0||(h.holdIntervalHandle=setTimeout(function(){c.pointerEvents.fire({interaction:h,eventTarget:m,type:"hold",pointer:g,event:g},c)},x))}}})},m0=g0,v0={id:"pointer-events/interactableTargets",install:function(u){var c=u.Interactable;c.prototype.pointerEvents=function(g){return at(this.events.options,g),this};var h=c.prototype._backCompatOption;c.prototype._backCompatOption=function(g,m){var b=h.call(this,g,m);return b===this&&(this.events.options[g]=m),b}},listeners:{"pointerEvents:collect-targets":function(u,c){var h=u.targets,g=u.node,m=u.type,b=u.eventTarget;c.interactables.forEachMatch(g,function(x){var _=x.events,S=_.options;_.types[m]&&_.types[m].length&&x.testIgnoreAllow(S,g,b)&&h.push({node:g,eventable:_,props:{interactable:x}})})},"interactable:new":function(u){var c=u.interactable;c.events.getRect=function(h){return c.getRect(h)}},"interactable:set":function(u,c){var h=u.interactable,g=u.options;at(h.events.options,c.pointerEvents.defaults),at(h.events.options,g.pointerEvents||{})}}},b0=v0,y0={id:"pointer-events",install:function(u){u.usePlugin(f0),u.usePlugin(m0),u.usePlugin(b0)}},x0=y0,_0={id:"reflow",install:function(u){var c=u.Interactable;u.actions.phases.reflow=!0,c.prototype.reflow=function(h){return function(g,m,b){for(var x=g.getAllElements(),_=b.window.Promise,S=_?[]:null,I=function(){var N=x[A],q=g.getRect(N);if(!q)return 1;var Q,K=Cs(b.interactions.list,function(rt){return rt.interacting()&&rt.interactable===g&&rt.element===N&&rt.prepared.name===m.name});if(K)K.move(),S&&(Q=K._reflowPromise||new _(function(rt){K._reflowResolve=rt}));else{var tt=ue(q),ct=function(rt){return{coords:rt,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:tt.x,y:tt.y},client:{x:tt.x,y:tt.y},timeStamp:b.now()});Q=function(rt,gt,Ot,jt,At){var Rt=rt.interactions.new({pointerType:"reflow"}),Je={interaction:Rt,event:At,pointer:At,eventTarget:Ot,phase:"reflow"};Rt.interactable=gt,Rt.element=Ot,Rt.prevEvent=At,Rt.updatePointer(At,At,Ot,!0),As(Rt.coords.delta),z(Rt.prepared,jt),Rt._doPhase(Je);var de=rt.window,pn=de.Promise,Rn=pn?new pn(function(Si){Rt._reflowResolve=Si}):void 0;return Rt._reflowPromise=Rn,Rt.start(jt,gt,Ot),Rt._interacting?(Rt.move(Je),Rt.end(At)):(Rt.stop(),Rt._reflowResolve()),Rt.removePointer(At,At),Rn}(b,g,N,m,ct)}S&&S.push(Q)},A=0;A<x.length&&!I();A++);return S&&_.all(S).then(function(){return g})}(this,h,u)}},listeners:{"interactions:stop":function(u,c){var h=u.interaction;h.pointerType==="reflow"&&(h._reflowResolve&&h._reflowResolve(),function(g,m){g.splice(g.indexOf(m),1)}(c.interactions.list,h))}}},E0=_0;if(ze.use(He),ze.use(Ls),ze.use(x0),ze.use(Au),ze.use(fn),ze.use(ge),ze.use(Xi),ze.use(L),ze.use(E0),ze.default=ze,s(n)==="object"&&n)try{n.exports=ze}catch{}return ze.default=ze,ze})})(Bc,Bc.exports);var $P=Bc.exports;const Fc=T0($P);let Dt=[],Ci={};const bd=[100,200,500,1e3,2e3,3e3,5e3,7500,1e4,15e3,2e4,5e4,1e5],VP=100,HP=50,ta=20;let ui=!1,Wy="px",Na=3e3,cr=null,co=null,$c=[],De=0,Ws=0,ws=!1,Xr=0,er=0,Ba=60,xa=0,oe=0,xo=!1,_a=!1,Gr=!0,Ea=0,nr=0,Vc=null,mn;const mf=`<i title=${U("Run","")} class="bi-play-circle-fill"></i>`,Yy=`<i title=${U("Start","")} class="bi-triangle"></i>`,zP=`<i title=${U("Pause","")} class="bi-pause-btn"></i>`,Xy=`<i title=${U("Wait","")} class="bi-hourglass-split"></i>`,uo=document.getElementById("rg2-track-names"),vm=document.querySelector("#rg2-track-names .card-body"),qP=document.getElementById("btn-runners"),pr=document.getElementById("btn-start-stop");document.querySelector("#rg2-track-names .card-title").innerHTML=U("Runners");document.getElementById("btn-close-track-names").addEventListener("click",()=>{uo.classList.add("d-none")});qP.addEventListener("click",()=>{uo.classList.toggle("d-none")});const bc=document.getElementById("rg2-replay-by-control");bc.classList.add("d-none");let Kl={x:0,y:0};Fc(uo).draggable({inertia:!0,listeners:{move(n){Kl.x+=n.dx,Kl.y+=n.dy,n.target.style.transform=`translate(${Kl.x}px, ${Kl.y}px)`}},modifiers:[Fc.modifiers.restrictRect({restriction:"#rg2-container"})]});function Gy(n,t=!0){for(let e=0;e<Dt.length;e+=1)if(Dt[e].resultid===n.resultid)return;Dt.length===0&&(Ci=AP(n.coursename)),n.userColour!==null?n.trackColour=n.userColour:n.trackColour=Kv(),Dt.push(n),t&&yu()}function Ky(n){ui=!1,$c=[];const t=Ci.x[n],e=Ci.y[n],i=Ci.x[n+1],s=Ci.y[n+1];if(Ci.angle.length>=n){const r=xf(),o=o0(),a=$e(t,e,i,s),l=$e(r.x,r.y,o.x,o.y);let d=Math.min(l/a,F.MAX_ZOOM);d=Math.max(d,F.MIN_ZOOM);let f=(D.displayAngle-Ci.angle[n]-Math.PI/2)%(Math.PI*2);f<-1*Math.PI&&(f=f+2*Math.PI);for(let p=1;p<=ta;p=p+1){let v={};v.x=r.x-(r.x-t)*p/ta,v.y=r.y-(r.y-e)*p/ta,v.angle=(D.displayAngle-f*p/ta)%(Math.PI*2),v.scale=Math.pow(d,1/ta),$c.push(v)}co=setInterval(()=>{ZP()},HP)}else xu(0,t,e,!0,1),co=null,ui=!0}function bm(n,t){for(let e=0;e<n.length;e+=1)t?Gy(new yb(n[e]),!1):t0(n[e]);yu()}function Jy(){Xr=86400,er=0,nr=0;for(let n=0;n<Dt.length;n+=1)Dt[n].starttime<Xr&&(Xr=Dt[n].starttime),Dt[n].starttime+Dt[n].x.length>er&&(er=Dt[n].starttime+Dt[n].x.length),Dt[n].x.length>nr&&(nr=Dt[n].x.length)}function jP(n){if(Dt.length===0)return;let t=!0;for(let e=0;e<Dt.length;e+=1)if(Dt[e].splits[oe+1]-Dt[e].splits[oe]>n){t=!1;break}t&&(oe+=1,ui=!1,vf(oe),bf())}function UP(n){n!==De&&il(n)}function WP(){let n=document.getElementById("rg2-replay-speed-list"),t="";for(let e=0;e<bd.length;e=e+1)t+=`<li class="dropdown-item" data-speed="${bd[e]}">${"x"+bd[e]/100}</li>`;n.innerHTML=t,document.getElementById("rg2-replay-speed-select").addEventListener("hidden.bs.dropdown",e=>{e.clickEvent&&i0(parseInt(e.clickEvent.target.dataset.speed,10))})}function YP(){let n=document.getElementById("rg2-replay-start-control-list");n.removeEventListener("hidden.bs.dropdown",xm);let t="";const i=Dt.reduce((s,r)=>Math.min(r.splits.length,s),9999);for(let s=0;s<i-1;s=s+1){const r=s===0?`<div>${Yy}</div>`:s;t+=`<li class="dropdown-item" data-control="${s}">${r}</li>`}n.innerHTML=t,document.getElementById("rg2-replay-start-control-select").addEventListener("hidden.bs.dropdown",xm)}function XP(){let n=document.getElementById("rg2-tails-length-list"),t="";const e=["0:00","0:30","1:00","1:30","2:00","3:00",U("Full tails","")],i=[0,30,60,90,120,180,"Full"];for(let s=0;s<e.length;s=s+1)t+=`<li class="dropdown-item" data-length="${i[s]}">${e[s]}</li>`;n.innerHTML=t,document.getElementById("rg2-tails-length-select").addEventListener("hidden.bs.dropdown",s=>{s.clickEvent&&oR(s.clickEvent.target.dataset.length)})}function GP(){if(Dt.length===0)return;if(mn){mn.value!==De&&(mn.value=De);const t=document.getElementById("rg2-clock");t.innerText=KT(De)}let n=0;for(let t=0;t<Dt.length;t+=1){const e=Dt[t];let i=0;if(ws?i=e.starttime:oe===0||e.splits.length<oe?i=0:i=-1*e.splits[oe],D.strokeStyle=e.trackColour,D.globalAlpha=$t.perCentRouteIntensity/100,D.lineWidth=$t.routeWidth/Math.pow(D.displayScale,.5),D.lineJoin="round",D.beginPath(),!ui&&!co&&oe>0){const s=e.splits[oe];let r=Math.max(s-Ba,e.splits[oe-1]);D.moveTo(e.x[r],e.y[r]);for(let o=r+1;o<=s;o+=1)D.lineTo(e.x[o],e.y[o])}else{D.moveTo(e.x[xa-i],e.y[xa-i]);for(let s=xa;s<De;s+=1)s>i&&s-i<e.nextStopTime&&D.lineTo(e.x[s-i],e.y[s-i])}D.stroke(),D.beginPath(),n=De,n-i<e.nextStopTime?n=n-i:n=e.nextStopTime,D.arc(e.x[n],e.y[n],F.RUNNER_DOT_RADIUS/Math.pow(D.displayScale,.5),0,2*Math.PI,!1),D.globalAlpha=F.FULL_INTENSITY,D.strokeStyle=F.BLACK,D.fillStyle=e.trackColour,D.fill(),D.lineWidth=F.RUNNER_DOT_RADIUS/Math.pow(D.displayScale,.5)/4,D.stroke(),KP(e,n)}aR(n),xo&&jP(De)}function KP(n,t){let e="";if((_a||Gr)&&t<n.x.length&&t>=0){D.fillStyle=n.trackColour,D.strokeStyle="darkslategray",D.font=$t.replayFontSize/Math.pow(D.displayScale,.8)+"pt Arial",D.globalAlpha=F.FULL_INTENSITY,D.textAlign="left",Gr?e=n.initials:e=n.name,D.save(),D.translate(n.x[t],n.y[t]),D.rotate(D.displayAngle),D.lineWidth=$t.replayFontSize/Math.pow(D.displayScale,.8)/8;const i=2+8/Math.pow(D.displayScale,1),s=2+4/Math.pow(D.displayScale,1);D.strokeText(e,i,s),D.fillText(e,i,s),D.restore()}}function ym(n,t){const e=Dt[n].cumulativeDistance;let i=t>e.length-1?e[e.length-1]:e[t];return i===void 0&&(i=0),i}function Zy(n){let t=[];for(let i=0;i<Dt.length;i+=1){let s={};s.trackColour=Dt[i].trackColour,s.course=Dt[i].coursename,s.name=Dt[i].name,s.resultid=Dt[i].resultid,s.rawid=Dt[i].rawid,ws?s.distance=ym(i,De-Dt[i].starttime):s.distance=ym(i,n),s.distance+=Wy,t.push(s)}let e=pk();for(let i=0;i<e.length;i+=1)if(t.findIndex(s=>s.resultid===e[i].resultid)===-1){let s={};s.trackColour=e[i].trackColour,s.course=e[i].course,s.name=e[i].name,s.resultid=e[i].resultid,s.rawid=e[i].rawid,s.distance="",t.push(s)}return t}function JP(n){if(n.length===0)return"";let t="",e="";for(let i=0;i<n.length;i+=1)e!==n[i].course&&(t+=`<div></div><div><strong>${n[i].course}</strong></div><div></div>`,e=n[i].course),t+=`<input type="color" class="form-control form-control-color" data-rawid="${n[i].rawid}"`,t+=` value = "${n[i].trackColour}" ><div>${n[i].name}</div><div class="runner-distance text-end"`,t+=` data-resultid="${n[i].resultid}">${n[i].distance}</div>`;return t}function xm(n){n.clickEvent&&(oe=parseInt(n.clickEvent.target.dataset.control),isNaN(oe)&&(oe=0),ui=!1,vf(oe),bf(),Ky(oe),pr.innerHTML=Xy)}function ZP(){if($c.length===0)clearInterval(co),co=null,ui=!0,pr.innerHTML=mf;else{const n=$c.shift();xu(n.angle,n.x,n.y,!0,n.scale)}wt()}function QP(){ws?De<er&&(Ws=Math.min(Ws+Na,er*1e3)):De<nr&&(Ws=Math.min(Ws+Na,nr*1e3)),De=parseInt(Ws/1e3,10),xa=Math.max(De-Ba,Ea+1),wt()}function tR(){if(Vc)return;Vc=document.getElementById("rg2-animation-controls");const n=document.getElementById("rg2-clock");n.innerText="00:00:00",Qy(0,0,0),WP(),i0(Na),pr.addEventListener("click",()=>{cR()}),document.getElementById("btn-mass-start").addEventListener("click",()=>{bc.classList.add("d-none"),iR()});const e=document.getElementById("btn-real-time");e.setAttribute("title",U("Real time","")),e.addEventListener("click",()=>{bc.classList.add("d-none"),sR()}),document.getElementById("btn-by-control").addEventListener("click",()=>{nR(),YP(),bc.classList.remove("d-none")}),XP();let s=document.querySelectorAll("[data-toggle-names]");for(let r of s)r.innerHTML=U(r.dataset.toggleNames),r.addEventListener("click",o=>{uR(o.currentTarget.dataset.toggleNames)});document.getElementById("rg2-toggle-names-value").setAttribute("title",U("Show names",""))}function Qy(n,t,e){if(mn&&mn.min===n&&mn.max===t&&mn.value===e)return;mn&&mn.remove();const i=document.getElementById("rg2-clock-slider-container"),s=document.createElement("tc-range-slider");s.setAttribute("id","rg2-clock-slider"),s.setAttribute("min",n),s.setAttribute("max",t),s.setAttribute("value",e),s.setAttribute("step",1),i.append(s),mn=document.getElementById("rg2-clock-slider"),mn.addEventListener("change",r=>{UP(r.target.value)})}function t0(n){for(let t=0;t<Dt.length;t+=1)Dt[t].resultid===n&&Dt.splice(t,1),Dt.length===0&&(Ci={});yu()}function eR(){Dt.length=0,Ci={},Na=3e3,De=0,Ws=0,ws=!1,Xr=0,er=0,Ba=60,xa=0,oe=0,xo=!1,_a=!1,Gr=!0,Ea=0,nr=0,clearInterval(cr),cr=null,yu(),pr.innerHTML=mf,uo.classList.add("d-none")}function e0(){Dt.forEach(n=>n.nextStopTime=F.VERY_HIGH_TIME_IN_SECS)}function n0(n){return Dt.findIndex(t=>t.resultid===n)>-1}function il(n){Wy=uP();let t=0;ws?(n>0?De=n:De=Xr,t=er,Ea=Xr):(n>0?De=n:De=0,t=nr,Ea=0),Ws=De*1e3,n===0&&Qy(Ea,t,De),wt()}function vf(n){document.getElementById("rg2-replay-start-control").innerHTML=n===0?Yy:n}function bf(){let n=9999;n=Dt.reduce((t,e)=>Math.min(e.splits.length,t),n),oe>n&&(oe=0);for(let t=0;t<Dt.length;t+=1)oe+1<Dt[t].splits.length?Dt[t].nextStopTime=Dt[t].splits[oe+1]:Dt[t].nextStopTime=F.VERY_HIGH_TIME_IN_SECS;il(0),s0(),wt()}function nR(){document.getElementById("rg2-clock-slider").setAttribute("disabled",""),ws=!1,oe=0,xo=!0,ui=!1,vf(oe),bf()}function iR(){ws=!1,xo=!1,oe=0,e0(),il(0),mn.removeAttribute("disabled")}function sR(){ws=!0,xo=!1,oe=0,e0(),il(0),mn.removeAttribute("disabled")}function i0(n){isNaN(n)&&(n=1e3),Na=n,document.getElementById("rg2-replay-speed").innerText="x"+n/100}function rR(n,t){for(let e=0;e<Dt.length;e+=1)Dt[e].rawid===n&&(Dt[e].userColour=t,Dt[e].trackColour=t);Ck(n,t)}function oR(n){n==="Full"?Ba=F.VERY_HIGH_TIME_IN_SECS:Ba=parseInt(n,10),Jy(),wt()}function aR(n){const t=Zy(n);if(t.length===0)return;const e=document.querySelectorAll(".track-names .runner-distance");e&&e.forEach(i=>{const s=parseInt(i.dataset.resultid),r=t.findIndex(o=>o.resultid===s);r>-1&&(i.innerText=t[r].distance)})}function lR(){cr===null&&(cr=setInterval(()=>{QP()},VP)),pr.innerHTML=zP}function s0(){clearInterval(cr),cr=null,pr.innerHTML=mf}function cR(){cr===null?(xo?!ui&&co===null&&(Ky(oe),pr.innerHTML=Xy):ui=!0,ui&&lR()):s0()}function uR(n){switch(document.getElementById("rg2-toggle-names-value").setAttribute("title",U(n,"")),n){case"Show names":_a=!0,Gr=!1;break;case"Show initials":_a=!1,Gr=!0;break;default:_a=!1,Gr=!1;break}wt()}function yu(){tR(),yf(),Dt.length>0?Vc.classList.remove("d-none"):Vc.classList.add("d-none"),cf(),Jy(),il(0)}function yf(){const n=Zy(De);return n.length>0?(vm.innerHTML=JP(n),document.querySelectorAll(".track-names input").forEach(e=>{e.addEventListener("input",i=>{rR(parseInt(i.target.dataset.rawid,10),i.target.value),wt()})}),uo.classList.remove("d-none")):(vm.innerHTML="",uo.classList.add("d-none")),n.length}class dR{constructor(t){this.ctx=t,this.measuring=!1,this.dragging=!1,this.colours=["#ff00ff","#0000ff","#00ff00","#ff0000","#00ffff"],this.colourIndex=0,this.overlays=[],this.currentOverlay=this.initialiseOverlay(),this.units="px",this.metresPerPixel=1,this.dotSize=5,this.lineWidth=3,this.measureDialog=document.getElementById("rg2-measure-dialog"),document.getElementById("btn-measure").addEventListener("click",()=>{Vy()!==null&&(document.getElementById("rg2-map-canvas").style.cursor="crosshair",this.measureDialog.classList.remove("d-none"),this.measuring=!0,this.createMeasureDialog(),wt())}),document.getElementById("btn-close-measure-dialog").addEventListener("click",()=>{this.measuring=!1,this.measureDialog.classList.add("d-none"),document.getElementById("rg2-map-canvas").style.cursor="auto",wt()}),document.getElementById("btn-measure").addEventListener("click",()=>{document.getElementById("rg2-map-canvas").style.cursor="crosshair",this.measureDialog.classList.remove("d-none"),this.measuring=!0,this.createMeasureDialog(),wt()});let e={x:0,y:0};Fc(this.measureDialog).draggable({inertia:!0,listeners:{move(i){e.x+=i.dx,e.y+=i.dy,i.target.style.transform=`translate(${e.x}px, ${e.y}px)`}},modifiers:[Fc.modifiers.restrictRect({restriction:"#rg2-container"})]}),this.createMeasureDialog()}calculateLength(t,e){if(t.length<2)return 0;let i=0;for(let s=1;s<t.length;s+=1)i=i+$e(t[s-1],e[s-1],t[s],e[s]);return i}closeEnough(t,e,i,s){return Math.abs(t-i)<10&&Math.abs(e-s)<10}createMeasureDialog(){this.metresPerPixel=mu(),this.metresPerPixel===void 0?(this.metresPerPixel=1,this.units="px"):this.units="m";let t="";for(let r=0;r<this.overlays.length;r+=1)t=t+this.formatOverlay(this.overlays[r],!0);t=t+this.formatOverlay(this.currentOverlay,!1),this.overlays.length>1&&(t+=`<div>${U("All")}</div><div></div><div></div>`,t+="<div><i class='delete-all-overlays bi-trash'></i></div>"),document.querySelector(".rg2-overlay-table").innerHTML=t;let e=document.getElementsByClassName("delete-overlay");for(let r of e)r.addEventListener("click",o=>{this.deleteOverlay(parseInt(o.target.id,10))});let i=document.getElementsByClassName("delete-all-overlays");for(let r of i)r.addEventListener("click",o=>{this.deleteAllOverlays(parseInt(o.target.id,10))});let s=document.getElementsByClassName("end-overlay");for(let r of s)r.addEventListener("click",o=>{this.endOverlay(parseInt(o.target.id,10))})}deleteAllOverlays(){this.overlays.length=0,this.currentOverlay=this.initialiseOverlay(),this.updateOverlays(),this.createMeasureDialog(),wt()}deleteOverlay(t){this.overlays.splice(t,1),this.updateOverlays(),this.createMeasureDialog(),wt()}dragEnded(){this.dragging=!1}drawSingleOverlay(t,e){this.ctx.strokeStyle=t.colour,this.ctx.fillStyle=t.colour,this.ctx.beginPath(),this.ctx.moveTo(t.x[0],t.y[0]);for(let i=1;i<t.x.length;i+=1)this.ctx.lineTo(t.x[i],t.y[i]);this.ctx.stroke();for(let i=0;i<t.x.length;i+=1)this.ctx.beginPath(),this.ctx.arc(t.x[i],t.y[i],this.dotSize,0,2*Math.PI,!1),e?this.ctx.fill():this.ctx.stroke()}drawOverlays(){if(this.measuring){if(this.ctx.lineWidth=this.lineWidth,this.ctx.globalAlpha=.6,this.overlays.length>0)for(let t=0;t<this.overlays.length;t+=1)this.drawSingleOverlay(this.overlays[t],!0);this.currentOverlay.started&&(this.currentOverlay.x.length===1?(this.ctx.strokeStyle=this.currentOverlay.colour,this.ctx.fillStyle=this.currentOverlay.colour,this.ctx.beginPath(),this.ctx.arc(this.currentOverlay.x[0],this.currentOverlay.y[0],this.dotSize,0,2*Math.PI,!1),this.ctx.stroke()):this.drawSingleOverlay(this.currentOverlay,!1))}}endOverlay(){this.currentOverlay.idx=this.overlays.length,this.overlays.push(this.currentOverlay),this.currentOverlay=this.initialiseOverlay(),this.createMeasureDialog()}formatOverlay(t,e){let i="",s="",r="";return t.started?r=`<div>${parseInt(t.length,10)}${this.units}</div>`:r="<div></div>",e?s=`<div><i class='delete-overlay bi-trash' id="${t.idx}"></i></div>`:t.started?s=`<div><i class='end-overlay bi-save' id="${t.idx}"></i></div>`:s="<div></div>",i+=`<div>${t.id}</div><div class='overlay-bar' style='--overlay-colour:${t.colour};'></div>`,i+=`${r}${s}`,i}getNextColour(){return this.colourIndex=(this.colourIndex+1)%this.colours.length,this.colours[this.colourIndex]}initialiseOverlay(){const t={};return t.id=String.fromCharCode(this.overlays.length+65),t.colour=this.getNextColour(),t.x=[],t.y=[],t.length=0,t.started=!1,t.idx=void 0,t}mouseDrag(t,e){if(!this.measuring)return!1;if(!this.dragging)for(let i=0;i<this.overlays.length;i+=1)for(let s=0;s<this.overlays[i].x.length;s+=1)this.closeEnough(t.x,t.y,this.overlays[i].x[s],this.overlays[i].y[s])&&(this.dragging=!0,this.dragOverlay=i,this.dragPoint=s);return this.dragging?(this.overlays[this.dragOverlay].x[this.dragPoint]=parseInt(e.x,10),this.overlays[this.dragOverlay].y[this.dragPoint]=parseInt(e.y,10),this.overlays[this.dragOverlay].length=this.calculateLength(this.overlays[this.dragOverlay].x,this.overlays[this.dragOverlay].y)*this.metresPerPixel,this.createMeasureDialog(),!0):!1}mouseUp(t,e){this.measuring&&(this.dragging=!1,this.currentOverlay.started||this.startOverlay(),t===this.currentOverlay.x[this.currentOverlay.x.length-1]&&e===this.currentOverlay.y[this.currentOverlay.x.length-1]?this.endOverlay():(this.currentOverlay.x.push(t),this.currentOverlay.y.push(e),this.currentOverlay.length=this.calculateLength(this.currentOverlay.x,this.currentOverlay.y)*this.metresPerPixel,this.createMeasureDialog(),wt()))}startOverlay(){this.currentOverlay.started=!0,this.createMeasureDialog()}updateOverlays(){this.colourIndex=0;for(let t=0;t<this.overlays.length;t+=1)this.overlays[t].id=String.fromCharCode(t+65),this.overlays[t].idx=t,this.overlays[t].colour=this.getNextColour();this.currentOverlay.id=String.fromCharCode(this.overlays.length+65),this.currentOverlay.idx=this.overlays.length,this.currentOverlay.colour=this.getNextColour()}}let ye=document.getElementById("rg2-map-canvas"),D=ye.getContext("2d");D.displayAngle=0;D.displayScale=1;let bn=new Image,Hc=new dR(D),dt={dragStart:null,dragged:!0,scaleFactor:1.1,pinched:!1},yd;document.getElementById("rg2-load-progress").classList.add("d-none");document.getElementById("rg2-map-load-progress").classList.add("d-none");function hR(){ye.addEventListener("touchstart",yR,!1),ye.addEventListener("touchmove",bR,!1),ye.addEventListener("touchend",vR,!1),ye.addEventListener("DOMMouseScroll",_m,!1),ye.addEventListener("wheel",_m,!1),ye.addEventListener("mousedown",pR,!1),ye.addEventListener("mousemove",gR,!1),ye.addEventListener("mouseup",mR,!1),bn.addEventListener("load",()=>_R());let n=document.getElementById("btn-zoom-in");n.addEventListener("click",()=>Fa(1)),n=document.getElementById("btn-zoom-out"),n.addEventListener("click",()=>Fa(-1)),n=document.getElementById("btn-rotate-left"),n.addEventListener("click",()=>Em(-1)),n=document.getElementById("btn-rotate-right"),n.addEventListener("click",()=>Em(1)),n=document.getElementById("btn-reset"),n.addEventListener("click",()=>sl())}function xu(n,t,e,i=!0,s=1){r0((D.displayAngle-n)%(Math.PI*2),t,e,i,s)}function r0(n,t,e,i,s){if(D.displayAngle=(D.displayAngle-n)%(Math.PI*2),D.translate(t,e),D.rotate(n),s!==1&&(D.scale(s,s),D.displayScale=D.displayScale*s),i){const r=xf();D.translate(r.x-t,r.y-e)}else D.translate(-1*t,-1*e);wt()}function fR(){if(!F.managing()&&window.innerWidth>=F.BIG_SCREEN_BREAK_POINT){D.font="16pt Arial",D.textAlign="center",D.fillStyle=F.BLACK;const n=D.transformedPoint(ye.width/2,ye.height/2);D.fillText("Routegadget 2 Version "+F.RG2VERSION,n.x,n.y)}}function xf(){const n=document.getElementById("rg2-animation-controls").offsetHeight;return D.transformedPoint(ye.width/2,(ye.height-n)*.85)}function o0(){const n=document.getElementById("rg2-animation-controls").offsetHeight;return D.transformedPoint(ye.width/2,(ye.height-n)*.15)}function vs(){return{height:bn.height,width:bn.width}}function a0(n){dt.dragStart=D.transformedPoint(dt.lastX,dt.lastY),dt.dragged=!1,dt.whichButton=n.which}function l0(){if(dt.dragStart){const n=D.transformedPoint(dt.lastX,dt.lastY);n.x=Math.round(n.x),n.y=Math.round(n.y);const t={x:Math.round(dt.dragStart.x),y:Math.round(dt.dragStart.y)},e=dt.whichButton;Math.abs(n.x-t.x)+Math.abs(n.y-t.y)>5&&(NL()?Ly(t,n,e):bo()===F.TAB_CREATE?O1(t,n,e):Hc.mouseDrag(t,n)||D.translate(n.x-dt.dragStart.x,n.y-dt.dragStart.y),dt.dragged=!0,wt())}}function c0(n){const t=bo();if(dt.dragged)t===F.TAB_CREATE?wA():t===F.TAB_DRAW?IL():Hc.dragEnded();else if(t===F.TAB_CREATE){const e=Math.round(dt.dragStart.x),i=Math.round(dt.dragStart.y);TA(e,i)}else t===F.TAB_DRAW?VL(Math.round(dt.dragStart.x),Math.round(dt.dragStart.y),n.which):Hc.mouseUp(Math.round(dt.dragStart.x),Math.round(dt.dragStart.y));dt.dragStart=null,wt()}function pR(n){return d0(n),a0(n),n.stopPropagation(),n.preventDefault()}function gR(n){return d0(n),l0(),n.stopPropagation(),n.preventDefault()}function mR(n){return c0(n),n.stopPropagation(),n.preventDefault()}function _m(n){const t=n.wheelDelta?n.wheelDelta/40:n.detail?-n.detail:0;return t&&Fa(t),n.stopPropagation(),n.preventDefault()}function vR(n){c0(n),dt.pinched=!1}function bR(n){if(n.touches.length>1?dt.pinched||h0(n):dt.pinched=!1,dt.pinched&&n.touches.length>1){dt.pinchEnd0=D.transformedPoint(n.touches[0].pageX,n.touches[0].pageY),dt.pinchEnd1=D.transformedPoint(n.touches[1].pageX,n.touches[1].pageY);const t=$e(dt.pinchStart0.x,dt.pinchStart0.y,dt.pinchStart1.x,dt.pinchStart1.y),e=$e(dt.pinchEnd0.x,dt.pinchEnd0.y,dt.pinchEnd1.x,dt.pinchEnd1.y);t/e>1.1?(Fa(-1),dt.pinchStart0=dt.pinchEnd0,dt.pinchStart1=dt.pinchEnd1):t/e<.9&&(Fa(1),dt.pinchStart0=dt.pinchEnd0,dt.pinchStart1=dt.pinchEnd1)}else dt.lastX=n.touches[0].pageX,dt.lastY=n.touches[0].pageY,l0()}function yR(n){n.preventDefault(),n.touches.length>1&&h0(n),dt.lastX=n.touches[0].pageX,dt.lastY=n.touches[0].pageY,a0(n)}function xR(){hR(),wR(D),u0()}function _f(n,t=!1){document.getElementById("rg2-map-load-progress-label").textContent=U("Loading map",""),document.getElementById("rg2-map-load-progress").classList.remove("d-none"),bn.src=t?n:n+"?"+Date.now()}function _R(){document.getElementById("rg2-map-load-progress").classList.add("d-none"),sl(),F.managing()&&SA()}function wt(){yd===void 0&&(yd=setTimeout(()=>{yd=void 0,ER()},50))}function ER(){if(D.save(),D.setTransform(1,0,0,1,0,0),D.globalAlpha=F.FULL_INTENSITY,D.fillStyle=F.GREY,D.fillRect(0,0,D.canvas.width,D.canvas.height),D.restore(),bn.height>0){D.fillStyle=F.WHITE,D.globalAlpha=F.FULL_INTENSITY,D.fillRect(0,0,bn.width,bn.height),D.globalAlpha=$t.perCentMapIntensity/100,D.drawImage(bn,0,0);const n=bo();n===F.TAB_DRAW?(pm(F.DIM),Xe.drawControls(!1),Cp(),ML()):n===F.TAB_CREATE?X1():(pm(F.DIM),Cp(),Hc.drawOverlays(),Xe.drawControls(!1),GP())}else fR()}function sl(){let n=1;const t=ye.height/bn.height;dt.lastX=ye.width/2,dt.lastY=ye.height/2,dt.zoomSize=1,dt.dragStart=null,dt.dragged=!0,t<1&&(n=t),window.innerWidth>=F.BIG_SCREEN_BREAK_POINT?D.setTransform(n,0,0,n,document.getElementById("rg2-left-info-panel").offsetWidth+80,0):D.setTransform(n,0,0,n,0,0),D.displayAngle=0,D.displayScale=n,wt()}function u0(){dt.scaleFactor=F.DEFAULT_SCALE_FACTOR;const n=document.getElementById("rg2-header-container").offsetHeight;document.getElementById("rg2-container").style.height=window.innerHeight-n+"px",ye.width=window.innerWidth,ye.height=window.innerHeight-n,sl()}function Em(n){const t=n*(Math.PI/36);D.translate(bn.width/2,bn.height/2),r0(t,0,0,!1,1),D.translate(-bn.width/2,-bn.height/2)}function d0(n){dt.lastX=n.pageX-ye.offsetParent.offsetLeft,dt.lastY=n.pageY-ye.offsetParent.offsetTop}function h0(n){dt.pinchStart0=D.transformedPoint(n.touches[0].pageX,n.touches[0].pageY),dt.pinchStart1=D.transformedPoint(n.touches[1].pageX,n.touches[1].pageY),dt.pinched=!0}function wR(n){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");let e=t.createSVGMatrix(),i=[],s=n.save;n.save=function(){return i.push(e.translate(0,0)),s.call(n)};let r=n.restore;n.restore=function(){return e=i.pop(),r.call(n)};let o=n.scale;n.scale=function(p,v){return e=e.scale(p,v),o.call(n,p,v)};let a=n.translate;n.translate=function(p,v){return e=e.translate(p,v),a.call(n,p,v)};let l=n.setTransform;n.setTransform=function(p,v,y,E,w,T){return e.a=p,e.b=v,e.c=y,e.d=E,e.e=w,e.f=T,l.call(n,p,v,y,E,w,T)};let d=t.createSVGPoint();n.transformedPoint=function(p,v){return d.x=p,d.y=v,d.matrixTransform(e.inverse())};let f=n.rotate;n.rotate=function(p){return e=e.rotate(p*180/Math.PI),f.call(n,p)}}function Fa(n){if(!F.managing()&&Vy()===null)return;const t=Math.pow(dt.scaleFactor,n),e=dt.zoomSize*t;if(e<F.MAX_ZOOM&&e>F.MIN_ZOOM){dt.zoomSize=e;const i=D.transformedPoint(dt.lastX,dt.lastY);D.translate(i.x,i.y),D.scale(t,t),D.displayScale=D.displayScale*t,D.translate(-i.x,-i.y),wt()}}document.readyState!=="loading"?wm():document.addEventListener("DOMContentLoaded",wm);function wm(){const n=document.querySelector(".rg2-startup");n.addEventListener("transitionend",()=>{n.remove(),PP(),e1(),uL(),XT(),F.managing()&&_A(rg2Config.keksi),xR(),window.onpopstate=SR,window.location.hash&&!F.managing()&&Zv(window.location.hash),document.getElementById("rg2-event-title").innerHTML="Routegadget 2",yo()}),n.style.opacity=0}function SR(){if(window.location.hash!==""&&!F.managing()){const n=Zv(window.location.hash);zy(n)&&rP()!==n&&el(n)}}
//# sourceMappingURL=main-DxlIWJrY.js.map
