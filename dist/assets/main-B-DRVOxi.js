var R0=Object.defineProperty;var N0=(n,t,e)=>t in n?R0(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var et=(n,t,e)=>(N0(n,typeof t!="symbol"?t+"":t,e),e);import{c as Sd,L as ph,D as Pf,p as Tl,g as B0}from"./manager-Cw-VX6TE.js";import{M as F0,C as $0,c as gh}from"./grid-Bf1zjDOr.js";var Qe="top",yn="bottom",xn="right",tn="left",Uc="auto",ho=[Qe,yn,xn,tn],ir="start",Jr="end",Bm="clippingParents",mh="viewport",Hr="popper",Fm="reference",Td=ho.reduce(function(n,t){return n.concat([t+"-"+ir,t+"-"+Jr])},[]),vh=[].concat(ho,[Uc]).reduce(function(n,t){return n.concat([t,t+"-"+ir,t+"-"+Jr])},[]),$m="beforeRead",Vm="read",Hm="afterRead",zm="beforeMain",qm="main",jm="afterMain",Um="beforeWrite",Wm="write",Ym="afterWrite",Xm=[$m,Vm,Hm,zm,qm,jm,Um,Wm,Ym];function pi(n){return n?(n.nodeName||"").toLowerCase():null}function _n(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function sr(n){var t=_n(n).Element;return n instanceof t||n instanceof Element}function Dn(n){var t=_n(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function bh(n){if(typeof ShadowRoot>"u")return!1;var t=_n(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function V0(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},s=t.attributes[e]||{},r=t.elements[e];!Dn(r)||!pi(r)||(Object.assign(r.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function H0(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var s=t.elements[i],r=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]),a=o.reduce(function(l,d){return l[d]="",l},{});!Dn(s)||!pi(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}const yh={name:"applyStyles",enabled:!0,phase:"write",fn:V0,effect:H0,requires:["computeStyles"]};function ci(n){return n.split("-")[0]}var Ks=Math.max,yc=Math.min,Zr=Math.round;function Ad(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Gm(){return!/^((?!chrome|android).)*safari/i.test(Ad())}function Qr(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var i=n.getBoundingClientRect(),s=1,r=1;t&&Dn(n)&&(s=n.offsetWidth>0&&Zr(i.width)/n.offsetWidth||1,r=n.offsetHeight>0&&Zr(i.height)/n.offsetHeight||1);var o=sr(n)?_n(n):window,a=o.visualViewport,l=!Gm()&&e,d=(i.left+(l&&a?a.offsetLeft:0))/s,h=(i.top+(l&&a?a.offsetTop:0))/r,g=i.width/s,v=i.height/r;return{width:g,height:v,top:h,right:d+g,bottom:h+v,left:d,x:d,y:h}}function xh(n){var t=Qr(n),e=n.offsetWidth,i=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:i}}function Km(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&bh(e)){var i=t;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function $i(n){return _n(n).getComputedStyle(n)}function z0(n){return["table","td","th"].indexOf(pi(n))>=0}function bs(n){return((sr(n)?n.ownerDocument:n.document)||window.document).documentElement}function Wc(n){return pi(n)==="html"?n:n.assignedSlot||n.parentNode||(bh(n)?n.host:null)||bs(n)}function Rf(n){return!Dn(n)||$i(n).position==="fixed"?null:n.offsetParent}function q0(n){var t=/firefox/i.test(Ad()),e=/Trident/i.test(Ad());if(e&&Dn(n)){var i=$i(n);if(i.position==="fixed")return null}var s=Wc(n);for(bh(s)&&(s=s.host);Dn(s)&&["html","body"].indexOf(pi(s))<0;){var r=$i(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function Va(n){for(var t=_n(n),e=Rf(n);e&&z0(e)&&$i(e).position==="static";)e=Rf(e);return e&&(pi(e)==="html"||pi(e)==="body"&&$i(e).position==="static")?t:e||q0(n)||t}function _h(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function la(n,t,e){return Ks(n,yc(t,e))}function j0(n,t,e){var i=la(n,t,e);return i>e?e:i}function Jm(){return{top:0,right:0,bottom:0,left:0}}function Zm(n){return Object.assign({},Jm(),n)}function Qm(n,t){return t.reduce(function(e,i){return e[i]=n,e},{})}var U0=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Zm(typeof t!="number"?t:Qm(t,ho))};function W0(n){var t,e=n.state,i=n.name,s=n.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,a=ci(e.placement),l=_h(a),d=[tn,xn].indexOf(a)>=0,h=d?"height":"width";if(!(!r||!o)){var g=U0(s.padding,e),v=xh(r),y=l==="y"?Qe:tn,x=l==="y"?yn:xn,E=e.rects.reference[h]+e.rects.reference[l]-o[l]-e.rects.popper[h],S=o[l]-e.rects.reference[l],C=Va(r),P=C?l==="y"?C.clientHeight||0:C.clientWidth||0:0,V=E/2-S/2,$=g[y],H=P-v[h]-g[x],Y=P/2-v[h]/2+V,I=la($,Y,H),G=l;e.modifiersData[i]=(t={},t[G]=I,t.centerOffset=I-Y,t)}}function Y0(n){var t=n.state,e=n.options,i=e.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||Km(t.elements.popper,s)&&(t.elements.arrow=s))}const tv={name:"arrow",enabled:!0,phase:"main",fn:W0,effect:Y0,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function to(n){return n.split("-")[1]}var X0={top:"auto",right:"auto",bottom:"auto",left:"auto"};function G0(n,t){var e=n.x,i=n.y,s=t.devicePixelRatio||1;return{x:Zr(e*s)/s||0,y:Zr(i*s)/s||0}}function Nf(n){var t,e=n.popper,i=n.popperRect,s=n.placement,r=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,d=n.adaptive,h=n.roundOffsets,g=n.isFixed,v=o.x,y=v===void 0?0:v,x=o.y,E=x===void 0?0:x,S=typeof h=="function"?h({x:y,y:E}):{x:y,y:E};y=S.x,E=S.y;var C=o.hasOwnProperty("x"),P=o.hasOwnProperty("y"),V=tn,$=Qe,H=window;if(d){var Y=Va(e),I="clientHeight",G="clientWidth";if(Y===_n(e)&&(Y=bs(e),$i(Y).position!=="static"&&a==="absolute"&&(I="scrollHeight",G="scrollWidth")),Y=Y,s===Qe||(s===tn||s===xn)&&r===Jr){$=yn;var it=g&&Y===H&&H.visualViewport?H.visualViewport.height:Y[I];E-=it-i.height,E*=l?1:-1}if(s===tn||(s===Qe||s===yn)&&r===Jr){V=xn;var ut=g&&Y===H&&H.visualViewport?H.visualViewport.width:Y[G];y-=ut-i.width,y*=l?1:-1}}var ft=Object.assign({position:a},d&&X0),pt=h===!0?G0({x:y,y:E},_n(e)):{x:y,y:E};if(y=pt.x,E=pt.y,l){var It;return Object.assign({},ft,(It={},It[$]=P?"0":"",It[V]=C?"0":"",It.transform=(H.devicePixelRatio||1)<=1?"translate("+y+"px, "+E+"px)":"translate3d("+y+"px, "+E+"px, 0)",It))}return Object.assign({},ft,(t={},t[$]=P?E+"px":"",t[V]=C?y+"px":"",t.transform="",t))}function K0(n){var t=n.state,e=n.options,i=e.gpuAcceleration,s=i===void 0?!0:i,r=e.adaptive,o=r===void 0?!0:r,a=e.roundOffsets,l=a===void 0?!0:a,d={placement:ci(t.placement),variation:to(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Nf(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Nf(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Eh={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:K0,data:{}};var Al={passive:!0};function J0(n){var t=n.state,e=n.instance,i=n.options,s=i.scroll,r=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=_n(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&d.forEach(function(h){h.addEventListener("scroll",e.update,Al)}),a&&l.addEventListener("resize",e.update,Al),function(){r&&d.forEach(function(h){h.removeEventListener("scroll",e.update,Al)}),a&&l.removeEventListener("resize",e.update,Al)}}const wh={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:J0,data:{}};var Z0={left:"right",right:"left",bottom:"top",top:"bottom"};function Zl(n){return n.replace(/left|right|bottom|top/g,function(t){return Z0[t]})}var Q0={start:"end",end:"start"};function Bf(n){return n.replace(/start|end/g,function(t){return Q0[t]})}function Sh(n){var t=_n(n),e=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:e,scrollTop:i}}function Th(n){return Qr(bs(n)).left+Sh(n).scrollLeft}function tx(n,t){var e=_n(n),i=bs(n),s=e.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var d=Gm();(d||!d&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+Th(n),y:l}}function ex(n){var t,e=bs(n),i=Sh(n),s=(t=n.ownerDocument)==null?void 0:t.body,r=Ks(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Ks(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+Th(n),l=-i.scrollTop;return $i(s||e).direction==="rtl"&&(a+=Ks(e.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function Ah(n){var t=$i(n),e=t.overflow,i=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+s+i)}function ev(n){return["html","body","#document"].indexOf(pi(n))>=0?n.ownerDocument.body:Dn(n)&&Ah(n)?n:ev(Wc(n))}function ca(n,t){var e;t===void 0&&(t=[]);var i=ev(n),s=i===((e=n.ownerDocument)==null?void 0:e.body),r=_n(i),o=s?[r].concat(r.visualViewport||[],Ah(i)?i:[]):i,a=t.concat(o);return s?a:a.concat(ca(Wc(o)))}function kd(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function nx(n,t){var e=Qr(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function Ff(n,t,e){return t===mh?kd(tx(n,e)):sr(t)?nx(t,e):kd(ex(bs(n)))}function ix(n){var t=ca(Wc(n)),e=["absolute","fixed"].indexOf($i(n).position)>=0,i=e&&Dn(n)?Va(n):n;return sr(i)?t.filter(function(s){return sr(s)&&Km(s,i)&&pi(s)!=="body"}):[]}function sx(n,t,e,i){var s=t==="clippingParents"?ix(n):[].concat(t),r=[].concat(s,[e]),o=r[0],a=r.reduce(function(l,d){var h=Ff(n,d,i);return l.top=Ks(h.top,l.top),l.right=yc(h.right,l.right),l.bottom=yc(h.bottom,l.bottom),l.left=Ks(h.left,l.left),l},Ff(n,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function nv(n){var t=n.reference,e=n.element,i=n.placement,s=i?ci(i):null,r=i?to(i):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(s){case Qe:l={x:o,y:t.y-e.height};break;case yn:l={x:o,y:t.y+t.height};break;case xn:l={x:t.x+t.width,y:a};break;case tn:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var d=s?_h(s):null;if(d!=null){var h=d==="y"?"height":"width";switch(r){case ir:l[d]=l[d]-(t[h]/2-e[h]/2);break;case Jr:l[d]=l[d]+(t[h]/2-e[h]/2);break}}return l}function eo(n,t){t===void 0&&(t={});var e=t,i=e.placement,s=i===void 0?n.placement:i,r=e.strategy,o=r===void 0?n.strategy:r,a=e.boundary,l=a===void 0?Bm:a,d=e.rootBoundary,h=d===void 0?mh:d,g=e.elementContext,v=g===void 0?Hr:g,y=e.altBoundary,x=y===void 0?!1:y,E=e.padding,S=E===void 0?0:E,C=Zm(typeof S!="number"?S:Qm(S,ho)),P=v===Hr?Fm:Hr,V=n.rects.popper,$=n.elements[x?P:v],H=sx(sr($)?$:$.contextElement||bs(n.elements.popper),l,h,o),Y=Qr(n.elements.reference),I=nv({reference:Y,element:V,strategy:"absolute",placement:s}),G=kd(Object.assign({},V,I)),it=v===Hr?G:Y,ut={top:H.top-it.top+C.top,bottom:it.bottom-H.bottom+C.bottom,left:H.left-it.left+C.left,right:it.right-H.right+C.right},ft=n.modifiersData.offset;if(v===Hr&&ft){var pt=ft[s];Object.keys(ut).forEach(function(It){var Nt=[xn,yn].indexOf(It)>=0?1:-1,xt=[Qe,yn].indexOf(It)>=0?"y":"x";ut[It]+=pt[xt]*Nt})}return ut}function rx(n,t){t===void 0&&(t={});var e=t,i=e.placement,s=e.boundary,r=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,d=l===void 0?vh:l,h=to(i),g=h?a?Td:Td.filter(function(x){return to(x)===h}):ho,v=g.filter(function(x){return d.indexOf(x)>=0});v.length===0&&(v=g);var y=v.reduce(function(x,E){return x[E]=eo(n,{placement:E,boundary:s,rootBoundary:r,padding:o})[ci(E)],x},{});return Object.keys(y).sort(function(x,E){return y[x]-y[E]})}function ox(n){if(ci(n)===Uc)return[];var t=Zl(n);return[Bf(n),t,Bf(t)]}function ax(n){var t=n.state,e=n.options,i=n.name;if(!t.modifiersData[i]._skip){for(var s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,d=e.padding,h=e.boundary,g=e.rootBoundary,v=e.altBoundary,y=e.flipVariations,x=y===void 0?!0:y,E=e.allowedAutoPlacements,S=t.options.placement,C=ci(S),P=C===S,V=l||(P||!x?[Zl(S)]:ox(S)),$=[S].concat(V).reduce(function(Te,Ae){return Te.concat(ci(Ae)===Uc?rx(t,{placement:Ae,boundary:h,rootBoundary:g,padding:d,flipVariations:x,allowedAutoPlacements:E}):Ae)},[]),H=t.rects.reference,Y=t.rects.popper,I=new Map,G=!0,it=$[0],ut=0;ut<$.length;ut++){var ft=$[ut],pt=ci(ft),It=to(ft)===ir,Nt=[Qe,yn].indexOf(pt)>=0,xt=Nt?"width":"height",yt=eo(t,{placement:ft,boundary:h,rootBoundary:g,altBoundary:v,padding:d}),Ct=Nt?It?xn:tn:It?yn:Qe;H[xt]>Y[xt]&&(Ct=Zl(Ct));var Ee=Zl(Ct),Ut=[];if(r&&Ut.push(yt[pt]<=0),a&&Ut.push(yt[Ct]<=0,yt[Ee]<=0),Ut.every(function(Te){return Te})){it=ft,G=!1;break}I.set(ft,Ut)}if(G)for(var be=x?3:1,en=function(Ae){var te=$.find(function(nn){var sn=I.get(nn);if(sn)return sn.slice(0,Ae).every(function(at){return at})});if(te)return it=te,"break"},$e=be;$e>0;$e--){var ze=en($e);if(ze==="break")break}t.placement!==it&&(t.modifiersData[i]._skip=!0,t.placement=it,t.reset=!0)}}const iv={name:"flip",enabled:!0,phase:"main",fn:ax,requiresIfExists:["offset"],data:{_skip:!1}};function $f(n,t,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-t.height-e.y,right:n.right-t.width+e.x,bottom:n.bottom-t.height+e.y,left:n.left-t.width-e.x}}function Vf(n){return[Qe,xn,yn,tn].some(function(t){return n[t]>=0})}function lx(n){var t=n.state,e=n.name,i=t.rects.reference,s=t.rects.popper,r=t.modifiersData.preventOverflow,o=eo(t,{elementContext:"reference"}),a=eo(t,{altBoundary:!0}),l=$f(o,i),d=$f(a,s,r),h=Vf(l),g=Vf(d);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:h,hasPopperEscaped:g},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":g})}const sv={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:lx};function cx(n,t,e){var i=ci(n),s=[tn,Qe].indexOf(i)>=0?-1:1,r=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[tn,xn].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function ux(n){var t=n.state,e=n.options,i=n.name,s=e.offset,r=s===void 0?[0,0]:s,o=vh.reduce(function(h,g){return h[g]=cx(g,t.rects,r),h},{}),a=o[t.placement],l=a.x,d=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d),t.modifiersData[i]=o}const rv={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ux};function dx(n){var t=n.state,e=n.name;t.modifiersData[e]=nv({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const kh={name:"popperOffsets",enabled:!0,phase:"read",fn:dx,data:{}};function hx(n){return n==="x"?"y":"x"}function fx(n){var t=n.state,e=n.options,i=n.name,s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,d=e.rootBoundary,h=e.altBoundary,g=e.padding,v=e.tether,y=v===void 0?!0:v,x=e.tetherOffset,E=x===void 0?0:x,S=eo(t,{boundary:l,rootBoundary:d,padding:g,altBoundary:h}),C=ci(t.placement),P=to(t.placement),V=!P,$=_h(C),H=hx($),Y=t.modifiersData.popperOffsets,I=t.rects.reference,G=t.rects.popper,it=typeof E=="function"?E(Object.assign({},t.rects,{placement:t.placement})):E,ut=typeof it=="number"?{mainAxis:it,altAxis:it}:Object.assign({mainAxis:0,altAxis:0},it),ft=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,pt={x:0,y:0};if(Y){if(r){var It,Nt=$==="y"?Qe:tn,xt=$==="y"?yn:xn,yt=$==="y"?"height":"width",Ct=Y[$],Ee=Ct+S[Nt],Ut=Ct-S[xt],be=y?-G[yt]/2:0,en=P===ir?I[yt]:G[yt],$e=P===ir?-G[yt]:-I[yt],ze=t.elements.arrow,Te=y&&ze?xh(ze):{width:0,height:0},Ae=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Jm(),te=Ae[Nt],nn=Ae[xt],sn=la(0,I[yt],Te[yt]),at=V?I[yt]/2-be-sn-te-ut.mainAxis:en-sn-te-ut.mainAxis,re=V?-I[yt]/2+be+sn+nn+ut.mainAxis:$e+sn+nn+ut.mainAxis,En=t.elements.arrow&&Va(t.elements.arrow),zi=En?$==="y"?En.clientTop||0:En.clientLeft||0:0,he=(It=ft==null?void 0:ft[$])!=null?It:0,qi=Ct+at-he-zi,vi=Ct+re-he,wn=la(y?yc(Ee,qi):Ee,Ct,y?Ks(Ut,vi):Ut);Y[$]=wn,pt[$]=wn-Ct}if(a){var Ss,bi=$==="x"?Qe:tn,Ts=$==="x"?yn:xn,rn=Y[H],Pn=H==="y"?"height":"width",As=rn+S[bi],ji=rn-S[Ts],Gn=[Qe,tn].indexOf(C)!==-1,ks=(Ss=ft==null?void 0:ft[H])!=null?Ss:0,Kn=Gn?As:rn-I[Pn]-G[Pn]-ks+ut.altAxis,mr=Gn?rn+I[Pn]+G[Pn]-ks-ut.altAxis:ji,Ui=y&&Gn?j0(Kn,rn,mr):la(y?Kn:As,rn,y?mr:ji);Y[H]=Ui,pt[H]=Ui-rn}t.modifiersData[i]=pt}}const ov={name:"preventOverflow",enabled:!0,phase:"main",fn:fx,requiresIfExists:["offset"]};function px(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function gx(n){return n===_n(n)||!Dn(n)?Sh(n):px(n)}function mx(n){var t=n.getBoundingClientRect(),e=Zr(t.width)/n.offsetWidth||1,i=Zr(t.height)/n.offsetHeight||1;return e!==1||i!==1}function vx(n,t,e){e===void 0&&(e=!1);var i=Dn(t),s=Dn(t)&&mx(t),r=bs(t),o=Qr(n,s,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&((pi(t)!=="body"||Ah(r))&&(a=gx(t)),Dn(t)?(l=Qr(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=Th(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function bx(n){var t=new Map,e=new Set,i=[];n.forEach(function(r){t.set(r.name,r)});function s(r){e.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&s(l)}}),i.push(r)}return n.forEach(function(r){e.has(r.name)||s(r)}),i}function yx(n){var t=bx(n);return Xm.reduce(function(e,i){return e.concat(t.filter(function(s){return s.phase===i}))},[])}function xx(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function _x(n){var t=n.reduce(function(e,i){var s=e[i.name];return e[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}var Hf={placement:"bottom",modifiers:[],strategy:"absolute"};function zf(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Yc(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,i=e===void 0?[]:e,s=t.defaultOptions,r=s===void 0?Hf:s;return function(a,l,d){d===void 0&&(d=r);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},Hf,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},g=[],v=!1,y={state:h,setOptions:function(C){var P=typeof C=="function"?C(h.options):C;E(),h.options=Object.assign({},r,h.options,P),h.scrollParents={reference:sr(a)?ca(a):a.contextElement?ca(a.contextElement):[],popper:ca(l)};var V=yx(_x([].concat(i,h.options.modifiers)));return h.orderedModifiers=V.filter(function($){return $.enabled}),x(),y.update()},forceUpdate:function(){if(!v){var C=h.elements,P=C.reference,V=C.popper;if(zf(P,V)){h.rects={reference:vx(P,Va(V),h.options.strategy==="fixed"),popper:xh(V)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(ut){return h.modifiersData[ut.name]=Object.assign({},ut.data)});for(var $=0;$<h.orderedModifiers.length;$++){if(h.reset===!0){h.reset=!1,$=-1;continue}var H=h.orderedModifiers[$],Y=H.fn,I=H.options,G=I===void 0?{}:I,it=H.name;typeof Y=="function"&&(h=Y({state:h,options:G,name:it,instance:y})||h)}}}},update:xx(function(){return new Promise(function(S){y.forceUpdate(),S(h)})}),destroy:function(){E(),v=!0}};if(!zf(a,l))return y;y.setOptions(d).then(function(S){!v&&d.onFirstUpdate&&d.onFirstUpdate(S)});function x(){h.orderedModifiers.forEach(function(S){var C=S.name,P=S.options,V=P===void 0?{}:P,$=S.effect;if(typeof $=="function"){var H=$({state:h,name:C,instance:y,options:V}),Y=function(){};g.push(H||Y)}})}function E(){g.forEach(function(S){return S()}),g=[]}return y}}var Ex=Yc(),wx=[wh,kh,Eh,yh],Sx=Yc({defaultModifiers:wx}),Tx=[wh,kh,Eh,yh,rv,iv,ov,tv,sv],Dh=Yc({defaultModifiers:Tx});const av=Object.freeze(Object.defineProperty({__proto__:null,afterMain:jm,afterRead:Hm,afterWrite:Ym,applyStyles:yh,arrow:tv,auto:Uc,basePlacements:ho,beforeMain:zm,beforeRead:$m,beforeWrite:Um,bottom:yn,clippingParents:Bm,computeStyles:Eh,createPopper:Dh,createPopperBase:Ex,createPopperLite:Sx,detectOverflow:eo,end:Jr,eventListeners:wh,flip:iv,hide:sv,left:tn,main:qm,modifierPhases:Xm,offset:rv,placements:vh,popper:Hr,popperGenerator:Yc,popperOffsets:kh,preventOverflow:ov,read:Vm,reference:Fm,right:xn,start:ir,top:Qe,variationPlacements:Td,viewport:mh,write:Wm},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const ns=new Map,Nu={set(n,t,e){ns.has(n)||ns.set(n,new Map);const i=ns.get(n);if(!i.has(t)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(t,e)},get(n,t){return ns.has(n)&&ns.get(n).get(t)||null},remove(n,t){if(!ns.has(n))return;const e=ns.get(n);e.delete(t),e.size===0&&ns.delete(n)}},Ax=1e6,kx=1e3,Dd="transitionend",lv=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),n),Dx=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),Cx=n=>{do n+=Math.floor(Math.random()*Ax);while(document.getElementById(n));return n},Ix=n=>{if(!n)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(n);const i=Number.parseFloat(t),s=Number.parseFloat(e);return!i&&!s?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*kx)},cv=n=>{n.dispatchEvent(new Event(Dd))},Ni=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),hs=n=>Ni(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(lv(n)):null,fo=n=>{if(!Ni(n)||n.getClientRects().length===0)return!1;const t=getComputedStyle(n).getPropertyValue("visibility")==="visible",e=n.closest("details:not([open])");if(!e)return t;if(e!==n){const i=n.closest("summary");if(i&&i.parentNode!==e||i===null)return!1}return t},fs=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",uv=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const t=n.getRootNode();return t instanceof ShadowRoot?t:null}return n instanceof ShadowRoot?n:n.parentNode?uv(n.parentNode):null},xc=()=>{},Ha=n=>{n.offsetHeight},dv=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Bu=[],Lx=n=>{document.readyState==="loading"?(Bu.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Bu)t()}),Bu.push(n)):n()},In=()=>document.documentElement.dir==="rtl",Mn=n=>{Lx(()=>{const t=dv();if(t){const e=n.NAME,i=t.fn[e];t.fn[e]=n.jQueryInterface,t.fn[e].Constructor=n,t.fn[e].noConflict=()=>(t.fn[e]=i,n.jQueryInterface)}})},an=(n,t=[],e=n)=>typeof n=="function"?n(...t):e,hv=(n,t,e=!0)=>{if(!e){an(n);return}const s=Ix(t)+5;let r=!1;const o=({target:a})=>{a===t&&(r=!0,t.removeEventListener(Dd,o),an(n))};t.addEventListener(Dd,o),setTimeout(()=>{r||cv(t)},s)},Ch=(n,t,e,i)=>{const s=n.length;let r=n.indexOf(t);return r===-1?!e&&i?n[s-1]:n[0]:(r+=e?1:-1,i&&(r=(r+s)%s),n[Math.max(0,Math.min(r,s-1))])},Ox=/[^.]*(?=\..*)\.|.*/,Mx=/\..*/,Px=/::\d+$/,Fu={};let qf=1;const fv={mouseenter:"mouseover",mouseleave:"mouseout"},Rx=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function pv(n,t){return t&&`${t}::${qf++}`||n.uidEvent||qf++}function gv(n){const t=pv(n);return n.uidEvent=t,Fu[t]=Fu[t]||{},Fu[t]}function Nx(n,t){return function e(i){return Ih(i,{delegateTarget:n}),e.oneOff&&Z.off(n,i.type,t),t.apply(n,[i])}}function Bx(n,t,e){return function i(s){const r=n.querySelectorAll(t);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return Ih(s,{delegateTarget:o}),i.oneOff&&Z.off(n,s.type,t,e),e.apply(o,[s])}}function mv(n,t,e=null){return Object.values(n).find(i=>i.callable===t&&i.delegationSelector===e)}function vv(n,t,e){const i=typeof t=="string",s=i?e:t||e;let r=bv(n);return Rx.has(r)||(r=n),[i,s,r]}function jf(n,t,e,i,s){if(typeof t!="string"||!n)return;let[r,o,a]=vv(t,e,i);t in fv&&(o=(x=>function(E){if(!E.relatedTarget||E.relatedTarget!==E.delegateTarget&&!E.delegateTarget.contains(E.relatedTarget))return x.call(this,E)})(o));const l=gv(n),d=l[a]||(l[a]={}),h=mv(d,o,r?e:null);if(h){h.oneOff=h.oneOff&&s;return}const g=pv(o,t.replace(Ox,"")),v=r?Bx(n,e,o):Nx(n,o);v.delegationSelector=r?e:null,v.callable=o,v.oneOff=s,v.uidEvent=g,d[g]=v,n.addEventListener(a,v,r)}function Cd(n,t,e,i,s){const r=mv(t[e],i,s);r&&(n.removeEventListener(e,r,!!s),delete t[e][r.uidEvent])}function Fx(n,t,e,i){const s=t[e]||{};for(const[r,o]of Object.entries(s))r.includes(i)&&Cd(n,t,e,o.callable,o.delegationSelector)}function bv(n){return n=n.replace(Mx,""),fv[n]||n}const Z={on(n,t,e,i){jf(n,t,e,i,!1)},one(n,t,e,i){jf(n,t,e,i,!0)},off(n,t,e,i){if(typeof t!="string"||!n)return;const[s,r,o]=vv(t,e,i),a=o!==t,l=gv(n),d=l[o]||{},h=t.startsWith(".");if(typeof r<"u"){if(!Object.keys(d).length)return;Cd(n,l,o,r,s?e:null);return}if(h)for(const g of Object.keys(l))Fx(n,l,g,t.slice(1));for(const[g,v]of Object.entries(d)){const y=g.replace(Px,"");(!a||t.includes(y))&&Cd(n,l,o,v.callable,v.delegationSelector)}},trigger(n,t,e){if(typeof t!="string"||!n)return null;const i=dv(),s=bv(t),r=t!==s;let o=null,a=!0,l=!0,d=!1;r&&i&&(o=i.Event(t,e),i(n).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),d=o.isDefaultPrevented());const h=Ih(new Event(t,{bubbles:a,cancelable:!0}),e);return d&&h.preventDefault(),l&&n.dispatchEvent(h),h.defaultPrevented&&o&&o.preventDefault(),h}};function Ih(n,t={}){for(const[e,i]of Object.entries(t))try{n[e]=i}catch{Object.defineProperty(n,e,{configurable:!0,get(){return i}})}return n}function Uf(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function $u(n){return n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Bi={setDataAttribute(n,t,e){n.setAttribute(`data-bs-${$u(t)}`,e)},removeDataAttribute(n,t){n.removeAttribute(`data-bs-${$u(t)}`)},getDataAttributes(n){if(!n)return{};const t={},e=Object.keys(n.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of e){let s=i.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),t[s]=Uf(n.dataset[i])}return t},getDataAttribute(n,t){return Uf(n.getAttribute(`data-bs-${$u(t)}`))}};let za=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const i=Ni(e)?Bi.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...Ni(e)?Bi.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[i,s]of Object.entries(e)){const r=t[i],o=Ni(r)?"element":Dx(r);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${s}".`)}}};const $x="5.3.3";class Yn extends za{constructor(t,e){super(),t=hs(t),t&&(this._element=t,this._config=this._getConfig(e),Nu.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Nu.remove(this._element,this.constructor.DATA_KEY),Z.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,i=!0){hv(t,e,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Nu.get(hs(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return $x}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Vu=n=>{let t=n.getAttribute("data-bs-target");if(!t||t==="#"){let e=n.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>lv(e)).join(","):null},vt={find(n,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,n))},findOne(n,t=document.documentElement){return Element.prototype.querySelector.call(t,n)},children(n,t){return[].concat(...n.children).filter(e=>e.matches(t))},parents(n,t){const e=[];let i=n.parentNode.closest(t);for(;i;)e.push(i),i=i.parentNode.closest(t);return e},prev(n,t){let e=n.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(n,t){let e=n.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(n){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,n).filter(e=>!fs(e)&&fo(e))},getSelectorFromElement(n){const t=Vu(n);return t&&vt.findOne(t)?t:null},getElementFromSelector(n){const t=Vu(n);return t?vt.findOne(t):null},getMultipleElementsFromSelector(n){const t=Vu(n);return t?vt.find(t):[]}},Xc=(n,t="hide")=>{const e=`click.dismiss${n.EVENT_KEY}`,i=n.NAME;Z.on(document,e,`[data-bs-dismiss="${i}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),fs(this))return;const r=vt.getElementFromSelector(this)||this.closest(`.${i}`);n.getOrCreateInstance(r)[t]()})},Vx="alert",Hx="bs.alert",yv=`.${Hx}`,zx=`close${yv}`,qx=`closed${yv}`,jx="fade",Ux="show";class Gc extends Yn{static get NAME(){return Vx}close(){if(Z.trigger(this._element,zx).defaultPrevented)return;this._element.classList.remove(Ux);const e=this._element.classList.contains(jx);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),Z.trigger(this._element,qx),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=Gc.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Xc(Gc,"close");Mn(Gc);const Wx="button",Yx="bs.button",Xx=`.${Yx}`,Gx=".data-api",Kx="active",Wf='[data-bs-toggle="button"]',Jx=`click${Xx}${Gx}`;class Kc extends Yn{static get NAME(){return Wx}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Kx))}static jQueryInterface(t){return this.each(function(){const e=Kc.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}Z.on(document,Jx,Wf,n=>{n.preventDefault();const t=n.target.closest(Wf);Kc.getOrCreateInstance(t).toggle()});Mn(Kc);const Zx="swipe",po=".bs.swipe",Qx=`touchstart${po}`,t_=`touchmove${po}`,e_=`touchend${po}`,n_=`pointerdown${po}`,i_=`pointerup${po}`,s_="touch",r_="pen",o_="pointer-event",a_=40,l_={endCallback:null,leftCallback:null,rightCallback:null},c_={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class _c extends za{constructor(t,e){super(),this._element=t,!(!t||!_c.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return l_}static get DefaultType(){return c_}static get NAME(){return Zx}dispose(){Z.off(this._element,po)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),an(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=a_)return;const e=t/this._deltaX;this._deltaX=0,e&&an(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Z.on(this._element,n_,t=>this._start(t)),Z.on(this._element,i_,t=>this._end(t)),this._element.classList.add(o_)):(Z.on(this._element,Qx,t=>this._start(t)),Z.on(this._element,t_,t=>this._move(t)),Z.on(this._element,e_,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===r_||t.pointerType===s_)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const u_="carousel",d_="bs.carousel",ys=`.${d_}`,xv=".data-api",h_="ArrowLeft",f_="ArrowRight",p_=500,Uo="next",Nr="prev",zr="left",Ql="right",g_=`slide${ys}`,Hu=`slid${ys}`,m_=`keydown${ys}`,v_=`mouseenter${ys}`,b_=`mouseleave${ys}`,y_=`dragstart${ys}`,x_=`load${ys}${xv}`,__=`click${ys}${xv}`,_v="carousel",kl="active",E_="slide",w_="carousel-item-end",S_="carousel-item-start",T_="carousel-item-next",A_="carousel-item-prev",Ev=".active",wv=".carousel-item",k_=Ev+wv,D_=".carousel-item img",C_=".carousel-indicators",I_="[data-bs-slide], [data-bs-slide-to]",L_='[data-bs-ride="carousel"]',O_={[h_]:Ql,[f_]:zr},M_={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},P_={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class qa extends Yn{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=vt.findOne(C_,this._element),this._addEventListeners(),this._config.ride===_v&&this.cycle()}static get Default(){return M_}static get DefaultType(){return P_}static get NAME(){return u_}next(){this._slide(Uo)}nextWhenVisible(){!document.hidden&&fo(this._element)&&this.next()}prev(){this._slide(Nr)}pause(){this._isSliding&&cv(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){Z.one(this._element,Hu,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){Z.one(this._element,Hu,()=>this.to(t));return}const i=this._getItemIndex(this._getActive());if(i===t)return;const s=t>i?Uo:Nr;this._slide(s,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&Z.on(this._element,m_,t=>this._keydown(t)),this._config.pause==="hover"&&(Z.on(this._element,v_,()=>this.pause()),Z.on(this._element,b_,()=>this._maybeEnableCycle())),this._config.touch&&_c.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of vt.find(D_,this._element))Z.on(i,y_,s=>s.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(zr)),rightCallback:()=>this._slide(this._directionToOrder(Ql)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),p_+this._config.interval))}};this._swipeHelper=new _c(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=O_[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=vt.findOne(Ev,this._indicatorsElement);e.classList.remove(kl),e.removeAttribute("aria-current");const i=vt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(kl),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const i=this._getActive(),s=t===Uo,r=e||Ch(this._getItems(),i,s,this._config.wrap);if(r===i)return;const o=this._getItemIndex(r),a=y=>Z.trigger(this._element,y,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(a(g_).defaultPrevented||!i||!r)return;const d=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const h=s?S_:w_,g=s?T_:A_;r.classList.add(g),Ha(r),i.classList.add(h),r.classList.add(h);const v=()=>{r.classList.remove(h,g),r.classList.add(kl),i.classList.remove(kl,g,h),this._isSliding=!1,a(Hu)};this._queueCallback(v,i,this._isAnimated()),d&&this.cycle()}_isAnimated(){return this._element.classList.contains(E_)}_getActive(){return vt.findOne(k_,this._element)}_getItems(){return vt.find(wv,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return In()?t===zr?Nr:Uo:t===zr?Uo:Nr}_orderToDirection(t){return In()?t===Nr?zr:Ql:t===Nr?Ql:zr}static jQueryInterface(t){return this.each(function(){const e=qa.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Z.on(document,__,I_,function(n){const t=vt.getElementFromSelector(this);if(!t||!t.classList.contains(_v))return;n.preventDefault();const e=qa.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");if(i){e.to(i),e._maybeEnableCycle();return}if(Bi.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});Z.on(window,x_,()=>{const n=vt.find(L_);for(const t of n)qa.getOrCreateInstance(t)});Mn(qa);const R_="collapse",N_="bs.collapse",ja=`.${N_}`,B_=".data-api",F_=`show${ja}`,$_=`shown${ja}`,V_=`hide${ja}`,H_=`hidden${ja}`,z_=`click${ja}${B_}`,zu="show",jr="collapse",Dl="collapsing",q_="collapsed",j_=`:scope .${jr} .${jr}`,U_="collapse-horizontal",W_="width",Y_="height",X_=".collapse.show, .collapse.collapsing",Id='[data-bs-toggle="collapse"]',G_={parent:null,toggle:!0},K_={parent:"(null|element)",toggle:"boolean"};class Sa extends Yn{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const i=vt.find(Id);for(const s of i){const r=vt.getSelectorFromElement(s),o=vt.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return G_}static get DefaultType(){return K_}static get NAME(){return R_}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(X_).filter(a=>a!==this._element).map(a=>Sa.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||Z.trigger(this._element,F_).defaultPrevented)return;for(const a of t)a.hide();const i=this._getDimension();this._element.classList.remove(jr),this._element.classList.add(Dl),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Dl),this._element.classList.add(jr,zu),this._element.style[i]="",Z.trigger(this._element,$_)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||Z.trigger(this._element,V_).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Ha(this._element),this._element.classList.add(Dl),this._element.classList.remove(jr,zu);for(const s of this._triggerArray){const r=vt.getElementFromSelector(s);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Dl),this._element.classList.add(jr),Z.trigger(this._element,H_)};this._element.style[e]="",this._queueCallback(i,this._element,!0)}_isShown(t=this._element){return t.classList.contains(zu)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=hs(t.parent),t}_getDimension(){return this._element.classList.contains(U_)?W_:Y_}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Id);for(const e of t){const i=vt.getElementFromSelector(e);i&&this._addAriaAndCollapsedClass([e],this._isShown(i))}}_getFirstLevelChildren(t){const e=vt.find(j_,this._config.parent);return vt.find(t,this._config.parent).filter(i=>!e.includes(i))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const i of t)i.classList.toggle(q_,!e),i.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const i=Sa.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}}Z.on(document,z_,Id,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const t of vt.getMultipleElementsFromSelector(this))Sa.getOrCreateInstance(t,{toggle:!1}).toggle()});Mn(Sa);const Yf="dropdown",J_="bs.dropdown",dr=`.${J_}`,Lh=".data-api",Z_="Escape",Xf="Tab",Q_="ArrowUp",Gf="ArrowDown",tE=2,eE=`hide${dr}`,nE=`hidden${dr}`,iE=`show${dr}`,sE=`shown${dr}`,Sv=`click${dr}${Lh}`,Tv=`keydown${dr}${Lh}`,rE=`keyup${dr}${Lh}`,qr="show",oE="dropup",aE="dropend",lE="dropstart",cE="dropup-center",uE="dropdown-center",Ys='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',dE=`${Ys}.${qr}`,tc=".dropdown-menu",hE=".navbar",fE=".navbar-nav",pE=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",gE=In()?"top-end":"top-start",mE=In()?"top-start":"top-end",vE=In()?"bottom-end":"bottom-start",bE=In()?"bottom-start":"bottom-end",yE=In()?"left-start":"right-start",xE=In()?"right-start":"left-start",_E="top",EE="bottom",wE={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},SE={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ui extends Yn{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=vt.next(this._element,tc)[0]||vt.prev(this._element,tc)[0]||vt.findOne(tc,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return wE}static get DefaultType(){return SE}static get NAME(){return Yf}toggle(){return this._isShown()?this.hide():this.show()}show(){if(fs(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!Z.trigger(this._element,iE,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(fE))for(const i of[].concat(...document.body.children))Z.on(i,"mouseover",xc);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(qr),this._element.classList.add(qr),Z.trigger(this._element,sE,t)}}hide(){if(fs(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!Z.trigger(this._element,eE,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))Z.off(i,"mouseover",xc);this._popper&&this._popper.destroy(),this._menu.classList.remove(qr),this._element.classList.remove(qr),this._element.setAttribute("aria-expanded","false"),Bi.removeDataAttribute(this._menu,"popper"),Z.trigger(this._element,nE,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Ni(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${Yf.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof av>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Ni(this._config.reference)?t=hs(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=Dh(t,this._menu,e)}_isShown(){return this._menu.classList.contains(qr)}_getPlacement(){const t=this._parent;if(t.classList.contains(aE))return yE;if(t.classList.contains(lE))return xE;if(t.classList.contains(cE))return _E;if(t.classList.contains(uE))return EE;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(oE)?e?mE:gE:e?bE:vE}_detectNavbar(){return this._element.closest(hE)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Bi.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...an(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const i=vt.find(pE,this._menu).filter(s=>fo(s));i.length&&Ch(i,e,t===Gf,!i.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=ui.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===tE||t.type==="keyup"&&t.key!==Xf)return;const e=vt.find(dE);for(const i of e){const s=ui.getInstance(i);if(!s||s._config.autoClose===!1)continue;const r=t.composedPath(),o=r.includes(s._menu);if(r.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(t.target)&&(t.type==="keyup"&&t.key===Xf||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:s._element};t.type==="click"&&(a.clickEvent=t),s._completeHide(a)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),i=t.key===Z_,s=[Q_,Gf].includes(t.key);if(!s&&!i||e&&!i)return;t.preventDefault();const r=this.matches(Ys)?this:vt.prev(this,Ys)[0]||vt.next(this,Ys)[0]||vt.findOne(Ys,t.delegateTarget.parentNode),o=ui.getOrCreateInstance(r);if(s){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}Z.on(document,Tv,Ys,ui.dataApiKeydownHandler);Z.on(document,Tv,tc,ui.dataApiKeydownHandler);Z.on(document,Sv,ui.clearMenus);Z.on(document,rE,ui.clearMenus);Z.on(document,Sv,Ys,function(n){n.preventDefault(),ui.getOrCreateInstance(this).toggle()});Mn(ui);const Av="backdrop",TE="fade",Kf="show",Jf=`mousedown.bs.${Av}`,AE={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},kE={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class kv extends za{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return AE}static get DefaultType(){return kE}static get NAME(){return Av}show(t){if(!this._config.isVisible){an(t);return}this._append();const e=this._getElement();this._config.isAnimated&&Ha(e),e.classList.add(Kf),this._emulateAnimation(()=>{an(t)})}hide(t){if(!this._config.isVisible){an(t);return}this._getElement().classList.remove(Kf),this._emulateAnimation(()=>{this.dispose(),an(t)})}dispose(){this._isAppended&&(Z.off(this._element,Jf),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(TE),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=hs(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),Z.on(t,Jf,()=>{an(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){hv(t,this._getElement(),this._config.isAnimated)}}const DE="focustrap",CE="bs.focustrap",Ec=`.${CE}`,IE=`focusin${Ec}`,LE=`keydown.tab${Ec}`,OE="Tab",ME="forward",Zf="backward",PE={autofocus:!0,trapElement:null},RE={autofocus:"boolean",trapElement:"element"};class Dv extends za{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return PE}static get DefaultType(){return RE}static get NAME(){return DE}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Z.off(document,Ec),Z.on(document,IE,t=>this._handleFocusin(t)),Z.on(document,LE,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Z.off(document,Ec))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const i=vt.focusableChildren(e);i.length===0?e.focus():this._lastTabNavDirection===Zf?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){t.key===OE&&(this._lastTabNavDirection=t.shiftKey?Zf:ME)}}const Qf=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",tp=".sticky-top",Cl="padding-right",ep="margin-right";class Ld{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Cl,e=>e+t),this._setElementAttributes(Qf,Cl,e=>e+t),this._setElementAttributes(tp,ep,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Cl),this._resetElementAttributes(Qf,Cl),this._resetElementAttributes(tp,ep)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,i){const s=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,e);const a=window.getComputedStyle(o).getPropertyValue(e);o.style.setProperty(e,`${i(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,r)}_saveInitialAttribute(t,e){const i=t.style.getPropertyValue(e);i&&Bi.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){const i=s=>{const r=Bi.getDataAttribute(s,e);if(r===null){s.style.removeProperty(e);return}Bi.removeDataAttribute(s,e),s.style.setProperty(e,r)};this._applyManipulationCallback(t,i)}_applyManipulationCallback(t,e){if(Ni(t)){e(t);return}for(const i of vt.find(t,this._element))e(i)}}const NE="modal",BE="bs.modal",Ln=`.${BE}`,FE=".data-api",$E="Escape",VE=`hide${Ln}`,HE=`hidePrevented${Ln}`,Cv=`hidden${Ln}`,Iv=`show${Ln}`,zE=`shown${Ln}`,qE=`resize${Ln}`,jE=`click.dismiss${Ln}`,UE=`mousedown.dismiss${Ln}`,WE=`keydown.dismiss${Ln}`,YE=`click${Ln}${FE}`,np="modal-open",XE="fade",ip="show",qu="modal-static",GE=".modal.show",KE=".modal-dialog",JE=".modal-body",ZE='[data-bs-toggle="modal"]',QE={backdrop:!0,focus:!0,keyboard:!0},tw={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class rr extends Yn{constructor(t,e){super(t,e),this._dialog=vt.findOne(KE,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ld,this._addEventListeners()}static get Default(){return QE}static get DefaultType(){return tw}static get NAME(){return NE}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||Z.trigger(this._element,Iv,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(np),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||Z.trigger(this._element,VE).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ip),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){Z.off(window,Ln),Z.off(this._dialog,Ln),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new kv({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Dv({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=vt.findOne(JE,this._dialog);e&&(e.scrollTop=0),Ha(this._element),this._element.classList.add(ip);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Z.trigger(this._element,zE,{relatedTarget:t})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){Z.on(this._element,WE,t=>{if(t.key===$E){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),Z.on(window,qE,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Z.on(this._element,UE,t=>{Z.one(this._element,jE,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(np),this._resetAdjustments(),this._scrollBar.reset(),Z.trigger(this._element,Cv)})}_isAnimated(){return this._element.classList.contains(XE)}_triggerBackdropTransition(){if(Z.trigger(this._element,HE).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(qu)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(qu),this._queueCallback(()=>{this._element.classList.remove(qu),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;if(i&&!t){const s=In()?"paddingLeft":"paddingRight";this._element.style[s]=`${e}px`}if(!i&&t){const s=In()?"paddingRight":"paddingLeft";this._element.style[s]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const i=rr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t](e)}})}}Z.on(document,YE,ZE,function(n){const t=vt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),Z.one(t,Iv,s=>{s.defaultPrevented||Z.one(t,Cv,()=>{fo(this)&&this.focus()})});const e=vt.findOne(GE);e&&rr.getInstance(e).hide(),rr.getOrCreateInstance(t).toggle(this)});Xc(rr);Mn(rr);const ew="offcanvas",nw="bs.offcanvas",Vi=`.${nw}`,Lv=".data-api",iw=`load${Vi}${Lv}`,sw="Escape",sp="show",rp="showing",op="hiding",rw="offcanvas-backdrop",Ov=".offcanvas.show",ow=`show${Vi}`,aw=`shown${Vi}`,lw=`hide${Vi}`,ap=`hidePrevented${Vi}`,Mv=`hidden${Vi}`,cw=`resize${Vi}`,uw=`click${Vi}${Lv}`,dw=`keydown.dismiss${Vi}`,hw='[data-bs-toggle="offcanvas"]',fw={backdrop:!0,keyboard:!0,scroll:!1},pw={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Un extends Yn{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return fw}static get DefaultType(){return pw}static get NAME(){return ew}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||Z.trigger(this._element,ow,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ld().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(rp);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(sp),this._element.classList.remove(rp),Z.trigger(this._element,aw,{relatedTarget:t})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||Z.trigger(this._element,lw).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(op),this._backdrop.hide();const e=()=>{this._element.classList.remove(sp,op),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ld().reset(),Z.trigger(this._element,Mv)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){Z.trigger(this._element,ap);return}this.hide()},e=!!this._config.backdrop;return new kv({className:rw,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new Dv({trapElement:this._element})}_addEventListeners(){Z.on(this._element,dw,t=>{if(t.key===sw){if(this._config.keyboard){this.hide();return}Z.trigger(this._element,ap)}})}static jQueryInterface(t){return this.each(function(){const e=Un.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Z.on(document,uw,hw,function(n){const t=vt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),fs(this))return;Z.one(t,Mv,()=>{fo(this)&&this.focus()});const e=vt.findOne(Ov);e&&e!==t&&Un.getInstance(e).hide(),Un.getOrCreateInstance(t).toggle(this)});Z.on(window,iw,()=>{for(const n of vt.find(Ov))Un.getOrCreateInstance(n).show()});Z.on(window,cw,()=>{for(const n of vt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&Un.getOrCreateInstance(n).hide()});Xc(Un);Mn(Un);const gw=/^aria-[\w-]*$/i,Pv={"*":["class","dir","id","lang","role",gw],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},mw=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),vw=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,bw=(n,t)=>{const e=n.nodeName.toLowerCase();return t.includes(e)?mw.has(e)?!!vw.test(n.nodeValue):!0:t.filter(i=>i instanceof RegExp).some(i=>i.test(e))};function yw(n,t,e){if(!n.length)return n;if(e&&typeof e=="function")return e(n);const s=new window.DOMParser().parseFromString(n,"text/html"),r=[].concat(...s.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),d=[].concat(t["*"]||[],t[a]||[]);for(const h of l)bw(h,d)||o.removeAttribute(h.nodeName)}return s.body.innerHTML}const xw="TemplateFactory",_w={allowList:Pv,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ew={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},ww={entry:"(string|element|function|null)",selector:"(string|element)"};class Sw extends za{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return _w}static get DefaultType(){return Ew}static get NAME(){return xw}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[s,r]of Object.entries(this._config.content))this._setContent(t,r,s);const e=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&e.classList.add(...i.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,i]of Object.entries(t))super._typeCheckConfig({selector:e,entry:i},ww)}_setContent(t,e,i){const s=vt.findOne(i,t);if(s){if(e=this._resolvePossibleFunction(e),!e){s.remove();return}if(Ni(e)){this._putElementInTemplate(hs(e),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(e);return}s.textContent=e}}_maybeSanitize(t){return this._config.sanitize?yw(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return an(t,[this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const Tw="tooltip",Aw=new Set(["sanitize","allowList","sanitizeFn"]),ju="fade",kw="modal",Il="show",Dw=".tooltip-inner",lp=`.${kw}`,cp="hide.bs.modal",Wo="hover",Uu="focus",Cw="click",Iw="manual",Lw="hide",Ow="hidden",Mw="show",Pw="shown",Rw="inserted",Nw="click",Bw="focusin",Fw="focusout",$w="mouseenter",Vw="mouseleave",Hw={AUTO:"auto",TOP:"top",RIGHT:In()?"left":"right",BOTTOM:"bottom",LEFT:In()?"right":"left"},zw={allowList:Pv,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},qw={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};let Jc=class Rv extends Yn{constructor(t,e){if(typeof av>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return zw}static get DefaultType(){return qw}static get NAME(){return Tw}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),Z.off(this._element.closest(lp),cp,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=Z.trigger(this._element,this.constructor.eventName(Mw)),i=(uv(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!i)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(s),Z.trigger(this._element,this.constructor.eventName(Rw))),this._popper=this._createPopper(s),s.classList.add(Il),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))Z.on(a,"mouseover",xc);const o=()=>{Z.trigger(this._element,this.constructor.eventName(Pw)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||Z.trigger(this._element,this.constructor.eventName(Lw)).defaultPrevented)return;if(this._getTipElement().classList.remove(Il),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))Z.off(s,"mouseover",xc);this._activeTrigger[Cw]=!1,this._activeTrigger[Uu]=!1,this._activeTrigger[Wo]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Z.trigger(this._element,this.constructor.eventName(Ow)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(ju,Il),e.classList.add(`bs-${this.constructor.NAME}-auto`);const i=Cx(this.constructor.NAME).toString();return e.setAttribute("id",i),this._isAnimated()&&e.classList.add(ju),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Sw({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Dw]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ju)}_isShown(){return this.tip&&this.tip.classList.contains(Il)}_createPopper(t){const e=an(this._config.placement,[this,t,this._element]),i=Hw[e.toUpperCase()];return Dh(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return an(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...e,...an(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")Z.on(this._element,this.constructor.eventName(Nw),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(e!==Iw){const i=e===Wo?this.constructor.eventName($w):this.constructor.eventName(Bw),s=e===Wo?this.constructor.eventName(Vw):this.constructor.eventName(Fw);Z.on(this._element,i,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?Uu:Wo]=!0,o._enter()}),Z.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?Uu:Wo]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Z.on(this._element.closest(lp),cp,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=Bi.getDataAttributes(this._element);for(const i of Object.keys(e))Aw.has(i)&&delete e[i];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:hs(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,i]of Object.entries(this._config))this.constructor.Default[e]!==i&&(t[e]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=Rv.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}};Mn(Jc);const jw="popover",Uw=".popover-header",Ww=".popover-body",Yw={...Jc.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Xw={...Jc.DefaultType,content:"(null|string|element|function)"};class Oh extends Jc{static get Default(){return Yw}static get DefaultType(){return Xw}static get NAME(){return jw}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Uw]:this._getTitle(),[Ww]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=Oh.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Mn(Oh);const Gw="scrollspy",Kw="bs.scrollspy",Mh=`.${Kw}`,Jw=".data-api",Zw=`activate${Mh}`,up=`click${Mh}`,Qw=`load${Mh}${Jw}`,tS="dropdown-item",Br="active",eS='[data-bs-spy="scroll"]',Wu="[href]",nS=".nav, .list-group",dp=".nav-link",iS=".nav-item",sS=".list-group-item",rS=`${dp}, ${iS} > ${dp}, ${sS}`,oS=".dropdown",aS=".dropdown-toggle",lS={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},cS={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Zc extends Yn{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return lS}static get DefaultType(){return cS}static get NAME(){return Gw}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=hs(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Z.off(this._config.target,up),Z.on(this._config.target,up,Wu,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const i=this._rootElement||window,s=e.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:s,behavior:"smooth"});return}i.scrollTop=s}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(e(o))},s=(this._rootElement||document.documentElement).scrollTop,r=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(i(o),!s)return;continue}!r&&!a&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=vt.find(Wu,this._config.target);for(const e of t){if(!e.hash||fs(e))continue;const i=vt.findOne(decodeURI(e.hash),this._element);fo(i)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,i))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Br),this._activateParents(t),Z.trigger(this._element,Zw,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(tS)){vt.findOne(aS,t.closest(oS)).classList.add(Br);return}for(const e of vt.parents(t,nS))for(const i of vt.prev(e,rS))i.classList.add(Br)}_clearActiveClass(t){t.classList.remove(Br);const e=vt.find(`${Wu}.${Br}`,t);for(const i of e)i.classList.remove(Br)}static jQueryInterface(t){return this.each(function(){const e=Zc.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Z.on(window,Qw,()=>{for(const n of vt.find(eS))Zc.getOrCreateInstance(n)});Mn(Zc);const uS="tab",dS="bs.tab",hr=`.${dS}`,hS=`hide${hr}`,fS=`hidden${hr}`,pS=`show${hr}`,gS=`shown${hr}`,mS=`click${hr}`,vS=`keydown${hr}`,bS=`load${hr}`,yS="ArrowLeft",hp="ArrowRight",xS="ArrowUp",fp="ArrowDown",Yu="Home",pp="End",Xs="active",gp="fade",Xu="show",_S="dropdown",Nv=".dropdown-toggle",ES=".dropdown-menu",Gu=`:not(${Nv})`,wS='.list-group, .nav, [role="tablist"]',SS=".nav-item, .list-group-item",TS=`.nav-link${Gu}, .list-group-item${Gu}, [role="tab"]${Gu}`,Bv='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ku=`${TS}, ${Bv}`,AS=`.${Xs}[data-bs-toggle="tab"], .${Xs}[data-bs-toggle="pill"], .${Xs}[data-bs-toggle="list"]`;class no extends Yn{constructor(t){super(t),this._parent=this._element.closest(wS),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Z.on(this._element,vS,e=>this._keydown(e)))}static get NAME(){return uS}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),i=e?Z.trigger(e,hS,{relatedTarget:t}):null;Z.trigger(t,pS,{relatedTarget:e}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(Xs),this._activate(vt.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Xu);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),Z.trigger(t,gS,{relatedTarget:e})};this._queueCallback(i,t,t.classList.contains(gp))}_deactivate(t,e){if(!t)return;t.classList.remove(Xs),t.blur(),this._deactivate(vt.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Xu);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),Z.trigger(t,fS,{relatedTarget:e})};this._queueCallback(i,t,t.classList.contains(gp))}_keydown(t){if(![yS,hp,xS,fp,Yu,pp].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(s=>!fs(s));let i;if([Yu,pp].includes(t.key))i=e[t.key===Yu?0:e.length-1];else{const s=[hp,fp].includes(t.key);i=Ch(e,t.target,s,!0)}i&&(i.focus({preventScroll:!0}),no.getOrCreateInstance(i).show())}_getChildren(){return vt.find(Ku,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const i of e)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",e),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=vt.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const i=this._getOuterElement(t);if(!i.classList.contains(_S))return;const s=(r,o)=>{const a=vt.findOne(r,i);a&&a.classList.toggle(o,e)};s(Nv,Xs),s(ES,Xu),i.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}_elemIsActive(t){return t.classList.contains(Xs)}_getInnerElement(t){return t.matches(Ku)?t:vt.findOne(Ku,t)}_getOuterElement(t){return t.closest(SS)||t}static jQueryInterface(t){return this.each(function(){const e=no.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Z.on(document,mS,Bv,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!fs(this)&&no.getOrCreateInstance(this).show()});Z.on(window,bS,()=>{for(const n of vt.find(AS))no.getOrCreateInstance(n)});Mn(no);const kS="toast",DS="bs.toast",xs=`.${DS}`,CS=`mouseover${xs}`,IS=`mouseout${xs}`,LS=`focusin${xs}`,OS=`focusout${xs}`,MS=`hide${xs}`,PS=`hidden${xs}`,RS=`show${xs}`,NS=`shown${xs}`,BS="fade",mp="hide",Ll="show",Ol="showing",FS={animation:"boolean",autohide:"boolean",delay:"number"},$S={animation:!0,autohide:!0,delay:5e3};class Ua extends Yn{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return $S}static get DefaultType(){return FS}static get NAME(){return kS}show(){if(Z.trigger(this._element,RS).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(BS);const e=()=>{this._element.classList.remove(Ol),Z.trigger(this._element,NS),this._maybeScheduleHide()};this._element.classList.remove(mp),Ha(this._element),this._element.classList.add(Ll,Ol),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||Z.trigger(this._element,MS).defaultPrevented)return;const e=()=>{this._element.classList.add(mp),this._element.classList.remove(Ol,Ll),Z.trigger(this._element,PS)};this._element.classList.add(Ol),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ll),super.dispose()}isShown(){return this._element.classList.contains(Ll)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){Z.on(this._element,CS,t=>this._onInteraction(t,!0)),Z.on(this._element,IS,t=>this._onInteraction(t,!1)),Z.on(this._element,LS,t=>this._onInteraction(t,!0)),Z.on(this._element,OS,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=Ua.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Xc(Ua);Mn(Ua);function Fv(n,t){return function(){return n.apply(t,arguments)}}const{toString:VS}=Object.prototype,{getPrototypeOf:Ph}=Object,Qc=(n=>t=>{const e=VS.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Xn=n=>(n=n.toLowerCase(),t=>Qc(t)===n),tu=n=>t=>typeof t===n,{isArray:go}=Array,Ta=tu("undefined");function HS(n){return n!==null&&!Ta(n)&&n.constructor!==null&&!Ta(n.constructor)&&Cn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const $v=Xn("ArrayBuffer");function zS(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&$v(n.buffer),t}const qS=tu("string"),Cn=tu("function"),Vv=tu("number"),eu=n=>n!==null&&typeof n=="object",jS=n=>n===!0||n===!1,ec=n=>{if(Qc(n)!=="object")return!1;const t=Ph(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},US=Xn("Date"),WS=Xn("File"),YS=Xn("Blob"),XS=Xn("FileList"),GS=n=>eu(n)&&Cn(n.pipe),KS=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||Cn(n.append)&&((t=Qc(n))==="formdata"||t==="object"&&Cn(n.toString)&&n.toString()==="[object FormData]"))},JS=Xn("URLSearchParams"),[ZS,QS,tT,eT]=["ReadableStream","Request","Response","Headers"].map(Xn),nT=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wa(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),go(n))for(i=0,s=n.length;i<s;i++)t.call(null,n[i],i,n);else{const r=e?Object.getOwnPropertyNames(n):Object.keys(n),o=r.length;let a;for(i=0;i<o;i++)a=r[i],t.call(null,n[a],a,n)}}function Hv(n,t){t=t.toLowerCase();const e=Object.keys(n);let i=e.length,s;for(;i-- >0;)if(s=e[i],t===s.toLowerCase())return s;return null}const zv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qv=n=>!Ta(n)&&n!==zv;function Od(){const{caseless:n}=qv(this)&&this||{},t={},e=(i,s)=>{const r=n&&Hv(t,s)||s;ec(t[r])&&ec(i)?t[r]=Od(t[r],i):ec(i)?t[r]=Od({},i):go(i)?t[r]=i.slice():t[r]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Wa(arguments[i],e);return t}const iT=(n,t,e,{allOwnKeys:i}={})=>(Wa(t,(s,r)=>{e&&Cn(s)?n[r]=Fv(s,e):n[r]=s},{allOwnKeys:i}),n),sT=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),rT=(n,t,e,i)=>{n.prototype=Object.create(t.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},oT=(n,t,e,i)=>{let s,r,o;const a={};if(t=t||{},n==null)return t;do{for(s=Object.getOwnPropertyNames(n),r=s.length;r-- >0;)o=s[r],(!i||i(o,n,t))&&!a[o]&&(t[o]=n[o],a[o]=!0);n=e!==!1&&Ph(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},aT=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const i=n.indexOf(t,e);return i!==-1&&i===e},lT=n=>{if(!n)return null;if(go(n))return n;let t=n.length;if(!Vv(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},cT=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&Ph(Uint8Array)),uT=(n,t)=>{const i=(n&&n[Symbol.iterator]).call(n);let s;for(;(s=i.next())&&!s.done;){const r=s.value;t.call(n,r[0],r[1])}},dT=(n,t)=>{let e;const i=[];for(;(e=n.exec(t))!==null;)i.push(e);return i},hT=Xn("HTMLFormElement"),fT=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,s){return i.toUpperCase()+s}),vp=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),pT=Xn("RegExp"),jv=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),i={};Wa(e,(s,r)=>{let o;(o=t(s,r,n))!==!1&&(i[r]=o||s)}),Object.defineProperties(n,i)},gT=n=>{jv(n,(t,e)=>{if(Cn(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=n[e];if(Cn(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},mT=(n,t)=>{const e={},i=s=>{s.forEach(r=>{e[r]=!0})};return go(n)?i(n):i(String(n).split(t)),e},vT=()=>{},bT=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t,Ju="abcdefghijklmnopqrstuvwxyz",bp="0123456789",Uv={DIGIT:bp,ALPHA:Ju,ALPHA_DIGIT:Ju+Ju.toUpperCase()+bp},yT=(n=16,t=Uv.ALPHA_DIGIT)=>{let e="";const{length:i}=t;for(;n--;)e+=t[Math.random()*i|0];return e};function xT(n){return!!(n&&Cn(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const _T=n=>{const t=new Array(10),e=(i,s)=>{if(eu(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[s]=i;const r=go(i)?[]:{};return Wa(i,(o,a)=>{const l=e(o,s+1);!Ta(l)&&(r[a]=l)}),t[s]=void 0,r}}return i};return e(n,0)},ET=Xn("AsyncFunction"),wT=n=>n&&(eu(n)||Cn(n))&&Cn(n.then)&&Cn(n.catch),U={isArray:go,isArrayBuffer:$v,isBuffer:HS,isFormData:KS,isArrayBufferView:zS,isString:qS,isNumber:Vv,isBoolean:jS,isObject:eu,isPlainObject:ec,isReadableStream:ZS,isRequest:QS,isResponse:tT,isHeaders:eT,isUndefined:Ta,isDate:US,isFile:WS,isBlob:YS,isRegExp:pT,isFunction:Cn,isStream:GS,isURLSearchParams:JS,isTypedArray:cT,isFileList:XS,forEach:Wa,merge:Od,extend:iT,trim:nT,stripBOM:sT,inherits:rT,toFlatObject:oT,kindOf:Qc,kindOfTest:Xn,endsWith:aT,toArray:lT,forEachEntry:uT,matchAll:dT,isHTMLForm:hT,hasOwnProperty:vp,hasOwnProp:vp,reduceDescriptors:jv,freezeMethods:gT,toObjectSet:mT,toCamelCase:fT,noop:vT,toFiniteNumber:bT,findKey:Hv,global:zv,isContextDefined:qv,ALPHABET:Uv,generateString:yT,isSpecCompliantForm:xT,toJSONObject:_T,isAsyncFn:ET,isThenable:wT};function Ot(n,t,e,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),i&&(this.request=i),s&&(this.response=s)}U.inherits(Ot,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Wv=Ot.prototype,Yv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Yv[n]={value:n}});Object.defineProperties(Ot,Yv);Object.defineProperty(Wv,"isAxiosError",{value:!0});Ot.from=(n,t,e,i,s,r)=>{const o=Object.create(Wv);return U.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Ot.call(o,n.message,t,e,i,s),o.cause=n,o.name=n.name,r&&Object.assign(o,r),o};const ST=null;function Md(n){return U.isPlainObject(n)||U.isArray(n)}function Xv(n){return U.endsWith(n,"[]")?n.slice(0,-2):n}function yp(n,t,e){return n?n.concat(t).map(function(s,r){return s=Xv(s),!e&&r?"["+s+"]":s}).join(e?".":""):t}function TT(n){return U.isArray(n)&&!n.some(Md)}const AT=U.toFlatObject(U,{},null,function(t){return/^is[A-Z]/.test(t)});function nu(n,t,e){if(!U.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=U.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,S){return!U.isUndefined(S[E])});const i=e.metaTokens,s=e.visitor||h,r=e.dots,o=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(t);if(!U.isFunction(s))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(U.isDate(x))return x.toISOString();if(!l&&U.isBlob(x))throw new Ot("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(x)||U.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function h(x,E,S){let C=x;if(x&&!S&&typeof x=="object"){if(U.endsWith(E,"{}"))E=i?E:E.slice(0,-2),x=JSON.stringify(x);else if(U.isArray(x)&&TT(x)||(U.isFileList(x)||U.endsWith(E,"[]"))&&(C=U.toArray(x)))return E=Xv(E),C.forEach(function(V,$){!(U.isUndefined(V)||V===null)&&t.append(o===!0?yp([E],$,r):o===null?E:E+"[]",d(V))}),!1}return Md(x)?!0:(t.append(yp(S,E,r),d(x)),!1)}const g=[],v=Object.assign(AT,{defaultVisitor:h,convertValue:d,isVisitable:Md});function y(x,E){if(!U.isUndefined(x)){if(g.indexOf(x)!==-1)throw Error("Circular reference detected in "+E.join("."));g.push(x),U.forEach(x,function(C,P){(!(U.isUndefined(C)||C===null)&&s.call(t,C,U.isString(P)?P.trim():P,E,v))===!0&&y(C,E?E.concat(P):[P])}),g.pop()}}if(!U.isObject(n))throw new TypeError("data must be an object");return y(n),t}function xp(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Rh(n,t){this._pairs=[],n&&nu(n,this,t)}const Gv=Rh.prototype;Gv.append=function(t,e){this._pairs.push([t,e])};Gv.toString=function(t){const e=t?function(i){return t.call(this,i,xp)}:xp;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function kT(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Kv(n,t,e){if(!t)return n;const i=e&&e.encode||kT,s=e&&e.serialize;let r;if(s?r=s(t,e):r=U.isURLSearchParams(t)?t.toString():new Rh(t,e).toString(i),r){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class _p{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){U.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Jv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},DT=typeof URLSearchParams<"u"?URLSearchParams:Rh,CT=typeof FormData<"u"?FormData:null,IT=typeof Blob<"u"?Blob:null,LT={isBrowser:!0,classes:{URLSearchParams:DT,FormData:CT,Blob:IT},protocols:["http","https","file","blob","url","data"]},Nh=typeof window<"u"&&typeof document<"u",OT=(n=>Nh&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),MT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",PT=Nh&&window.location.href||"http://localhost",RT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Nh,hasStandardBrowserEnv:OT,hasStandardBrowserWebWorkerEnv:MT,origin:PT},Symbol.toStringTag,{value:"Module"})),Hn={...RT,...LT};function NT(n,t){return nu(n,new Hn.classes.URLSearchParams,Object.assign({visitor:function(e,i,s,r){return Hn.isNode&&U.isBuffer(e)?(this.append(i,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function BT(n){return U.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function FT(n){const t={},e=Object.keys(n);let i;const s=e.length;let r;for(i=0;i<s;i++)r=e[i],t[r]=n[r];return t}function Zv(n){function t(e,i,s,r){let o=e[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=e.length;return o=!o&&U.isArray(s)?s.length:o,l?(U.hasOwnProp(s,o)?s[o]=[s[o],i]:s[o]=i,!a):((!s[o]||!U.isObject(s[o]))&&(s[o]=[]),t(e,i,s[o],r)&&U.isArray(s[o])&&(s[o]=FT(s[o])),!a)}if(U.isFormData(n)&&U.isFunction(n.entries)){const e={};return U.forEachEntry(n,(i,s)=>{t(BT(i),s,e,0)}),e}return null}function $T(n,t,e){if(U.isString(n))try{return(t||JSON.parse)(n),U.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(n)}const Bh={transitional:Jv,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const i=e.getContentType()||"",s=i.indexOf("application/json")>-1,r=U.isObject(t);if(r&&U.isHTMLForm(t)&&(t=new FormData(t)),U.isFormData(t))return s?JSON.stringify(Zv(t)):t;if(U.isArrayBuffer(t)||U.isBuffer(t)||U.isStream(t)||U.isFile(t)||U.isBlob(t)||U.isReadableStream(t))return t;if(U.isArrayBufferView(t))return t.buffer;if(U.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return NT(t,this.formSerializer).toString();if((a=U.isFileList(t))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return nu(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return r||s?(e.setContentType("application/json",!1),$T(t)):t}],transformResponse:[function(t){const e=this.transitional||Bh.transitional,i=e&&e.forcedJSONParsing,s=this.responseType==="json";if(U.isResponse(t)||U.isReadableStream(t))return t;if(t&&U.isString(t)&&(i&&!this.responseType||s)){const o=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?Ot.from(a,Ot.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hn.classes.FormData,Blob:Hn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],n=>{Bh.headers[n]={}});const Fh=Bh,VT=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),HT=n=>{const t={};let e,i,s;return n&&n.split(`
`).forEach(function(o){s=o.indexOf(":"),e=o.substring(0,s).trim().toLowerCase(),i=o.substring(s+1).trim(),!(!e||t[e]&&VT[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},Ep=Symbol("internals");function Yo(n){return n&&String(n).trim().toLowerCase()}function nc(n){return n===!1||n==null?n:U.isArray(n)?n.map(nc):String(n)}function zT(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(n);)t[i[1]]=i[2];return t}const qT=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Zu(n,t,e,i,s){if(U.isFunction(i))return i.call(this,t,e);if(s&&(t=e),!!U.isString(t)){if(U.isString(i))return t.indexOf(i)!==-1;if(U.isRegExp(i))return i.test(t)}}function jT(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function UT(n,t){const e=U.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+e,{value:function(s,r,o){return this[i].call(this,t,s,r,o)},configurable:!0})})}class iu{constructor(t){t&&this.set(t)}set(t,e,i){const s=this;function r(a,l,d){const h=Yo(l);if(!h)throw new Error("header name must be a non-empty string");const g=U.findKey(s,h);(!g||s[g]===void 0||d===!0||d===void 0&&s[g]!==!1)&&(s[g||l]=nc(a))}const o=(a,l)=>U.forEach(a,(d,h)=>r(d,h,l));if(U.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(U.isString(t)&&(t=t.trim())&&!qT(t))o(HT(t),e);else if(U.isHeaders(t))for(const[a,l]of t.entries())r(l,a,i);else t!=null&&r(e,t,i);return this}get(t,e){if(t=Yo(t),t){const i=U.findKey(this,t);if(i){const s=this[i];if(!e)return s;if(e===!0)return zT(s);if(U.isFunction(e))return e.call(this,s,i);if(U.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Yo(t),t){const i=U.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||Zu(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let s=!1;function r(o){if(o=Yo(o),o){const a=U.findKey(i,o);a&&(!e||Zu(i,i[a],a,e))&&(delete i[a],s=!0)}}return U.isArray(t)?t.forEach(r):r(t),s}clear(t){const e=Object.keys(this);let i=e.length,s=!1;for(;i--;){const r=e[i];(!t||Zu(this,this[r],r,t,!0))&&(delete this[r],s=!0)}return s}normalize(t){const e=this,i={};return U.forEach(this,(s,r)=>{const o=U.findKey(i,r);if(o){e[o]=nc(s),delete e[r];return}const a=t?jT(r):String(r).trim();a!==r&&delete e[r],e[a]=nc(s),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return U.forEach(this,(i,s)=>{i!=null&&i!==!1&&(e[s]=t&&U.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(s=>i.set(s)),i}static accessor(t){const i=(this[Ep]=this[Ep]={accessors:{}}).accessors,s=this.prototype;function r(o){const a=Yo(o);i[a]||(UT(s,o),i[a]=!0)}return U.isArray(t)?t.forEach(r):r(t),this}}iu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(iu.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(i){this[e]=i}}});U.freezeMethods(iu);const zn=iu;function Qu(n,t){const e=this||Fh,i=t||e,s=zn.from(i.headers);let r=i.data;return U.forEach(n,function(a){r=a.call(e,r,s.normalize(),t?t.status:void 0)}),s.normalize(),r}function Qv(n){return!!(n&&n.__CANCEL__)}function mo(n,t,e){Ot.call(this,n??"canceled",Ot.ERR_CANCELED,t,e),this.name="CanceledError"}U.inherits(mo,Ot,{__CANCEL__:!0});function tb(n,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?n(e):t(new Ot("Request failed with status code "+e.status,[Ot.ERR_BAD_REQUEST,Ot.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function WT(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function YT(n,t){n=n||10;const e=new Array(n),i=new Array(n);let s=0,r=0,o;return t=t!==void 0?t:1e3,function(l){const d=Date.now(),h=i[r];o||(o=d),e[s]=l,i[s]=d;let g=r,v=0;for(;g!==s;)v+=e[g++],g=g%n;if(s=(s+1)%n,s===r&&(r=(r+1)%n),d-o<t)return;const y=h&&d-h;return y?Math.round(v*1e3/y):void 0}}function XT(n,t){let e=0;const i=1e3/t;let s=null;return function(){const o=this===!0,a=Date.now();if(o||a-e>i)return s&&(clearTimeout(s),s=null),e=a,n.apply(null,arguments);s||(s=setTimeout(()=>(s=null,e=Date.now(),n.apply(null,arguments)),i-(a-e)))}}const wc=(n,t,e=3)=>{let i=0;const s=YT(50,250);return XT(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-i,d=s(l),h=o<=a;i=o;const g={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:d||void 0,estimated:d&&a&&h?(a-o)/d:void 0,event:r,lengthComputable:a!=null};g[t?"download":"upload"]=!0,n(g)},e)},GT=Hn.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let i;function s(r){let o=r;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return i=s(window.location.href),function(o){const a=U.isString(o)?s(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}(),KT=Hn.hasStandardBrowserEnv?{write(n,t,e,i,s,r){const o=[n+"="+encodeURIComponent(t)];U.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),U.isString(i)&&o.push("path="+i),U.isString(s)&&o.push("domain="+s),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function JT(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function ZT(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function eb(n,t){return n&&!JT(t)?ZT(n,t):t}const wp=n=>n instanceof zn?{...n}:n;function or(n,t){t=t||{};const e={};function i(d,h,g){return U.isPlainObject(d)&&U.isPlainObject(h)?U.merge.call({caseless:g},d,h):U.isPlainObject(h)?U.merge({},h):U.isArray(h)?h.slice():h}function s(d,h,g){if(U.isUndefined(h)){if(!U.isUndefined(d))return i(void 0,d,g)}else return i(d,h,g)}function r(d,h){if(!U.isUndefined(h))return i(void 0,h)}function o(d,h){if(U.isUndefined(h)){if(!U.isUndefined(d))return i(void 0,d)}else return i(void 0,h)}function a(d,h,g){if(g in t)return i(d,h);if(g in n)return i(void 0,d)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(d,h)=>s(wp(d),wp(h),!0)};return U.forEach(Object.keys(Object.assign({},n,t)),function(h){const g=l[h]||s,v=g(n[h],t[h],h);U.isUndefined(v)&&g!==a||(e[h]=v)}),e}const nb=n=>{const t=or({},n);let{data:e,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:r,headers:o,auth:a}=t;t.headers=o=zn.from(o),t.url=Kv(eb(t.baseURL,t.url),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(U.isFormData(e)){if(Hn.hasStandardBrowserEnv||Hn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[d,...h]=l?l.split(";").map(g=>g.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...h].join("; "))}}if(Hn.hasStandardBrowserEnv&&(i&&U.isFunction(i)&&(i=i(t)),i||i!==!1&&GT(t.url))){const d=s&&r&&KT.read(r);d&&o.set(s,d)}return t},QT=typeof XMLHttpRequest<"u",t1=QT&&function(n){return new Promise(function(e,i){const s=nb(n);let r=s.data;const o=zn.from(s.headers).normalize();let{responseType:a}=s,l;function d(){s.cancelToken&&s.cancelToken.unsubscribe(l),s.signal&&s.signal.removeEventListener("abort",l)}let h=new XMLHttpRequest;h.open(s.method.toUpperCase(),s.url,!0),h.timeout=s.timeout;function g(){if(!h)return;const y=zn.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),E={data:!a||a==="text"||a==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:y,config:n,request:h};tb(function(C){e(C),d()},function(C){i(C),d()},E),h=null}"onloadend"in h?h.onloadend=g:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(g)},h.onabort=function(){h&&(i(new Ot("Request aborted",Ot.ECONNABORTED,s,h)),h=null)},h.onerror=function(){i(new Ot("Network Error",Ot.ERR_NETWORK,s,h)),h=null},h.ontimeout=function(){let x=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const E=s.transitional||Jv;s.timeoutErrorMessage&&(x=s.timeoutErrorMessage),i(new Ot(x,E.clarifyTimeoutError?Ot.ETIMEDOUT:Ot.ECONNABORTED,s,h)),h=null},r===void 0&&o.setContentType(null),"setRequestHeader"in h&&U.forEach(o.toJSON(),function(x,E){h.setRequestHeader(E,x)}),U.isUndefined(s.withCredentials)||(h.withCredentials=!!s.withCredentials),a&&a!=="json"&&(h.responseType=s.responseType),typeof s.onDownloadProgress=="function"&&h.addEventListener("progress",wc(s.onDownloadProgress,!0)),typeof s.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",wc(s.onUploadProgress)),(s.cancelToken||s.signal)&&(l=y=>{h&&(i(!y||y.type?new mo(null,n,h):y),h.abort(),h=null)},s.cancelToken&&s.cancelToken.subscribe(l),s.signal&&(s.signal.aborted?l():s.signal.addEventListener("abort",l)));const v=WT(s.url);if(v&&Hn.protocols.indexOf(v)===-1){i(new Ot("Unsupported protocol "+v+":",Ot.ERR_BAD_REQUEST,n));return}h.send(r||null)})},e1=(n,t)=>{let e=new AbortController,i;const s=function(l){if(!i){i=!0,o();const d=l instanceof Error?l:this.reason;e.abort(d instanceof Ot?d:new mo(d instanceof Error?d.message:d))}};let r=t&&setTimeout(()=>{s(new Ot(`timeout ${t} of ms exceeded`,Ot.ETIMEDOUT))},t);const o=()=>{n&&(r&&clearTimeout(r),r=null,n.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",s):l.unsubscribe(s))}),n=null)};n.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",s));const{signal:a}=e;return a.unsubscribe=o,[a,()=>{r&&clearTimeout(r),r=null}]},n1=function*(n,t){let e=n.byteLength;if(!t||e<t){yield n;return}let i=0,s;for(;i<e;)s=i+t,yield n.slice(i,s),i=s},i1=async function*(n,t,e){for await(const i of n)yield*n1(ArrayBuffer.isView(i)?i:await e(String(i)),t)},Sp=(n,t,e,i,s)=>{const r=i1(n,t,s);let o=0;return new ReadableStream({type:"bytes",async pull(a){const{done:l,value:d}=await r.next();if(l){a.close(),i();return}let h=d.byteLength;e&&e(o+=h),a.enqueue(new Uint8Array(d))},cancel(a){return i(a),r.return()}},{highWaterMark:2})},Tp=(n,t)=>{const e=n!=null;return i=>setTimeout(()=>t({lengthComputable:e,total:n,loaded:i}))},su=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ib=su&&typeof ReadableStream=="function",Pd=su&&(typeof TextEncoder=="function"?(n=>t=>n.encode(t))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),s1=ib&&(()=>{let n=!1;const t=new Request(Hn.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!t})(),Ap=64*1024,Rd=ib&&!!(()=>{try{return U.isReadableStream(new Response("").body)}catch{}})(),Sc={stream:Rd&&(n=>n.body)};su&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Sc[t]&&(Sc[t]=U.isFunction(n[t])?e=>e[t]():(e,i)=>{throw new Ot(`Response type '${t}' is not supported`,Ot.ERR_NOT_SUPPORT,i)})})})(new Response);const r1=async n=>{if(n==null)return 0;if(U.isBlob(n))return n.size;if(U.isSpecCompliantForm(n))return(await new Request(n).arrayBuffer()).byteLength;if(U.isArrayBufferView(n))return n.byteLength;if(U.isURLSearchParams(n)&&(n=n+""),U.isString(n))return(await Pd(n)).byteLength},o1=async(n,t)=>{const e=U.toFiniteNumber(n.getContentLength());return e??r1(t)},a1=su&&(async n=>{let{url:t,method:e,data:i,signal:s,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:d,headers:h,withCredentials:g="same-origin",fetchOptions:v}=nb(n);d=d?(d+"").toLowerCase():"text";let[y,x]=s||r||o?e1([s,r],o):[],E,S;const C=()=>{!E&&setTimeout(()=>{y&&y.unsubscribe()}),E=!0};let P;try{if(l&&s1&&e!=="get"&&e!=="head"&&(P=await o1(h,i))!==0){let Y=new Request(t,{method:"POST",body:i,duplex:"half"}),I;U.isFormData(i)&&(I=Y.headers.get("content-type"))&&h.setContentType(I),Y.body&&(i=Sp(Y.body,Ap,Tp(P,wc(l)),null,Pd))}U.isString(g)||(g=g?"cors":"omit"),S=new Request(t,{...v,signal:y,method:e.toUpperCase(),headers:h.normalize().toJSON(),body:i,duplex:"half",withCredentials:g});let V=await fetch(S);const $=Rd&&(d==="stream"||d==="response");if(Rd&&(a||$)){const Y={};["status","statusText","headers"].forEach(G=>{Y[G]=V[G]});const I=U.toFiniteNumber(V.headers.get("content-length"));V=new Response(Sp(V.body,Ap,a&&Tp(I,wc(a,!0)),$&&C,Pd),Y)}d=d||"text";let H=await Sc[U.findKey(Sc,d)||"text"](V,n);return!$&&C(),x&&x(),await new Promise((Y,I)=>{tb(Y,I,{data:H,headers:zn.from(V.headers),status:V.status,statusText:V.statusText,config:n,request:S})})}catch(V){throw C(),V&&V.name==="TypeError"&&/fetch/i.test(V.message)?Object.assign(new Ot("Network Error",Ot.ERR_NETWORK,n,S),{cause:V.cause||V}):Ot.from(V,V&&V.code,n,S)}}),Nd={http:ST,xhr:t1,fetch:a1};U.forEach(Nd,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const kp=n=>`- ${n}`,l1=n=>U.isFunction(n)||n===null||n===!1,sb={getAdapter:n=>{n=U.isArray(n)?n:[n];const{length:t}=n;let e,i;const s={};for(let r=0;r<t;r++){e=n[r];let o;if(i=e,!l1(e)&&(i=Nd[(o=String(e)).toLowerCase()],i===void 0))throw new Ot(`Unknown adapter '${o}'`);if(i)break;s[o||"#"+r]=i}if(!i){const r=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?r.length>1?`since :
`+r.map(kp).join(`
`):" "+kp(r[0]):"as no adapter specified";throw new Ot("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:Nd};function td(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new mo(null,n)}function Dp(n){return td(n),n.headers=zn.from(n.headers),n.data=Qu.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),sb.getAdapter(n.adapter||Fh.adapter)(n).then(function(i){return td(n),i.data=Qu.call(n,n.transformResponse,i),i.headers=zn.from(i.headers),i},function(i){return Qv(i)||(td(n),i&&i.response&&(i.response.data=Qu.call(n,n.transformResponse,i.response),i.response.headers=zn.from(i.response.headers))),Promise.reject(i)})}const rb="1.7.2",$h={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{$h[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});const Cp={};$h.transitional=function(t,e,i){function s(r,o){return"[Axios v"+rb+"] Transitional option '"+r+"'"+o+(i?". "+i:"")}return(r,o,a)=>{if(t===!1)throw new Ot(s(o," has been removed"+(e?" in "+e:"")),Ot.ERR_DEPRECATED);return e&&!Cp[o]&&(Cp[o]=!0,console.warn(s(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,o,a):!0}};function c1(n,t,e){if(typeof n!="object")throw new Ot("options must be an object",Ot.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const r=i[s],o=t[r];if(o){const a=n[r],l=a===void 0||o(a,r,n);if(l!==!0)throw new Ot("option "+r+" must be "+l,Ot.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Ot("Unknown option "+r,Ot.ERR_BAD_OPTION)}}const Bd={assertOptions:c1,validators:$h},is=Bd.validators;class Tc{constructor(t){this.defaults=t,this.interceptors={request:new _p,response:new _p}}async request(t,e){try{return await this._request(t,e)}catch(i){if(i instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}catch{}}throw i}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=or(this.defaults,e);const{transitional:i,paramsSerializer:s,headers:r}=e;i!==void 0&&Bd.assertOptions(i,{silentJSONParsing:is.transitional(is.boolean),forcedJSONParsing:is.transitional(is.boolean),clarifyTimeoutError:is.transitional(is.boolean)},!1),s!=null&&(U.isFunction(s)?e.paramsSerializer={serialize:s}:Bd.assertOptions(s,{encode:is.function,serialize:is.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=r&&U.merge(r.common,r[e.method]);r&&U.forEach(["delete","get","head","post","put","patch","common"],x=>{delete r[x]}),e.headers=zn.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(e)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const d=[];this.interceptors.response.forEach(function(E){d.push(E.fulfilled,E.rejected)});let h,g=0,v;if(!l){const x=[Dp.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,d),v=x.length,h=Promise.resolve(e);g<v;)h=h.then(x[g++],x[g++]);return h}v=a.length;let y=e;for(g=0;g<v;){const x=a[g++],E=a[g++];try{y=x(y)}catch(S){E.call(this,S);break}}try{h=Dp.call(this,y)}catch(x){return Promise.reject(x)}for(g=0,v=d.length;g<v;)h=h.then(d[g++],d[g++]);return h}getUri(t){t=or(this.defaults,t);const e=eb(t.baseURL,t.url);return Kv(e,t.params,t.paramsSerializer)}}U.forEach(["delete","get","head","options"],function(t){Tc.prototype[t]=function(e,i){return this.request(or(i||{},{method:t,url:e,data:(i||{}).data}))}});U.forEach(["post","put","patch"],function(t){function e(i){return function(r,o,a){return this.request(or(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Tc.prototype[t]=e(),Tc.prototype[t+"Form"]=e(!0)});const ic=Tc;class Vh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const i=this;this.promise.then(s=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](s);i._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(a=>{i.subscribe(a),r=a}).then(s);return o.cancel=function(){i.unsubscribe(r)},o},t(function(r,o,a){i.reason||(i.reason=new mo(r,o,a),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}static source(){let t;return{token:new Vh(function(s){t=s}),cancel:t}}}const u1=Vh;function d1(n){return function(e){return n.apply(null,e)}}function h1(n){return U.isObject(n)&&n.isAxiosError===!0}const Fd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Fd).forEach(([n,t])=>{Fd[t]=n});const f1=Fd;function ob(n){const t=new ic(n),e=Fv(ic.prototype.request,t);return U.extend(e,ic.prototype,t,{allOwnKeys:!0}),U.extend(e,t,null,{allOwnKeys:!0}),e.create=function(s){return ob(or(n,s))},e}const Le=ob(Fh);Le.Axios=ic;Le.CanceledError=mo;Le.CancelToken=u1;Le.isCancel=Qv;Le.VERSION=rb;Le.toFormData=nu;Le.AxiosError=Ot;Le.Cancel=Le.CanceledError;Le.all=function(t){return Promise.all(t)};Le.spread=d1;Le.isAxiosError=h1;Le.mergeConfig=or;Le.AxiosHeaders=zn;Le.formToJSON=n=>Zv(U.isHTMLForm(n)?new FormData(n):n);Le.getAdapter=sb.getAdapter;Le.HttpStatusCode=f1;Le.default=Le;const p1=Le,ab=p1.create({baseURL:rg2Config.api_url});function ru(n,t,e){n.t=new Date().getTime(),document.getElementById("rg2-container").style.cursor="wait",ab({method:"get",url:"",params:n}).then(i=>{t(i.data.data,n.id)}).catch(function(i){lb(e+": "+i)}).finally(function(){document.getElementById("rg2-container").style.cursor="auto"})}function gi(n,t,e,i,s=()=>{}){let r={method:"post"};r.data=n,t.headers&&(r.headers=t.headers,delete t.headers),t.t=new Date().getTime(),r.params=t,document.getElementById("rg2-container").style.cursor="wait",ab(r).then(o=>{o.data.keksi&&s(o.data.keksi),e(o.data)}).catch(function(o){lb(i+": "+o)}).finally(function(){document.getElementById("rg2-container").style.cursor="auto"})}function lb(n){document.getElementById("rg2-load-progress").classList.add("d-none"),document.getElementById("rg2-map-load-progress").classList.add("d-none"),bt("Configuration error",n)}let us={};us.code="en";let sc=[];function g1(n){let t=document.getElementById("rg2-select-language");t.innerHTML="";let e=us.code==="en";t.options.add(io("en","en: English",e));for(let i=0;i<n.length;i=i+1)e=us.code===n[i].code,t.options.add(io(n[i].code,n[i].code+": "+n[i].language,e));t.addEventListener("change",i=>{const s=i.target.value;s!==us.code&&(s==="en"?ub("en"):cb(s))})}function cb(n){ru({type:"lang",lang:n},v1,"Language request failed")}function m1(n){const t=sc.indexOf(n);return t>-1?t:(sc.push(n),sc.length-1)}function v1(n){ub(n.lang)}function b1(){rg2Config.start_language!=="en"&&cb(rg2Config.start_language)}function ub(n){n==="en"?us={code:"en"}:us=n,y1()}function W(n,t="span"){const e=m1(n);return us.hasOwnProperty(n)&&(n=us[n]),t===""?n:`<${t} data-rg2t='${e}'>${n}</${t}>`}function y1(){const n=document.querySelectorAll("[data-rg2t]");for(let t of n){const e=parseInt(t.dataset.rg2t,10);t.innerText=W(sc[e],"")}}function $d(n,t,e){return n.length>0?n[0].getAttribute(t).trim():e}function ne(n){const t=Math.floor(n/60);let e=t;const i=n-t*60;return i<10?e+=":0"+i:e+=":"+i,e}function x1(n){let t;const e=Math.floor(n/3600);e<10?t="0"+e+":":t=e+":",n=n-e*3600;const i=Math.floor(n/60);return i<10?t+="0"+i:t+=i,n=n-i*60,n<10?t+=":0"+n:t+=":"+n,t}function io(n,t,e=!1){let i=document.createElement("option");return i.value=n,i.text=t,e&&(i.selected=!0),i}function ps(n,t,e=!1){return`<option value="${n}"${e?" selected":""}>${t}</option>`}function ar(n,t,e,i){let s=Math.atan2(i-t,e-n);return s<0&&(s=s+2*Math.PI),s}function Fe(n,t,e,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(t-i,2))}function Vd(n,t,e,i){const s=(e-n).toRad(),r=(i-t).toRad(),o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(n.toRad())*Math.cos(e.toRad())*Math.sin(r/2)*Math.sin(r/2);return 6371009*2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}function _1(n){if(!n)return 0;let t=0;const e=n.split(":");return t=parseInt(e[0],10)*3600+parseInt(e[1],10)*60,isNaN(t)?0:t}function Li(n){if(!n)return 0;let t=0,e=n.replace(/\./g,":").split(":");return e.length===2?t=parseInt(e[0],10)*60+parseInt(e[1],10):e.length===3&&(t=parseInt(e[0],10)*3600+parseInt(e[1],10)*60+parseInt(e[2],10)),isNaN(t)?0:t}const bt=(n,t)=>{w1(n,t)},E1=document.getElementById("rg2-toast-container"),w1=(n,t)=>{const e=document.createElement("div");e.classList.add("toast"),e.setAttribute("data-bs-autohide","false"),e.innerHTML=`<div class="toast-header">
      <strong class="me-auto">${n}</strong>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body">
      ${t}
    </div>`,E1.appendChild(e),[...document.querySelectorAll(".toast")].map(s=>{const r=new Ua(s,{});s.addEventListener("hidden.bs.toast",()=>{s.parentNode&&s.parentNode.removeChild(s)}),r.show()})};function Nn(n,t){return n.length>0?n[0].textContent.trim():t}let Xo;function mi(n,t=!0){Xo&&Xo.dispose();const e=document.getElementById("rg2-modal-container");e.innerHTML="";const i=t?`<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">${W("Cancel")}</button>`:"",s=`<div class="modal fade" id="rg2-modal-dialog" data-bs-backdrop="static" data-bs-keyboard="false"
    tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="staticBackdropLabel">${n.title}</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          ${n.body}
        </div>
        <div class="modal-footer">
          <button id="rg2-do-modal-action" type="button" class="btn btn-primary">${W(n.doText)}</button>
          ${i}
        </div>
      </div>
    </div>
    </div > `;e.innerHTML=s,typeof n.onCancel!="function"&&(n.onCancel=()=>{});let r=!1;const o=document.getElementById("rg2-modal-dialog");document.getElementById("rg2-do-modal-action").addEventListener("click",()=>{r=!0,Xo.hide()});const a={keyboard:!0};Xo=new rr(o,a),o.addEventListener("hidden.bs.modal",()=>{r?n.onDo():n.onCancel()}),Xo.show()}function S1(n,t){const e=document.getElementById(n),i=t(e.value);return i?(e.classList.add("is-valid"),e.classList.remove("is-invalid")):(e.classList.add("is-invalid"),e.classList.remove("is-valid")),i}Number.prototype.toRad=function(){return this*Math.PI/180};const Ip=["#ff0000","#00ff00","#0000ff","#800000","#008000","#000080","#ffff00","#ff00ff","#00ffff","#808000","#800080","#008080"];let ed=0;function db(){return ed=(ed+1)%Ip.length,Ip[ed]}const F={RG2VERSION:"2.0.7",DEFAULT_SCALE_FACTOR:1.1,TAB_EVENTS:"event-tab",TAB_COURSES:"course-tab",TAB_RESULTS:"result-tab",TAB_DRAW:"draw-tab",TAB_LOGIN:"manage-login-tab",TAB_CREATE:"manage-create-tab",TAB_EDIT:"manage-edit-tab",TAB_MAP:"manage-map-tab",TAB_DELETE_MAP:"manage-delete-map-tab",INVALID_MAP_ID:9999,DEFAULT_NEW_COMMENT:"Type your comment",GPS_RESULT_OFFSET:5e4,MASS_START_REPLAY:1,REAL_TIME_REPLAY:2,MASS_START_BY_CONTROL:99999,VERY_HIGH_TIME_IN_SECS:99999,BIG_SCREEN_BREAK_POINT:800,SMALL_SCREEN_BREAK_POINT:500,MAX_ZOOM:50,MIN_ZOOM:.05,PURPLE:"#b300ff",RED:"#ff0000",GREEN:"#00ff00",BLUE:"#0000ff",DARK_GREEN:"rgb(34, 139, 34)",DARK_GREEN_30:"rgba(34, 139, 34, 0.3)",GREY:"#e0e0e0",RED_30:"rgba(255,0,0,0.3)",GREEN_30:"rgba(0,255,0,0.3)",BLUE_30:"rgba(0,0,255,0.3)",PURPLE_30:"rgba(180,0,255,0.3)",WHITE:"#ffffff",BLACK:"#000000",RUNNER_DOT_RADIUS:6,HANDLE_DOT_RADIUS:7,HANDLE_COLOUR:"#ff0000",DIM:.75,FULL_INTENSITY:1,TIME_NOT_FOUND:9999,RIGHT_CLICK:3,DO_NOT_SAVE_COURSE:9999,FORMAT_NORMAL:1,FORMAT_NORMAL_NO_RESULTS:2,FORMAT_SCORE_EVENT:3,FORMAT_SCORE_EVENT_NO_RESULTS:4,DISPLAY_ALL_COURSES:99999,EXCLUDED_NONE:0,EXCLUDED_ZERO_SPLITS:1,EXCLUDED_REAL_SPLITS:2,MAX_DRAWN_ROUTES:10,languages:[{language:"etina",code:"cz"},{language:"Deutsch",code:"de"},{language:"Suomi",code:"fi"},{language:"Franais",code:"fr"},{language:"Italiano",code:"it"},{language:"",code:"ja"},{language:"Norsk",code:"no"},{language:"Portugus - Brasil",code:"pt"},{language:"",code:"ru"}],FILE_SIZE_WARNING:2,PIXEL_SIZE_WARNING:4e3,CLASS_NOW_ON:1,CLASS_NOW_OFF:0,managing:()=>rg2Config.keksi!==void 0},$t={perCentMapIntensity:100,perCentRouteIntensity:100,replayFontSize:12,courseWidth:3,routeWidth:4,circleSize:20,snap:!0,showThreeSeconds:!1,showGPSSpeed:!1,alignMap:!1,maxSpeed:5,minSpeed:15,drawnRoutes:[]};function Ya(){let n={};const t=vs();let e=Math.pow(Math.min(t.height,t.width)/1500,.5);e=Math.min(e,5),e=Math.max(e,.5);const i=Math.round($t.circleSize*e);return n.controlRadius=i,n.finishInnerRadius=i*(5/6),n.finishOuterRadius=i*(7/6),n.startTriangleLength=i*(7/6),n.overprintWidth=$t.courseWidth,n.font=i+"pt Arial",n}function T1(){try{if(window.hasOwnProperty("localStorage")&&window.localStorage!==null&&localStorage.getItem("rg2-options")!==null){const n=JSON.parse(localStorage.getItem("rg2-options"));for(let t in n)n.hasOwnProperty(t)&&($t[t]=n[t]);$t.circleSize=20,$t.perCentMapIntensity===0&&bt("Warning","Your saved settings have 0% map intensity so the map is invisible. You can adjust this on the configuration menu")}}catch{}}function A1(n){let t=[];for(let e=0;e<$t.drawnRoutes.length;e+=1)($t.drawnRoutes[e].id!==n.id||$t.drawnRoutes[e].eventid!==n.eventid)&&t.push($t.drawnRoutes[e]);$t.drawnRoutes=t,ou()}function ou(){try{window.hasOwnProperty("localStorage")&&window.localStorage!==null&&localStorage.setItem("rg2-options",JSON.stringify($t))}catch{return}}function k1(n){let t=$t.drawnRoutes;t.length>=F.MAX_DRAWN_ROUTES&&t.shift(),t.push(n),$t.drawnRoutes=t,ou()}function D1(n,t){$t[n]=t,ou()}class Hh{constructor(){this.controls=[],this.displayControls=!1}addControl(t,e,i){let s=!0;for(let r=0;r<this.controls.length;r+=1)if(this.controls[r].code===t){s=!1;break}s&&this.controls.push({code:t,x:e,y:i})}deleteAllControls(){this.controls.length=0}displayAllControls(){this.displayControls=!0}drawControls(t){if(this.displayControls){const e=Ya();for(let i=0;i<this.controls.length;i+=1)this.controls[i].code.indexOf("F")===0||this.controls[i].code.indexOf("M")===0?this.drawFinish(this.controls[i].x,this.controls[i].y,this.controls[i].code,e):this.controls[i].code.indexOf("S")===0?this.drawStart(this.controls[i].x,this.controls[i].y,this.controls[i].code,1.5*Math.PI,e):(this.drawSingleControl(this.controls[i].x,this.controls[i].y,this.controls[i].code,Math.PI*.25,e),t&&D.fillRect(this.controls[i].x-1,this.controls[i].y-1,3,3))}}drawFinish(t,e,i,s){D.strokeStyle="white",D.lineWidth=s.overprintWidth+2,D.beginPath(),D.arc(t,e,s.finishInnerRadius,0,2*Math.PI,!1),D.stroke(),D.beginPath(),D.arc(t,e,s.finishOuterRadius,0,2*Math.PI,!1),D.stroke(),D.beginPath(),D.font=s.font,D.textAlign="left",D.strokeStyle="white",D.miterLimit=2,D.lineJoin="circle",D.lineWidth=1.5,D.strokeText(i,t+s.controlRadius*1.5,e+s.controlRadius),D.stroke(),D.beginPath(),D.fillStyle=F.PURPLE,D.strokeStyle=F.PURPLE,D.lineWidth=s.overprintWidth,D.arc(t,e,s.finishInnerRadius,0,2*Math.PI,!1),D.stroke(),D.beginPath(),D.arc(t,e,s.finishOuterRadius,0,2*Math.PI,!1),D.fillText(i,t+s.controlRadius*1.5,e+s.controlRadius),D.stroke()}drawSingleControl(t,e,i,s,r){D.beginPath(),D.strokeStyle="white",D.lineWidth=r.overprintWidth+2,D.arc(t,e,r.controlRadius,0,2*Math.PI,!1),D.stroke(),D.beginPath(),D.textAlign="center",D.font=r.font,D.strokeStyle="white",D.miterLimit=2,D.lineJoin="circle",D.lineWidth=1.5,D.textBaseline="middle";const o=D.measureText(i);let a;s<Math.PI?a=o.width/2:a=-1*o.width/2;let l;s>=Math.PI/2&&s<=Math.PI*1.5?l=-1*r.controlRadius/2:l=r.controlRadius/2;const d=1.3;D.strokeText(i,t+r.controlRadius*d*Math.sin(s)+a,e+r.controlRadius*d*Math.cos(s)+l),D.beginPath(),D.font=r.font,D.fillStyle=F.PURPLE,D.strokeStyle=F.PURPLE,D.lineWidth=r.overprintWidth,D.arc(t,e,r.controlRadius,0,2*Math.PI,!1),D.fillText(i,t+r.controlRadius*d*Math.sin(s)+a,e+r.controlRadius*d*Math.cos(s)+l),D.stroke()}drawStart(t,e,i,s,r){let o=[],a=[];const l=2*Math.PI/3;s=s+Math.PI/2,D.lineCap="round",D.strokeStyle="white",D.lineWidth=r.overprintWidth+2,D.beginPath(),o[0]=t+r.startTriangleLength*Math.sin(s),a[0]=e-r.startTriangleLength*Math.cos(s),D.moveTo(o[0],a[0]),o[1]=t+r.startTriangleLength*Math.sin(s+l),a[1]=e-r.startTriangleLength*Math.cos(s+l),D.lineTo(o[1],a[1]),D.stroke(),D.beginPath(),D.moveTo(o[1],a[1]),o[2]=t+r.startTriangleLength*Math.sin(s-l),a[2]=e-r.startTriangleLength*Math.cos(s-l),D.lineTo(o[2],a[2]),D.stroke(),D.beginPath(),D.moveTo(o[2],a[2]),D.lineTo(o[0],a[0]),D.stroke(),D.beginPath(),D.font=r.font,D.textAlign="left",D.strokeStyle="white",D.miterLimit=2,D.lineJoin="circle",D.lineWidth=1.5,D.strokeText(i,o[0]+r.controlRadius*1.25,a[0]+r.controlRadius*1.25),D.stroke(),D.strokeStyle=F.PURPLE,D.lineWidth=r.overprintWidth,D.font=r.font,D.fillStyle=F.PURPLE,D.beginPath(),D.moveTo(o[0],a[0]),D.lineTo(o[1],a[1]),D.stroke(),D.beginPath(),D.moveTo(o[1],a[1]),D.lineTo(o[2],a[2]),D.stroke(),D.beginPath(),D.moveTo(o[2],a[2]),D.lineTo(o[0],a[0]),D.fillText(i,o[0]+r.controlRadius*1.25,a[0]+r.controlRadius*1.25),D.stroke()}generateControlList(){this.controls.length=0;const t=e0();for(let e=0;e<t.length;e+=1)if(t[e]!==void 0){const i=t[e].codes,s=t[e].x,r=t[e].y;if(i!==void 0)for(let o=0;o<i.length;o+=1)this.addControl(i[o],s[o],r[o])}}getControlCount(){return this.controls.length}toggleControlDisplay(){this.displayControls=!this.displayControls}}class C1{constructor(t,e,i,s){this.x=t,this.y=e,this.basex=t,this.basey=e,this.undox=t,this.undoy=e,this.locked=!1,this.time=i,this.index=s}}class I1{constructor(){this.handles=[]}addHandle(t,e,i){this.handles.push(new C1(t,e,i,this.handles.length)),this.handles.sort(function(s,r){return s.time-r.time}),this.renumberHandles()}deleteHandle(t){t===0||t===this.handles.length-1||(this.handles.splice(t,1),this.renumberHandles())}renumberHandles(){for(let t=0;t<this.handles.length;t+=1)this.handles[t].index=t}lockHandle(t){this.handles[t].locked=!0}lockHandleByTime(t){for(let e=0;e<this.handles.length;e+=1)this.handles[e].time===t&&(this.handles[e].locked=!0)}unlockHandle(t){this.handles[t].locked=!1}handlesLocked(){let t=0;for(let e=0;e<this.handles.length;e+=1)this.handles[e].locked&&(t+=1);return t}deleteAllHandles(){this.handles.length=0}rebaselineXY(){this.copyHandleFields("","base")}saveForUndo(){this.copyHandleFields("base","undo")}undo(){this.copyHandleFields("undo","base"),this.copyHandleFields("undo","")}copyHandleFields(t,e){for(let i=0;i<this.handles.length;i+=1)this.handles[i][e+"x"]=this.handles[i][t+"x"],this.handles[i][e+"y"]=this.handles[i][t+"y"]}getStartHandle(){return this.handles[0]}getFinishHandle(){return this.handles[this.handles.length-1]}getHandleClicked(t){for(let e=0;e<this.handles.length;e+=1)if(Fe(t.x,t.y,this.handles[e].basex,this.handles[e].basey)<=F.HANDLE_DOT_RADIUS)return this.handles[e]}getEarliestLockedHandle(){for(let t=0;t<this.handles.length;t+=1)if(this.handles[t].locked)return this.handles[t]}getLatestLockedHandle(){for(let t=this.handles.length-1;t>0;t-=1)if(this.handles[t].locked)return this.handles[t]}getPreviousLockedHandle(t){for(let e=t.index-1;e>=0;e-=1)if(this.handles[e].locked)return this.handles[e]}getNextLockedHandle(t){for(let e=t.index+1;e<this.handles.length;e+=1)if(this.handles[e].locked)return this.handles[e]}getSingleLockedHandle(){return this.getEarliestLockedHandle()}dragHandles(t,e){for(let i=0;i<this.handles.length;i+=1)this.handles[i].x=this.handles[i].basex+t,this.handles[i].y=this.handles[i].basey+e}drawHandles(){for(let t=0;t<this.handles.length;t+=1)D.lineWidth=1,this.handles[t].locked===!0?(D.fillStyle=F.RED_30,D.strokeStyle=F.RED):(D.fillStyle=F.GREEN_30,D.strokeStyle=F.GREEN),D.beginPath(),D.arc(this.handles[t].x,this.handles[t].y,F.HANDLE_DOT_RADIUS,0,2*Math.PI,!1),D.fill(),D.stroke()}alignHandles(t){for(let e=0;e<this.handles.length;e+=1)this.handles[e].x=t.x[this.handles[e].time],this.handles[e].y=t.y[this.handles[e].time]}}class au{constructor(){this.courseid=null,this.coursename=null,this.controlsToAdjust=0,this.resultid=null,this.isScoreCourse=!1,this.eventid=null,this.name=null,this.comments=null,this.x=[],this.y=[],this.controlx=[],this.controly=[],this.time=[],this.startsecs=0,this.totaltime=0,this.splits=[],this.xml=null}}class hb{constructor(){this.lat=[],this.lon=[],this.startOffset=0,this.baseX=[],this.baseY=[],this.handles=new I1,this.savedBaseX=[],this.savedBaseY=[],this.fileLoaded=!1,this.fileName="",this.fileType="",this.routeData=new au,this.autofitOffset=null}adjustOffset(t){this.autofitOffset=t,this.processGPSFile(),this.autofitTrack()}addStartAndFinishHandles(){this.handles.addHandle(this.baseX[0],this.baseY[0],0),this.handles.addHandle(this.baseX[this.baseX.length-1],this.baseY[this.baseY.length-1],this.baseY.length-1)}applyWorldFile(){const t=Zy();for(let e=0;e<this.lat.length;e+=1)this.routeData.x[e]=Math.round((t.E*this.lon[e]-t.B*this.lat[e]+t.xCorrection)/t.AEDB),this.routeData.y[e]=Math.round((-1*t.D*this.lon[e]+t.A*this.lat[e]+t.yCorrection)/t.AEDB)}autofitTrack(){document.getElementById("chk-move-all").checked=!1,this.handles.deleteAllHandles(),this.addStartAndFinishHandles(),this.autofitOffset===null&&(this.autofitOffset=this.getOffset());for(let t=1;t<this.routeData.controlsToAdjust;t+=1)if(this.routeData.splits[t]!==this.routeData.splits[t-1]){const e=this.routeData.splits[t]+this.autofitOffset;e<this.baseX.length&&e>=0&&(this.handles.addHandle(this.routeData.x[e],this.routeData.y[e],e),jy({x:this.routeData.x[e],y:this.routeData.y[e]},{x:this.routeData.controlx[t],y:this.routeData.controly[t]}),this.handles.lockHandleByTime(e),this.baseX=this.routeData.x.slice(0),this.baseY=this.routeData.y.slice(0),this.handles.rebaselineXY())}document.getElementById("btn-autofit-gps").setAttribute("disabled",""),document.getElementById("btn-undo-gps-adjust").setAttribute("disabled",""),wt()}expandToOneSecondInterval(){let t=[],e=[],i=[];const s=this.routeData;let r=s.time[0],o=s.x[0],a=s.y[0];t[0]=o,e[0]=a,i[0]=s.time[0];let l=i[0]+1;for(let d=1;d<s.x.length;d+=1){const h=s.time[d]-r;if(h>0){const g=(s.x[d]-o)/h,v=(s.y[d]-a)/h;let y=1;for(;y<=h;)t.push(o+g*y),e.push(a+v*y),i.push(l),l+=1,y+=1;o=s.x[d],a=s.y[d],r=l-1}}this.routeData.x=t.slice(0),this.routeData.y=e.slice(0),this.routeData.time=i.slice(0)}fitTrackInsideCourse(){const t=this.getLatLonInfo(),e=this.getControlInfo();let i=(e.maxX-e.minX)/(t.maxLon-t.minLon),s=(e.maxY-e.minY)/(t.maxLat-t.minLat);i>s?s=i*t.latCorrection/t.lonCorrection:i=s*t.lonCorrection/t.latCorrection,this.routeData.x[0]=(this.lon[0]-t.minLon)*i+e.minX,this.routeData.y[0]=-1*(this.lat[0]-t.maxLat)*s+e.minY;const r=e.minX-(this.routeData.x[0]-e.x[0]),o=e.minY-(this.routeData.y[0]-e.y[0]);for(let a=0;a<this.lat.length;a+=1)this.routeData.x[a]=(this.lon[a]-t.minLon)*i+r,this.routeData.y[a]=-1*(this.lat[a]-t.maxLat)*s+o}getControlInfo(){let t=oP();if(t.minX=Math.min.apply(Math,t.x),t.maxX=Math.max.apply(Math,t.x),t.minY=Math.min.apply(Math,t.y),t.maxY=Math.max.apply(Math,t.y),t.maxY-t.minY<100||t.maxX-t.minX<100){t.minX=0,t.minY=0;const e=vs();t.maxX=e.width,t.maxY=e.height}return t}getLatLonInfo(){let t={};return t.maxLat=Math.max.apply(Math,this.lat),t.maxLon=Math.max.apply(Math,this.lon),t.minLat=Math.min.apply(Math,this.lat),t.minLon=Math.min.apply(Math,this.lon),t.lonCorrection=Vd(t.minLat,t.maxLon,t.minLat,t.minLon)/(t.maxLon-t.minLon),t.latCorrection=Vd(t.minLat,t.minLon,t.maxLat,t.minLon)/(t.maxLat-t.minLat),t}getOffset(){const t=this.getSpeedAverage();let e=[];const i=10;for(let a=0;a<=2*i;a+=1)e[a]=0;let s=0;for(let a=1;a<this.routeData.controlsToAdjust;a+=1){const l=this.routeData.splits[a];if(l!==this.routeData.splits[a-1]){l>=i&&l+i<t.length&&(s=t.slice(l-i,l+i+1));for(let d=0;d<=2*i;d+=1)e[d]+=s[d]}}let r=0;for(let a=1;a<e.length;a+=1)e[a]<e[r]&&(r=a);return r-i}getSecsFromTrackpoint(t){const e=parseInt(Date.parse(t)/1e3,10);return isNaN(e)?0:e-this.startOffset}getSpeedAverage(){let t=[],e=[];t[0]=0;for(let i=1;i<this.routeData.x.length;i+=1)t[i]=Fe(this.routeData.x[i],this.routeData.y[i],this.routeData.x[i-1],this.routeData.y[i-1]);for(let i=1;i<this.routeData.x.length-1;i+=1)e[i]=(t[i-1]+t[i]+t[i+1])/3;return e[0]=t[0],e[this.routeData.x.length-1]=t[this.routeData.x.length-1],e}getStartOffset(t){const e=parseInt(Date.parse(t.substr(0,11)+"00:00:00Z")/1e3,10);return isNaN(e)?0:e}initialiseGPS(){this.lat.length=0,this.lon.length=0,this.startOffset=0,this.baseX.length=0,this.baseY.length=0,this.handles.deleteAllHandles(),this.savedBaseX.length=0,this.savedBaseY.length=0,this.fileLoaded=!1,this.routeData.x.length=0,this.routeData.y.length=0,this.routeData.time.length=0}processGPSFile(){this.initialiseGPS(),this.fileType==="gpx"?this.processGPX():this.processTCX(),this.processGPSTrack()}processGPSTrack(){_u()?(this.applyWorldFile(),this.trackMatchesMapCoordinates()?document.getElementById("chk-move-all").checked=!0:(bt("GPS file problem","Your GPS file does not match the map co-ordinates. Please check you have selected the correct file."),this.fitTrackInsideCourse())):this.fitTrackInsideCourse(),this.lat.length=0,this.lon.length=0,this.expandToOneSecondInterval(),this.baseX=this.routeData.x.slice(0),this.baseY=this.routeData.y.slice(0),this.addStartAndFinishHandles(),this.fileLoaded=!0,this.routeData.splits.length>2&&document.getElementById("btn-autofit-gps").removeAttribute("disabled"),document.getElementById("btn-save-gps-route").removeAttribute("disabled"),wt()}processGPX(){const t=this.xml.getElementsByTagName("trkseg");for(let e=0;e<t.length;e+=1){const i=t[e].getElementsByTagName("trkpt");this.startOffset=this.getStartOffset(i[0].getElementsByTagName("time")[0].textContent);for(let s=0;s<i.length;s+=1){const r=i[s].getAttribute("lat"),o=i[s].getAttribute("lon");r!=="0"&&o!=="0"&&(this.lat.push(r),this.lon.push(o),this.routeData.time.push(this.getSecsFromTrackpoint(i[s].getElementsByTagName("time")[0].textContent)))}}}processTCX(){const t=this.xml.getElementsByTagName("Track");for(let e=0;e<t.length;e+=1){const i=t[e].getElementsByTagName("Trackpoint");this.startOffset=this.getStartOffset(i[0].getElementsByTagName("Time")[0].textContent);for(let s=0;s<i.length;s+=1)if(i[s].getElementsByTagName("Position").length>0){const r=i[s].getElementsByTagName("Position"),o=r[0].getElementsByTagName("LatitudeDegrees")[0].textContent,a=r[0].getElementsByTagName("LongitudeDegrees")[0].textContent;o!=="0"&&a!=="0"&&(this.lat.push(o),this.lon.push(a),this.routeData.time.push(this.getSecsFromTrackpoint(i[s].getElementsByTagName("Time")[0].textContent)))}}}readGPS(t){let e=new FileReader;this.fileName=t.target.files[0].name,e.onerror=function(i){bt("GPS file problem","Unable to open GPS file. "+i)},e.onload=i=>{try{if(this.fileType=this.fileName.slice(-3).toLowerCase(),this.fileType!=="gpx"&&this.fileType!=="tcx"){bt("GPS file problem","File type not recognised. Please check you have selected the correct file.");return}document.getElementById("rg2-load-gps-file").setAttribute("disabled",""),this.xml=new DOMParser().parseFromString(i.target.result,"text/xml"),this.processGPSFile()}catch(s){bt("GPS file problem","File is not valid XML. Please check you have selected the correct file. "+s);return}},e.readAsText(t.target.files[0])}trackMatchesMapCoordinates(){const t=Math.min.apply(Math,this.routeData.x),e=Math.max.apply(Math,this.routeData.x),i=Math.min.apply(Math,this.routeData.y),s=Math.max.apply(Math,this.routeData.y),r=vs();return e>0&&t<r.width&&i<r.height&&s>0}}let Bn=0,oi=[],Fn=[];function Lp(n,t){return n.length>0?t+n.join(","):""}function Op(n,t,e){let i=0;return Bn!==0&&(i="#"+n+Lp(e,"&course=")+Lp(t,"&route=")),i}function L1(){return oi}function O1(){return Bn}function M1(){return Fn}function P1(){return Fn.length>0?F.TAB_RESULTS:F.TAB_COURSES}function R1(n){let t=n.replace(/#([0-9]+)($|&).*/,"$1");return t.length>0?parseInt(t,10):t}function fb(n){Bn=0,oi.length=0,Fn.length=0;let t=n.split("&");for(let e=0;e<t.length;e+=1)t[e]=t[e].toLowerCase(),t[e].search("#")!==-1&&(Bn=parseInt(t[e].replace(/\D/g,""),10)),t[e].search("course=")!==-1&&(oi=t[e].replace("course=","").split(",")),t[e].search("route=")!==-1&&(Fn=t[e].replace("route=","").split(","));return oi=oi.map(Number),Fn=Fn.map(Number),isNaN(Bn)&&(Bn=0,oi.length=0,Fn.length=0),lu(),Bn}function N1(n){Bn=n,lu()}function Mp(n){oi=n,lu()}function nd(n){Fn=n,lu()}function lu(){let n="";R1(window.location.hash)===Bn?(n=Op(Bn,Fn,oi),window.history.replaceState({hash:n},"",n)):(oi.length=0,Fn.length=0,n=Op(Bn,Fn,oi),window.history.pushState({hash:n},"",n))}class B1{constructor(t,e,i){return this.courses=[],this.courseClassMapping=[],this.newcontrols=new Hh,this.courses.length=0,this.courseClassMapping.length=0,this.fromOldCondes=!1,this.coursesGeoreferenced=!1,this.newcontrols.deleteAllControls(),this.localWorldfile=i,this.worldfile=e,this.processCoursesXML(t.target.result),this.addControlCount(),{courses:this.courses,newcontrols:this.newcontrols,mapping:this.courseClassMapping,georeferenced:this.coursesGeoreferenced}}processCoursesXML(t){let e=null;try{e=new DOMParser().parseFromString(t,"text/xml")}catch{bt("XML file error","File is not a valid XML course file.");return}if(e.getElementsByTagName("CourseData").length===0){e.documentElement.nodeName==="kml"?this.processKMLCourses(e):bt("XML file error","File is not a valid XML course file. CourseData element missing.");return}const s=this.getVersion(e);switch(s){case"2.0.3":this.processIOFV2XMLCourses(e);break;case"3.0":this.processIOFV3XMLCourses(e);break;default:bt("XML file error","Invalid IOF file format. Version "+s+" not supported.")}}getVersion(t){let e="",i=t.getElementsByTagName("IOFVersion");return i.length>0&&(e=i[0].getAttribute("version")),e===""&&(i=t.getElementsByTagName("CourseData"),i.length>0&&(e=i[0].getAttribute("iofVersion").trim(),this.setCreator(i[0].getAttribute("creator").trim()))),e}setCreator(t){t.indexOf("Condes")>-1&&t.length>15&&parseFloat(t.substring(15))<10.1&&(this.fromOldCondes=!0)}processIOFV3XMLCourses(t){let e=t.getElementsByTagName("Control"),i={x:0,y:0};for(let s=0;s<e.length;s+=1)if(e[s].parentNode.nodeName==="RaceCourseData"){const r=e[s].getElementsByTagName("Id")[0].textContent,o=e[s].getElementsByTagName("Position");this.localWorldfile.valid&&o.length>0?(i=this.getXYFromLatLng(o),this.coursesGeoreferenced=!0):i=this.getXYFromMapPosition(e[s].getElementsByTagName("MapPosition"));let a={};e[s].getAttribute("type")!=="CrossingPoint"&&(this.newcontrols.addControl(r.trim(),i.x,i.y),a.id=s,o.length>0?(a.lat=parseFloat(o[0].getAttribute("lat")),a.lng=parseFloat(o[0].getAttribute("lng"))):(a.lat=0,a.lng=0),a.x=i.x,a.y=i.y)}e=t.getElementsByTagName("Course"),this.extractV3Courses(e),e=t.getElementsByTagName("ClassCourseAssignment"),this.extractV3CourseClassMapping(e)}processKMLCourses(t){this.coursesGeoreferenced=!0;const e=t.getElementsByTagName("Placemark");for(let o=0;o<e.length;o=o+1){let a={};const l=e[o].getElementsByTagName("name")[0].childNodes[0].nodeValue.trim(),h=e[o].getElementsByTagName("Point")[0].getElementsByTagName("coordinates")[0].childNodes[0].nodeValue.trim().split(","),g=+h[1],v=+h[0];a.x=this.worldfile.getX(v,g),a.y=this.worldfile.getY(v,g),this.newcontrols.addControl(l.trim(),a.x,a.y);let y={};y.id=o+1,y.lat=g,y.lng=v,y.x=a.x,y.y=a.y}let i=[];const s="Course 1",r="Course 1";i=this.newcontrols.controls.map(function(o){return o.code}),this.courses.push({courseid:0,x:[],y:[],codes:i,name:s}),this.courseClassMapping.push({course:s,className:r}),document.getElementById("rg2-select-course-file").classList.add("is-valid")}getXYFromLatLng(t){let e={x:0,y:0};const i=parseFloat(t[0].getAttribute("lat")),s=parseFloat(t[0].getAttribute("lng"));return this.fromOldCondes?(e.x=this.localWorldfile.getX(s,i),e.y=this.localWorldfile.getY(s,i)):(e.x=this.worldfile.getX(s,i),e.y=this.worldfile.getY(s,i)),e}processIOFV2XMLCourses(t){if(this.extractV2Controls(t.getElementsByTagName("StartPoint"),"StartPointCode"),this.extractV2Controls(t.getElementsByTagName("Control"),"ControlCode"),this.coursesGeoreferenced=this.extractV2Controls(t.getElementsByTagName("FinishPoint"),"FinishPointCode"),this.coursesGeoreferenced&&this.localWorldfile.valid)for(let e=0;e<this.newcontrols.controls.length;e+=1){const i=this.newcontrols.controls[e].x,s=this.newcontrols.controls[e].y;this.newcontrols.controls[e].x=this.localWorldfile.getX(i,s),this.newcontrols.controls[e].y=this.localWorldfile.getY(i,s)}this.extractV2Courses(t.getElementsByTagName("Course"))}extractV2Courses(t){for(let e=0;e<t.length;e+=1){let i=[],s=[],r=[];const o=t[e].getElementsByTagName("CourseName")[0].textContent.trim();i=this.extractCodesFromControlList(t[e],"ControlCode"),i.unshift(t[e].getElementsByTagName("StartPointCode")[0].textContent.trim()),i.push(t[e].getElementsByTagName("FinishPointCode")[0].textContent.trim()),this.courses.push({courseid:0,x:s,y:r,codes:i,name:o})}document.getElementById("rg2-select-course-file").classList.add("is-valid")}extractV3Courses(t){for(let e=0;e<t.length;e+=1){let i=[],s=[],r=[];const o=t[e].getElementsByTagName("Name")[0].textContent.trim();i=this.extractCodesFromControlList(t[e],"Control"),this.courses.push({courseid:0,x:s,y:r,codes:i,name:o})}document.getElementById("rg2-select-course-file").classList.add("is-valid")}extractV3CourseClassMapping(t){for(let e=0;e<t.length;e+=1){const i=t[e].getElementsByTagName("CourseName")[0].textContent.trim(),s=t[e].getElementsByTagName("ClassName")[0].textContent.trim();this.courseClassMapping.push({course:i,className:s})}document.getElementById("rg2-select-course-file").classList.add("is-valid")}extractCodesFromControlList(t,e){const i=t.getElementsByTagName("CourseControl");let s=[];for(let r=0;r<i.length;r+=1)if(r===0||i[r].getAttribute("type")!=="Start"){const o=i[r].getElementsByTagName(e)[0].textContent.trim();this.validControlCode(o)&&s.push(o)}return s}extractV2Controls(t,e){let i=!1,s={x:0,y:0};for(let r=0;r<t.length;r+=1){const o=t[r].getElementsByTagName(e)[0].textContent,a=t[r].getElementsByTagName("ControlPosition");a.length>0&&this.localWorldfile.valid?(s.x=parseFloat(a[0].getAttribute("x")),s.y=parseFloat(a[0].getAttribute("y")),i=!0):s=this.getXYFromMapPosition(t[r].getElementsByTagName("MapPosition")),this.newcontrols.addControl(o.trim(),s.x,s.y)}return i}getXYFromMapPosition(t){return{x:t[0].getAttribute("x").replace(",","."),y:t[0].getAttribute("y").replace(",",".")}}validControlCode(t){const e=this.newcontrols.controls;for(let i=0;i<e.length;i+=1)if(e[i].code===t)return!0;return!1}addControlCount(){for(let t=0;t<this.courses.length;t+=1)this.courses[t].controlcount=this.courses[t].codes.length-2}}class F1{constructor(){if(this.georefsystems=[],this.georefsystems.push({name:"Not georeferenced",description:"none",params:"",value:0}),this.georefsystems.push({name:"GB National Grid",description:"EPSG:27700",params:"+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs",value:1}),this.georefsystems.push({name:"Google EPSG:900913",description:"EPSG:900913",params:"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs",value:2}),rg2Config.epsg_code!==void 0){const t=rg2Config.epsg_code.split("|"),e=rg2Config.epsg_params.split("|");for(let i=0;i<t.length;i=i+1)this.georefsystems.push({name:t[i].replace(" ",""),description:t[i].replace(" ",""),params:e[i],value:i+3});this.defaultGeorefVal=3}else this.defaultGeorefVal=1}getDefaultValue(){return this.georefsystems[this.defaultGeorefVal].value}getGeorefDropdown(){let t="";for(let e=0;e<this.georefsystems.length;e+=1)t+=ps(e,this.georefsystems[e].name,e===0);return t}getGeorefSystem(t){return this.georefsystems[t]}}var cu={},uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.bodyRegExps={xml:/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html4:/&notin;|&(?:nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|quot|amp|lt|gt|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html5:/&centerdot;|&copysr;|&divideontimes;|&gtcc;|&gtcir;|&gtdot;|&gtlPar;|&gtquest;|&gtrapprox;|&gtrarr;|&gtrdot;|&gtreqless;|&gtreqqless;|&gtrless;|&gtrsim;|&ltcc;|&ltcir;|&ltdot;|&lthree;|&ltimes;|&ltlarr;|&ltquest;|&ltrPar;|&ltri;|&ltrie;|&ltrif;|&notin;|&notinE;|&notindot;|&notinva;|&notinvb;|&notinvc;|&notni;|&notniva;|&notnivb;|&notnivc;|&parallel;|&timesb;|&timesbar;|&timesd;|&(?:AElig|AMP|Aacute|Acirc|Agrave|Aring|Atilde|Auml|COPY|Ccedil|ETH|Eacute|Ecirc|Egrave|Euml|GT|Iacute|Icirc|Igrave|Iuml|LT|Ntilde|Oacute|Ocirc|Ograve|Oslash|Otilde|Ouml|QUOT|REG|THORN|Uacute|Ucirc|Ugrave|Uuml|Yacute|aacute|acirc|acute|aelig|agrave|amp|aring|atilde|auml|brvbar|ccedil|cedil|cent|copy|curren|deg|divide|eacute|ecirc|egrave|eth|euml|frac12|frac14|frac34|gt|iacute|icirc|iexcl|igrave|iquest|iuml|laquo|lt|macr|micro|middot|nbsp|not|ntilde|oacute|ocirc|ograve|ordf|ordm|oslash|otilde|ouml|para|plusmn|pound|quot|raquo|reg|sect|shy|sup1|sup2|sup3|szlig|thorn|times|uacute|ucirc|ugrave|uml|uuml|yacute|yen|yuml|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g};uu.namedReferences={xml:{entities:{"&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&amp;":"&"},characters:{"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","&":"&amp;"}},html4:{entities:{"&apos;":"'","&nbsp":"","&nbsp;":"","&iexcl":"","&iexcl;":"","&cent":"","&cent;":"","&pound":"","&pound;":"","&curren":"","&curren;":"","&yen":"","&yen;":"","&brvbar":"","&brvbar;":"","&sect":"","&sect;":"","&uml":"","&uml;":"","&copy":"","&copy;":"","&ordf":"","&ordf;":"","&laquo":"","&laquo;":"","&not":"","&not;":"","&shy":"","&shy;":"","&reg":"","&reg;":"","&macr":"","&macr;":"","&deg":"","&deg;":"","&plusmn":"","&plusmn;":"","&sup2":"","&sup2;":"","&sup3":"","&sup3;":"","&acute":"","&acute;":"","&micro":"","&micro;":"","&para":"","&para;":"","&middot":"","&middot;":"","&cedil":"","&cedil;":"","&sup1":"","&sup1;":"","&ordm":"","&ordm;":"","&raquo":"","&raquo;":"","&frac14":"","&frac14;":"","&frac12":"","&frac12;":"","&frac34":"","&frac34;":"","&iquest":"","&iquest;":"","&Agrave":"","&Agrave;":"","&Aacute":"","&Aacute;":"","&Acirc":"","&Acirc;":"","&Atilde":"","&Atilde;":"","&Auml":"","&Auml;":"","&Aring":"","&Aring;":"","&AElig":"","&AElig;":"","&Ccedil":"","&Ccedil;":"","&Egrave":"","&Egrave;":"","&Eacute":"","&Eacute;":"","&Ecirc":"","&Ecirc;":"","&Euml":"","&Euml;":"","&Igrave":"","&Igrave;":"","&Iacute":"","&Iacute;":"","&Icirc":"","&Icirc;":"","&Iuml":"","&Iuml;":"","&ETH":"","&ETH;":"","&Ntilde":"","&Ntilde;":"","&Ograve":"","&Ograve;":"","&Oacute":"","&Oacute;":"","&Ocirc":"","&Ocirc;":"","&Otilde":"","&Otilde;":"","&Ouml":"","&Ouml;":"","&times":"","&times;":"","&Oslash":"","&Oslash;":"","&Ugrave":"","&Ugrave;":"","&Uacute":"","&Uacute;":"","&Ucirc":"","&Ucirc;":"","&Uuml":"","&Uuml;":"","&Yacute":"","&Yacute;":"","&THORN":"","&THORN;":"","&szlig":"","&szlig;":"","&agrave":"","&agrave;":"","&aacute":"","&aacute;":"","&acirc":"","&acirc;":"","&atilde":"","&atilde;":"","&auml":"","&auml;":"","&aring":"","&aring;":"","&aelig":"","&aelig;":"","&ccedil":"","&ccedil;":"","&egrave":"","&egrave;":"","&eacute":"","&eacute;":"","&ecirc":"","&ecirc;":"","&euml":"","&euml;":"","&igrave":"","&igrave;":"","&iacute":"","&iacute;":"","&icirc":"","&icirc;":"","&iuml":"","&iuml;":"","&eth":"","&eth;":"","&ntilde":"","&ntilde;":"","&ograve":"","&ograve;":"","&oacute":"","&oacute;":"","&ocirc":"","&ocirc;":"","&otilde":"","&otilde;":"","&ouml":"","&ouml;":"","&divide":"","&divide;":"","&oslash":"","&oslash;":"","&ugrave":"","&ugrave;":"","&uacute":"","&uacute;":"","&ucirc":"","&ucirc;":"","&uuml":"","&uuml;":"","&yacute":"","&yacute;":"","&thorn":"","&thorn;":"","&yuml":"","&yuml;":"","&quot":'"',"&quot;":'"',"&amp":"&","&amp;":"&","&lt":"<","&lt;":"<","&gt":">","&gt;":">","&OElig;":"","&oelig;":"","&Scaron;":"","&scaron;":"","&Yuml;":"","&circ;":"","&tilde;":"","&ensp;":"","&emsp;":"","&thinsp;":"","&zwnj;":"","&zwj;":"","&lrm;":"","&rlm;":"","&ndash;":"","&mdash;":"","&lsquo;":"","&rsquo;":"","&sbquo;":"","&ldquo;":"","&rdquo;":"","&bdquo;":"","&dagger;":"","&Dagger;":"","&permil;":"","&lsaquo;":"","&rsaquo;":"","&euro;":"","&fnof;":"","&Alpha;":"","&Beta;":"","&Gamma;":"","&Delta;":"","&Epsilon;":"","&Zeta;":"","&Eta;":"","&Theta;":"","&Iota;":"","&Kappa;":"","&Lambda;":"","&Mu;":"","&Nu;":"","&Xi;":"","&Omicron;":"","&Pi;":"","&Rho;":"","&Sigma;":"","&Tau;":"","&Upsilon;":"","&Phi;":"","&Chi;":"","&Psi;":"","&Omega;":"","&alpha;":"","&beta;":"","&gamma;":"","&delta;":"","&epsilon;":"","&zeta;":"","&eta;":"","&theta;":"","&iota;":"","&kappa;":"","&lambda;":"","&mu;":"","&nu;":"","&xi;":"","&omicron;":"","&pi;":"","&rho;":"","&sigmaf;":"","&sigma;":"","&tau;":"","&upsilon;":"","&phi;":"","&chi;":"","&psi;":"","&omega;":"","&thetasym;":"","&upsih;":"","&piv;":"","&bull;":"","&hellip;":"","&prime;":"","&Prime;":"","&oline;":"","&frasl;":"","&weierp;":"","&image;":"","&real;":"","&trade;":"","&alefsym;":"","&larr;":"","&uarr;":"","&rarr;":"","&darr;":"","&harr;":"","&crarr;":"","&lArr;":"","&uArr;":"","&rArr;":"","&dArr;":"","&hArr;":"","&forall;":"","&part;":"","&exist;":"","&empty;":"","&nabla;":"","&isin;":"","&notin;":"","&ni;":"","&prod;":"","&sum;":"","&minus;":"","&lowast;":"","&radic;":"","&prop;":"","&infin;":"","&ang;":"","&and;":"","&or;":"","&cap;":"","&cup;":"","&int;":"","&there4;":"","&sim;":"","&cong;":"","&asymp;":"","&ne;":"","&equiv;":"","&le;":"","&ge;":"","&sub;":"","&sup;":"","&nsub;":"","&sube;":"","&supe;":"","&oplus;":"","&otimes;":"","&perp;":"","&sdot;":"","&lceil;":"","&rceil;":"","&lfloor;":"","&rfloor;":"","&lang;":"","&rang;":"","&loz;":"","&spades;":"","&clubs;":"","&hearts;":"","&diams;":""},characters:{"'":"&apos;","":"&nbsp;","":"&iexcl;","":"&cent;","":"&pound;","":"&curren;","":"&yen;","":"&brvbar;","":"&sect;","":"&uml;","":"&copy;",:"&ordf;","":"&laquo;","":"&not;","":"&shy;","":"&reg;","":"&macr;","":"&deg;","":"&plusmn;","":"&sup2;","":"&sup3;","":"&acute;",:"&micro;","":"&para;","":"&middot;","":"&cedil;","":"&sup1;",:"&ordm;","":"&raquo;","":"&frac14;","":"&frac12;","":"&frac34;","":"&iquest;",:"&Agrave;",:"&Aacute;",:"&Acirc;",:"&Atilde;",:"&Auml;",:"&Aring;",:"&AElig;",:"&Ccedil;",:"&Egrave;",:"&Eacute;",:"&Ecirc;",:"&Euml;",:"&Igrave;",:"&Iacute;",:"&Icirc;",:"&Iuml;",:"&ETH;",:"&Ntilde;",:"&Ograve;",:"&Oacute;",:"&Ocirc;",:"&Otilde;",:"&Ouml;","":"&times;",:"&Oslash;",:"&Ugrave;",:"&Uacute;",:"&Ucirc;",:"&Uuml;",:"&Yacute;",:"&THORN;",:"&szlig;",:"&agrave;",:"&aacute;",:"&acirc;",:"&atilde;",:"&auml;",:"&aring;",:"&aelig;",:"&ccedil;",:"&egrave;",:"&eacute;",:"&ecirc;",:"&euml;",:"&igrave;",:"&iacute;",:"&icirc;",:"&iuml;",:"&eth;",:"&ntilde;",:"&ograve;",:"&oacute;",:"&ocirc;",:"&otilde;",:"&ouml;","":"&divide;",:"&oslash;",:"&ugrave;",:"&uacute;",:"&ucirc;",:"&uuml;",:"&yacute;",:"&thorn;",:"&yuml;",'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;",:"&OElig;",:"&oelig;",:"&Scaron;",:"&scaron;",:"&Yuml;","":"&circ;","":"&tilde;","":"&ensp;","":"&emsp;","":"&thinsp;","":"&zwnj;","":"&zwj;","":"&lrm;","":"&rlm;","":"&ndash;","":"&mdash;","":"&lsquo;","":"&rsquo;","":"&sbquo;","":"&ldquo;","":"&rdquo;","":"&bdquo;","":"&dagger;","":"&Dagger;","":"&permil;","":"&lsaquo;","":"&rsaquo;","":"&euro;",:"&fnof;",:"&Alpha;",:"&Beta;",:"&Gamma;",:"&Delta;",:"&Epsilon;",:"&Zeta;",:"&Eta;",:"&Theta;",:"&Iota;",:"&Kappa;",:"&Lambda;",:"&Mu;",:"&Nu;",:"&Xi;",:"&Omicron;",:"&Pi;",:"&Rho;",:"&Sigma;",:"&Tau;",:"&Upsilon;",:"&Phi;",:"&Chi;",:"&Psi;",:"&Omega;",:"&alpha;",:"&beta;",:"&gamma;",:"&delta;",:"&epsilon;",:"&zeta;",:"&eta;",:"&theta;",:"&iota;",:"&kappa;",:"&lambda;",:"&mu;",:"&nu;",:"&xi;",:"&omicron;",:"&pi;",:"&rho;",:"&sigmaf;",:"&sigma;",:"&tau;",:"&upsilon;",:"&phi;",:"&chi;",:"&psi;",:"&omega;",:"&thetasym;",:"&upsih;",:"&piv;","":"&bull;","":"&hellip;","":"&prime;","":"&Prime;","":"&oline;","":"&frasl;","":"&weierp;",:"&image;",:"&real;","":"&trade;",:"&alefsym;","":"&larr;","":"&uarr;","":"&rarr;","":"&darr;","":"&harr;","":"&crarr;","":"&lArr;","":"&uArr;","":"&rArr;","":"&dArr;","":"&hArr;","":"&forall;","":"&part;","":"&exist;","":"&empty;","":"&nabla;","":"&isin;","":"&notin;","":"&ni;","":"&prod;","":"&sum;","":"&minus;","":"&lowast;","":"&radic;","":"&prop;","":"&infin;","":"&ang;","":"&and;","":"&or;","":"&cap;","":"&cup;","":"&int;","":"&there4;","":"&sim;","":"&cong;","":"&asymp;","":"&ne;","":"&equiv;","":"&le;","":"&ge;","":"&sub;","":"&sup;","":"&nsub;","":"&sube;","":"&supe;","":"&oplus;","":"&otimes;","":"&perp;","":"&sdot;","":"&lceil;","":"&rceil;","":"&lfloor;","":"&rfloor;","":"&lang;","":"&rang;","":"&loz;","":"&spades;","":"&clubs;","":"&hearts;","":"&diams;"}},html5:{entities:{"&AElig":"","&AElig;":"","&AMP":"&","&AMP;":"&","&Aacute":"","&Aacute;":"","&Abreve;":"","&Acirc":"","&Acirc;":"","&Acy;":"","&Afr;":"","&Agrave":"","&Agrave;":"","&Alpha;":"","&Amacr;":"","&And;":"","&Aogon;":"","&Aopf;":"","&ApplyFunction;":"","&Aring":"","&Aring;":"","&Ascr;":"","&Assign;":"","&Atilde":"","&Atilde;":"","&Auml":"","&Auml;":"","&Backslash;":"","&Barv;":"","&Barwed;":"","&Bcy;":"","&Because;":"","&Bernoullis;":"","&Beta;":"","&Bfr;":"","&Bopf;":"","&Breve;":"","&Bscr;":"","&Bumpeq;":"","&CHcy;":"","&COPY":"","&COPY;":"","&Cacute;":"","&Cap;":"","&CapitalDifferentialD;":"","&Cayleys;":"","&Ccaron;":"","&Ccedil":"","&Ccedil;":"","&Ccirc;":"","&Cconint;":"","&Cdot;":"","&Cedilla;":"","&CenterDot;":"","&Cfr;":"","&Chi;":"","&CircleDot;":"","&CircleMinus;":"","&CirclePlus;":"","&CircleTimes;":"","&ClockwiseContourIntegral;":"","&CloseCurlyDoubleQuote;":"","&CloseCurlyQuote;":"","&Colon;":"","&Colone;":"","&Congruent;":"","&Conint;":"","&ContourIntegral;":"","&Copf;":"","&Coproduct;":"","&CounterClockwiseContourIntegral;":"","&Cross;":"","&Cscr;":"","&Cup;":"","&CupCap;":"","&DD;":"","&DDotrahd;":"","&DJcy;":"","&DScy;":"","&DZcy;":"","&Dagger;":"","&Darr;":"","&Dashv;":"","&Dcaron;":"","&Dcy;":"","&Del;":"","&Delta;":"","&Dfr;":"","&DiacriticalAcute;":"","&DiacriticalDot;":"","&DiacriticalDoubleAcute;":"","&DiacriticalGrave;":"`","&DiacriticalTilde;":"","&Diamond;":"","&DifferentialD;":"","&Dopf;":"","&Dot;":"","&DotDot;":"","&DotEqual;":"","&DoubleContourIntegral;":"","&DoubleDot;":"","&DoubleDownArrow;":"","&DoubleLeftArrow;":"","&DoubleLeftRightArrow;":"","&DoubleLeftTee;":"","&DoubleLongLeftArrow;":"","&DoubleLongLeftRightArrow;":"","&DoubleLongRightArrow;":"","&DoubleRightArrow;":"","&DoubleRightTee;":"","&DoubleUpArrow;":"","&DoubleUpDownArrow;":"","&DoubleVerticalBar;":"","&DownArrow;":"","&DownArrowBar;":"","&DownArrowUpArrow;":"","&DownBreve;":"","&DownLeftRightVector;":"","&DownLeftTeeVector;":"","&DownLeftVector;":"","&DownLeftVectorBar;":"","&DownRightTeeVector;":"","&DownRightVector;":"","&DownRightVectorBar;":"","&DownTee;":"","&DownTeeArrow;":"","&Downarrow;":"","&Dscr;":"","&Dstrok;":"","&ENG;":"","&ETH":"","&ETH;":"","&Eacute":"","&Eacute;":"","&Ecaron;":"","&Ecirc":"","&Ecirc;":"","&Ecy;":"","&Edot;":"","&Efr;":"","&Egrave":"","&Egrave;":"","&Element;":"","&Emacr;":"","&EmptySmallSquare;":"","&EmptyVerySmallSquare;":"","&Eogon;":"","&Eopf;":"","&Epsilon;":"","&Equal;":"","&EqualTilde;":"","&Equilibrium;":"","&Escr;":"","&Esim;":"","&Eta;":"","&Euml":"","&Euml;":"","&Exists;":"","&ExponentialE;":"","&Fcy;":"","&Ffr;":"","&FilledSmallSquare;":"","&FilledVerySmallSquare;":"","&Fopf;":"","&ForAll;":"","&Fouriertrf;":"","&Fscr;":"","&GJcy;":"","&GT":">","&GT;":">","&Gamma;":"","&Gammad;":"","&Gbreve;":"","&Gcedil;":"","&Gcirc;":"","&Gcy;":"","&Gdot;":"","&Gfr;":"","&Gg;":"","&Gopf;":"","&GreaterEqual;":"","&GreaterEqualLess;":"","&GreaterFullEqual;":"","&GreaterGreater;":"","&GreaterLess;":"","&GreaterSlantEqual;":"","&GreaterTilde;":"","&Gscr;":"","&Gt;":"","&HARDcy;":"","&Hacek;":"","&Hat;":"^","&Hcirc;":"","&Hfr;":"","&HilbertSpace;":"","&Hopf;":"","&HorizontalLine;":"","&Hscr;":"","&Hstrok;":"","&HumpDownHump;":"","&HumpEqual;":"","&IEcy;":"","&IJlig;":"","&IOcy;":"","&Iacute":"","&Iacute;":"","&Icirc":"","&Icirc;":"","&Icy;":"","&Idot;":"","&Ifr;":"","&Igrave":"","&Igrave;":"","&Im;":"","&Imacr;":"","&ImaginaryI;":"","&Implies;":"","&Int;":"","&Integral;":"","&Intersection;":"","&InvisibleComma;":"","&InvisibleTimes;":"","&Iogon;":"","&Iopf;":"","&Iota;":"","&Iscr;":"","&Itilde;":"","&Iukcy;":"","&Iuml":"","&Iuml;":"","&Jcirc;":"","&Jcy;":"","&Jfr;":"","&Jopf;":"","&Jscr;":"","&Jsercy;":"","&Jukcy;":"","&KHcy;":"","&KJcy;":"","&Kappa;":"","&Kcedil;":"","&Kcy;":"","&Kfr;":"","&Kopf;":"","&Kscr;":"","&LJcy;":"","&LT":"<","&LT;":"<","&Lacute;":"","&Lambda;":"","&Lang;":"","&Laplacetrf;":"","&Larr;":"","&Lcaron;":"","&Lcedil;":"","&Lcy;":"","&LeftAngleBracket;":"","&LeftArrow;":"","&LeftArrowBar;":"","&LeftArrowRightArrow;":"","&LeftCeiling;":"","&LeftDoubleBracket;":"","&LeftDownTeeVector;":"","&LeftDownVector;":"","&LeftDownVectorBar;":"","&LeftFloor;":"","&LeftRightArrow;":"","&LeftRightVector;":"","&LeftTee;":"","&LeftTeeArrow;":"","&LeftTeeVector;":"","&LeftTriangle;":"","&LeftTriangleBar;":"","&LeftTriangleEqual;":"","&LeftUpDownVector;":"","&LeftUpTeeVector;":"","&LeftUpVector;":"","&LeftUpVectorBar;":"","&LeftVector;":"","&LeftVectorBar;":"","&Leftarrow;":"","&Leftrightarrow;":"","&LessEqualGreater;":"","&LessFullEqual;":"","&LessGreater;":"","&LessLess;":"","&LessSlantEqual;":"","&LessTilde;":"","&Lfr;":"","&Ll;":"","&Lleftarrow;":"","&Lmidot;":"","&LongLeftArrow;":"","&LongLeftRightArrow;":"","&LongRightArrow;":"","&Longleftarrow;":"","&Longleftrightarrow;":"","&Longrightarrow;":"","&Lopf;":"","&LowerLeftArrow;":"","&LowerRightArrow;":"","&Lscr;":"","&Lsh;":"","&Lstrok;":"","&Lt;":"","&Map;":"","&Mcy;":"","&MediumSpace;":"","&Mellintrf;":"","&Mfr;":"","&MinusPlus;":"","&Mopf;":"","&Mscr;":"","&Mu;":"","&NJcy;":"","&Nacute;":"","&Ncaron;":"","&Ncedil;":"","&Ncy;":"","&NegativeMediumSpace;":"","&NegativeThickSpace;":"","&NegativeThinSpace;":"","&NegativeVeryThinSpace;":"","&NestedGreaterGreater;":"","&NestedLessLess;":"","&NewLine;":`
`,"&Nfr;":"","&NoBreak;":"","&NonBreakingSpace;":"","&Nopf;":"","&Not;":"","&NotCongruent;":"","&NotCupCap;":"","&NotDoubleVerticalBar;":"","&NotElement;":"","&NotEqual;":"","&NotEqualTilde;":"","&NotExists;":"","&NotGreater;":"","&NotGreaterEqual;":"","&NotGreaterFullEqual;":"","&NotGreaterGreater;":"","&NotGreaterLess;":"","&NotGreaterSlantEqual;":"","&NotGreaterTilde;":"","&NotHumpDownHump;":"","&NotHumpEqual;":"","&NotLeftTriangle;":"","&NotLeftTriangleBar;":"","&NotLeftTriangleEqual;":"","&NotLess;":"","&NotLessEqual;":"","&NotLessGreater;":"","&NotLessLess;":"","&NotLessSlantEqual;":"","&NotLessTilde;":"","&NotNestedGreaterGreater;":"","&NotNestedLessLess;":"","&NotPrecedes;":"","&NotPrecedesEqual;":"","&NotPrecedesSlantEqual;":"","&NotReverseElement;":"","&NotRightTriangle;":"","&NotRightTriangleBar;":"","&NotRightTriangleEqual;":"","&NotSquareSubset;":"","&NotSquareSubsetEqual;":"","&NotSquareSuperset;":"","&NotSquareSupersetEqual;":"","&NotSubset;":"","&NotSubsetEqual;":"","&NotSucceeds;":"","&NotSucceedsEqual;":"","&NotSucceedsSlantEqual;":"","&NotSucceedsTilde;":"","&NotSuperset;":"","&NotSupersetEqual;":"","&NotTilde;":"","&NotTildeEqual;":"","&NotTildeFullEqual;":"","&NotTildeTilde;":"","&NotVerticalBar;":"","&Nscr;":"","&Ntilde":"","&Ntilde;":"","&Nu;":"","&OElig;":"","&Oacute":"","&Oacute;":"","&Ocirc":"","&Ocirc;":"","&Ocy;":"","&Odblac;":"","&Ofr;":"","&Ograve":"","&Ograve;":"","&Omacr;":"","&Omega;":"","&Omicron;":"","&Oopf;":"","&OpenCurlyDoubleQuote;":"","&OpenCurlyQuote;":"","&Or;":"","&Oscr;":"","&Oslash":"","&Oslash;":"","&Otilde":"","&Otilde;":"","&Otimes;":"","&Ouml":"","&Ouml;":"","&OverBar;":"","&OverBrace;":"","&OverBracket;":"","&OverParenthesis;":"","&PartialD;":"","&Pcy;":"","&Pfr;":"","&Phi;":"","&Pi;":"","&PlusMinus;":"","&Poincareplane;":"","&Popf;":"","&Pr;":"","&Precedes;":"","&PrecedesEqual;":"","&PrecedesSlantEqual;":"","&PrecedesTilde;":"","&Prime;":"","&Product;":"","&Proportion;":"","&Proportional;":"","&Pscr;":"","&Psi;":"","&QUOT":'"',"&QUOT;":'"',"&Qfr;":"","&Qopf;":"","&Qscr;":"","&RBarr;":"","&REG":"","&REG;":"","&Racute;":"","&Rang;":"","&Rarr;":"","&Rarrtl;":"","&Rcaron;":"","&Rcedil;":"","&Rcy;":"","&Re;":"","&ReverseElement;":"","&ReverseEquilibrium;":"","&ReverseUpEquilibrium;":"","&Rfr;":"","&Rho;":"","&RightAngleBracket;":"","&RightArrow;":"","&RightArrowBar;":"","&RightArrowLeftArrow;":"","&RightCeiling;":"","&RightDoubleBracket;":"","&RightDownTeeVector;":"","&RightDownVector;":"","&RightDownVectorBar;":"","&RightFloor;":"","&RightTee;":"","&RightTeeArrow;":"","&RightTeeVector;":"","&RightTriangle;":"","&RightTriangleBar;":"","&RightTriangleEqual;":"","&RightUpDownVector;":"","&RightUpTeeVector;":"","&RightUpVector;":"","&RightUpVectorBar;":"","&RightVector;":"","&RightVectorBar;":"","&Rightarrow;":"","&Ropf;":"","&RoundImplies;":"","&Rrightarrow;":"","&Rscr;":"","&Rsh;":"","&RuleDelayed;":"","&SHCHcy;":"","&SHcy;":"","&SOFTcy;":"","&Sacute;":"","&Sc;":"","&Scaron;":"","&Scedil;":"","&Scirc;":"","&Scy;":"","&Sfr;":"","&ShortDownArrow;":"","&ShortLeftArrow;":"","&ShortRightArrow;":"","&ShortUpArrow;":"","&Sigma;":"","&SmallCircle;":"","&Sopf;":"","&Sqrt;":"","&Square;":"","&SquareIntersection;":"","&SquareSubset;":"","&SquareSubsetEqual;":"","&SquareSuperset;":"","&SquareSupersetEqual;":"","&SquareUnion;":"","&Sscr;":"","&Star;":"","&Sub;":"","&Subset;":"","&SubsetEqual;":"","&Succeeds;":"","&SucceedsEqual;":"","&SucceedsSlantEqual;":"","&SucceedsTilde;":"","&SuchThat;":"","&Sum;":"","&Sup;":"","&Superset;":"","&SupersetEqual;":"","&Supset;":"","&THORN":"","&THORN;":"","&TRADE;":"","&TSHcy;":"","&TScy;":"","&Tab;":"	","&Tau;":"","&Tcaron;":"","&Tcedil;":"","&Tcy;":"","&Tfr;":"","&Therefore;":"","&Theta;":"","&ThickSpace;":"","&ThinSpace;":"","&Tilde;":"","&TildeEqual;":"","&TildeFullEqual;":"","&TildeTilde;":"","&Topf;":"","&TripleDot;":"","&Tscr;":"","&Tstrok;":"","&Uacute":"","&Uacute;":"","&Uarr;":"","&Uarrocir;":"","&Ubrcy;":"","&Ubreve;":"","&Ucirc":"","&Ucirc;":"","&Ucy;":"","&Udblac;":"","&Ufr;":"","&Ugrave":"","&Ugrave;":"","&Umacr;":"","&UnderBar;":"_","&UnderBrace;":"","&UnderBracket;":"","&UnderParenthesis;":"","&Union;":"","&UnionPlus;":"","&Uogon;":"","&Uopf;":"","&UpArrow;":"","&UpArrowBar;":"","&UpArrowDownArrow;":"","&UpDownArrow;":"","&UpEquilibrium;":"","&UpTee;":"","&UpTeeArrow;":"","&Uparrow;":"","&Updownarrow;":"","&UpperLeftArrow;":"","&UpperRightArrow;":"","&Upsi;":"","&Upsilon;":"","&Uring;":"","&Uscr;":"","&Utilde;":"","&Uuml":"","&Uuml;":"","&VDash;":"","&Vbar;":"","&Vcy;":"","&Vdash;":"","&Vdashl;":"","&Vee;":"","&Verbar;":"","&Vert;":"","&VerticalBar;":"","&VerticalLine;":"|","&VerticalSeparator;":"","&VerticalTilde;":"","&VeryThinSpace;":"","&Vfr;":"","&Vopf;":"","&Vscr;":"","&Vvdash;":"","&Wcirc;":"","&Wedge;":"","&Wfr;":"","&Wopf;":"","&Wscr;":"","&Xfr;":"","&Xi;":"","&Xopf;":"","&Xscr;":"","&YAcy;":"","&YIcy;":"","&YUcy;":"","&Yacute":"","&Yacute;":"","&Ycirc;":"","&Ycy;":"","&Yfr;":"","&Yopf;":"","&Yscr;":"","&Yuml;":"","&ZHcy;":"","&Zacute;":"","&Zcaron;":"","&Zcy;":"","&Zdot;":"","&ZeroWidthSpace;":"","&Zeta;":"","&Zfr;":"","&Zopf;":"","&Zscr;":"","&aacute":"","&aacute;":"","&abreve;":"","&ac;":"","&acE;":"","&acd;":"","&acirc":"","&acirc;":"","&acute":"","&acute;":"","&acy;":"","&aelig":"","&aelig;":"","&af;":"","&afr;":"","&agrave":"","&agrave;":"","&alefsym;":"","&aleph;":"","&alpha;":"","&amacr;":"","&amalg;":"","&amp":"&","&amp;":"&","&and;":"","&andand;":"","&andd;":"","&andslope;":"","&andv;":"","&ang;":"","&ange;":"","&angle;":"","&angmsd;":"","&angmsdaa;":"","&angmsdab;":"","&angmsdac;":"","&angmsdad;":"","&angmsdae;":"","&angmsdaf;":"","&angmsdag;":"","&angmsdah;":"","&angrt;":"","&angrtvb;":"","&angrtvbd;":"","&angsph;":"","&angst;":"","&angzarr;":"","&aogon;":"","&aopf;":"","&ap;":"","&apE;":"","&apacir;":"","&ape;":"","&apid;":"","&apos;":"'","&approx;":"","&approxeq;":"","&aring":"","&aring;":"","&ascr;":"","&ast;":"*","&asymp;":"","&asympeq;":"","&atilde":"","&atilde;":"","&auml":"","&auml;":"","&awconint;":"","&awint;":"","&bNot;":"","&backcong;":"","&backepsilon;":"","&backprime;":"","&backsim;":"","&backsimeq;":"","&barvee;":"","&barwed;":"","&barwedge;":"","&bbrk;":"","&bbrktbrk;":"","&bcong;":"","&bcy;":"","&bdquo;":"","&becaus;":"","&because;":"","&bemptyv;":"","&bepsi;":"","&bernou;":"","&beta;":"","&beth;":"","&between;":"","&bfr;":"","&bigcap;":"","&bigcirc;":"","&bigcup;":"","&bigodot;":"","&bigoplus;":"","&bigotimes;":"","&bigsqcup;":"","&bigstar;":"","&bigtriangledown;":"","&bigtriangleup;":"","&biguplus;":"","&bigvee;":"","&bigwedge;":"","&bkarow;":"","&blacklozenge;":"","&blacksquare;":"","&blacktriangle;":"","&blacktriangledown;":"","&blacktriangleleft;":"","&blacktriangleright;":"","&blank;":"","&blk12;":"","&blk14;":"","&blk34;":"","&block;":"","&bne;":"=","&bnequiv;":"","&bnot;":"","&bopf;":"","&bot;":"","&bottom;":"","&bowtie;":"","&boxDL;":"","&boxDR;":"","&boxDl;":"","&boxDr;":"","&boxH;":"","&boxHD;":"","&boxHU;":"","&boxHd;":"","&boxHu;":"","&boxUL;":"","&boxUR;":"","&boxUl;":"","&boxUr;":"","&boxV;":"","&boxVH;":"","&boxVL;":"","&boxVR;":"","&boxVh;":"","&boxVl;":"","&boxVr;":"","&boxbox;":"","&boxdL;":"","&boxdR;":"","&boxdl;":"","&boxdr;":"","&boxh;":"","&boxhD;":"","&boxhU;":"","&boxhd;":"","&boxhu;":"","&boxminus;":"","&boxplus;":"","&boxtimes;":"","&boxuL;":"","&boxuR;":"","&boxul;":"","&boxur;":"","&boxv;":"","&boxvH;":"","&boxvL;":"","&boxvR;":"","&boxvh;":"","&boxvl;":"","&boxvr;":"","&bprime;":"","&breve;":"","&brvbar":"","&brvbar;":"","&bscr;":"","&bsemi;":"","&bsim;":"","&bsime;":"","&bsol;":"\\","&bsolb;":"","&bsolhsub;":"","&bull;":"","&bullet;":"","&bump;":"","&bumpE;":"","&bumpe;":"","&bumpeq;":"","&cacute;":"","&cap;":"","&capand;":"","&capbrcup;":"","&capcap;":"","&capcup;":"","&capdot;":"","&caps;":"","&caret;":"","&caron;":"","&ccaps;":"","&ccaron;":"","&ccedil":"","&ccedil;":"","&ccirc;":"","&ccups;":"","&ccupssm;":"","&cdot;":"","&cedil":"","&cedil;":"","&cemptyv;":"","&cent":"","&cent;":"","&centerdot;":"","&cfr;":"","&chcy;":"","&check;":"","&checkmark;":"","&chi;":"","&cir;":"","&cirE;":"","&circ;":"","&circeq;":"","&circlearrowleft;":"","&circlearrowright;":"","&circledR;":"","&circledS;":"","&circledast;":"","&circledcirc;":"","&circleddash;":"","&cire;":"","&cirfnint;":"","&cirmid;":"","&cirscir;":"","&clubs;":"","&clubsuit;":"","&colon;":":","&colone;":"","&coloneq;":"","&comma;":",","&commat;":"@","&comp;":"","&compfn;":"","&complement;":"","&complexes;":"","&cong;":"","&congdot;":"","&conint;":"","&copf;":"","&coprod;":"","&copy":"","&copy;":"","&copysr;":"","&crarr;":"","&cross;":"","&cscr;":"","&csub;":"","&csube;":"","&csup;":"","&csupe;":"","&ctdot;":"","&cudarrl;":"","&cudarrr;":"","&cuepr;":"","&cuesc;":"","&cularr;":"","&cularrp;":"","&cup;":"","&cupbrcap;":"","&cupcap;":"","&cupcup;":"","&cupdot;":"","&cupor;":"","&cups;":"","&curarr;":"","&curarrm;":"","&curlyeqprec;":"","&curlyeqsucc;":"","&curlyvee;":"","&curlywedge;":"","&curren":"","&curren;":"","&curvearrowleft;":"","&curvearrowright;":"","&cuvee;":"","&cuwed;":"","&cwconint;":"","&cwint;":"","&cylcty;":"","&dArr;":"","&dHar;":"","&dagger;":"","&daleth;":"","&darr;":"","&dash;":"","&dashv;":"","&dbkarow;":"","&dblac;":"","&dcaron;":"","&dcy;":"","&dd;":"","&ddagger;":"","&ddarr;":"","&ddotseq;":"","&deg":"","&deg;":"","&delta;":"","&demptyv;":"","&dfisht;":"","&dfr;":"","&dharl;":"","&dharr;":"","&diam;":"","&diamond;":"","&diamondsuit;":"","&diams;":"","&die;":"","&digamma;":"","&disin;":"","&div;":"","&divide":"","&divide;":"","&divideontimes;":"","&divonx;":"","&djcy;":"","&dlcorn;":"","&dlcrop;":"","&dollar;":"$","&dopf;":"","&dot;":"","&doteq;":"","&doteqdot;":"","&dotminus;":"","&dotplus;":"","&dotsquare;":"","&doublebarwedge;":"","&downarrow;":"","&downdownarrows;":"","&downharpoonleft;":"","&downharpoonright;":"","&drbkarow;":"","&drcorn;":"","&drcrop;":"","&dscr;":"","&dscy;":"","&dsol;":"","&dstrok;":"","&dtdot;":"","&dtri;":"","&dtrif;":"","&duarr;":"","&duhar;":"","&dwangle;":"","&dzcy;":"","&dzigrarr;":"","&eDDot;":"","&eDot;":"","&eacute":"","&eacute;":"","&easter;":"","&ecaron;":"","&ecir;":"","&ecirc":"","&ecirc;":"","&ecolon;":"","&ecy;":"","&edot;":"","&ee;":"","&efDot;":"","&efr;":"","&eg;":"","&egrave":"","&egrave;":"","&egs;":"","&egsdot;":"","&el;":"","&elinters;":"","&ell;":"","&els;":"","&elsdot;":"","&emacr;":"","&empty;":"","&emptyset;":"","&emptyv;":"","&emsp13;":"","&emsp14;":"","&emsp;":"","&eng;":"","&ensp;":"","&eogon;":"","&eopf;":"","&epar;":"","&eparsl;":"","&eplus;":"","&epsi;":"","&epsilon;":"","&epsiv;":"","&eqcirc;":"","&eqcolon;":"","&eqsim;":"","&eqslantgtr;":"","&eqslantless;":"","&equals;":"=","&equest;":"","&equiv;":"","&equivDD;":"","&eqvparsl;":"","&erDot;":"","&erarr;":"","&escr;":"","&esdot;":"","&esim;":"","&eta;":"","&eth":"","&eth;":"","&euml":"","&euml;":"","&euro;":"","&excl;":"!","&exist;":"","&expectation;":"","&exponentiale;":"","&fallingdotseq;":"","&fcy;":"","&female;":"","&ffilig;":"","&fflig;":"","&ffllig;":"","&ffr;":"","&filig;":"","&fjlig;":"fj","&flat;":"","&fllig;":"","&fltns;":"","&fnof;":"","&fopf;":"","&forall;":"","&fork;":"","&forkv;":"","&fpartint;":"","&frac12":"","&frac12;":"","&frac13;":"","&frac14":"","&frac14;":"","&frac15;":"","&frac16;":"","&frac18;":"","&frac23;":"","&frac25;":"","&frac34":"","&frac34;":"","&frac35;":"","&frac38;":"","&frac45;":"","&frac56;":"","&frac58;":"","&frac78;":"","&frasl;":"","&frown;":"","&fscr;":"","&gE;":"","&gEl;":"","&gacute;":"","&gamma;":"","&gammad;":"","&gap;":"","&gbreve;":"","&gcirc;":"","&gcy;":"","&gdot;":"","&ge;":"","&gel;":"","&geq;":"","&geqq;":"","&geqslant;":"","&ges;":"","&gescc;":"","&gesdot;":"","&gesdoto;":"","&gesdotol;":"","&gesl;":"","&gesles;":"","&gfr;":"","&gg;":"","&ggg;":"","&gimel;":"","&gjcy;":"","&gl;":"","&glE;":"","&gla;":"","&glj;":"","&gnE;":"","&gnap;":"","&gnapprox;":"","&gne;":"","&gneq;":"","&gneqq;":"","&gnsim;":"","&gopf;":"","&grave;":"`","&gscr;":"","&gsim;":"","&gsime;":"","&gsiml;":"","&gt":">","&gt;":">","&gtcc;":"","&gtcir;":"","&gtdot;":"","&gtlPar;":"","&gtquest;":"","&gtrapprox;":"","&gtrarr;":"","&gtrdot;":"","&gtreqless;":"","&gtreqqless;":"","&gtrless;":"","&gtrsim;":"","&gvertneqq;":"","&gvnE;":"","&hArr;":"","&hairsp;":"","&half;":"","&hamilt;":"","&hardcy;":"","&harr;":"","&harrcir;":"","&harrw;":"","&hbar;":"","&hcirc;":"","&hearts;":"","&heartsuit;":"","&hellip;":"","&hercon;":"","&hfr;":"","&hksearow;":"","&hkswarow;":"","&hoarr;":"","&homtht;":"","&hookleftarrow;":"","&hookrightarrow;":"","&hopf;":"","&horbar;":"","&hscr;":"","&hslash;":"","&hstrok;":"","&hybull;":"","&hyphen;":"","&iacute":"","&iacute;":"","&ic;":"","&icirc":"","&icirc;":"","&icy;":"","&iecy;":"","&iexcl":"","&iexcl;":"","&iff;":"","&ifr;":"","&igrave":"","&igrave;":"","&ii;":"","&iiiint;":"","&iiint;":"","&iinfin;":"","&iiota;":"","&ijlig;":"","&imacr;":"","&image;":"","&imagline;":"","&imagpart;":"","&imath;":"","&imof;":"","&imped;":"","&in;":"","&incare;":"","&infin;":"","&infintie;":"","&inodot;":"","&int;":"","&intcal;":"","&integers;":"","&intercal;":"","&intlarhk;":"","&intprod;":"","&iocy;":"","&iogon;":"","&iopf;":"","&iota;":"","&iprod;":"","&iquest":"","&iquest;":"","&iscr;":"","&isin;":"","&isinE;":"","&isindot;":"","&isins;":"","&isinsv;":"","&isinv;":"","&it;":"","&itilde;":"","&iukcy;":"","&iuml":"","&iuml;":"","&jcirc;":"","&jcy;":"","&jfr;":"","&jmath;":"","&jopf;":"","&jscr;":"","&jsercy;":"","&jukcy;":"","&kappa;":"","&kappav;":"","&kcedil;":"","&kcy;":"","&kfr;":"","&kgreen;":"","&khcy;":"","&kjcy;":"","&kopf;":"","&kscr;":"","&lAarr;":"","&lArr;":"","&lAtail;":"","&lBarr;":"","&lE;":"","&lEg;":"","&lHar;":"","&lacute;":"","&laemptyv;":"","&lagran;":"","&lambda;":"","&lang;":"","&langd;":"","&langle;":"","&lap;":"","&laquo":"","&laquo;":"","&larr;":"","&larrb;":"","&larrbfs;":"","&larrfs;":"","&larrhk;":"","&larrlp;":"","&larrpl;":"","&larrsim;":"","&larrtl;":"","&lat;":"","&latail;":"","&late;":"","&lates;":"","&lbarr;":"","&lbbrk;":"","&lbrace;":"{","&lbrack;":"[","&lbrke;":"","&lbrksld;":"","&lbrkslu;":"","&lcaron;":"","&lcedil;":"","&lceil;":"","&lcub;":"{","&lcy;":"","&ldca;":"","&ldquo;":"","&ldquor;":"","&ldrdhar;":"","&ldrushar;":"","&ldsh;":"","&le;":"","&leftarrow;":"","&leftarrowtail;":"","&leftharpoondown;":"","&leftharpoonup;":"","&leftleftarrows;":"","&leftrightarrow;":"","&leftrightarrows;":"","&leftrightharpoons;":"","&leftrightsquigarrow;":"","&leftthreetimes;":"","&leg;":"","&leq;":"","&leqq;":"","&leqslant;":"","&les;":"","&lescc;":"","&lesdot;":"","&lesdoto;":"","&lesdotor;":"","&lesg;":"","&lesges;":"","&lessapprox;":"","&lessdot;":"","&lesseqgtr;":"","&lesseqqgtr;":"","&lessgtr;":"","&lesssim;":"","&lfisht;":"","&lfloor;":"","&lfr;":"","&lg;":"","&lgE;":"","&lhard;":"","&lharu;":"","&lharul;":"","&lhblk;":"","&ljcy;":"","&ll;":"","&llarr;":"","&llcorner;":"","&llhard;":"","&lltri;":"","&lmidot;":"","&lmoust;":"","&lmoustache;":"","&lnE;":"","&lnap;":"","&lnapprox;":"","&lne;":"","&lneq;":"","&lneqq;":"","&lnsim;":"","&loang;":"","&loarr;":"","&lobrk;":"","&longleftarrow;":"","&longleftrightarrow;":"","&longmapsto;":"","&longrightarrow;":"","&looparrowleft;":"","&looparrowright;":"","&lopar;":"","&lopf;":"","&loplus;":"","&lotimes;":"","&lowast;":"","&lowbar;":"_","&loz;":"","&lozenge;":"","&lozf;":"","&lpar;":"(","&lparlt;":"","&lrarr;":"","&lrcorner;":"","&lrhar;":"","&lrhard;":"","&lrm;":"","&lrtri;":"","&lsaquo;":"","&lscr;":"","&lsh;":"","&lsim;":"","&lsime;":"","&lsimg;":"","&lsqb;":"[","&lsquo;":"","&lsquor;":"","&lstrok;":"","&lt":"<","&lt;":"<","&ltcc;":"","&ltcir;":"","&ltdot;":"","&lthree;":"","&ltimes;":"","&ltlarr;":"","&ltquest;":"","&ltrPar;":"","&ltri;":"","&ltrie;":"","&ltrif;":"","&lurdshar;":"","&luruhar;":"","&lvertneqq;":"","&lvnE;":"","&mDDot;":"","&macr":"","&macr;":"","&male;":"","&malt;":"","&maltese;":"","&map;":"","&mapsto;":"","&mapstodown;":"","&mapstoleft;":"","&mapstoup;":"","&marker;":"","&mcomma;":"","&mcy;":"","&mdash;":"","&measuredangle;":"","&mfr;":"","&mho;":"","&micro":"","&micro;":"","&mid;":"","&midast;":"*","&midcir;":"","&middot":"","&middot;":"","&minus;":"","&minusb;":"","&minusd;":"","&minusdu;":"","&mlcp;":"","&mldr;":"","&mnplus;":"","&models;":"","&mopf;":"","&mp;":"","&mscr;":"","&mstpos;":"","&mu;":"","&multimap;":"","&mumap;":"","&nGg;":"","&nGt;":"","&nGtv;":"","&nLeftarrow;":"","&nLeftrightarrow;":"","&nLl;":"","&nLt;":"","&nLtv;":"","&nRightarrow;":"","&nVDash;":"","&nVdash;":"","&nabla;":"","&nacute;":"","&nang;":"","&nap;":"","&napE;":"","&napid;":"","&napos;":"","&napprox;":"","&natur;":"","&natural;":"","&naturals;":"","&nbsp":"","&nbsp;":"","&nbump;":"","&nbumpe;":"","&ncap;":"","&ncaron;":"","&ncedil;":"","&ncong;":"","&ncongdot;":"","&ncup;":"","&ncy;":"","&ndash;":"","&ne;":"","&neArr;":"","&nearhk;":"","&nearr;":"","&nearrow;":"","&nedot;":"","&nequiv;":"","&nesear;":"","&nesim;":"","&nexist;":"","&nexists;":"","&nfr;":"","&ngE;":"","&nge;":"","&ngeq;":"","&ngeqq;":"","&ngeqslant;":"","&nges;":"","&ngsim;":"","&ngt;":"","&ngtr;":"","&nhArr;":"","&nharr;":"","&nhpar;":"","&ni;":"","&nis;":"","&nisd;":"","&niv;":"","&njcy;":"","&nlArr;":"","&nlE;":"","&nlarr;":"","&nldr;":"","&nle;":"","&nleftarrow;":"","&nleftrightarrow;":"","&nleq;":"","&nleqq;":"","&nleqslant;":"","&nles;":"","&nless;":"","&nlsim;":"","&nlt;":"","&nltri;":"","&nltrie;":"","&nmid;":"","&nopf;":"","&not":"","&not;":"","&notin;":"","&notinE;":"","&notindot;":"","&notinva;":"","&notinvb;":"","&notinvc;":"","&notni;":"","&notniva;":"","&notnivb;":"","&notnivc;":"","&npar;":"","&nparallel;":"","&nparsl;":"","&npart;":"","&npolint;":"","&npr;":"","&nprcue;":"","&npre;":"","&nprec;":"","&npreceq;":"","&nrArr;":"","&nrarr;":"","&nrarrc;":"","&nrarrw;":"","&nrightarrow;":"","&nrtri;":"","&nrtrie;":"","&nsc;":"","&nsccue;":"","&nsce;":"","&nscr;":"","&nshortmid;":"","&nshortparallel;":"","&nsim;":"","&nsime;":"","&nsimeq;":"","&nsmid;":"","&nspar;":"","&nsqsube;":"","&nsqsupe;":"","&nsub;":"","&nsubE;":"","&nsube;":"","&nsubset;":"","&nsubseteq;":"","&nsubseteqq;":"","&nsucc;":"","&nsucceq;":"","&nsup;":"","&nsupE;":"","&nsupe;":"","&nsupset;":"","&nsupseteq;":"","&nsupseteqq;":"","&ntgl;":"","&ntilde":"","&ntilde;":"","&ntlg;":"","&ntriangleleft;":"","&ntrianglelefteq;":"","&ntriangleright;":"","&ntrianglerighteq;":"","&nu;":"","&num;":"#","&numero;":"","&numsp;":"","&nvDash;":"","&nvHarr;":"","&nvap;":"","&nvdash;":"","&nvge;":"","&nvgt;":">","&nvinfin;":"","&nvlArr;":"","&nvle;":"","&nvlt;":"<","&nvltrie;":"","&nvrArr;":"","&nvrtrie;":"","&nvsim;":"","&nwArr;":"","&nwarhk;":"","&nwarr;":"","&nwarrow;":"","&nwnear;":"","&oS;":"","&oacute":"","&oacute;":"","&oast;":"","&ocir;":"","&ocirc":"","&ocirc;":"","&ocy;":"","&odash;":"","&odblac;":"","&odiv;":"","&odot;":"","&odsold;":"","&oelig;":"","&ofcir;":"","&ofr;":"","&ogon;":"","&ograve":"","&ograve;":"","&ogt;":"","&ohbar;":"","&ohm;":"","&oint;":"","&olarr;":"","&olcir;":"","&olcross;":"","&oline;":"","&olt;":"","&omacr;":"","&omega;":"","&omicron;":"","&omid;":"","&ominus;":"","&oopf;":"","&opar;":"","&operp;":"","&oplus;":"","&or;":"","&orarr;":"","&ord;":"","&order;":"","&orderof;":"","&ordf":"","&ordf;":"","&ordm":"","&ordm;":"","&origof;":"","&oror;":"","&orslope;":"","&orv;":"","&oscr;":"","&oslash":"","&oslash;":"","&osol;":"","&otilde":"","&otilde;":"","&otimes;":"","&otimesas;":"","&ouml":"","&ouml;":"","&ovbar;":"","&par;":"","&para":"","&para;":"","&parallel;":"","&parsim;":"","&parsl;":"","&part;":"","&pcy;":"","&percnt;":"%","&period;":".","&permil;":"","&perp;":"","&pertenk;":"","&pfr;":"","&phi;":"","&phiv;":"","&phmmat;":"","&phone;":"","&pi;":"","&pitchfork;":"","&piv;":"","&planck;":"","&planckh;":"","&plankv;":"","&plus;":"+","&plusacir;":"","&plusb;":"","&pluscir;":"","&plusdo;":"","&plusdu;":"","&pluse;":"","&plusmn":"","&plusmn;":"","&plussim;":"","&plustwo;":"","&pm;":"","&pointint;":"","&popf;":"","&pound":"","&pound;":"","&pr;":"","&prE;":"","&prap;":"","&prcue;":"","&pre;":"","&prec;":"","&precapprox;":"","&preccurlyeq;":"","&preceq;":"","&precnapprox;":"","&precneqq;":"","&precnsim;":"","&precsim;":"","&prime;":"","&primes;":"","&prnE;":"","&prnap;":"","&prnsim;":"","&prod;":"","&profalar;":"","&profline;":"","&profsurf;":"","&prop;":"","&propto;":"","&prsim;":"","&prurel;":"","&pscr;":"","&psi;":"","&puncsp;":"","&qfr;":"","&qint;":"","&qopf;":"","&qprime;":"","&qscr;":"","&quaternions;":"","&quatint;":"","&quest;":"?","&questeq;":"","&quot":'"',"&quot;":'"',"&rAarr;":"","&rArr;":"","&rAtail;":"","&rBarr;":"","&rHar;":"","&race;":"","&racute;":"","&radic;":"","&raemptyv;":"","&rang;":"","&rangd;":"","&range;":"","&rangle;":"","&raquo":"","&raquo;":"","&rarr;":"","&rarrap;":"","&rarrb;":"","&rarrbfs;":"","&rarrc;":"","&rarrfs;":"","&rarrhk;":"","&rarrlp;":"","&rarrpl;":"","&rarrsim;":"","&rarrtl;":"","&rarrw;":"","&ratail;":"","&ratio;":"","&rationals;":"","&rbarr;":"","&rbbrk;":"","&rbrace;":"}","&rbrack;":"]","&rbrke;":"","&rbrksld;":"","&rbrkslu;":"","&rcaron;":"","&rcedil;":"","&rceil;":"","&rcub;":"}","&rcy;":"","&rdca;":"","&rdldhar;":"","&rdquo;":"","&rdquor;":"","&rdsh;":"","&real;":"","&realine;":"","&realpart;":"","&reals;":"","&rect;":"","&reg":"","&reg;":"","&rfisht;":"","&rfloor;":"","&rfr;":"","&rhard;":"","&rharu;":"","&rharul;":"","&rho;":"","&rhov;":"","&rightarrow;":"","&rightarrowtail;":"","&rightharpoondown;":"","&rightharpoonup;":"","&rightleftarrows;":"","&rightleftharpoons;":"","&rightrightarrows;":"","&rightsquigarrow;":"","&rightthreetimes;":"","&ring;":"","&risingdotseq;":"","&rlarr;":"","&rlhar;":"","&rlm;":"","&rmoust;":"","&rmoustache;":"","&rnmid;":"","&roang;":"","&roarr;":"","&robrk;":"","&ropar;":"","&ropf;":"","&roplus;":"","&rotimes;":"","&rpar;":")","&rpargt;":"","&rppolint;":"","&rrarr;":"","&rsaquo;":"","&rscr;":"","&rsh;":"","&rsqb;":"]","&rsquo;":"","&rsquor;":"","&rthree;":"","&rtimes;":"","&rtri;":"","&rtrie;":"","&rtrif;":"","&rtriltri;":"","&ruluhar;":"","&rx;":"","&sacute;":"","&sbquo;":"","&sc;":"","&scE;":"","&scap;":"","&scaron;":"","&sccue;":"","&sce;":"","&scedil;":"","&scirc;":"","&scnE;":"","&scnap;":"","&scnsim;":"","&scpolint;":"","&scsim;":"","&scy;":"","&sdot;":"","&sdotb;":"","&sdote;":"","&seArr;":"","&searhk;":"","&searr;":"","&searrow;":"","&sect":"","&sect;":"","&semi;":";","&seswar;":"","&setminus;":"","&setmn;":"","&sext;":"","&sfr;":"","&sfrown;":"","&sharp;":"","&shchcy;":"","&shcy;":"","&shortmid;":"","&shortparallel;":"","&shy":"","&shy;":"","&sigma;":"","&sigmaf;":"","&sigmav;":"","&sim;":"","&simdot;":"","&sime;":"","&simeq;":"","&simg;":"","&simgE;":"","&siml;":"","&simlE;":"","&simne;":"","&simplus;":"","&simrarr;":"","&slarr;":"","&smallsetminus;":"","&smashp;":"","&smeparsl;":"","&smid;":"","&smile;":"","&smt;":"","&smte;":"","&smtes;":"","&softcy;":"","&sol;":"/","&solb;":"","&solbar;":"","&sopf;":"","&spades;":"","&spadesuit;":"","&spar;":"","&sqcap;":"","&sqcaps;":"","&sqcup;":"","&sqcups;":"","&sqsub;":"","&sqsube;":"","&sqsubset;":"","&sqsubseteq;":"","&sqsup;":"","&sqsupe;":"","&sqsupset;":"","&sqsupseteq;":"","&squ;":"","&square;":"","&squarf;":"","&squf;":"","&srarr;":"","&sscr;":"","&ssetmn;":"","&ssmile;":"","&sstarf;":"","&star;":"","&starf;":"","&straightepsilon;":"","&straightphi;":"","&strns;":"","&sub;":"","&subE;":"","&subdot;":"","&sube;":"","&subedot;":"","&submult;":"","&subnE;":"","&subne;":"","&subplus;":"","&subrarr;":"","&subset;":"","&subseteq;":"","&subseteqq;":"","&subsetneq;":"","&subsetneqq;":"","&subsim;":"","&subsub;":"","&subsup;":"","&succ;":"","&succapprox;":"","&succcurlyeq;":"","&succeq;":"","&succnapprox;":"","&succneqq;":"","&succnsim;":"","&succsim;":"","&sum;":"","&sung;":"","&sup1":"","&sup1;":"","&sup2":"","&sup2;":"","&sup3":"","&sup3;":"","&sup;":"","&supE;":"","&supdot;":"","&supdsub;":"","&supe;":"","&supedot;":"","&suphsol;":"","&suphsub;":"","&suplarr;":"","&supmult;":"","&supnE;":"","&supne;":"","&supplus;":"","&supset;":"","&supseteq;":"","&supseteqq;":"","&supsetneq;":"","&supsetneqq;":"","&supsim;":"","&supsub;":"","&supsup;":"","&swArr;":"","&swarhk;":"","&swarr;":"","&swarrow;":"","&swnwar;":"","&szlig":"","&szlig;":"","&target;":"","&tau;":"","&tbrk;":"","&tcaron;":"","&tcedil;":"","&tcy;":"","&tdot;":"","&telrec;":"","&tfr;":"","&there4;":"","&therefore;":"","&theta;":"","&thetasym;":"","&thetav;":"","&thickapprox;":"","&thicksim;":"","&thinsp;":"","&thkap;":"","&thksim;":"","&thorn":"","&thorn;":"","&tilde;":"","&times":"","&times;":"","&timesb;":"","&timesbar;":"","&timesd;":"","&tint;":"","&toea;":"","&top;":"","&topbot;":"","&topcir;":"","&topf;":"","&topfork;":"","&tosa;":"","&tprime;":"","&trade;":"","&triangle;":"","&triangledown;":"","&triangleleft;":"","&trianglelefteq;":"","&triangleq;":"","&triangleright;":"","&trianglerighteq;":"","&tridot;":"","&trie;":"","&triminus;":"","&triplus;":"","&trisb;":"","&tritime;":"","&trpezium;":"","&tscr;":"","&tscy;":"","&tshcy;":"","&tstrok;":"","&twixt;":"","&twoheadleftarrow;":"","&twoheadrightarrow;":"","&uArr;":"","&uHar;":"","&uacute":"","&uacute;":"","&uarr;":"","&ubrcy;":"","&ubreve;":"","&ucirc":"","&ucirc;":"","&ucy;":"","&udarr;":"","&udblac;":"","&udhar;":"","&ufisht;":"","&ufr;":"","&ugrave":"","&ugrave;":"","&uharl;":"","&uharr;":"","&uhblk;":"","&ulcorn;":"","&ulcorner;":"","&ulcrop;":"","&ultri;":"","&umacr;":"","&uml":"","&uml;":"","&uogon;":"","&uopf;":"","&uparrow;":"","&updownarrow;":"","&upharpoonleft;":"","&upharpoonright;":"","&uplus;":"","&upsi;":"","&upsih;":"","&upsilon;":"","&upuparrows;":"","&urcorn;":"","&urcorner;":"","&urcrop;":"","&uring;":"","&urtri;":"","&uscr;":"","&utdot;":"","&utilde;":"","&utri;":"","&utrif;":"","&uuarr;":"","&uuml":"","&uuml;":"","&uwangle;":"","&vArr;":"","&vBar;":"","&vBarv;":"","&vDash;":"","&vangrt;":"","&varepsilon;":"","&varkappa;":"","&varnothing;":"","&varphi;":"","&varpi;":"","&varpropto;":"","&varr;":"","&varrho;":"","&varsigma;":"","&varsubsetneq;":"","&varsubsetneqq;":"","&varsupsetneq;":"","&varsupsetneqq;":"","&vartheta;":"","&vartriangleleft;":"","&vartriangleright;":"","&vcy;":"","&vdash;":"","&vee;":"","&veebar;":"","&veeeq;":"","&vellip;":"","&verbar;":"|","&vert;":"|","&vfr;":"","&vltri;":"","&vnsub;":"","&vnsup;":"","&vopf;":"","&vprop;":"","&vrtri;":"","&vscr;":"","&vsubnE;":"","&vsubne;":"","&vsupnE;":"","&vsupne;":"","&vzigzag;":"","&wcirc;":"","&wedbar;":"","&wedge;":"","&wedgeq;":"","&weierp;":"","&wfr;":"","&wopf;":"","&wp;":"","&wr;":"","&wreath;":"","&wscr;":"","&xcap;":"","&xcirc;":"","&xcup;":"","&xdtri;":"","&xfr;":"","&xhArr;":"","&xharr;":"","&xi;":"","&xlArr;":"","&xlarr;":"","&xmap;":"","&xnis;":"","&xodot;":"","&xopf;":"","&xoplus;":"","&xotime;":"","&xrArr;":"","&xrarr;":"","&xscr;":"","&xsqcup;":"","&xuplus;":"","&xutri;":"","&xvee;":"","&xwedge;":"","&yacute":"","&yacute;":"","&yacy;":"","&ycirc;":"","&ycy;":"","&yen":"","&yen;":"","&yfr;":"","&yicy;":"","&yopf;":"","&yscr;":"","&yucy;":"","&yuml":"","&yuml;":"","&zacute;":"","&zcaron;":"","&zcy;":"","&zdot;":"","&zeetrf;":"","&zeta;":"","&zfr;":"","&zhcy;":"","&zigrarr;":"","&zopf;":"","&zscr;":"","&zwj;":"","&zwnj;":""},characters:{:"&AElig;","&":"&amp;",:"&Aacute;",:"&Abreve;",:"&Acirc;",:"&Acy;","":"&Afr;",:"&Agrave;",:"&Alpha;",:"&Amacr;","":"&And;",:"&Aogon;","":"&Aopf;","":"&af;",:"&angst;","":"&Ascr;","":"&coloneq;",:"&Atilde;",:"&Auml;","":"&ssetmn;","":"&Barv;","":"&doublebarwedge;",:"&Bcy;","":"&because;",:"&bernou;",:"&Beta;","":"&Bfr;","":"&Bopf;","":"&breve;","":"&bump;",:"&CHcy;","":"&copy;",:"&Cacute;","":"&Cap;","":"&DD;",:"&Cfr;",:"&Ccaron;",:"&Ccedil;",:"&Ccirc;","":"&Cconint;",:"&Cdot;","":"&cedil;","":"&middot;",:"&Chi;","":"&odot;","":"&ominus;","":"&oplus;","":"&otimes;","":"&cwconint;","":"&rdquor;","":"&rsquor;","":"&Proportion;","":"&Colone;","":"&equiv;","":"&DoubleContourIntegral;","":"&oint;",:"&complexes;","":"&coprod;","":"&awconint;","":"&Cross;","":"&Cscr;","":"&Cup;","":"&asympeq;","":"&DDotrahd;",:"&DJcy;",:"&DScy;",:"&DZcy;","":"&ddagger;","":"&Darr;","":"&DoubleLeftTee;",:"&Dcaron;",:"&Dcy;","":"&nabla;",:"&Delta;","":"&Dfr;","":"&acute;","":"&dot;","":"&dblac;","`":"&grave;","":"&tilde;","":"&diamond;","":"&dd;","":"&Dopf;","":"&uml;","":"&DotDot;","":"&esdot;","":"&dArr;","":"&lArr;","":"&iff;","":"&xlArr;","":"&xhArr;","":"&xrArr;","":"&rArr;","":"&vDash;","":"&uArr;","":"&vArr;","":"&spar;","":"&downarrow;","":"&DownArrowBar;","":"&duarr;","":"&DownBreve;","":"&DownLeftRightVector;","":"&DownLeftTeeVector;","":"&lhard;","":"&DownLeftVectorBar;","":"&DownRightTeeVector;","":"&rightharpoondown;","":"&DownRightVectorBar;","":"&top;","":"&mapstodown;","":"&Dscr;",:"&Dstrok;",:"&ENG;",:"&ETH;",:"&Eacute;",:"&Ecaron;",:"&Ecirc;",:"&Ecy;",:"&Edot;","":"&Efr;",:"&Egrave;","":"&isinv;",:"&Emacr;","":"&EmptySmallSquare;","":"&EmptyVerySmallSquare;",:"&Eogon;","":"&Eopf;",:"&Epsilon;","":"&Equal;","":"&esim;","":"&rlhar;",:"&expectation;","":"&Esim;",:"&Eta;",:"&Euml;","":"&exist;","":"&exponentiale;",:"&Fcy;","":"&Ffr;","":"&FilledSmallSquare;","":"&squf;","":"&Fopf;","":"&forall;",:"&Fscr;",:"&GJcy;",">":"&gt;",:"&Gamma;",:"&Gammad;",:"&Gbreve;",:"&Gcedil;",:"&Gcirc;",:"&Gcy;",:"&Gdot;","":"&Gfr;","":"&ggg;","":"&Gopf;","":"&geq;","":"&gtreqless;","":"&geqq;","":"&GreaterGreater;","":"&gtrless;","":"&ges;","":"&gtrsim;","":"&Gscr;","":"&gg;",:"&HARDcy;","":"&caron;","^":"&Hat;",:"&Hcirc;",:"&Poincareplane;",:"&hamilt;",:"&quaternions;","":"&boxh;",:"&Hstrok;","":"&bumpeq;",:"&IEcy;",:"&IJlig;",:"&IOcy;",:"&Iacute;",:"&Icirc;",:"&Icy;",:"&Idot;",:"&imagpart;",:"&Igrave;",:"&Imacr;","":"&ii;","":"&Int;","":"&int;","":"&xcap;","":"&ic;","":"&it;",:"&Iogon;","":"&Iopf;",:"&Iota;",:"&imagline;",:"&Itilde;",:"&Iukcy;",:"&Iuml;",:"&Jcirc;",:"&Jcy;","":"&Jfr;","":"&Jopf;","":"&Jscr;",:"&Jsercy;",:"&Jukcy;",:"&KHcy;",:"&KJcy;",:"&Kappa;",:"&Kcedil;",:"&Kcy;","":"&Kfr;","":"&Kopf;","":"&Kscr;",:"&LJcy;","<":"&lt;",:"&Lacute;",:"&Lambda;","":"&Lang;",:"&lagran;","":"&twoheadleftarrow;",:"&Lcaron;",:"&Lcedil;",:"&Lcy;","":"&langle;","":"&slarr;","":"&larrb;","":"&lrarr;","":"&lceil;","":"&lobrk;","":"&LeftDownTeeVector;","":"&downharpoonleft;","":"&LeftDownVectorBar;","":"&lfloor;","":"&leftrightarrow;","":"&LeftRightVector;","":"&dashv;","":"&mapstoleft;","":"&LeftTeeVector;","":"&vltri;","":"&LeftTriangleBar;","":"&trianglelefteq;","":"&LeftUpDownVector;","":"&LeftUpTeeVector;","":"&upharpoonleft;","":"&LeftUpVectorBar;","":"&lharu;","":"&LeftVectorBar;","":"&lesseqgtr;","":"&leqq;","":"&lg;","":"&LessLess;","":"&les;","":"&lsim;","":"&Lfr;","":"&Ll;","":"&lAarr;",:"&Lmidot;","":"&xlarr;","":"&xharr;","":"&xrarr;","":"&Lopf;","":"&swarrow;","":"&searrow;","":"&lsh;",:"&Lstrok;","":"&ll;","":"&Map;",:"&Mcy;","":"&MediumSpace;",:"&phmmat;","":"&Mfr;","":"&mp;","":"&Mopf;",:"&Mu;",:"&NJcy;",:"&Nacute;",:"&Ncaron;",:"&Ncedil;",:"&Ncy;","":"&ZeroWidthSpace;","\n":"&NewLine;","":"&Nfr;","":"&NoBreak;","":"&nbsp;",:"&naturals;","":"&Not;","":"&nequiv;","":"&NotCupCap;","":"&nspar;","":"&notinva;","":"&ne;","":"&nesim;","":"&nexists;","":"&ngtr;","":"&ngeq;","":"&ngeqq;","":"&nGtv;","":"&ntgl;","":"&nges;","":"&ngsim;","":"&nbump;","":"&nbumpe;","":"&ntriangleleft;","":"&NotLeftTriangleBar;","":"&ntrianglelefteq;","":"&nlt;","":"&nleq;","":"&ntlg;","":"&nLtv;","":"&nles;","":"&nlsim;","":"&NotNestedGreaterGreater;","":"&NotNestedLessLess;","":"&nprec;","":"&npreceq;","":"&nprcue;","":"&notniva;","":"&ntriangleright;","":"&NotRightTriangleBar;","":"&ntrianglerighteq;","":"&NotSquareSubset;","":"&nsqsube;","":"&NotSquareSuperset;","":"&nsqsupe;","":"&vnsub;","":"&nsubseteq;","":"&nsucc;","":"&nsucceq;","":"&nsccue;","":"&NotSucceedsTilde;","":"&vnsup;","":"&nsupseteq;","":"&nsim;","":"&nsimeq;","":"&ncong;","":"&napprox;","":"&nsmid;","":"&Nscr;",:"&Ntilde;",:"&Nu;",:"&OElig;",:"&Oacute;",:"&Ocirc;",:"&Ocy;",:"&Odblac;","":"&Ofr;",:"&Ograve;",:"&Omacr;",:"&ohm;",:"&Omicron;","":"&Oopf;","":"&ldquo;","":"&lsquo;","":"&Or;","":"&Oscr;",:"&Oslash;",:"&Otilde;","":"&Otimes;",:"&Ouml;","":"&oline;","":"&OverBrace;","":"&tbrk;","":"&OverParenthesis;","":"&part;",:"&Pcy;","":"&Pfr;",:"&Phi;",:"&Pi;","":"&pm;",:"&primes;","":"&Pr;","":"&prec;","":"&preceq;","":"&preccurlyeq;","":"&prsim;","":"&Prime;","":"&prod;","":"&vprop;","":"&Pscr;",:"&Psi;",'"':"&quot;","":"&Qfr;",:"&rationals;","":"&Qscr;","":"&drbkarow;","":"&reg;",:"&Racute;","":"&Rang;","":"&twoheadrightarrow;","":"&Rarrtl;",:"&Rcaron;",:"&Rcedil;",:"&Rcy;",:"&realpart;","":"&niv;","":"&lrhar;","":"&duhar;",:"&Rho;","":"&rangle;","":"&srarr;","":"&rarrb;","":"&rlarr;","":"&rceil;","":"&robrk;","":"&RightDownTeeVector;","":"&downharpoonright;","":"&RightDownVectorBar;","":"&rfloor;","":"&vdash;","":"&mapsto;","":"&RightTeeVector;","":"&vrtri;","":"&RightTriangleBar;","":"&trianglerighteq;","":"&RightUpDownVector;","":"&RightUpTeeVector;","":"&upharpoonright;","":"&RightUpVectorBar;","":"&rightharpoonup;","":"&RightVectorBar;",:"&reals;","":"&RoundImplies;","":"&rAarr;",:"&realine;","":"&rsh;","":"&RuleDelayed;",:"&SHCHcy;",:"&SHcy;",:"&SOFTcy;",:"&Sacute;","":"&Sc;",:"&Scaron;",:"&Scedil;",:"&Scirc;",:"&Scy;","":"&Sfr;","":"&uparrow;",:"&Sigma;","":"&compfn;","":"&Sopf;","":"&radic;","":"&square;","":"&sqcap;","":"&sqsubset;","":"&sqsubseteq;","":"&sqsupset;","":"&sqsupseteq;","":"&sqcup;","":"&Sscr;","":"&sstarf;","":"&Subset;","":"&subseteq;","":"&succ;","":"&succeq;","":"&succcurlyeq;","":"&succsim;","":"&sum;","":"&Supset;","":"&supset;","":"&supseteq;",:"&THORN;","":"&trade;",:"&TSHcy;",:"&TScy;","	":"&Tab;",:"&Tau;",:"&Tcaron;",:"&Tcedil;",:"&Tcy;","":"&Tfr;","":"&therefore;",:"&Theta;","":"&ThickSpace;","":"&thinsp;","":"&thksim;","":"&simeq;","":"&cong;","":"&thkap;","":"&Topf;","":"&tdot;","":"&Tscr;",:"&Tstrok;",:"&Uacute;","":"&Uarr;","":"&Uarrocir;",:"&Ubrcy;",:"&Ubreve;",:"&Ucirc;",:"&Ucy;",:"&Udblac;","":"&Ufr;",:"&Ugrave;",:"&Umacr;",_:"&lowbar;","":"&UnderBrace;","":"&bbrk;","":"&UnderParenthesis;","":"&xcup;","":"&uplus;",:"&Uogon;","":"&Uopf;","":"&UpArrowBar;","":"&udarr;","":"&varr;","":"&udhar;","":"&perp;","":"&mapstoup;","":"&nwarrow;","":"&nearrow;",:"&upsih;",:"&Upsilon;",:"&Uring;","":"&Uscr;",:"&Utilde;",:"&Uuml;","":"&VDash;","":"&Vbar;",:"&Vcy;","":"&Vdash;","":"&Vdashl;","":"&xvee;","":"&Vert;","":"&smid;","|":"&vert;","":"&VerticalSeparator;","":"&wreath;","":"&hairsp;","":"&Vfr;","":"&Vopf;","":"&Vscr;","":"&Vvdash;",:"&Wcirc;","":"&xwedge;","":"&Wfr;","":"&Wopf;","":"&Wscr;","":"&Xfr;",:"&Xi;","":"&Xopf;","":"&Xscr;",:"&YAcy;",:"&YIcy;",:"&YUcy;",:"&Yacute;",:"&Ycirc;",:"&Ycy;","":"&Yfr;","":"&Yopf;","":"&Yscr;",:"&Yuml;",:"&ZHcy;",:"&Zacute;",:"&Zcaron;",:"&Zcy;",:"&Zdot;",:"&Zeta;",:"&zeetrf;",:"&integers;","":"&Zscr;",:"&aacute;",:"&abreve;","":"&mstpos;","":"&acE;","":"&acd;",:"&acirc;",:"&acy;",:"&aelig;","":"&afr;",:"&agrave;",:"&aleph;",:"&alpha;",:"&amacr;","":"&amalg;","":"&wedge;","":"&andand;","":"&andd;","":"&andslope;","":"&andv;","":"&angle;","":"&ange;","":"&measuredangle;","":"&angmsdaa;","":"&angmsdab;","":"&angmsdac;","":"&angmsdad;","":"&angmsdae;","":"&angmsdaf;","":"&angmsdag;","":"&angmsdah;","":"&angrt;","":"&angrtvb;","":"&angrtvbd;","":"&angsph;","":"&angzarr;",:"&aogon;","":"&aopf;","":"&apE;","":"&apacir;","":"&approxeq;","":"&apid;","'":"&apos;",:"&aring;","":"&ascr;","*":"&midast;",:"&atilde;",:"&auml;","":"&awint;","":"&bNot;","":"&bcong;","":"&bepsi;","":"&bprime;","":"&bsim;","":"&bsime;","":"&barvee;","":"&barwedge;","":"&bbrktbrk;",:"&bcy;","":"&ldquor;","":"&bemptyv;",:"&beta;",:"&beth;","":"&twixt;","":"&bfr;","":"&xcirc;","":"&xodot;","":"&xoplus;","":"&xotime;","":"&xsqcup;","":"&starf;","":"&xdtri;","":"&xutri;","":"&xuplus;","":"&rbarr;","":"&lozf;","":"&utrif;","":"&dtrif;","":"&ltrif;","":"&rtrif;","":"&blank;","":"&blk12;","":"&blk14;","":"&blk34;","":"&block;","=":"&bne;","":"&bnequiv;","":"&bnot;","":"&bopf;","":"&bowtie;","":"&boxDL;","":"&boxDR;","":"&boxDl;","":"&boxDr;","":"&boxH;","":"&boxHD;","":"&boxHU;","":"&boxHd;","":"&boxHu;","":"&boxUL;","":"&boxUR;","":"&boxUl;","":"&boxUr;","":"&boxV;","":"&boxVH;","":"&boxVL;","":"&boxVR;","":"&boxVh;","":"&boxVl;","":"&boxVr;","":"&boxbox;","":"&boxdL;","":"&boxdR;","":"&boxdl;","":"&boxdr;","":"&boxhD;","":"&boxhU;","":"&boxhd;","":"&boxhu;","":"&minusb;","":"&plusb;","":"&timesb;","":"&boxuL;","":"&boxuR;","":"&boxul;","":"&boxur;","":"&boxv;","":"&boxvH;","":"&boxvL;","":"&boxvR;","":"&boxvh;","":"&boxvl;","":"&boxvr;","":"&brvbar;","":"&bscr;","":"&bsemi;","\\":"&bsol;","":"&bsolb;","":"&bsolhsub;","":"&bullet;","":"&bumpE;",:"&cacute;","":"&cap;","":"&capand;","":"&capbrcup;","":"&capcap;","":"&capcup;","":"&capdot;","":"&caps;","":"&caret;","":"&ccaps;",:"&ccaron;",:"&ccedil;",:"&ccirc;","":"&ccups;","":"&ccupssm;",:"&cdot;","":"&cemptyv;","":"&cent;","":"&cfr;",:"&chcy;","":"&checkmark;",:"&chi;","":"&cir;","":"&cirE;","":"&circ;","":"&cire;","":"&olarr;","":"&orarr;","":"&oS;","":"&oast;","":"&ocir;","":"&odash;","":"&cirfnint;","":"&cirmid;","":"&cirscir;","":"&clubsuit;",":":"&colon;",",":"&comma;","@":"&commat;","":"&complement;","":"&congdot;","":"&copf;","":"&copysr;","":"&crarr;","":"&cross;","":"&cscr;","":"&csub;","":"&csube;","":"&csup;","":"&csupe;","":"&ctdot;","":"&cudarrl;","":"&cudarrr;","":"&curlyeqprec;","":"&curlyeqsucc;","":"&curvearrowleft;","":"&cularrp;","":"&cup;","":"&cupbrcap;","":"&cupcap;","":"&cupcup;","":"&cupdot;","":"&cupor;","":"&cups;","":"&curvearrowright;","":"&curarrm;","":"&cuvee;","":"&cuwed;","":"&curren;","":"&cwint;","":"&cylcty;","":"&dHar;","":"&dagger;",:"&daleth;","":"&hyphen;","":"&rBarr;",:"&dcaron;",:"&dcy;","":"&downdownarrows;","":"&eDDot;","":"&deg;",:"&delta;","":"&demptyv;","":"&dfisht;","":"&dfr;","":"&diams;",:"&gammad;","":"&disin;","":"&divide;","":"&divonx;",:"&djcy;","":"&llcorner;","":"&dlcrop;",$:"&dollar;","":"&dopf;","":"&eDot;","":"&minusd;","":"&plusdo;","":"&sdotb;","":"&lrcorner;","":"&drcrop;","":"&dscr;",:"&dscy;","":"&dsol;",:"&dstrok;","":"&dtdot;","":"&triangledown;","":"&dwangle;",:"&dzcy;","":"&dzigrarr;",:"&eacute;","":"&easter;",:"&ecaron;","":"&eqcirc;",:"&ecirc;","":"&eqcolon;",:"&ecy;",:"&edot;","":"&fallingdotseq;","":"&efr;","":"&eg;",:"&egrave;","":"&eqslantgtr;","":"&egsdot;","":"&el;","":"&elinters;",:"&ell;","":"&eqslantless;","":"&elsdot;",:"&emacr;","":"&varnothing;","":"&emsp13;","":"&emsp14;","":"&emsp;",:"&eng;","":"&ensp;",:"&eogon;","":"&eopf;","":"&epar;","":"&eparsl;","":"&eplus;",:"&epsilon;","":"&varepsilon;","=":"&equals;","":"&questeq;","":"&equivDD;","":"&eqvparsl;","":"&risingdotseq;","":"&erarr;",:"&escr;",:"&eta;",:"&eth;",:"&euml;","":"&euro;","!":"&excl;",:"&fcy;","":"&female;",:"&ffilig;",:"&fflig;",:"&ffllig;","":"&ffr;",:"&filig;",fj:"&fjlig;","":"&flat;",:"&fllig;","":"&fltns;",:"&fnof;","":"&fopf;","":"&pitchfork;","":"&forkv;","":"&fpartint;","":"&half;","":"&frac13;","":"&frac14;","":"&frac15;","":"&frac16;","":"&frac18;","":"&frac23;","":"&frac25;","":"&frac34;","":"&frac35;","":"&frac38;","":"&frac45;","":"&frac56;","":"&frac58;","":"&frac78;","":"&frasl;","":"&sfrown;","":"&fscr;","":"&gtreqqless;",:"&gacute;",:"&gamma;","":"&gtrapprox;",:"&gbreve;",:"&gcirc;",:"&gcy;",:"&gdot;","":"&gescc;","":"&gesdot;","":"&gesdoto;","":"&gesdotol;","":"&gesl;","":"&gesles;","":"&gfr;",:"&gimel;",:"&gjcy;","":"&glE;","":"&gla;","":"&glj;","":"&gneqq;","":"&gnapprox;","":"&gneq;","":"&gnsim;","":"&gopf;",:"&gscr;","":"&gsime;","":"&gsiml;","":"&gtcc;","":"&gtcir;","":"&gtrdot;","":"&gtlPar;","":"&gtquest;","":"&gtrarr;","":"&gvnE;",:"&hardcy;","":"&harrcir;","":"&leftrightsquigarrow;",:"&plankv;",:"&hcirc;","":"&heartsuit;","":"&mldr;","":"&hercon;","":"&hfr;","":"&searhk;","":"&swarhk;","":"&hoarr;","":"&homtht;","":"&larrhk;","":"&rarrhk;","":"&hopf;","":"&horbar;","":"&hscr;",:"&hstrok;","":"&hybull;",:"&iacute;",:"&icirc;",:"&icy;",:"&iecy;","":"&iexcl;","":"&ifr;",:"&igrave;","":"&qint;","":"&tint;","":"&iinfin;","":"&iiota;",:"&ijlig;",:"&imacr;",:"&inodot;","":"&imof;",:"&imped;","":"&incare;","":"&infin;","":"&infintie;","":"&intercal;","":"&intlarhk;","":"&iprod;",:"&iocy;",:"&iogon;","":"&iopf;",:"&iota;","":"&iquest;","":"&iscr;","":"&isinE;","":"&isindot;","":"&isins;","":"&isinsv;",:"&itilde;",:"&iukcy;",:"&iuml;",:"&jcirc;",:"&jcy;","":"&jfr;","":"&jmath;","":"&jopf;","":"&jscr;",:"&jsercy;",:"&jukcy;",:"&kappa;",:"&varkappa;",:"&kcedil;",:"&kcy;","":"&kfr;",:"&kgreen;",:"&khcy;",:"&kjcy;","":"&kopf;","":"&kscr;","":"&lAtail;","":"&lBarr;","":"&lesseqqgtr;","":"&lHar;",:"&lacute;","":"&laemptyv;",:"&lambda;","":"&langd;","":"&lessapprox;","":"&laquo;","":"&larrbfs;","":"&larrfs;","":"&looparrowleft;","":"&larrpl;","":"&larrsim;","":"&leftarrowtail;","":"&lat;","":"&latail;","":"&late;","":"&lates;","":"&lbarr;","":"&lbbrk;","{":"&lcub;","[":"&lsqb;","":"&lbrke;","":"&lbrksld;","":"&lbrkslu;",:"&lcaron;",:"&lcedil;",:"&lcy;","":"&ldca;","":"&ldrdhar;","":"&ldrushar;","":"&ldsh;","":"&leq;","":"&llarr;","":"&lthree;","":"&lescc;","":"&lesdot;","":"&lesdoto;","":"&lesdotor;","":"&lesg;","":"&lesges;","":"&ltdot;","":"&lfisht;","":"&lfr;","":"&lgE;","":"&lharul;","":"&lhblk;",:"&ljcy;","":"&llhard;","":"&lltri;",:"&lmidot;","":"&lmoustache;","":"&lneqq;","":"&lnapprox;","":"&lneq;","":"&lnsim;","":"&loang;","":"&loarr;","":"&xmap;","":"&rarrlp;","":"&lopar;","":"&lopf;","":"&loplus;","":"&lotimes;","":"&lowast;","":"&lozenge;","(":"&lpar;","":"&lparlt;","":"&lrhard;","":"&lrm;","":"&lrtri;","":"&lsaquo;","":"&lscr;","":"&lsime;","":"&lsimg;","":"&sbquo;",:"&lstrok;","":"&ltcc;","":"&ltcir;","":"&ltimes;","":"&ltlarr;","":"&ltquest;","":"&ltrPar;","":"&triangleleft;","":"&lurdshar;","":"&luruhar;","":"&lvnE;","":"&mDDot;","":"&strns;","":"&male;","":"&maltese;","":"&marker;","":"&mcomma;",:"&mcy;","":"&mdash;","":"&mfr;","":"&mho;",:"&micro;","":"&midcir;","":"&minus;","":"&minusdu;","":"&mlcp;","":"&models;","":"&mopf;","":"&mscr;",:"&mu;","":"&mumap;","":"&nGg;","":"&nGt;","":"&nlArr;","":"&nhArr;","":"&nLl;","":"&nLt;","":"&nrArr;","":"&nVDash;","":"&nVdash;",:"&nacute;","":"&nang;","":"&napE;","":"&napid;",:"&napos;","":"&natural;","":"&ncap;",:"&ncaron;",:"&ncedil;","":"&ncongdot;","":"&ncup;",:"&ncy;","":"&ndash;","":"&neArr;","":"&nearhk;","":"&nedot;","":"&toea;","":"&nfr;","":"&nleftrightarrow;","":"&nhpar;","":"&nis;","":"&nisd;",:"&njcy;","":"&nleqq;","":"&nleftarrow;","":"&nldr;","":"&nopf;","":"&not;","":"&notinE;","":"&notindot;","":"&notinvb;","":"&notinvc;","":"&notnivb;","":"&notnivc;","":"&nparsl;","":"&npart;","":"&npolint;","":"&nrightarrow;","":"&nrarrc;","":"&nrarrw;","":"&nscr;","":"&nsub;","":"&nsubseteqq;","":"&nsup;","":"&nsupseteqq;",:"&ntilde;",:"&nu;","#":"&num;","":"&numero;","":"&numsp;","":"&nvDash;","":"&nvHarr;","":"&nvap;","":"&nvdash;","":"&nvge;",">":"&nvgt;","":"&nvinfin;","":"&nvlArr;","":"&nvle;","<":"&nvlt;","":"&nvltrie;","":"&nvrArr;","":"&nvrtrie;","":"&nvsim;","":"&nwArr;","":"&nwarhk;","":"&nwnear;",:"&oacute;",:"&ocirc;",:"&ocy;",:"&odblac;","":"&odiv;","":"&odsold;",:"&oelig;","":"&ofcir;","":"&ofr;","":"&ogon;",:"&ograve;","":"&ogt;","":"&ohbar;","":"&olcir;","":"&olcross;","":"&olt;",:"&omacr;",:"&omega;",:"&omicron;","":"&omid;","":"&oopf;","":"&opar;","":"&operp;","":"&vee;","":"&ord;",:"&oscr;",:"&ordf;",:"&ordm;","":"&origof;","":"&oror;","":"&orslope;","":"&orv;",:"&oslash;","":"&osol;",:"&otilde;","":"&otimesas;",:"&ouml;","":"&ovbar;","":"&para;","":"&parsim;","":"&parsl;",:"&pcy;","%":"&percnt;",".":"&period;","":"&permil;","":"&pertenk;","":"&pfr;",:"&phi;",:"&varphi;","":"&phone;",:"&pi;",:"&varpi;",:"&planckh;","+":"&plus;","":"&plusacir;","":"&pluscir;","":"&plusdu;","":"&pluse;","":"&plussim;","":"&plustwo;","":"&pointint;","":"&popf;","":"&pound;","":"&prE;","":"&precapprox;","":"&prnap;","":"&prnE;","":"&prnsim;","":"&prime;","":"&profalar;","":"&profline;","":"&profsurf;","":"&prurel;","":"&pscr;",:"&psi;","":"&puncsp;","":"&qfr;","":"&qopf;","":"&qprime;","":"&qscr;","":"&quatint;","?":"&quest;","":"&rAtail;","":"&rHar;","":"&race;",:"&racute;","":"&raemptyv;","":"&rangd;","":"&range;","":"&raquo;","":"&rarrap;","":"&rarrbfs;","":"&rarrc;","":"&rarrfs;","":"&rarrpl;","":"&rarrsim;","":"&rightarrowtail;","":"&rightsquigarrow;","":"&ratail;","":"&ratio;","":"&rbbrk;","}":"&rcub;","]":"&rsqb;","":"&rbrke;","":"&rbrksld;","":"&rbrkslu;",:"&rcaron;",:"&rcedil;",:"&rcy;","":"&rdca;","":"&rdldhar;","":"&rdsh;","":"&rect;","":"&rfisht;","":"&rfr;","":"&rharul;",:"&rho;",:"&varrho;","":"&rrarr;","":"&rthree;","":"&ring;","":"&rlm;","":"&rmoustache;","":"&rnmid;","":"&roang;","":"&roarr;","":"&ropar;","":"&ropf;","":"&roplus;","":"&rotimes;",")":"&rpar;","":"&rpargt;","":"&rppolint;","":"&rsaquo;","":"&rscr;","":"&rtimes;","":"&triangleright;","":"&rtriltri;","":"&ruluhar;","":"&rx;",:"&sacute;","":"&scE;","":"&succapprox;",:"&scaron;",:"&scedil;",:"&scirc;","":"&succneqq;","":"&succnapprox;","":"&succnsim;","":"&scpolint;",:"&scy;","":"&sdot;","":"&sdote;","":"&seArr;","":"&sect;",";":"&semi;","":"&tosa;","":"&sext;","":"&sfr;","":"&sharp;",:"&shchcy;",:"&shcy;","":"&shy;",:"&sigma;",:"&varsigma;","":"&simdot;","":"&simg;","":"&simgE;","":"&siml;","":"&simlE;","":"&simne;","":"&simplus;","":"&simrarr;","":"&smashp;","":"&smeparsl;","":"&ssmile;","":"&smt;","":"&smte;","":"&smtes;",:"&softcy;","/":"&sol;","":"&solb;","":"&solbar;","":"&sopf;","":"&spadesuit;","":"&sqcaps;","":"&sqcups;","":"&sscr;","":"&star;","":"&subset;","":"&subseteqq;","":"&subdot;","":"&subedot;","":"&submult;","":"&subsetneqq;","":"&subsetneq;","":"&subplus;","":"&subrarr;","":"&subsim;","":"&subsub;","":"&subsup;","":"&sung;","":"&sup1;","":"&sup2;","":"&sup3;","":"&supseteqq;","":"&supdot;","":"&supdsub;","":"&supedot;","":"&suphsol;","":"&suphsub;","":"&suplarr;","":"&supmult;","":"&supsetneqq;","":"&supsetneq;","":"&supplus;","":"&supsim;","":"&supsub;","":"&supsup;","":"&swArr;","":"&swnwar;",:"&szlig;","":"&target;",:"&tau;",:"&tcaron;",:"&tcedil;",:"&tcy;","":"&telrec;","":"&tfr;",:"&theta;",:"&vartheta;",:"&thorn;","":"&times;","":"&timesbar;","":"&timesd;","":"&topbot;","":"&topcir;","":"&topf;","":"&topfork;","":"&tprime;","":"&utri;","":"&trie;","":"&tridot;","":"&triminus;","":"&triplus;","":"&trisb;","":"&tritime;","":"&trpezium;","":"&tscr;",:"&tscy;",:"&tshcy;",:"&tstrok;","":"&uHar;",:"&uacute;",:"&ubrcy;",:"&ubreve;",:"&ucirc;",:"&ucy;",:"&udblac;","":"&ufisht;","":"&ufr;",:"&ugrave;","":"&uhblk;","":"&ulcorner;","":"&ulcrop;","":"&ultri;",:"&umacr;",:"&uogon;","":"&uopf;",:"&upsilon;","":"&uuarr;","":"&urcorner;","":"&urcrop;",:"&uring;","":"&urtri;","":"&uscr;","":"&utdot;",:"&utilde;",:"&uuml;","":"&uwangle;","":"&vBar;","":"&vBarv;","":"&vangrt;","":"&vsubne;","":"&vsubnE;","":"&vsupne;","":"&vsupnE;",:"&vcy;","":"&veebar;","":"&veeeq;","":"&vellip;","":"&vfr;","":"&vopf;","":"&vscr;","":"&vzigzag;",:"&wcirc;","":"&wedbar;","":"&wedgeq;","":"&wp;","":"&wfr;","":"&wopf;","":"&wscr;","":"&xfr;",:"&xi;","":"&xnis;","":"&xopf;","":"&xscr;",:"&yacute;",:"&yacy;",:"&ycirc;",:"&ycy;","":"&yen;","":"&yfr;",:"&yicy;","":"&yopf;","":"&yscr;",:"&yucy;",:"&yuml;",:"&zacute;",:"&zcaron;",:"&zcy;",:"&zdot;",:"&zeta;","":"&zfr;",:"&zhcy;","":"&zigrarr;","":"&zopf;","":"&zscr;","":"&zwj;","":"&zwnj;"}}};var zh={};Object.defineProperty(zh,"__esModule",{value:!0});zh.numericUnicodeMap={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376};var vo={};Object.defineProperty(vo,"__esModule",{value:!0});vo.fromCodePoint=String.fromCodePoint||function(n){return String.fromCharCode(Math.floor((n-65536)/1024)+55296,(n-65536)%1024+56320)};vo.getCodePoint=String.prototype.codePointAt?function(n,t){return n.codePointAt(t)}:function(n,t){return(n.charCodeAt(t)-55296)*1024+n.charCodeAt(t+1)-56320+65536};vo.highSurrogateFrom=55296;vo.highSurrogateTo=56319;var so=Sd&&Sd.__assign||function(){return so=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},so.apply(this,arguments)};Object.defineProperty(cu,"__esModule",{value:!0});var ua=uu,$1=zh,pb=vo,qh=so(so({},ua.namedReferences),{all:ua.namedReferences.html5});function gb(n,t,e){t.lastIndex=0;var i=t.exec(n),s;if(i){s="";var r=0;do{r!==i.index&&(s+=n.substring(r,i.index));var o=i[0];s+=e(o),r=i.index+o.length}while(i=t.exec(n));r!==n.length&&(s+=n.substring(r))}else s=n;return s}var V1={specialChars:/[<>'"&]/g,nonAscii:/[<>'"&\u0080-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,nonAsciiPrintable:/[<>'"&\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,nonAsciiPrintableOnly:/[\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,extensive:/[\x01-\x0c\x0e-\x1f\x21-\x2c\x2e-\x2f\x3a-\x40\x5b-\x60\x7b-\x7d\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g},H1={mode:"specialChars",level:"all",numeric:"decimal"};function z1(n,t){var e=t===void 0?H1:t,i=e.mode,s=i===void 0?"specialChars":i,r=e.numeric,o=r===void 0?"decimal":r,a=e.level,l=a===void 0?"all":a;if(!n)return"";var d=V1[s],h=qh[l].characters,g=o==="hexadecimal";return gb(n,d,function(v){var y=h[v];if(!y){var x=v.length>1?pb.getCodePoint(v,0):v.charCodeAt(0);y=(g?"&#x"+x.toString(16):"&#"+x)+";"}return y})}cu.encode=z1;var q1={scope:"body",level:"all"},id=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);/g,sd=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+)[;=]?/g,Pp={xml:{strict:id,attribute:sd,body:ua.bodyRegExps.xml},html4:{strict:id,attribute:sd,body:ua.bodyRegExps.html4},html5:{strict:id,attribute:sd,body:ua.bodyRegExps.html5}},j1=so(so({},Pp),{all:Pp.html5}),mb=String.fromCharCode,U1=mb(65533),W1={level:"all"};function vb(n,t,e,i){var s=n,r=n[n.length-1];if(e&&r==="=")s=n;else if(i&&r!==";")s=n;else{var o=t[n];if(o)s=o;else if(n[0]==="&"&&n[1]==="#"){var a=n[2],l=a=="x"||a=="X"?parseInt(n.substr(3),16):parseInt(n.substr(2));s=l>=1114111?U1:l>65535?pb.fromCodePoint(l):mb($1.numericUnicodeMap[l]||l)}}return s}function Y1(n,t){var e=(t===void 0?W1:t).level,i=e===void 0?"all":e;return n?vb(n,qh[i].entities,!1,!1):""}cu.decodeEntity=Y1;function X1(n,t){var e=t===void 0?q1:t,i=e.level,s=i===void 0?"all":i,r=e.scope,o=r===void 0?s==="xml"?"strict":"body":r;if(!n)return"";var a=j1[s][o],l=qh[s].entities,d=o==="attribute",h=o==="strict";return gb(n,a,function(g){return vb(g,l,d,h)})}var qn=cu.decode=X1;class ai{constructor(t){t.A===void 0?(this.valid=!1,this.A=0,this.B=0,this.C=0,this.D=0,this.E=0,this.F=0):(this.A=parseFloat(t.A),this.B=parseFloat(t.B),this.C=parseFloat(t.C),this.D=parseFloat(t.D),this.E=parseFloat(t.E),this.F=parseFloat(t.F),this.valid=!0,this.AEDB=t.A*t.E-t.D*t.B,this.xCorrection=t.B*t.F-t.E*t.C,this.yCorrection=t.D*t.C-t.A*t.F)}getLat(t,e){return this.D*t+this.E*e+this.F}getLon(t,e){return this.A*t+this.B*e+this.C}getX(t,e){return Math.round((this.E*t-this.B*e+this.xCorrection)/this.AEDB)}getY(t,e){return Math.round((-1*this.D*t+this.A*e+this.yCorrection)/this.AEDB)}}class bb{constructor(t){t!==void 0?(this.mapid=t.mapid,this.name=t.name,this.worldfile=new ai(t),this.localworldfile=new ai({A:t.localA,B:t.localB,C:t.localC,D:t.localD,E:t.localE,F:t.localF}),t.mapfilename===void 0?this.mapfilename=this.mapid+".jpg":this.mapfilename=t.mapfilename):(this.mapid=0,this.name="",this.worldfile=new ai(0),this.localworldfile=new ai(0)),this.xpx=[],this.ypx=[],this.lat=[],this.lon=[]}}class G1{constructor(t){return this.results=[],this.CSVFormat={},this.separator="",this.valid=!0,this.processResultsCSV(t),{results:this.results,valid:this.valid}}extractResult(t,e,i){let l={};l.chipid=0,l.name=(t[0]+" "+t[1]+" "+t[2]).trim(),l.dbid=l.chipid+"__"+l.name,l.starttime=_1(t[3]),l.club=t[2],l.course=e,l.controls=i;const d=this.extractSpklasseSplits(t);l.splits=d.splits,l.codes=d.codes,l.time=ne(d.totaltime),this.results.push(l)}extractSingleCSVResult(t){let e={};e.valid=!0,e.chipid=t[this.CSVFormat.CHIP_IDX],e.name=(t[this.CSVFormat.FIRST_NAME_IDX]+" "+t[this.CSVFormat.SURNAME_IDX]).trim().replace(/"/g,""),e.dbid=t[this.CSVFormat.DB_IDX],e.starttime=Li(t[this.CSVFormat.START_TIME_IDX]),e.time=t[this.CSVFormat.TOTAL_TIME_IDX],e.position=this.getPosition(t),e.status=this.getSICSVStatus(t[this.CSVFormat.NC_IDX],t[this.CSVFormat.CLASSIFIER_IDX]),e.club=t[this.CSVFormat.CLUB_IDX].trim().replace(/"/g,""),e.course=t[this.CSVFormat.COURSE_IDX],e.course===""&&(e.valid=!1),e.controls=parseInt(t[this.CSVFormat.NUM_CONTROLS_IDX],10);const i=this.extractSISplits(t,e.controls);return e.splits=i.splits,e.splits!==""&&(e.splits+=";"),e.splits+=Li(e.time),e.codes=i.codes,e}extractSISplits(t,e){let i=this.CSVFormat.FIRST_SPLIT_IDX,s=this.CSVFormat.FIRST_CODE_IDX,r={};r.splits="",r.codes=[];for(let o=0;o<e;o+=1)t[s]&&(o>0&&(r.splits+=";"),r.codes[o]=t[s],r.splits+=Li(t[i])),i+=this.CSVFormat.STEP,s+=this.CSVFormat.STEP;return{splits:r.splits,codes:r.codes}}extractSpklasseSplits(t){let i="",s=[],r=0;for(let o=0;o<t.length-4;o+=1)o>0&&(i+=";"),s[o]="X",r+=Li(t[o+4]),i+=r;return{splits:i,codes:s,totaltime:r}}getCSVFormat(t){const e=["si card","database id","surname","first name","nc","start","time","classifier","city","short","course","course controls","pl","start punch","control1","punch1","control2"];let i=[];const s=t.split(this.separator).map(function(o){return o.toLowerCase()});let r=!1;for(let o=0;o<e.length;o+=1){r=!1;for(let a=0;a<s.length;a+=1){if(s[a]===e[o]){i[o]=a,r=!0;break}if(e[o]==="si card"&&(s[a]==="chipno"||s[a]==="sicard"||s[a]==="database id")){i[o]=a,r=!0;break}if(e[o]==="nc"&&s[a]==="classifier"){i[o]=a,r=!0;break}if(e[o]==="city"&&s[a]==="club"){i[o]=a,r=!0;break}if(e[o]==="pl"&&s[a]==="place"){i[o]=a,r=!0;break}}if(!r)break}r||(i=[1,2,3,4,8,9,11,12,15,18,39,42,43,44,46,47,48]),this.setCSVFormat(i)}getPosition(t){let e=parseInt(t[this.CSVFormat.POSITION_IDX],10);return isNaN(e)&&(e=""),e}getSICSVStatus(t,e){return t==="0"||t===""||t==="N"||t==="n"?e===""||e==="0"?"ok":"nok":"nc"}processCSVResults(t){for(let e=1;e<t.length;e+=1){const i=t[e].split(this.separator);if(i.length>=this.CSVFormat.FIRST_SPLIT_IDX){let s=this.extractSingleCSVResult(i);s.valid&&(delete s.valid,this.results.push(s))}}}processResultsCSV(t){const e=t.split(/[\r\n|\n]+/),i=e[0].split(",").length-1,s=e[0].split(";").length-1;i>s?this.separator=",":this.separator=";",e[0].split(this.separator).length===2?this.processSpklasseCSVResults(e):(this.getCSVFormat(e[0]),this.processCSVResults(e))}processSpklasseCSVResults(t){let s=[],r="",o=0;for(let a=0;a<t.length;a+=1)s=t[a].split(this.separator),s.length===2?(r=s[0],o=parseInt(s[1],10)):this.extractResult(s,r,o)}setCSVFormat(t){this.CSVFormat.CHIP_IDX=t[0],this.CSVFormat.DB_IDX=t[1],this.CSVFormat.SURNAME_IDX=t[2],this.CSVFormat.FIRST_NAME_IDX=t[3],this.CSVFormat.NC_IDX=t[4],this.CSVFormat.START_TIME_IDX=t[5],this.CSVFormat.TOTAL_TIME_IDX=t[6],this.CSVFormat.CLASSIFIER_IDX=t[7],this.CSVFormat.CLUB_IDX=t[8],this.CSVFormat.CLASS_IDX=t[9],this.CSVFormat.COURSE_IDX=t[10],this.CSVFormat.NUM_CONTROLS_IDX=t[11],this.CSVFormat.POSITION_IDX=t[12],this.CSVFormat.START_PUNCH_IDX=t[13],this.CSVFormat.FIRST_CODE_IDX=t[14],this.CSVFormat.FIRST_SPLIT_IDX=t[15],this.CSVFormat.STEP=t[16]-t[14]}}class K1{constructor(t){return this.results=[],this.valid=!0,this.processIOFV2Results(t),{results:this.results,valid:this.valid}}extractIOFV2Results(t,e){for(let i=0;i<t.length;i+=1){e.status=$d(t[i].getElementsByTagName("CompetitorStatus"),"value",""),e.position=this.getPosition(t[i].getElementsByTagName("ResultPosition")),e.chipid=Nn(t[i].getElementsByTagName("CCardId"),0),e.time=this.getTime(t[i].getElementsByTagName("Time")),e.starttime=this.getStartFinishTimeAsSecs(t[i].getElementsByTagName("StartTime")),e.splits="",e.codes=[];const s=t[i].getElementsByTagName("SplitTime");e.controls=s.length,this.extractIOFV2Splits(s,e);const r=this.getStartFinishTimeAsSecs(t[i].getElementsByTagName("FinishTime"));e.splits+=Math.max(r-e.starttime,0)}}extractIOFV2Splits(t,e){for(let i=0;i<t.length;i+=1){i>0&&(e.splits+=";");const s=t[i].getElementsByTagName("Time");s.length>0?(e.splits+=Li(s[0].textContent),e.codes[i]=Nn(t[i].getElementsByTagName("ControlCode"),"")):(e.splits+=0,e.codes[i]="")}e.splits+=";"}getDBID(t,e){return t.length===0?e:(t=t[0].textContent.replace(/[\n\r]/g,"").trim(),t||e)}getName(t){return(t.getElementsByTagName("Given")[0].textContent+" "+t.getElementsByTagName("Family")[0].textContent).replace(/[\n\r]/g,"").trim()}getPosition(t){return t.length>0?parseInt(t[0].textContent,10):""}getStartFinishTimeAsSecs(t){if(t.length>0){const e=t[0].getElementsByTagName("Clock")[0].textContent;return Li(e)}return 0}getTime(t){return t.length>0?t[0].textContent.replace(/[\n\r]/g,""):""}processIOFV2Results(t){try{const e=t.getElementsByTagName("ClassResult");for(let i=0;i<e.length;i+=1){const s=e[i].getElementsByTagName("ClassShortName")[0].textContent,r=e[i].getElementsByTagName("PersonResult");for(let o=0;o<r.length;o+=1){let a={};a.course=s,a.name=this.getName(r[o]),a.dbid=this.getDBID(r[o].getElementsByTagName("PersonId"),o),a.club=Nn(r[o].getElementsByTagName("ShortName"),"");const l=r[o].getElementsByTagName("Result");this.extractIOFV2Results(l,a),a.status!=="DidNotStart"&&this.results.push(a)}}}catch(e){this.valid=!1,bt("XML parse error","Error processing XML file. Error is : "+e.message);return}}}class J1{constructor(t){return this.results=[],this.valid=!0,this.processIOFV3Results(t),{results:this.results,valid:this.valid}}extractIOFV3Results(t,e){for(let i=0;i<t.length;i+=1){e.chipid=Nn(t[i].getElementsByTagName("ControlCard"),0),e.position=Nn(t[i].getElementsByTagName("Position"),""),e.position==="0"&&(e.position=""),e.status=Nn(t[i].getElementsByTagName("Status"),""),e.time=this.getTotalTimeAsSeconds(t[i].getElementsByTagName("Time")),e.starttime=this.getStartFinishTimeAsSeconds(Nn(t[i].getElementsByTagName("StartTime"),0)),e.splits="",e.codes=[];const s=t[i].getElementsByTagName("SplitTime");this.extractIOFV3Splits(s,e);const r=this.getStartFinishTimeAsSeconds(Nn(t[i].getElementsByTagName("FinishTime"),0));r>0?e.splits+=r-e.starttime:e.splits+=0}}extractIOFV3Splits(t,e){let i=[];for(let s=0;s<t.length;s+=1)t[s].attributes.length===0?(e.splits+=Nn(t[s].getElementsByTagName("Time"),0),i.push(Nn(t[s].getElementsByTagName("ControlCode"),"X"+s)),e.splits+=";"):t[s].getAttribute("status")==="Missing"&&(e.splits+="0",i.push(Nn(t[s].getElementsByTagName("ControlCode"),"X"+s)),e.splits+=";");e.codes=i,e.controls=e.codes.length}getClub(t){return t.length>0&&t[0].getElementsByTagName("Name")[0]?t[0].getElementsByTagName("Name")[0].textContent:""}getID(t,e){if(t.length>0){let i=t[0].textContent;return i.replace(/[\n\r]/g,""),i.trim()}return e}getStartFinishTimeAsSeconds(t){return t.length>=19?Li(t.substr(11,8)):0}getTotalTimeAsSeconds(t){if(t.length>0&&t[0].textContent){const e=parseInt(t[0].textContent,10);return ne(e)}return"00:00"}processIOFV3Results(t){try{const e=t.getElementsByTagName("ClassResult");for(let i=0;i<e.length;i+=1){const r=e[i].getElementsByTagName("Class")[0].getElementsByTagName("Name")[0].textContent,o=e[i].getElementsByTagName("PersonResult");for(let a=0;a<o.length;a+=1){let l={};l.course=r;const d=o[a].getElementsByTagName("Given")[0].textContent+" "+o[a].getElementsByTagName("Family")[0].textContent;l.name=d.replace(/[\n\r]/g,"").trim(),l.dbid=this.getID(o[a].getElementsByTagName("Id"),a),l.club=this.getClub(o[a].getElementsByTagName("Organisation"));const h=o[a].getElementsByTagName("Result");this.extractIOFV3Results(h,l),l.status!=="DidNotStart"&&this.results.push(l)}}}catch(e){this.valid=!1,bt("XML parse error","Error processing XML file. Error is : "+e.message);return}}}class Z1{constructor(t,e){this.results=[],this.resultCourses=[],this.valid=!0;const i=this.processResults(t,e);return this.results=i.results,this.valid=i.valid,this.getCoursesFromResults(),{results:this.results,resultCourses:this.resultCourses,valid:this.valid}}getCoursesFromResults(){for(let t=0;t<this.results.length;t+=1){let e=!1;for(let i=0;i<this.resultCourses.length;i+=1)if(this.resultCourses[i].course===this.results[t].course){e=!0;break}e||this.resultCourses.push({course:this.results[t].course,courseid:F.DO_NOT_SAVE_COURSE})}}processResults(t,e){switch(e){case"CSV":return new G1(t.target.result);case"XML":return this.processResultsXML(t.target.result);default:return bt("File type error","Results file type is not recognised. Please select a valid file."),{results:[],valid:!1}}}processResultsXML(t){let e="",i;try{if(i=new DOMParser().parseFromString(t,"text/xml"),i.getElementsByTagName("ResultList").length===0)return bt("XML file error","File is not a valid XML results file. ResultList element missing."),{results:[],valid:!1};e=$d(i.getElementsByTagName("IOFVersion"),"version",""),e===""&&(e=$d(i.getElementsByTagName("ResultList"),"iofVersion",""))}catch{return bt("XML file error","File is not a valid XML results file."),{results:[],valid:!1}}switch(e){case"2.0.3":return new K1(i);case"3.0":return new J1(i);default:return bt("XML file error","Invalid IOF file format. Version "+e+" not supported."),{results:[],valid:!1}}}}class Q1{constructor(t){this.x="",this.y=t,this.name=null,this.password=null}setDetails(t,e){const i=/...../;this.name=document.getElementById(t).value;const s=i.test(this.name);this.password=document.getElementById(e).value;const r=i.test(this.password);return s&&r}alterString(t,e){let i="";for(let s=0;s<t.length;s+=1)i+=t.charAt(s)+e.charAt(s);return i}encodeUser(){return{x:this.alterString(this.name+this.password,this.y),y:this.y}}}let On=null,Ze=new bb,jh=new F1,Fi=null,Ur=null,da=!1,Xa=!0,kt=null,Vt=[],kn=[],du=!1,Wn=!1,Ac=!1,Ga=!1,bo=!1,$n={},se=[],ss=[],cn=[],rc,kc,Uh="";const Hd=["UTF-8","ISO-8859-1","windows-1251"];let oc=[],Wr=0,zd=!1,Ka=!1,Wh=!1,Pe={x:null,y:null},li=[],Ne={height:0,width:0},Js=new ai(0),yb=new ai(0),ha=null,Oi=[],Yh=null,hu=null;const xb="e.g. 1|1|6,60|15,60";function tA(n,t){let e;kt.controls.length===0?e="S"+(kt.controls.length+1):e="X"+(kt.controls.length+1),kt.addControl(e,n,t),kt.displayAllControls(),$n.codes.push(e),$n.x.push(n),$n.y.push(t)}function eA(n,t,e){if(Ka||e===F.RIGHT_CLICK)D.translate(t.x-n.x,t.y-n.y);else if(Ga=!0,Pe.x!==null){const i=(t.x-Pe.x)/(n.x-Pe.x),s=(t.y-Pe.y)/(n.y-Pe.y);if(isFinite(i)&&isFinite(s))for(let r=0;r<kt.controls.length;r+=1){const o=kt.controls[r].oldX-Pe.x,a=kt.controls[r].oldY-Pe.y;kt.controls[r].x=o*i+Pe.x,kt.controls[r].y=a*s+Pe.y}}else{const i=t.x-n.x,s=t.y-n.y;for(let r=0;r<kt.controls.length;r+=1)kt.controls[r].x=kt.controls[r].oldX+i,kt.controls[r].y=kt.controls[r].oldY+s}}function nA(n){const t=dk(n.target.result);if(t===0||zd){QA(n);return}if(oc[Wr]=t,Wr+=1,Wr===Hd.length){let e=99999;for(let i=0;i<Hd.length;i+=1)e>oc[i]&&(Wr=i,e=oc[i]);zd=!0}Cb()}function iA(){let n={};n.body="Are you sure you want to add this map?",n.title="Confirm new map",n.classes="rg2-confirm-add-map-dialog",n.doText="Add map",n.onDo=vA,mi(n)}function sA(n){n.preventDefault();const t=vk();if(t!=="OK"){bt("Event set-up incomplete",t+" Please enter all necessary information and make sure controls are aligned before creating the event.");return}let e={};e.body="Are you sure you want to create this event?",e.title="Confirm event creation",e.classes="rg2-confirm-create-event-dialog",e.doText="Create event",e.onDo=dA,mi(e)}function rA(){const n=document.getElementById("rg2-edit-event-selected").value;let t={};t.body="Event "+n+" will be deleted. Are you sure?",t.title="Confirm event delete",t.classes="rg2-confirm-delete-event-dialog",t.doText="Delete event",t.onDo=hA,mi(t)}function oA(){let n={};n.body="This route will be permanently deleted. Are you sure?",n.title="Confirm route delete",n.classes="rg2-confirm-route-delete-dialog",n.doText="Delete route",n.onDo=fA,mi(n)}function aA(){const n=document.querySelectorAll(".unused-map input[type=checkbox]:checked");let t=[];for(let i of n){i.checked&&t.push(parseInt(i.dataset.mapId,10));for(let s=0;s<Oi.length;s+=1)t.indexOf(Oi[s].mapid)>-1?Oi[s].delete=!0:Oi[s].delete=!1}if(t.length===0){bt("Warning","No maps selected.");return}const e={};e.body="Selected maps will be deleted. Are you sure?",e.title="Confirm map deletion",e.doText="Delete maps",e.onDo=pA,mi(e)}function lA(){let n={};n.body=`Are you sure you want to update ${document.getElementById("rg2-edit-event-name").value}?`,n.title="Confirm event update",n.doText="Update event",n.onDo=mA,mi(n)}function _b(n){try{const t=jh.getGeorefSystem(n);if(Ne=vs(),!Js.valid||Ne.width===0||t.name==="none")throw"Do not georeference";Tl.defs(t.name,t.params);const e=new Tl.Proj(t.name),i=new Tl.Proj("EPSG:4326"),s=[0,Ne.width,Ne.width,0],r=[0,Ne.height,0,Ne.height];let o=[],a=[];for(let h=0;h<4;h+=1)o[h]=Js.getLon(s[h],r[h]),a[h]=Js.getLat(s[h],r[h]);Ze.xpx.length=0,Ze.ypx.length=0,Ze.lat.length=0,Ze.lon.length=0;let l=[];for(let h=0;h<4;h+=1){let g={};g.x=o[h],g.y=a[h],l.push(g);const v=Tl(e,i,l[h]);Ze.xpx.push(s[h]),Ze.ypx.push(r[h]),Ze.lat.push(v.y),Ze.lon.push(v.x)}let d={};d.C=l[0].x,d.F=l[0].y,d.A=(l[2].x-d.C)/s[2],d.B=(l[3].x-d.C)/r[3],d.D=(l[2].y-d.F)/s[2],d.E=(l[3].y-d.F)/r[3],Ze.worldfile=new ai(d),Bp()}catch{Ze.worldfile=new ai(0),Bp();return}}function Eb(){for(let n=0;n<kt.controls.length;n+=1)kt.controls[n].oldX=kt.controls[n].x,kt.controls[n].oldY=kt.controls[n].y}function cA(n,t){let e=-1;for(let s=0;s<Vt.length;s+=1)if(Vt[s].name===n){e=s;break}if(e===-1&&kn.length>0){for(let s=0;s<kn.length;s+=1)if(kn[s].className===n){for(let r=0;r<Vt.length;r+=1)if(Vt[r].name===kn[s].course){e=r;break}break}}let i=`<select id='rg2-alloc-${t}' class="form-control form-control-sm">`;i+=`<option value="${F.DO_NOT_SAVE_COURSE}"${e===-1?" selected":""}>Do not save</option>`;for(let s=0;s<Vt.length;s+=1)i+=`<option value="${s}"${e===s?" selected":""}>${Tb(Vt[s].name)}</option>`;return i+="</select >",i}function Xh(){if(!Xa){cn.length=0;for(let n=0;n<Vt.length;n+=1)cn.push({courseid:Vt[n].courseid,course:Vt[n].name})}}function fu(){let n="";if(Vt.length&&cn.length){n='<div class="fw-bold">Results</div><div class="fw-bold">Course</div>';for(let t=0;t<cn.length;t+=1)n+=`<div>${cn[t].course}</div>`,n+=`<div>${cA(cn[t].course,t)}</div>`;document.getElementById("rg2-course-allocations").innerHTML=n}}function wb(n,t){let e={};e.body=t,e.title=n,e.doText="Ok",e.onDo=()=>{},mi(e,!1)}function Sb(n){let t="<div class='title'>ID</div><div class='title'>Name</div><div><i class='bi-trash'></i></div>";if(n.length===0)t+="<div></div><div>None found.</div><div></div>",document.getElementById("btn-delete-unused-maps").setAttribute("disabled","");else{for(let e=0;e<n.length;e+=1)t+="<div>"+n[e].mapid+"</div>",t+="<div>"+n[e].name+"</div>",t+="<div class='unused-map'><input type='checkbox' data-map-id="+n[e].mapid+"></div>";document.getElementById("btn-delete-unused-maps").removeAttribute("disabled")}document.getElementById("rg2-unused-maps").innerHTML=t}function uA(){const n={type:"addmap"};Ze.localworldfile=Js;const t={...Ze,...On.encodeUser()};gi(JSON.stringify(t),n,$A,"Map save failed",_s)}function dA(){const n={...SA(),...On.encodeUser()},t={type:"createevent"};gi(JSON.stringify(n),t,RA,"Event creation failed",_s)}function hA(){const n=document.getElementById("rg2-edit-event-selected").value,t={type:"deleteevent",id:n};gi(JSON.stringify(On.encodeUser()),t,NA(n),"Event deletion failed",_s)}function fA(){const n=document.getElementById("rg2-edit-event-selected").value,t=document.getElementById("rg2-route-selected").value,e={type:"deleteroute",id:n,routeid:t};gi(JSON.stringify(On.encodeUser()),e,zA(t),"Route delete failed",_s)}function pA(){let n=On.encodeUser();n.maps=Oi.filter(e=>e.delete===!0).map(e=>e.mapid);const t={type:"deleteunusedmaps"};gi(JSON.stringify(n),t,qA,"Map deletion failed",_s)}function Gh(){ru({type:"maps"},HA,"Events request failed")}function gA(){const n={type:"login"};gi(JSON.stringify(On.encodeUser()),n,FA,"Login failed",_s)}function mA(){const n=document.getElementById("rg2-edit-event-selected").value;let t=On.encodeUser();t.comments=document.getElementById("rg2-edit-event-comments").value,t.locked=document.getElementById("chk-edit-read-only").checked,t.name=document.getElementById("rg2-edit-event-name").value,t.type=document.getElementById("rg2-edit-event-level").value,t.eventdate=hu.getDate("yyyy-mm-dd"),t.club=document.getElementById("rg2-edit-club-name").value;let e=document.getElementById("rg2-edit-exclude").value.trim();e===xb&&(e=""),t.exclude=e;const i={type:"editevent",id:n};gi(JSON.stringify(t),i,BA(n),"Event update failed",_s)}function vA(){const n=On.encodeUser();let t=new FormData;t.append(rc.name,rc),t.append("name",rc.name),t.append("x",n.x),t.append("y",n.y),gi(t,{type:"uploadmapfile",headers:{"Content-Type":"multipart/form-data"}},VA,"Map upload failed",_s)}function bA(){if(Wn&&kt.controls.length>0){kt.drawControls(!0);const n=Ya();Pe.x!==null&&(D.lineWidth=n.overprintWidth,D.strokeStyle=F.HANDLE_COLOUR,D.fillStyle=F.HANDLE_COLOUR,D.globalAlpha=1,D.beginPath(),D.arc(Pe.x,Pe.y,F.HANDLE_DOT_RADIUS,0,2*Math.PI,!1),D.fill(),D.beginPath(),D.arc(Pe.x,Pe.y,2*F.HANDLE_DOT_RADIUS,0,2*Math.PI,!1),D.stroke())}}function yA(){document.querySelector("#rg2-info-panel-tab-headers li").remove(),document.querySelector("#rg2-manage-login-tab-body").remove(),document.getElementById(F.TAB_CREATE).classList.remove("d-none"),document.getElementById(F.TAB_CREATE).click(),document.getElementById(F.TAB_EDIT).classList.remove("d-none"),document.getElementById(F.TAB_MAP).classList.remove("d-none"),document.getElementById(F.TAB_DELETE_MAP).classList.remove("d-none"),Gh(),sk(),document.getElementById("rg2-select-event-level").innerHTML=Rp(),document.getElementById("rg2-edit-event-level").innerHTML=Rp(),document.getElementById("rg2-georef-type").innerHTML=jh.getGeorefDropdown(),document.getElementById("rg2-select-map").addEventListener("change",n=>{Fi=parseInt(n.target.value,10),Fi!==F.INVALID_MAP_ID?Of(rg2Config.maps_url+"/"+li[Fi].mapfilename):(Wn=!1,Ne.width=0,Ne.height=0)}),Yh=new Pf(document.getElementById("rg2-select-event-date"),{buttonClass:"btn",autohide:!0,format:"yyyy-mm-dd"}),hu=new Pf(document.getElementById("rg2-edit-event-date"),{buttonClass:"btn",autohide:!0,format:"yyyy-mm-dd"}),document.getElementById("rg2-map-name").addEventListener("change",function(){lk()}),document.getElementById("rg2-new-course-name").addEventListener("change",function(){ok()}),document.getElementById("rg2-edit-event-selected").addEventListener("change",n=>{Ja(parseInt(n.target.value,10))}),document.getElementById("rg2-georef-type").addEventListener("change",n=>{ak(parseInt(n.target.value,10))})}function Tb(n){let t="";if(kn&&kn.length>0&&du)for(let e=0;e<kn.length;e+=1){const i=kn[e].course;let s="";i===n&&(t!==""&&(t+=", "),s=kn[e].className,s=s.replace(/ /g,""),s=s.replace(/-/g,""),t+=s)}return t!==""?n+": "+t:n}function xA(){if(du)for(let n=0;n<Vt.length;n+=1)Vt[n].name=Tb(Vt[n].name)}function _A(){const n=parseInt(document.getElementById("rg2-edit-event-selected").value,10),t=Sf(n);document.getElementById("rg2-edit-event-name").value=qn(t.name),document.getElementById("rg2-edit-club-name").value=qn(t.club),hu.setDate(t.date),document.getElementById("rg2-edit-event-level").value=t.rawtype,document.getElementById("rg2-edit-event-comments").value=qn(t.comment),Na()?document.getElementById("rg2-exclude-info").classList.add("d-none"):(document.getElementById("rg2-edit-exclude").value=t.exclude,document.getElementById("rg2-exclude-info").classList.remove("d-none")),document.getElementById("chk-edit-read-only").checked=t.locked,document.getElementById("rg2-route-selected").innerHTML=MA(t.id)}function EA(n){document.getElementById("rg2-edit-event-selected").innerHTML=IA(n),li.length>0&&(Ab(li),Sb(Oi))}function wA(){ss.length=0;let n;for(let t=0;t<se.length;t+=1){let e=se[t].codes;for(let i=0;i<Vt.length;i+=1)if(Vt[i].courseid===se[t].courseid){n=Vt[i];break}e.unshift(n.codes[0]),e.push(n.codes[n.codes.length-1]),se[t].variantid=PA(se[t].codes,se[t].courseid)}}function Ab(n){Oi.length=0;for(let t=0;t<n.length;t+=1)if(!VP(n[t].mapid)){const e={};e.mapid=n[t].mapid,e.name=n[t].name,e.name===""&&(e.name="(None)"),e.delete=!1,Oi.push(e)}}function Kh(){let n=!1;if(Wn&&kt.controls.length>0){const t=TA();if(Ac&&(t.maxX<0||t.minX>Ne.width||t.minY>Ne.height||t.maxY<0?bt("Course file problem","Your course file does not match the map co-ordinates. Please check you have selected the correct file."):n=!0),n)Ka=!0,Ga=!0,document.getElementById("chk-move-map-and-controls").checked=!0;else{let e=.8;for(let i=0;i<kt.controls.length;i+=1)kt.controls[i].x=(kt.controls[i].x-t.minX)*(Ne.width/t.xRange)*e+Ne.width*(1-e)*.5,kt.controls[i].y=Ne.height-(kt.controls[i].y-t.minY)*(Ne.height/t.yRange)*e-Ne.height*(1-e)*.5}Eb(),kt.displayAllControls()}}function SA(){let n=On.encodeUser();if(n.name=document.getElementById("rg2-event-name").value,n.mapid=li[Fi].mapid,n.eventdate=Yh.getDate("yyyy-mm-dd"),n.comments=document.getElementById("rg2-enter-event-comments").value,n.locked=document.getElementById("chk-read-only").checked,n.club=document.getElementById("rg2-select-club-name").value,Xa?da?n.format=F.FORMAT_SCORE_EVENT:n.format=F.FORMAT_NORMAL:da?n.format=F.FORMAT_SCORE_EVENT_NO_RESULTS:n.format=F.FORMAT_NORMAL_NO_RESULTS,n.level=document.getElementById("rg2-select-event-level").value,bo&&(Vt.push($n),Xh()),rk(),KA(),xA(),ik(),da&&(wA(),n.variants=ss.slice(0)),n.courses=Vt.slice(0),Wh?n.results=se.slice(0).sort(ck):n.results=se.slice(0),n.format===F.FORMAT_NORMAL)for(let t=0;t<n.results.length;t+=1)(n.results[t].splits.match(/;/g)||[]).length===AA(n.courses,n.results[t].courseid)+1&&(n.results[t].splits=n.results[t].splits.substring(0,n.results[t].splits.lastIndexOf(";")));for(let t=0;t<n.results.length;t+=1)delete n.results[t].codes,delete n.results[t].chipid,delete n.results[t].club;return n}function TA(){let n={};n.minX=kt.controls[0].x,n.maxX=kt.controls[0].x,n.minY=kt.controls[0].y,n.maxY=kt.controls[0].y;for(let t=1;t<kt.controls.length;t+=1)n.maxX=Math.max(n.maxX,kt.controls[t].x),n.maxY=Math.max(n.maxY,kt.controls[t].y),n.minX=Math.min(n.minX,kt.controls[t].x),n.minY=Math.min(n.minY,kt.controls[t].y);return n.xRange=n.maxX-n.minX,n.yRange=n.maxY-n.minY,n}function AA(n,t){for(let e=0;e<n.length;e+=1)if(n[e].courseid===t)return n[e].controlcount;return 0}function kb(n){let t={x:0,y:0};for(let e=0;e<kt.controls.length;e+=1)if(kt.controls[e].code===n)return t.x=Math.round(kt.controls[e].x),t.y=Math.round(kt.controls[e].y),t;return t}function kA(n){for(let t=0;t<cn.length;t+=1)if(cn[t].course===n)return cn[t].courseid;return 0}function DA(){let n='<div class="new-courses-table">';if(Vt.length){n+=`<div>${W("Course")}</div><div>${W("Name")}</div><div>${W("Controls")}</div>`;for(let t=0;t<Vt.length;t+=1)n+=`<div>${t+1}</div><div>${Vt[t].name}</div><div>${Vt[t].codes.length-2}</div>`}return n+="</div>",n}function CA(n){for(let t=0;t<Vt.length;t+=1)if(Vt[t].courseid===n)return Vt[t].name;return 0}function IA(n){let t=ps(null,"No event selected",!0);for(let e=n.length-1;e>-1;e-=1)t+=ps(n[e].kartatid,n[e].kartatid+": "+n[e].date+": "+qn(n[e].name));return t}function Rp(){let n="";const t=["Select level","Training","Local","Regional","National","International"],e=["X","T","L","R","N","I"];for(let i=0;i<t.length;i+=1)n+=ps(e[i],t[i],i===0);return n}function LA(n){let t=ps(F.INVALID_MAP_ID,"Select map",!0);for(let e=n.length-1;e>-1;e-=1)t+=ps(e,n[e].mapid+": "+qn(n[e].name));return t}function OA(){let n="";if(se.length){n='<div class="new-results-table">';let t=0,e=null;for(let i=0;i<se.length;i+=1)se[i].course!==e&&(e!==null&&(n+=`<div>${t}</div>`,t=0),n+=`<div>${se[i].course}</div><div>${se[i].name}</div><div>${se[i].time}</div>`,e=se[i].course),t+=1;n+=`<div>${t}</div></div>`}else n="No valid results found.";return n}function MA(n){const t=Hk();let e=ps("undefined","Select route");for(let i=0;i<t.length;i+=1)e+=ps(t[i].resultid,t[i].resultid+": "+qn(t[i].name)+" on "+qn(t[i].coursename));return e}function PA(n,t){let e=[],i=[],s=0;for(let r=0;r<ss.length;r+=1)if(ss[r].codes.length===n.length){let o=!0;for(let a=0;a<n.length;a+=1)if(ss[r].codes[a]!==n[a]){o=!1;break}if(o){s=r+1;break}}if(s===0){s=ss.length+1;for(let r=0;r<n.length;r+=1){const o=kb(n[r]);e.push(o.x),i.push(o.y)}ss.push({x:e,y:i,id:s,courseid:t,name:"Variant "+s,codes:n})}return s}function RA(n){n.ok?(bt("Event created",document.getElementById("rg2-event-name").value+" has been added with id "+n.newid+"."),window.open(rg2Config.api_url.replace("rg2api.php","")+"#"+n.newid),xo(),Ja()):bt("Save failed",n.status_msg+" Failed to create event. Please try again.")}const NA=n=>t=>{t.ok?(bt("Event deleted","Event "+n+"has been deleted."),xo(),Ja(),document.getElementById("rg2-edit-event-selected").replaceChildren()):bt("Delete failed",t.status_msg+". Event "+n+" delete failed. Please try again.")},BA=n=>t=>{t.ok?(bt("Event updated","Event "+n+" has been updated."),Eu(null),Tf(),xo(),Ja()):bt("Update failed",t.status_msg+". Event update failed. Please try again.")};function _s(n){On.y=n}function FA(n){n.ok?yA():bt("Login failed","User name or password incorrect. Please try again.")}function $A(n){n.ok?(bt("Map added",n.name+" has been added with id "+n.newid+"."),Gh()):bt("Save failed",n.status_msg+". Failed to save map. Please try again.")}function VA(n){n.ok?uA():bt("Upload failed",n.status_msg+". Failed to upload map. Please try again.")}function HA(n){li.length=0;for(let t=0;t<n.maps.length;t+=1)li.push(new bb(n.maps[t]));document.getElementById("rg2-select-map").innerHTML=LA(li),Ab(li),Sb(Oi)}const zA=n=>t=>{t.ok?(bt("Route deleted","Route "+n+" has been deleted."),Eu(null),Tf(),xo(),Ja()):bt("Delete failed",t.status_msg+". Delete failed for route "+n+". Please try again.")};function qA(n){n.ok?bt("Maps deleted","Selected maps have been deleted."):bt("Delete failed",n.status_msg+". Delete failed. Please try again."),Gh()}function Np(n){return n===0||n==="0"||n==="0:00"||n==="00:00"}function Db(){kt=new Hh,Fi=F.INVALID_MAP_ID,Ur=F.FORMAT_NORMAL,da=!1,Xa=!0,Vt=[],kn=[],du=!1,Wn=!1,Ac=!1,Ga=!1,bo=!1,$n={},se=[],ss=[],cn=[],Ne={height:0,width:0},kc=void 0,Uh="",Ka=!1,Wh=!1,Pe={x:null,y:null}}function jA(){Wr=0,oc=[],zd=!1}function UA(n){On=new Q1(n),ha=ph.map("rg2-world-file-map"),Db(),WA(),document.getElementById("rg2-manager-login-form").addEventListener("submit",t=>{t.preventDefault(),On.setDetails("rg2-user-name","rg2-password")?gA():bt("Login failed","Please enter user name and password of at least five characters")})}function WA(){ph.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(ha),document.getElementById("rg2-world-file-map-container").classList.remove("d-none")}function YA(){Wn&&kt.controls.length>0&&Eb()}function XA(){Wn=!0,Fi!==F.INVALID_MAP_ID&&(Js=li[Fi].localworldfile,yb=li[Fi].worldfile),Ne=vs(),Kh(),wt()}function GA(n,t){if(bo){tA(n,t),Ga=!0;return}Wn&&kt.controls.length>0&&(Pe.x===null?Pe={x:n,y:t}:Pe={x:null,y:null})}function KA(){let n=[],t=1;for(let e=0;e<cn.length;e+=1){let i;if(bo)i=0;else{const s=document.getElementById("rg2-alloc-"+e);s&&(i=parseInt(s.value,10))}i!==void 0&&i!==F.DO_NOT_SAVE_COURSE&&(Vt[i].courseid===0?(Vt[i].courseid=t,n.push(Vt[i]),cn[e].courseid=t,t+=1):cn[e].courseid=Vt[i].courseid)}Vt=n}function JA(n){Ac=!1,Ka=!1,document.getElementById("chk-move-map-and-controls").checked=!1,Pe={x:null,y:null},kt.deleteAllControls();const t=new B1(n,yb,Js);Vt=t.courses,Vt.length>0&&(kt=t.newcontrols,kn=t.mapping,kn.length>0?document.getElementById("chk-enrich-course-names").classList.remove("d-none"):document.getElementById("chk-enrich-course-names").classList.add("d-none"),Ac=t.georeferenced,wb("Course details",DA()),Xh(),fu(),Kh()),wt()}function ZA(n){Of(n.target.result,!0),document.getElementById("rg2-load-map-file").classList.add("is-valid"),Wn=!0,Ne=vs(),Kh(),wt(),document.getElementById("btn-add-map").removeAttribute("disabled")}function QA(n){const t=new Z1(n,Uh);se=t.results,se.length>0&&(cn=t.resultCourses,wb("Result details",OA()),fu())}function tk(n){let t=new FileReader;t.onerror=function(){bt("Course file error","The selected course file could not be read.")},t.onload=function(e){JA(e)},t.readAsText(n.target.files[0])}function ek(n){const t=new FileReader;try{t.readAsText(n.target.files[0])}catch{bt("File read error","Failed to open selected world file.");return}t.onerror=function(){bt("World file error","The selected world file could not be read.")},t.onload=function(e){const s=e.target.result.split(/[\r\n]+/g);Js=new ai({A:s[0],B:s[2],C:s[4],D:s[1],E:s[3],F:s[5]});const r=jh.getDefaultValue();document.getElementById("rg2-georef-type").value=r,_b(r)}}function nk(n){const t=new FileReader;t.onload=function(i){ZA(i)};const e=n.target.files[0].name.substr(-3,3).toUpperCase();e==="JPG"||e==="GIF"?(rc=n.target.files[0],t.readAsDataURL(n.target.files[0])):bt("File type error",n.target.files[0].name+" is not recognised. Only .jpg and .gif files are supported at present.")}function Cb(){let n=new FileReader;n.onerror=function(){bt("Results file error","The selected results file could not be read.")},n.onload=function(t){nA(t)},Ur=kc.name.substr(-3,3).toUpperCase(),Ur==="XML"||Ur==="CSV"?(Uh=Ur,n.readAsText(kc,Hd[Wr])):bt("File type error","Results file type is not recognised. Please select a valid file.")}function ik(){let n=[];for(let t=0;t<se.length;t+=1){const e=kA(se[t].course);e!==F.DO_NOT_SAVE_COURSE&&(se[t].courseid=e,se[t].course=CA(e),se[t].variantid="",n.push(se[t]))}se=n}function sk(){document.getElementById("btn-create-event").addEventListener("click",e=>{sA(e)}),document.getElementById("btn-update-event").addEventListener("click",e=>{lA()}),document.getElementById("btn-delete-route").addEventListener("click",e=>{oA()}),document.getElementById("btn-delete-event").addEventListener("click",e=>{rA()}),document.getElementById("btn-add-map").addEventListener("click",e=>{iA()}),document.getElementById("btn-delete-unused-maps").addEventListener("click",e=>{aA()}),document.getElementById("btn-draw-courses").addEventListener("click",e=>{uk()}),document.getElementById("rg2-load-georef-file").addEventListener("input",e=>{ek(e)}),document.getElementById("rg2-load-map-file").addEventListener("input",e=>{bk(e.target.files[0]),nk(e)});const n=document.getElementById("rg2-load-results-file");n.addEventListener("click",e=>{Wn||(bt("No map loaded","Please load a map file before adding results."),e.preventDefault())}),n.addEventListener("change",e=>{kc=e.target.files[0],jA(),Cb()}),document.getElementById("chk-move-map-and-controls").addEventListener("click",e=>{fk(e.target.checked)}),document.getElementById("chk-no-results").addEventListener("click",e=>{pk(e.target.checked)}),document.getElementById("chk-score-event").addEventListener("click",e=>{gk(e.target.checked)}),document.getElementById("chk-enrich-course-names").addEventListener("click",e=>{hk(e.target.checked)}),document.getElementById("chk-sort-results").addEventListener("click",e=>{mk(e.target.checked)});const t=document.getElementById("rg2-load-course-file");t.addEventListener("click",e=>{Wn||(bt("No map loaded","Please load a map file before adding courses."),e.preventDefault())}),t.addEventListener("change",e=>{tk(e)})}function rk(){for(let n=0;n<Vt.length;n+=1)for(let t=0;t<Vt[n].codes.length;t+=1){const e=kb(Vt[n].codes[t]);Vt[n].x[t]=e.x,Vt[n].y[t]=e.y}}function ok(){const n=document.getElementById("rg2-new-course-name").value;n&&($n.name=n)}function Ja(n){n?el(n):(Db(),document.getElementById("rg2-edit-event-name").value="",document.getElementById("rg2-edit-club-name").value="",hu.setDate(""),document.getElementById("rg2-edit-event-level").value="",document.getElementById("rg2-edit-event-comments").value="",document.getElementById("rg2-edit-exclude").value=xb,document.getElementById("rg2-route-selected").replaceChildren(),document.getElementById("chk-edit-read-only").checked=!1,document.getElementById("rg2-course-allocations").innerHTML="")}function ak(n){n!==0&&_b(n)}function lk(){Ze.name=document.getElementById("rg2-map-name").value,S1("rg2-map-name",n=>/./.test(n))}function ck(n,t){return n.courseid!==t.courseid?n.courseid-t.courseid:n.position!==""&&t.position!==""?n.position-t.position:n.position===""&&t.position!==""?1:n.position!==""&&t.position===""?-1:Np(n.time)&&Np(t.time)?n.name-t.name:n.time-t.time}function uk(){Wn?(bo=!0,Vt.length=0,kt.deleteAllControls(),$n.name="Course",$n.x=[],$n.y=[],$n.codes=[],$n.courseid=0,document.getElementById("rg2-new-course-name").value,document.getElementById("rg2-draw-courses").classList.remove("d-none")):bt("No map selected","Please load a map before drawing courses")}function dk(n){let t=0;for(let e=0;e<n.length;e+=1)n.charCodeAt(e)===65533&&(t+=1);return t}function hk(n){du=n,fu()}function fk(n){Ka=n}function pk(n){Xa=!n,Xh(),fu()}function gk(n){da=n}function mk(n){Wh=n}function Bp(){const n=Ze.lon,t=Ze.lat;let e=[];[3,1,2,0].forEach(function(r){e.push([t[r],n[r]])});const s=ph.polygon(e,{color:"red"});s.addTo(ha),document.getElementById("rg2-world-file-map-container").classList.remove("d-none"),ha.invalidateSize(),ha.fitBounds(s.getBounds())}function vk(){return document.getElementById("rg2-event-name").value===""?"Event name is not valid.":Fi===F.INVALID_MAP_ID?"No map selected.":document.getElementById("rg2-select-club-name").value===""?"Club name is not valid.":Yh.getDate("yyyy-mm-dd")===void 0?"Date is not valid.":document.getElementById("rg2-select-event-level").value==="X"?"Event level is not valid.":Ur?Vt.length===0&&!bo?"No course information. Check your course XML file.":se.length===0&&Xa?"No results information. Check your results file.":Ga?"OK":"Controls have not been adjusted on the map.":"Event format is not valid."}function bk(n){let t=new FileReader;t.onload=function(e){let i=new Image;i.src=e.target.result,i.onload=function(){const s=Math.round(n.size/1024/1024);if(s>F.FILE_SIZE_WARNING||i.height>F.PIXEL_SIZE_WARNING||i.width>F.PIXEL_SIZE_WARNING){let r="The uploaded map file is "+s+"MB ("+i.width;r+=" x "+i.height+"px). It is recommended that you use maps under "+F.FILE_SIZE_WARNING,r+="MB with a maximum dimension of "+F.PIXEL_SIZE_WARNING+"px. Please see the ",r+="<a href='https://github.com/Maprunner/rg2/wiki/Map-files'>RG2 wiki</a> for ",r+="guidance on how to create map files.",bt("Oversized map upload",r)}}},t.readAsDataURL(n)}class Fp{constructor(t,e,i,s,r){this.resultid=t.resultid,this.rawid=this.resultid%F.GPS_RESULT_OFFSET,this.isScoreEvent=e,this.name=qn(t.name).trim(),this.initials=this.getInitials(this.name),this.starttime=t.starttime,this.time=t.time,(this.time==="00"||this.time==="0")&&(this.time=""),this.timeInSecs=t.secs,this.position=t.position,this.status=t.status,this.canDelete=!1,this.showResult=!0,this.token=0,t.comments?this.comments=qn(t.comments):this.comments="",this.coursename=t.coursename,this.coursename===""&&(this.coursename=t.courseid.toString()),this.courseid=t.courseid,this.variant=t.variant,this.splits=this.adjustRawSplits(t.splits),this.isScoreEvent&&(this.scorex=s,this.scorey=r,this.scorecodes=i),this.trackColour=null,this.userColour=null,this.initialiseTrack(t)}addInterpolatedTimes(t,e,i){const s=this.xysecs[t],r=this.xysecs[e]-s,o=i[t],a=i[e]-o;for(let l=t;l<=e;l+=1)this.xysecs[l]=s+Math.round((i[l]-o)*r/a)}addTrack(t){this.trackx=t.x.split(",").map(function(i){return parseInt(i,10)}),this.tracky=t.y.split(",").map(function(i){return parseInt(i,10)});for(let i=1;i<this.trackx.length;i+=1)this.trackx[i]=this.trackx[i-1]+this.trackx[i],this.tracky[i]=this.tracky[i-1]+this.tracky[i];let e;this.isGPSTrack?e=this.expandGPSTrack():this.splits.length===2?e=this.expandTrackWithNoSplits():e=this.expandNormalTrack(),e&&sR(this.courseid)}adjustRawSplits(t){t.splice(0,0,0);for(let e=1;e<t.length;e+=1)t[e]<=0&&(t[e]=t[e-1]);return t[t.length-1]=Math.max(this.timeInSecs,t[t.length-2]),t}calculateTotalTrackLength(){let t=[];t[0]=0;let e=this.trackx[0],i=this.tracky[0];for(let s=1;s<this.trackx.length;s+=1)t[s]=t[s-1]+Math.round(Fe(this.trackx[s],this.tracky[s],e,i)),e=this.trackx[s],i=this.tracky[s];return t}calculateTrackTimes(t){let e=[];e[0]=0;let i=this.getNextValidControl(0),s=t.x[i],r=t.y[i],o=0,a=this.trackx[0],l=this.tracky[0],d=0,h=0,g=0;for(let v=1;v<this.trackx.length;v+=1)if(d=this.trackx[v],h=this.tracky[v],o+=Fe(d,h,a,l),e[v]=Math.round(o),a=d,l=h,s===d&&r===h){if(this.xysecs[v]=this.splits[i],this.addInterpolatedTimes(g,v,e),g=v,i=this.getNextValidControl(i),i===t.x.length){this.hasValidTrack=!0;break}s=t.x[i],r=t.y[i]}}drawScoreCourse(){if(this.displayScoreCourse&&this.scorex.length>1){const t=Ya();D.globalAlpha=F.FULL_INTENSITY;let e=ar(this.scorex[0],this.scorey[0],this.scorex[1],this.scorey[1]);Ye.drawStart(this.scorex[0],this.scorey[0],"",e,t),e=[];for(let s=0;s<this.scorex.length-1;s+=1)e[s]=ar(this.scorex[s],this.scorey[s],this.scorex[s+1],this.scorey[s+1]);const i={from:0,to:this.scorex.length};WP({x:this.scorex,y:this.scorey},e,this.courseid,t,i);for(let s=1;s<this.scorex.length-1;s+=1)Ye.drawSingleControl(this.scorex[s],this.scorey[s],s,Math.PI*.25,t);Ye.drawFinish(this.scorex[this.scorex.length-1],this.scorey[this.scorey.length-1],"",t)}}drawTrack(t){try{let e,i,s;if(this.displayTrack){this.isGPSTrack&&$t.showGPSSpeed&&this.speedColour.length===0&&this.setSpeedColours();let r=0,o=this.xysecs.length;const a=this.splits[t.filterFrom],l=this.splits[t.filterTo];for(let d=0;d<this.xysecs.length;d+=1)if(this.xysecs[d]>=a){r=d;break}for(let d=this.xysecs.length-1;d>=0;d-=1)if(this.xysecs[d]<=l){o=d;break}D.lineWidth=$t.routeWidth,D.strokeStyle=this.trackColour,D.globalAlpha=$t.perCentRouteIntensity/100,D.fillStyle=this.trackColour,D.font="10pt Arial",D.textAlign="left",D.beginPath(),D.moveTo(this.trackx[r],this.tracky[r]),e=this.trackx[r],i=this.tracky[r],s=0;for(let d=r+1;d<=o;d+=1)D.lineTo(this.trackx[d],this.tracky[d]),this.trackx[d]===e&&this.tracky[d]===i?s+=1:s>0&&((!this.isGPSTrack||this.isGPSTrack&&$t.showThreeSeconds)&&D.fillText("+"+3*s,e+5,i+5),s=0),e=this.trackx[d],i=this.tracky[d],this.isGPSTrack&&$t.showGPSSpeed&&(D.strokeStyle=this.speedColour[d],D.stroke(),D.beginPath(),D.moveTo(e,i));D.stroke()}}catch{return}}expandGPSTrack(){for(let t=0;t<this.trackx.length;t+=1)this.xysecs[t]=3*t;return this.speedColour.length=0,this.hasValidTrack=!0,this.hasValidTrack}expandNormalTrack(){this.xysecs.length=0,this.xysecs[0]=0;let t={};return this.isScoreEvent?(t.x=this.scorex,t.y=this.scorey):t=hi(this.courseid),this.calculateTrackTimes(t),this.isScoreEvent&&(this.hasValidTrack=!0),this.hasValidTrack}expandTrackWithNoSplits(){this.xysecs.length=0;const t=this.splits[1];let e=0;this.xysecs[0]=0;const i={};i.x=hi(this.courseid).x,i.y=hi(this.courseid).y;let s=1,r=i.x[s],o=i.y[s],a=i.x[i.x.length-1],l=i.y[i.y.length-1];this.trackx.push(a),this.tracky.push(l);let d=0;const h=this.calculateTotalTrackLength(),g=h[h.length-1];let v=0,y=0,x=!1;for(let E=1;E<this.trackx.length;E+=1)if(v=this.trackx[E],y=this.tracky[E],(v!==this.trackx[0]||y!==this.tracky[0])&&(x=!0),r===v&&o===y&&x){if(e=parseInt(h[E]/g*t,10),this.xysecs[E]=e,this.splits[s]=e,this.addInterpolatedTimes(d,E,h),d=E,s+=1,s===i.x.length){this.hasValidTrack=!0;break}r=i.x[s],o=i.y[s]}return this.hasValidTrack}getColour(t){let e="#";if(t===0)return"#0080ff";if(t<.5)e+="ff";else{const i=parseInt((1-t)*255*2,10);i<16&&(e+="0"),e+=i.toString(16)}if(t>=.5)e+="ff";else{const i=255-parseInt((.5-t)*255*2,10);i<16&&(e+="0"),e+=i.toString(16)}return e+="00",e}getInitials(t){if(t===null)return"??";t=t.replace(/GPS/g,"*");let e="",i=!0;for(let s=0;s<t.length;s+=1)i&&(e+=t.substr(s,1),i=!1),t.charAt(s)===" "&&(i=!0);return e}getNextValidControl(t){for(let e=t+1;e<this.splits.length;e+=1)if(this.splits[e]!==this.splits[e-1])return e;return this.splits.length}initialiseTrack(t){if(this.legpos=[],this.racepos=[],this.hasValidTrack=!1,this.displayTrack=!1,this.displayScoreCourse=!1,this.trackx=[],this.tracky=[],this.speedColour=[],this.xysecs=[],this.resultid>=F.GPS_RESULT_OFFSET){this.isGPSTrack=!0;const e=zk(this.rawid);this.time=e.time,this.splits=e.splits,this.time===F.TIME_NOT_FOUND&&(this.time=t.time)}else this.isGPSTrack=!1}mapSpeedColours(){const t=16.667/$t.maxSpeed,e=16.667/$t.minSpeed,i=3,s=this.speedColour.slice().sort(function(d,h){return d-h}),r=xu();let o=0,a=0;r!==void 0?(o=i*t/r,a=i*e/r):(o=s[s.length-1],a=s[Math.floor(s.length/95)]);const l=o-a;for(let d=0;d<this.speedColour.length;d+=1){let h=Math.max(this.speedColour[d],a);h=Math.min(h,o),this.speedColour[d]=this.getColour((h-a)/l)}}setSpeedColours(){this.speedColour[0]=0;let t=0;for(let e=1;e<this.trackx.length;e+=1){const i=Fe(this.trackx[e],this.tracky[e],this.trackx[e-1],this.tracky[e-1]);this.speedColour[e]=(i+t)/2,t=i}this.mapSpeedColours()}setTrackDisplay(t){this.hasValidTrack&&(t?this.userColour!==null?this.trackColour=this.userColour:this.trackColour=db():this.trackColour=null,this.displayTrack=t)}}let R=[];function yk(n,t){R.length=0;let e=[],i=[],s=[];if(t)for(let r=0;r<n.length;r+=1){let o=n[r].variant;e[o]===void 0&&(e[o]=n[r].scorecodes,i[o]=n[r].scorex,s[o]=n[r].scorey)}for(let r=0;r<n.length;r+=1)if(oR(n[r].courseid)){n[r].resultid>F.GPS_RESULT_OFFSET&&n[r].coursename===""&&(n[r].coursename=hi(n[r].courseid).name);let o;if(t){let a=n[r].variant;o=new Fp(n[r],t,e[a],i[a],s[a])}else o=new Fp(n[r],t);R.push(o)}Jk(),Kk(),tD(),qk(),Yk(t)}function xk(n){for(let t=0;t<n.length;t+=1){let e=n[t].id,i=0;for(;i<R.length;){if(e===R[i].resultid){R[i].addTrack(n[t]);break}i+=1}}}function $p(n){for(let t=0;t<R.length;t+=1)if(R[t].courseid===n&&!p0(t))return!1;return!0}function Vp(){for(let n=0;n<R.length;n+=1)if(R[n].hasValidTrack&&!R[n].displayTrack)return!1;return!0}function _k(n){for(let t=0;t<R.length;t+=1)if(R[t].courseid===n&&R[t].hasValidTrack&&!R[t].displayTrack)return!1;return!0}function Hp(n){for(let t=0;t<R.length;t+=1)if(R[t].courseid===n&&R[t].hasValidTrack&&!p0(t))return!1;return!0}function Ek(n){for(let t=0;t<R.length;t+=1)if(R[t].courseid===n&&R[t].hasValidTrack&&R[t].displayTrack)return!0;return!1}function wk(n){const t=Sf();let e=0;for(let i=0;i<R.length;i+=1)R[i].courseid===n&&(R[i].resultid<F.GPS_RESULT_OFFSET||t.format===F.FORMAT_NO_RESULTS||t.format===F.FORMAT_SCORE_EVENT_NO_RESULTS)&&(e+=1);return e}function Ib(n){let t=document.getElementById("rg2-select-name");if(t.innerHTML="",t.options.add(io(null,W("Select name",""))),n!==void 0){for(let e=0;e<R.length;e+=1)R[e].courseid===n&&R[e].resultid<F.GPS_RESULT_OFFSET&&t.options.add(io(R[e].resultid,R[e].time+" "+R[e].name));t.addEventListener("change",e=>{_P(parseInt(e.target.value,10))}),t.removeAttribute("disabled")}}function Sk(){let n=kk();n=n.replace(/&amp;/g,"&");const t=document.getElementById("rg2-result-table");t.innerHTML=n,Qk(),Pb(),jM();const e=document.querySelectorAll(".resultrow");for(let i of e)i.addEventListener("dblclick",s=>{const r=parseInt(s.currentTarget.dataset.id,10);r&&lh(r)}),i.addEventListener("contextmenu",s=>{const r=parseInt(s.currentTarget.dataset.id,10);r&&lh(r)})}function Tk(){R.length=0}function Ak(n,t){R[n].displayScoreCourse=t}function zp(){for(let n=0;n<R.length;n+=1){let t;R[n].isScoreEvent?t={from:0,to:R[n].scorex.length}:t=nR(R[n].courseid),R[n].drawTrack(t),R[n].drawScoreCourse()}}function kk(){let n=[],t=[];if(R.length===0)return`<p>${W("No results available")}</p>`;let e="",i=0,s=0;jk();for(let r=0;r<R.length;r+=1){const o=R[r];if(!o.showResult)continue;o.courseid!==i&&(n.length>0&&(e+=qp(s,i)+"</table>",t.push(e)),s=0,n.push(Rk(o)),e=`<table class='resulttable' id='table-${o.courseid}'><thead><tr><th>#</th>`,e+=`<th>${W("Name")}</th><th>${W("Time")}</th>`,e+=`<th><i class='bi-pencil'></i></th><th><i class='bi-play-fill'></i></th></tr></thead><tbody class="table-group-divider">`,i=o.courseid),e+=`<tr class="resultrow" data-id="${o.rawid}"><td>${o.position}</td>`,o.comments!==""&&o.comments!==W("Type your comment")?(o.comments=o.comments.replace(/"/g,"&quot;"),e+=`<td title="${o.comments}"><u>${jp(o,r)}</u>`):e+=`<td>${jp(o,r)}`,o.canDelete&&(e+=` <i class='deleteroute bi-trash-fill' data-resultidx=${r}></i>`),e+=`</td><td>${o.time}</td>`;let a="",l="showreplay";o.hasValidTrack&&(s+=1,a=`<input class='showtrack' data-courseid='${i}' data-id='${o.resultid}' type=checkbox name=result></input>`,l+=" showtrackreplay"),e+=`<td>${a}</td>`,e+=`<td><input class="${l}" data-courseid=${i} data-id=${o.resultid} type=checkbox name=replay></input></td></tr>`}e+=`</tbody>${qp(s,i)}</table>`,t.push(e),e='<div class="accordion" id="results-accordion">';for(let r=0;r<t.length;r+=1)e+='<div class="accordion-item">',e+=`<h2 class="accordion-header d-flex" id="header-${r}">`,e+=`<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-${r}" aria-expanded="true" aria-controls="collapse-${r}">`,e+=`${n[r].title}</button>${n[r].check}</h2>`,e+=`<div id="collapse-${r}" class="accordion-collapse collapse" aria-labelledby="header-${r}" data-bs-parent="#rg2-result-tab-body">`,e+=`<div class="accordion-body px-0">${t[r]}</div></div></div>`;return e+="</div>",e}function Dk(n){let t=Math.floor(n/86400)+" days ";return n=n-86400*Math.floor(n/86400),t+=Math.floor(n/3600)+" hours ",n=n-3600*Math.floor(n/3600),t+=Math.floor(n/60)+" minutes ",t+=n-60*Math.floor(n/60)+" seconds",t}function Ck(){let n=[],t=[],e=[],i=[];for(let s=0;s<R.length;s+=1){const r=R[s];if(r.resultid<F.GPS_RESULT_OFFSET){const o=r.courseid;n.indexOf(o)===-1&&(n.push(o),t[o]=[],e[o]=[],i[o]=[]);for(let a=0;a<r.scorecodes.length;a+=1)t[o].indexOf(r.scorecodes[a])===-1&&(t[o].push(r.scorecodes[a]),e[o].push(r.scorex[a]),i[o].push(r.scorey[a]))}}for(let s=0;s<n.length;s+=1){const r=n[s];cR(r,t[r],e[r],i[r])}}function Lb(n){let t=[];for(let e=0;e<R.length;e+=1)R[e].courseid===n&&R[e].resultid===R[e].rawid&&t.push(R[e]);return t}function Ik(n){let t=[];for(let e=0;e<R.length;e+=1)R[e].variant===n&&R[e].resultid===R[e].rawid&&t.push(R[e]);return t}function Lk(n){let t=[];for(let e=0;e<R.length;e+=1)R[e].courseid===n&&t.push(R[e].resultid);return t}function Ok(n){let t=[];for(let e=0;e<R.length;e+=1)R[e].courseid===n&&R[e].hasValidTrack&&t.push(R[e].resultid);return t}function qp(n,t){let e=`<tfoot class="table-group-divider"><tr class='allitemsrow'><td></td><td>${W("Routes")}</td><td></td>`;return n>0?(e+=`<td><input class='allcoursetracks' data-courseid=${t} type=checkbox name=track></input></td>`,e+=`<td><input class='allcoursetracksreplay' data-courseid=${t} type=checkbox name=replay></input></td>`):e+="<td></td><td></td>",e+=`</tr><tr class='allitemsrow'><td></td><td>${W("All")}</td><td></td><td></td>`,e+=`<td><input class='allcoursereplay' data-courseid=${t} type=checkbox name=replay></input></td></tr></tfoot>`,e}function Mk(){let n=!1,t=["<table id='rg2-comments-table' class='table table-sm table-striped table-bordered'>",`<thead><tr><th>${W("Name")}</th><th>${W("Course")}</th>`,`<th>${W("Comments")}</th></tr></thead><tbody class="table-group-divider">`].join("");for(let e=0;e<R.length;e+=1)R[e].comments!==""&&(n=!0,t+=[`<tr><td>${R[e].name}</td><td>${R[e].coursename}</td>`,`<td>${R[e].comments}</td></tr>`].join(""));return n?t+="</tbody></table>":t="",t}function Pk(n){for(let t=0;t<R.length;t+=1)if(R[t].resultid===n)return R[t].courseid}function Rk(n){let t=n.coursename;const e=hi(n.courseid);e&&(t+=e.length===void 0?"":": "+e.length+" km");let i=`<div class="d-flex w-100"><div class="flex-grow-1 runners-table-course-header" data-runners="" data-courseid="${n.courseid}">${t}</div>`,s=`<div class="px-2"><input class='showcourse' data-courseid="${n.courseid}"`;return s+=` type=checkbox name ="course" title='Show course' ></input ></div >`,{title:i,check:s}}function Nk(n){return{id:R[n].resultid,token:R[n].token}}function Bk(){let n=[];for(let t=0;t<R.length;t+=1)if(R[t].displayTrack){let e={};e.trackColour=R[t].trackColour,e.course=QP(R[t].courseid),e.name=R[t].name,e.resultid=R[t].resultid,e.rawid=R[t].rawid,n.push(e)}return n}function Ob(n){for(let t=0;t<R.length;t+=1)if(R[t].resultid===n)return R[t]}function Mb(n){for(let t=0;t<R.length;t+=1)if(R[t].resultid===n)return R[t]}function jp(n,t){let e;return n.rawid===n.resultid?e=n.name:e="<i>"+n.name+"</i>",n.isScoreEvent&&(e=`<input class='showscorecourse' data-courseid=${t} type=checkbox></input> ${e}`),`<div>${e}</div>`}function Fk(n){let t=R.findIndex(e=>e.resultid===n);return t>-1?R[t].displayOrder:n}function $k(){let n={results:0,drawnroutes:0,gpsroutes:0,secs:0};for(let t=0;t<R.length;t+=1){const e=R[t];e.resultid<F.GPS_RESULT_OFFSET&&(n.results+=1,e.time&&(n.secs+=e.splits[e.splits.length-1])),e.hasValidTrack&&(e.resultid<F.GPS_RESULT_OFFSET?n.drawnroutes+=1:n.gpsroutes+=1)}return n.totalroutes=n.drawnroutes+n.gpsroutes,n.results>0?n.percent=(100*n.totalroutes/n.results).toFixed(1):n.percent=0,n.time=Dk(n.secs),n}function Vk(n,t){const e=$k(),i=tR(),s=vs();let r="";if(t){const a=Zy(),l=1e6;r=`. ${W("Map is georeferenced")}: ${parseInt(a.F*l)/l}`,r+=`, ${parseInt(a.C*l)/l}.`}return[`<tr><td>${W("Courses")}</td><td>${i.length}</td></tr>`,`<tr><td>${W("Controls")}</td><td>${n}</td></tr>`,`<tr><td>${W("Results")}</td><td>${e.results}</td></tr>`,`<tr><td>${W("Routes")}</td><td>${e.totalroutes} (${e.percent}%)</td></tr>`,`<tr><td>${W("Drawn routes")}</td><td>${e.drawnroutes}</td></tr>`,`<tr><td>${W("GPS routes")}</td><td>${e.gpsroutes}</td></tr>`,`<tr><td>${W("Total time")}</td><td>${e.time}</td></tr>`,`<tr><td>${W("Map")} ID ${MP()}</td><td>${s.width}  x ${s.height} pixels${r}</td></tr>`].join("")}function Hk(){let n=[];for(let t=0;t<R.length;t+=1)if(R[t].hasValidTrack){let e={};e.id=t,e.resultid=R[t].resultid,e.name=R[t].name,e.time=R[t].time,e.coursename=R[t].coursename,n.push(e)}return n}function zk(n){for(let t=0;t<R.length;t+=1)if(n===R[t].resultid)return{time:R[t].time,splits:R[t].splits};return{time:F.TIME_NOT_FOUND,splits:[]}}function rd(){let n=[];for(let t=0;t<R.length;t+=1){const e=R[t];e.displayTrack&&n.push(e.resultid)}return n}function qk(){let n,t,e=[];for(let i=0;i<R.length;i+=1)if(R[i].courseid!==n&&(n=R[i].courseid,t=hi(n)),t.excludeType===F.EXCLUDED_REAL_SPLITS){e.indexOf(n)===-1&&e.push(n);let s=0;for(let r=1;r<t.exclude.length;r+=1)t.exclude[r]&&(s=s+Math.min(R[i].splits[r]-R[i].splits[r-1],t.allowed[r]));R[i].timeInSecs=Math.max(R[i].splits[R[i].splits.length-1]-s,0),R[i].time=ne(R[i].timeInSecs)}for(let i=0;i<e.length;i+=1){let s=R.filter(a=>a.courseid===e[i]);for(let a=0;a<s.length;a+=1)if(s[a].rawid!==s[a].resultid){let l=s.findIndex(d=>d.resultid===s[a].rawid);l>-1&&(s[a].status=s[l].status)}s.sort(function(a,l){return a.status!=="ok"||a.timeInSecs===0?l.status!=="ok"||l.timeInSecs===0?0:1:l.status!=="ok"||l.timeInSecs===0?-1:a.timeInSecs-l.timeInSecs});let r=0,o=0;for(let a=0;a<s.length;a+=1){if(s[a].status!=="ok"||s[a].timeInSecs===0){s[a].position="";continue}o!==s[a].timeInSecs?(r=r+1,o=s[a].timeInSecs):a>0&&s[a].rawid!==s[a-1].rawid&&(r=r+1),s[a].position=r}for(let a=0;a<s.length;a+=1){let l=R.findIndex(d=>d.resultid===s[a].resultid);l>-1&&(R[l].position=s[a].position,R[l].displayOrder=a)}}}function jk(){R.sort(nD);let n,t=!1;for(let e=0;e<R.length;e+=1)R[e].rawid===n?t&&R[e].hasValidTrack&&(R[e-1].showResult=!1,R[e].position=R[e-1].position,t=!1):(t=!R[e].hasValidTrack,n=R[e].rawid)}function Uk(){for(let n=0;n<R.length;n+=1)R[n].speedColour.length=0}function Wk(n){for(let t=0;t<R.length;t+=1)if(n===R[t].resultid)return!0;return!1}function Yk(n){let t,e;for(let i=0;i<R.length;i+=1){R[i].courseid!==t&&(t=R[i].courseid,e=hi(t)),R[i].legSplits=[],R[i].legSplits[0]=0;let s=0,r=!1;for(let o=1;o<R[i].splits.length;o+=1)R[i].splits[o]-s===0?e.exclude[o]?(R[i].legSplits[o]=R[i].splits[o]-s,s=R[i].splits[o]):(R[i].legSplits[o]=0,r=!0,R[i].lastValidSplit===void 0&&(R[i].lastValidSplit=o-1)):r?(R[i].legSplits[o]=0,s=R[i].splits[o],r=!1):(R[i].legSplits[o]=R[i].splits[o]-s,s=R[i].splits[o]);if(R[i].lastValidSplit===void 0&&(R[i].lastValidSplit=R[i].splits.length-1),!n){const o=iR(R[i].courseid)+2;for(;R[i].splits.length<o;)R[i].splits.push(R[i].splits[R[i].splits.length-1]),R[i].legSplits.push(0)}}}function Xk(n){document.getElementById("rg2-load-progress-label").textContent=W("Saving results",""),n0()>0&&yk(n,Na()),lR(),Na()&&(Ck(),Ye.generateControlList())}function Gk(n){if(document.getElementById("rg2-load-progress-label").textContent=W("Saving routes",""),n0()>0&&xk(n),UP(),Sk(),F.managing())_A();else{if(document.getElementById(F.TAB_COURSES).removeAttribute("disabled"),document.getElementById(F.TAB_RESULTS).removeAttribute("disabled"),Ky()?document.getElementById(F.TAB_DRAW).setAttribute("disabled",""):document.getElementById(F.TAB_DRAW).removeAttribute("disabled"),yo()!==F.TAB_DRAW){const s=P1();document.getElementById(s).click()}const e=M1();for(let s=0;s<e.length;s+=1){let r=new Event("click",{bubbles:!0});const o=document.querySelector(`.showtrack[data-id='${e[s]}']`);o&&(o.checked=!0,o.dispatchEvent(r))}const i=L1();for(let s=0;s<i.length;s+=1){let r=new Event("click",{bubbles:!0});const o=document.querySelector(`.showcourse[data-courseid='${i[s]}']`);o&&(o.checked=!0,o.dispatchEvent(r))}}document.getElementById("rg2-load-progress").classList.add("d-none"),wt()}function Kk(){const n=pr();let t=[];const e=$t.drawnRoutes;for(let i=0;i<e.length;i+=1)e[i].eventid===n&&t.push(e[i]);for(let i=0;i<t.length;i+=1)for(let s=0;s<R.length;s+=1)R[s].resultid===t[i].id&&(R[s].canDelete=!0,R[s].token=t[i].token)}function Pb(){document.getElementById("rg2-result-table").querySelectorAll("#results-accordion .accordion-item").forEach(e=>{const i=e.querySelectorAll(".resulttable tbody tr:not(.d-none)");e.querySelector(".runners-table-course-header").setAttribute("data-runners",i.length)})}function Jk(){for(let n=0;n<R.length;n+=1)R[n].resultid<F.GPS_RESULT_OFFSET?R[n].displayOrder=n:R[n].displayOrder=Fk(R[n].rawid)}function Zk(n,t){for(let e=0;e<R.length;e+=1)R[e].rawid===n&&(R[e].userColour=t,R[e].trackColour=t)}function Qk(){let n=document.getElementById("rg2-result-search");if(R.length===0){n.classList.add("d-none");return}n.innerHTML=`<form class="d-flex pb-2" role="search">
  <input class="form-control mx-2" type="search" aria-label="${W("Search")}">
  <i class="bi-search mx-2"></i>
  </form>`;let t=document.getElementById("rg2-result-table");n.addEventListener("keyup",e=>{const i=e.target.value.toUpperCase(),s=t.querySelectorAll("tbody tr");for(let r=0;r<s.length;r+=1)s[r].innerText.toUpperCase().indexOf(i)>-1?s[r].classList.remove("d-none"):s[r].classList.add("d-none");Pb()})}function Aa(n,t){for(let e=0;e<R.length;e+=1)R[e].resultid===n&&(R[e].displayScoreCourse=t)}function tD(){for(let n=0;n<R.length;n+=1)if(R[n].resultid>=F.GPS_RESULT_OFFSET){const t=Mb(R[n].rawid);t!==void 0&&t.scorex!==void 0&&(R[n].scorex=t.scorex,R[n].scorey=t.scorey,R[n].scorecodes=t.scorecodes)}}function Up(n,t){for(let e=0;e<R.length;e+=1)(R[e].courseid===n||F.DISPLAY_ALL_COURSES===n)&&R[e].setTrackDisplay(t);If()}function eD(n,t){for(let e=0;e<R.length;e+=1)R[e].resultid===parseInt(n,10)&&R[e].setTrackDisplay(t);If()}function nD(n,t){return n.courseid>t.courseid?1:t.courseid>n.courseid?-1:n.rawid===t.rawid?n.resultid-t.resultid:n.displayOrder-t.displayOrder}class Rb{constructor(t){const e=Ob(t);this.name=e.name,this.initials=e.initials,this.resultid=t,this.rawid=e.rawid,this.starttime=e.starttime,this.splits=e.splits,this.trackColour=e.trackColour,this.userColour=e.userColour;let i;e.isScoreEvent?(i={},i.name=e.coursename,i.x=e.scorex,i.y=e.scorey,i.codes=e.scorecodes):i=hi(e.courseid),this.coursename=i.name,this.nextStopTime=F.VERY_HIGH_TIME_IN_SECS,this.x=[],this.y=[],this.cumulativeDistance=[],this.cumulativeDistance[0]=0,this.legTrackDistance=[],this.legTrackDistance[0]=0,this.cumulativeTrackDistance=[],this.cumulativeTrackDistance[0]=0,e.hasValidTrack?this.expandTrack(e.trackx,e.tracky,e.xysecs):this.expandTrack(i.x,i.y,e.splits),this.addTrackDistances(i,e)}addTrackDistances(t,e){const i=this.cumulativeDistance.length-1;if(t.codes!==void 0)if(e.splits.length>1)for(let s=1;s<t.codes.length;s+=1){let r;e.splits[s]<=i?r=e.splits[s]:r=i,this.cumulativeTrackDistance[s]=this.cumulativeDistance[r],this.legTrackDistance[s]=this.cumulativeTrackDistance[s]-this.cumulativeTrackDistance[s-1]}else this.legTrackDistance[1]=this.cumulativeDistance[i],this.cumulativeTrackDistance[1]=this.cumulativeDistance[i]}expandTrack(t,e,i){let s=0,r=0,o=t[0],a=e[0],l=0,d=0;this.x[0]=t[0],this.y[0]=e[0];let h=xu();h===void 0&&(h=1);for(let g=1;g<i.length;g+=1){let v=t[g],y=e[g],x=v-o,E=y-a;d=d+Fe(v,y,o,a)*h;let S=d-l;r=i[g],r===0&&(r=s+1);let C=r-s;for(let P=s+1;P<r;P+=1)this.x[P]=Math.round(o+(P-s)*x/C),this.y[P]=Math.round(a+(P-s)*E/C),this.cumulativeDistance[P]=Math.round(l+(P-s)*S/C);this.x[r]=v,this.y[r]=y,this.cumulativeDistance[r]=Math.round(d),o=v,a=y,l=d,s=r}}}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Za(n){return n+.5|0}const rs=(n,t,e)=>Math.max(Math.min(n,e),t);function na(n){return rs(Za(n*2.55),0,255)}function ds(n){return rs(Za(n*255),0,255)}function Ci(n){return rs(Za(n/2.55)/100,0,1)}function Wp(n){return rs(Za(n*100),0,100)}const An={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},qd=[..."0123456789ABCDEF"],iD=n=>qd[n&15],sD=n=>qd[(n&240)>>4]+qd[n&15],Ml=n=>(n&240)>>4===(n&15),rD=n=>Ml(n.r)&&Ml(n.g)&&Ml(n.b)&&Ml(n.a);function oD(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&An[n[1]]*17,g:255&An[n[2]]*17,b:255&An[n[3]]*17,a:t===5?An[n[4]]*17:255}:(t===7||t===9)&&(e={r:An[n[1]]<<4|An[n[2]],g:An[n[3]]<<4|An[n[4]],b:An[n[5]]<<4|An[n[6]],a:t===9?An[n[7]]<<4|An[n[8]]:255})),e}const aD=(n,t)=>n<255?t(n):"";function lD(n){var t=rD(n)?iD:sD;return n?"#"+t(n.r)+t(n.g)+t(n.b)+aD(n.a,t):void 0}const cD=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Nb(n,t,e){const i=t*Math.min(e,1-e),s=(r,o=(r+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function uD(n,t,e){const i=(s,r=(s+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function dD(n,t,e){const i=Nb(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function hD(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function Jh(n){const e=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(e,i,s),o=Math.min(e,i,s),a=(r+o)/2;let l,d,h;return r!==o&&(h=r-o,d=a>.5?h/(2-r-o):h/(r+o),l=hD(e,i,s,h,r),l=l*60+.5),[l|0,d||0,a]}function Zh(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ds)}function Qh(n,t,e){return Zh(Nb,n,t,e)}function fD(n,t,e){return Zh(dD,n,t,e)}function pD(n,t,e){return Zh(uD,n,t,e)}function Bb(n){return(n%360+360)%360}function gD(n){const t=cD.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?na(+t[5]):ds(+t[5]));const s=Bb(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=fD(s,r,o):t[1]==="hsv"?i=pD(s,r,o):i=Qh(s,r,o),{r:i[0],g:i[1],b:i[2],a:e}}function mD(n,t){var e=Jh(n);e[0]=Bb(e[0]+t),e=Qh(e),n.r=e[0],n.g=e[1],n.b=e[2]}function vD(n){if(!n)return;const t=Jh(n),e=t[0],i=Wp(t[1]),s=Wp(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${Ci(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const Yp={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Xp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function bD(){const n={},t=Object.keys(Xp),e=Object.keys(Yp);let i,s,r,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],s=0;s<e.length;s++)r=e[s],a=a.replace(r,Yp[r]);r=parseInt(Xp[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let Pl;function yD(n){Pl||(Pl=bD(),Pl.transparent=[0,0,0,0]);const t=Pl[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const xD=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function _D(n){const t=xD.exec(n);let e=255,i,s,r;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?na(o):rs(o*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?na(i):rs(i,0,255)),s=255&(t[4]?na(s):rs(s,0,255)),r=255&(t[6]?na(r):rs(r,0,255)),{r:i,g:s,b:r,a:e}}}function ED(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Ci(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const od=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Fr=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function wD(n,t,e){const i=Fr(Ci(n.r)),s=Fr(Ci(n.g)),r=Fr(Ci(n.b));return{r:ds(od(i+e*(Fr(Ci(t.r))-i))),g:ds(od(s+e*(Fr(Ci(t.g))-s))),b:ds(od(r+e*(Fr(Ci(t.b))-r))),a:n.a+e*(t.a-n.a)}}function Rl(n,t,e){if(n){let i=Jh(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Qh(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Fb(n,t){return n&&Object.assign(t||{},n)}function Gp(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ds(n[3]))):(t=Fb(n,{r:0,g:0,b:0,a:1}),t.a=ds(t.a)),t}function SD(n){return n.charAt(0)==="r"?_D(n):gD(n)}class ka{constructor(t){if(t instanceof ka)return t;const e=typeof t;let i;e==="object"?i=Gp(t):e==="string"&&(i=oD(t)||yD(t)||SD(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Fb(this._rgb);return t&&(t.a=Ci(t.a)),t}set rgb(t){this._rgb=Gp(t)}rgbString(){return this._valid?ED(this._rgb):void 0}hexString(){return this._valid?lD(this._rgb):void 0}hslString(){return this._valid?vD(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,l=i.a-s.a,d=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-d,i.r=255&d*i.r+r*s.r+.5,i.g=255&d*i.g+r*s.g+.5,i.b=255&d*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=wD(this._rgb,t._rgb,e)),this}clone(){return new ka(this.rgb)}alpha(t){return this._rgb.a=ds(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Za(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Rl(this._rgb,2,t),this}darken(t){return Rl(this._rgb,2,-t),this}saturate(t){return Rl(this._rgb,1,t),this}desaturate(t){return Rl(this._rgb,1,-t),this}rotate(t){return mD(this._rgb,t),this}}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Ai(){}const TD=(()=>{let n=0;return()=>n++})();function Kt(n){return n===null||typeof n>"u"}function ce(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Yt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function xe(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function mn(n,t){return xe(n)?n:t}function Mt(n,t){return typeof n>"u"?t:n}const AD=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,$b=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function ie(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function ee(n,t,e,i){let s,r,o;if(ce(n))if(r=n.length,i)for(s=r-1;s>=0;s--)t.call(e,n[s],s);else for(s=0;s<r;s++)t.call(e,n[s],s);else if(Yt(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)t.call(e,n[o[s]],o[s])}function Dc(n,t){let e,i,s,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],r=t[e],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Cc(n){if(ce(n))return n.map(Cc);if(Yt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=Cc(n[e[s]]);return t}return n}function Vb(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function kD(n,t,e,i){if(!Vb(n))return;const s=t[n],r=e[n];Yt(s)&&Yt(r)?Da(s,r,i):t[n]=Cc(r)}function Da(n,t,e){const i=ce(t)?t:[t],s=i.length;if(!Yt(n))return n;e=e||{};const r=e.merger||kD;let o;for(let a=0;a<s;++a){if(o=i[a],!Yt(o))continue;const l=Object.keys(o);for(let d=0,h=l.length;d<h;++d)r(l[d],n,o,e)}return n}function fa(n,t){return Da(n,t,{merger:DD})}function DD(n,t,e){if(!Vb(n))return;const i=t[n],s=e[n];Yt(i)&&Yt(s)?fa(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Cc(s))}const Kp={"":n=>n,x:n=>n.x,y:n=>n.y};function CD(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function ID(n){const t=CD(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function gs(n,t){return(Kp[t]||(Kp[t]=ID(t)))(n)}function tf(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Ca=n=>typeof n<"u",ms=n=>typeof n=="function",Jp=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function LD(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const de=Math.PI,ue=2*de,OD=ue+de,Ic=Number.POSITIVE_INFINITY,MD=de/180,Se=de/2,Vs=de/4,Zp=de*2/3,os=Math.log10,di=Math.sign;function pa(n,t,e){return Math.abs(n-t)<e}function Qp(n){const t=Math.round(n);n=pa(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(os(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function PD(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,r)=>s-r).pop(),t}function ro(n){return!isNaN(parseFloat(n))&&isFinite(n)}function RD(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function Hb(n,t,e){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Vn(n){return n*(de/180)}function ef(n){return n*(180/de)}function tg(n){if(!xe(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function zb(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let r=Math.atan2(i,e);return r<-.5*de&&(r+=ue),{angle:r,distance:s}}function jd(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function ND(n,t){return(n-t+OD)%ue-de}function bn(n){return(n%ue+ue)%ue}function Ia(n,t,e,i){const s=bn(n),r=bn(t),o=bn(e),a=bn(r-s),l=bn(o-s),d=bn(s-r),h=bn(s-o);return s===r||s===o||i&&r===o||a>l&&d<h}function Be(n,t,e){return Math.max(t,Math.min(e,n))}function BD(n){return Be(n,-32768,32767)}function Mi(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function nf(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,e(r)?s=r:i=r;return{lo:s,hi:i}}const Pi=(n,t,e,i)=>nf(n,e,i?s=>{const r=n[s][t];return r<e||r===e&&n[s+1][t]===e}:s=>n[s][t]<e),FD=(n,t,e)=>nf(n,e,i=>n[i][t]>=e);function $D(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const qb=["push","pop","shift","splice","unshift"];function VD(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),qb.forEach(e=>{const i="_onData"+tf(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function eg(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(qb.forEach(r=>{delete n[r]}),delete n._chartjs)}function jb(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const Ub=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Wb(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,Ub.call(window,()=>{i=!1,n.apply(t,e)}))}}function HD(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const sf=n=>n==="start"?"left":n==="end"?"right":"center",We=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,zD=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function Yb(n,t,e){const i=t.length;let s=0,r=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:d,max:h,minDefined:g,maxDefined:v}=o.getUserBounds();g&&(s=Be(Math.min(Pi(a,l,d).lo,e?i:Pi(t,l,o.getPixelForValue(d)).lo),0,i-1)),v?r=Be(Math.max(Pi(a,o.axis,h,!0).hi+1,e?0:Pi(t,l,o.getPixelForValue(h),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function Xb(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),r}const Nl=n=>n===0||n===1,ng=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*ue/e)),ig=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*ue/e)+1,ga={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Se)+1,easeOutSine:n=>Math.sin(n*Se),easeInOutSine:n=>-.5*(Math.cos(de*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Nl(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Nl(n)?n:ng(n,.075,.3),easeOutElastic:n=>Nl(n)?n:ig(n,.075,.3),easeInOutElastic(n){return Nl(n)?n:n<.5?.5*ng(n*2,.1125,.45):.5+.5*ig(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-ga.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?ga.easeInBounce(n*2)*.5:ga.easeOutBounce(n*2-1)*.5+.5};function rf(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function sg(n){return rf(n)?n:new ka(n)}function ad(n){return rf(n)?n:new ka(n).saturate(.5).darken(.1).hexString()}const qD=["x","y","borderWidth","radius","tension"],jD=["color","borderColor","backgroundColor"];function UD(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:jD},numbers:{type:"number",properties:qD}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function WD(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const rg=new Map;function YD(n,t){t=t||{};const e=n+JSON.stringify(t);let i=rg.get(e);return i||(i=new Intl.NumberFormat(n,t),rg.set(e,i)),i}function Qa(n,t,e){return YD(t,e).format(n)}const Gb={values(n){return ce(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(e.length>1){const d=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(d<1e-4||d>1e15)&&(s="scientific"),r=XD(n,e)}const o=os(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Qa(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(os(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?Gb.numeric.call(this,n,t,e):""}};function XD(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var pu={formatters:Gb};function GD(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:pu.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const lr=Object.create(null),Ud=Object.create(null);function ma(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const r=e[i];n=n[r]||(n[r]=Object.create(null))}return n}function ld(n,t,e){return typeof t=="string"?Da(ma(n,t),e):Da(ma(n,""),t)}class KD{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>ad(s.backgroundColor),this.hoverBorderColor=(i,s)=>ad(s.borderColor),this.hoverColor=(i,s)=>ad(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ld(this,t,e)}get(t){return ma(this,t)}describe(t,e){return ld(Ud,t,e)}override(t,e){return ld(lr,t,e)}route(t,e,i,s){const r=ma(this,t),o=ma(this,i),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],d=o[s];return Yt(l)?Object.assign({},d,l):Mt(l,d)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var _e=new KD({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[UD,WD,GD]);function JD(n){return!n||Kt(n.size)||Kt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Lc(n,t,e,i,s){let r=t[s];return r||(r=t[s]=n.measureText(s).width,e.push(s)),r>i&&(i=r),i}function ZD(n,t,e,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(s=i.data={},r=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0;const a=e.length;let l,d,h,g,v;for(l=0;l<a;l++)if(g=e[l],g!=null&&!ce(g))o=Lc(n,s,r,o,g);else if(ce(g))for(d=0,h=g.length;d<h;d++)v=g[d],v!=null&&!ce(v)&&(o=Lc(n,s,r,o,v));n.restore();const y=r.length/2;if(y>e.length){for(l=0;l<y;l++)delete s[r[l]];r.splice(0,y)}return o}function Hs(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function og(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function Wd(n,t,e,i){Kb(n,t,e,i,null)}function Kb(n,t,e,i,s){let r,o,a,l,d,h,g,v;const y=t.pointStyle,x=t.rotation,E=t.radius;let S=(x||0)*MD;if(y&&typeof y=="object"&&(r=y.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(S),n.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),n.restore();return}if(!(isNaN(E)||E<=0)){switch(n.beginPath(),y){default:s?n.ellipse(e,i,s/2,E,0,0,ue):n.arc(e,i,E,0,ue),n.closePath();break;case"triangle":h=s?s/2:E,n.moveTo(e+Math.sin(S)*h,i-Math.cos(S)*E),S+=Zp,n.lineTo(e+Math.sin(S)*h,i-Math.cos(S)*E),S+=Zp,n.lineTo(e+Math.sin(S)*h,i-Math.cos(S)*E),n.closePath();break;case"rectRounded":d=E*.516,l=E-d,o=Math.cos(S+Vs)*l,g=Math.cos(S+Vs)*(s?s/2-d:l),a=Math.sin(S+Vs)*l,v=Math.sin(S+Vs)*(s?s/2-d:l),n.arc(e-g,i-a,d,S-de,S-Se),n.arc(e+v,i-o,d,S-Se,S),n.arc(e+g,i+a,d,S,S+Se),n.arc(e-v,i+o,d,S+Se,S+de),n.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,h=s?s/2:l,n.rect(e-h,i-l,2*h,2*l);break}S+=Vs;case"rectRot":g=Math.cos(S)*(s?s/2:E),o=Math.cos(S)*E,a=Math.sin(S)*E,v=Math.sin(S)*(s?s/2:E),n.moveTo(e-g,i-a),n.lineTo(e+v,i-o),n.lineTo(e+g,i+a),n.lineTo(e-v,i+o),n.closePath();break;case"crossRot":S+=Vs;case"cross":g=Math.cos(S)*(s?s/2:E),o=Math.cos(S)*E,a=Math.sin(S)*E,v=Math.sin(S)*(s?s/2:E),n.moveTo(e-g,i-a),n.lineTo(e+g,i+a),n.moveTo(e+v,i-o),n.lineTo(e-v,i+o);break;case"star":g=Math.cos(S)*(s?s/2:E),o=Math.cos(S)*E,a=Math.sin(S)*E,v=Math.sin(S)*(s?s/2:E),n.moveTo(e-g,i-a),n.lineTo(e+g,i+a),n.moveTo(e+v,i-o),n.lineTo(e-v,i+o),S+=Vs,g=Math.cos(S)*(s?s/2:E),o=Math.cos(S)*E,a=Math.sin(S)*E,v=Math.sin(S)*(s?s/2:E),n.moveTo(e-g,i-a),n.lineTo(e+g,i+a),n.moveTo(e+v,i-o),n.lineTo(e-v,i+o);break;case"line":o=s?s/2:Math.cos(S)*E,a=Math.sin(S)*E,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(S)*(s?s/2:E),i+Math.sin(S)*E);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Ri(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function gu(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function mu(n){n.restore()}function QD(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){const r=(t.x+e.x)/2;n.lineTo(r,t.y),n.lineTo(r,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function tC(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function eC(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Kt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function nC(n,t,e,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,d=e+r.actualBoundingBoxDescent,h=s.strikethrough?(l+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function iC(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function cr(n,t,e,i,s,r={}){const o=ce(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,d;for(n.save(),n.font=s.string,eC(n,r),l=0;l<o.length;++l)d=o[l],r.backdrop&&iC(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),Kt(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(d,e,i,r.maxWidth)),n.fillText(d,e,i,r.maxWidth),nC(n,e,i,d,r),i+=Number(s.lineHeight);n.restore()}function La(n,t){const{x:e,y:i,w:s,h:r,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*de,de,!0),n.lineTo(e,i+r-o.bottomLeft),n.arc(e+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,de,Se,!0),n.lineTo(e+s-o.bottomRight,i+r),n.arc(e+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Se,0,!0),n.lineTo(e+s,i+o.topRight),n.arc(e+s-o.topRight,i+o.topRight,o.topRight,0,-Se,!0),n.lineTo(e+o.topLeft,i)}const sC=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,rC=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function oC(n,t){const e=(""+n).match(sC);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const aC=n=>+n||0;function of(n,t){const e={},i=Yt(t),s=i?Object.keys(t):t,r=Yt(n)?i?o=>Mt(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of s)e[o]=aC(r(o));return e}function Jb(n){return of(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Zs(n){return of(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ke(n){const t=Jb(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Re(n,t){n=n||{},t=t||_e.font;let e=Mt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Mt(n.style,t.style);i&&!(""+i).match(rC)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Mt(n.family,t.family),lineHeight:oC(Mt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Mt(n.weight,t.weight),string:""};return s.string=JD(s),s}function ia(n,t,e,i){let s=!0,r,o,a;for(r=0,o=n.length;r<o;++r)if(a=n[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),e!==void 0&&ce(a)&&(a=a[e%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function lC(n,t,e){const{min:i,max:s}=n,r=$b(t,(s-i)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Es(n,t){return Object.assign(Object.create(n),t)}function af(n,t=[""],e,i,s=()=>n[0]){const r=e||n;typeof i>"u"&&(i=ey("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>af([a,...n],t,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return Qb(a,l,()=>mC(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return lg(a).includes(l)},ownKeys(a){return lg(a)},set(a,l,d){const h=a._storage||(a._storage=s());return a[l]=h[l]=d,delete a._keys,!0}})}function oo(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Zb(n,i),setContext:r=>oo(n,r,e,i),override:r=>oo(n.override(r),t,e,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return Qb(r,o,()=>uC(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function Zb(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:ms(e)?e:()=>e,isIndexable:ms(i)?i:()=>i}}const cC=(n,t)=>n?n+tf(t):t,lf=(n,t)=>Yt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Qb(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function uC(n,t,e){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[t];return ms(a)&&o.isScriptable(t)&&(a=dC(t,a,n,e)),ce(a)&&a.length&&(a=hC(t,a,n,o.isIndexable)),lf(t,a)&&(a=oo(a,s,r&&r[t],o)),a}function dC(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(r,o||i);return a.delete(n),lf(n,l)&&(l=cf(s._scopes,s,n,l)),l}function hC(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&i(n))return t[r.index%t.length];if(Yt(t[0])){const l=t,d=s._scopes.filter(h=>h!==l);t=[];for(const h of l){const g=cf(d,s,n,h);t.push(oo(g,r,o&&o[n],a))}}return t}function ty(n,t,e){return ms(n)?n(t,e):n}const fC=(n,t)=>n===!0?t:typeof n=="string"?gs(t,n):void 0;function pC(n,t,e,i,s){for(const r of t){const o=fC(e,r);if(o){n.add(o);const a=ty(o._fallback,e,s);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function cf(n,t,e,i){const s=t._rootScopes,r=ty(t._fallback,e,i),o=[...n,...s],a=new Set;a.add(i);let l=ag(a,o,e,r||e,i);return l===null||typeof r<"u"&&r!==e&&(l=ag(a,o,r,l,i),l===null)?!1:af(Array.from(a),[""],s,r,()=>gC(t,e,i))}function ag(n,t,e,i,s){for(;e;)e=pC(n,t,e,i,s);return e}function gC(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return ce(s)&&Yt(e)?e:s||{}}function mC(n,t,e,i){let s;for(const r of t)if(s=ey(cC(r,n),e),typeof s<"u")return lf(n,s)?cf(e,i,n,s):s}function ey(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function lg(n){let t=n._keys;return t||(t=n._keys=vC(n._scopes)),t}function vC(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function ny(n,t,e,i){const{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i);let a,l,d,h;for(a=0,l=i;a<l;++a)d=a+e,h=t[d],o[a]={r:s.parse(gs(h,r),d)};return o}const bC=Number.EPSILON||1e-14,ao=(n,t)=>t<n.length&&!n[t].skip&&n[t],iy=n=>n==="x"?"y":"x";function yC(n,t,e,i){const s=n.skip?t:n,r=t,o=e.skip?t:e,a=jd(r,s),l=jd(o,r);let d=a/(a+l),h=l/(a+l);d=isNaN(d)?0:d,h=isNaN(h)?0:h;const g=i*d,v=i*h;return{previous:{x:r.x-g*(o.x-s.x),y:r.y-g*(o.y-s.y)},next:{x:r.x+v*(o.x-s.x),y:r.y+v*(o.y-s.y)}}}function xC(n,t,e){const i=n.length;let s,r,o,a,l,d=ao(n,0);for(let h=0;h<i-1;++h)if(l=d,d=ao(n,h+1),!(!l||!d)){if(pa(t[h],0,bC)){e[h]=e[h+1]=0;continue}s=e[h]/t[h],r=e[h+1]/t[h],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[h]=s*o*t[h],e[h+1]=r*o*t[h])}}function _C(n,t,e="x"){const i=iy(e),s=n.length;let r,o,a,l=ao(n,0);for(let d=0;d<s;++d){if(o=a,a=l,l=ao(n,d+1),!a)continue;const h=a[e],g=a[i];o&&(r=(h-o[e])/3,a[`cp1${e}`]=h-r,a[`cp1${i}`]=g-r*t[d]),l&&(r=(l[e]-h)/3,a[`cp2${e}`]=h+r,a[`cp2${i}`]=g+r*t[d])}}function EC(n,t="x"){const e=iy(t),i=n.length,s=Array(i).fill(0),r=Array(i);let o,a,l,d=ao(n,0);for(o=0;o<i;++o)if(a=l,l=d,d=ao(n,o+1),!!l){if(d){const h=d[t]-l[t];s[o]=h!==0?(d[e]-l[e])/h:0}r[o]=a?d?di(s[o-1])!==di(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}xC(n,s,r),_C(n,r,t)}function Bl(n,t,e){return Math.max(Math.min(n,e),t)}function wC(n,t){let e,i,s,r,o,a=Ri(n[0],t);for(e=0,i=n.length;e<i;++e)o=r,r=a,a=e<i-1&&Ri(n[e+1],t),r&&(s=n[e],o&&(s.cp1x=Bl(s.cp1x,t.left,t.right),s.cp1y=Bl(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=Bl(s.cp2x,t.left,t.right),s.cp2y=Bl(s.cp2y,t.top,t.bottom)))}function SC(n,t,e,i,s){let r,o,a,l;if(t.spanGaps&&(n=n.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")EC(n,s);else{let d=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=yC(d,a,n[Math.min(r+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,d=a}t.capBezierPoints&&wC(n,e)}function uf(){return typeof window<"u"&&typeof document<"u"}function df(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Oc(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const vu=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function TC(n,t){return vu(n).getPropertyValue(t)}const AC=["top","right","bottom","left"];function Qs(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const r=AC[s];i[r]=parseFloat(n[t+"-"+r+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const kC=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function DC(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(kC(s,r,n.target))a=s,l=r;else{const d=t.getBoundingClientRect();a=i.clientX-d.left,l=i.clientY-d.top,o=!0}return{x:a,y:l,box:o}}function js(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=vu(e),r=s.boxSizing==="border-box",o=Qs(s,"padding"),a=Qs(s,"border","width"),{x:l,y:d,box:h}=DC(n,e),g=o.left+(h&&a.left),v=o.top+(h&&a.top);let{width:y,height:x}=t;return r&&(y-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-g)/y*e.width/i),y:Math.round((d-v)/x*e.height/i)}}function CC(n,t,e){let i,s;if(t===void 0||e===void 0){const r=n&&df(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{const o=r.getBoundingClientRect(),a=vu(r),l=Qs(a,"border","width"),d=Qs(a,"padding");t=o.width-d.width-l.width,e=o.height-d.height-l.height,i=Oc(a.maxWidth,r,"clientWidth"),s=Oc(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:i||Ic,maxHeight:s||Ic}}const Fl=n=>Math.round(n*10)/10;function IC(n,t,e,i){const s=vu(n),r=Qs(s,"margin"),o=Oc(s.maxWidth,n,"clientWidth")||Ic,a=Oc(s.maxHeight,n,"clientHeight")||Ic,l=CC(n,t,e);let{width:d,height:h}=l;if(s.boxSizing==="content-box"){const v=Qs(s,"border","width"),y=Qs(s,"padding");d-=y.width+v.width,h-=y.height+v.height}return d=Math.max(0,d-r.width),h=Math.max(0,i?d/i:h-r.height),d=Fl(Math.min(d,o,l.maxWidth)),h=Fl(Math.min(h,a,l.maxHeight)),d&&!h&&(h=Fl(d/2)),(t!==void 0||e!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,d=Fl(Math.floor(h*i))),{width:d,height:h}}function cg(n,t,e){const i=t||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const LC=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};uf()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function ug(n,t){const e=TC(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Us(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function OC(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function MC(n,t,e,i){const s={x:n.cp2x,y:n.cp2y},r={x:t.cp1x,y:t.cp1y},o=Us(n,s,e),a=Us(s,r,e),l=Us(r,t,e),d=Us(o,a,e),h=Us(a,l,e);return Us(d,h,e)}const PC=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},RC=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Yr(n,t,e){return n?PC(t,e):RC()}function sy(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function ry(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function oy(n){return n==="angle"?{between:Ia,compare:ND,normalize:bn}:{between:Mi,compare:(t,e)=>t-e,normalize:t=>t}}function dg({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function NC(n,t,e){const{property:i,start:s,end:r}=e,{between:o,normalize:a}=oy(i),l=t.length;let{start:d,end:h,loop:g}=n,v,y;if(g){for(d+=l,h+=l,v=0,y=l;v<y&&o(a(t[d%l][i]),s,r);++v)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:g,style:n.style}}function ay(n,t,e){if(!e)return[n];const{property:i,start:s,end:r}=e,o=t.length,{compare:a,between:l,normalize:d}=oy(i),{start:h,end:g,loop:v,style:y}=NC(n,t,e),x=[];let E=!1,S=null,C,P,V;const $=()=>l(s,V,C)&&a(s,V)!==0,H=()=>a(r,C)===0||l(r,V,C),Y=()=>E||$(),I=()=>!E||H();for(let G=h,it=h;G<=g;++G)P=t[G%o],!P.skip&&(C=d(P[i]),C!==V&&(E=l(C,s,r),S===null&&Y()&&(S=a(C,s)===0?G:it),S!==null&&I()&&(x.push(dg({start:S,end:G,loop:v,count:o,style:y})),S=null),it=G,V=C));return S!==null&&x.push(dg({start:S,end:g,loop:v,count:o,style:y})),x}function ly(n,t){const e=[],i=n.segments;for(let s=0;s<i.length;s++){const r=ay(i[s],n.points,t);r.length&&e.push(...r)}return e}function BC(n,t,e,i){let s=0,r=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(r+=s);r>s&&n[r%t].skip;)r--;return r%=t,{start:s,end:r}}function FC(n,t,e,i){const s=n.length,r=[];let o=t,a=n[t],l;for(l=t+1;l<=e;++l){const d=n[l%s];d.skip||d.stop?a.skip||(i=!1,r.push({start:t%s,end:(l-1)%s,loop:i}),t=o=d.stop?l:null):(o=l,a.skip&&(t=l)),a=d}return o!==null&&r.push({start:t%s,end:o%s,loop:i}),r}function $C(n,t){const e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];const r=!!n._loop,{start:o,end:a}=BC(e,s,r,i);if(i===!0)return hg(n,[{start:o,end:a,loop:r}],e,t);const l=a<o?a+s:a,d=!!n._fullLoop&&o===0&&a===s-1;return hg(n,FC(e,o,l,d),e,t)}function hg(n,t,e,i){return!i||!i.setContext||!e?t:VC(n,t,e,i)}function VC(n,t,e,i){const s=n._chart.getContext(),r=fg(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,d=[];let h=r,g=t[0].start,v=g;function y(x,E,S,C){const P=a?-1:1;if(x!==E){for(x+=l;e[x%l].skip;)x-=P;for(;e[E%l].skip;)E+=P;x%l!==E%l&&(d.push({start:x%l,end:E%l,loop:S,style:C}),h=C,g=E%l)}}for(const x of t){g=a?g:x.start;let E=e[g%l],S;for(v=g+1;v<=x.end;v++){const C=e[v%l];S=fg(i.setContext(Es(s,{type:"segment",p0:E,p1:C,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),HC(S,h)&&y(g,v-1,x.loop,h),E=C,h=S}g<v-1&&y(g,v-1,x.loop,h)}return d}function fg(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function HC(n,t){if(!t)return!1;const e=[],i=function(s,r){return rf(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(t,i)}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class zC{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const r=e.listeners[s],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Ub.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ki=new zC;const pg="transparent",qC={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=sg(n||pg),s=i.valid&&sg(t||pg);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class jC{constructor(t,e,i,s){const r=e[i];s=ia([t.to,s,r,t.from]);const o=ia([t.from,r,s]);this._active=!0,this._fn=t.fn||qC[t.type||typeof o],this._easing=ga[t.easing]||ga.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=ia([t.to,e,s,t.from]),this._from=ia([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||e<i),!this._active){this._target[s]=a,this._notify(!0);return}if(e<0){this._target[s]=r;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class cy{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Yt(t))return;const e=Object.keys(_e.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!Yt(r))return;const o={};for(const a of e)o[a]=r[a];(ce(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){const i=e.options,s=WC(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&UC(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const d=o[l];if(d.charAt(0)==="$")continue;if(d==="options"){s.push(...this._animateOptions(t,e));continue}const h=e[d];let g=r[d];const v=i.get(d);if(g)if(v&&g.active()){g.update(v,h,a);continue}else g.cancel();if(!v||!v.duration){t[d]=h;continue}r[d]=g=new jC(v,t,d,h),s.push(g)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return ki.add(this._chart,i),!0}}function UC(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function WC(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function gg(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function YC(n,t,e){if(e===!1)return!1;const i=gg(n,e),s=gg(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function XC(n){let t,e,i,s;return Yt(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function uy(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)e.push(i[s].index);return e}function mg(n,t,e,i={}){const s=n.keys,r=i.mode==="single";let o,a,l,d;if(t!==null){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===e){if(i.all)continue;break}d=n.values[l],xe(d)&&(r||t===0||di(t)===di(d))&&(t+=d)}return t}}function GC(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,d,h;for(l=0,d=o.length;l<d;++l)h=o[l],a[l]={[s]:h,[r]:n[h]};return a}function vg(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function KC(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function JC(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function ZC(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function bg(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(e&&r>0||!e&&r<0)return s.index}return null}function yg(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,d=o.axis,h=KC(r,o,i),g=t.length;let v;for(let y=0;y<g;++y){const x=t[y],{[l]:E,[d]:S}=x,C=x._stacks||(x._stacks={});v=C[d]=ZC(s,h,E),v[a]=S,v._top=bg(v,o,!0,i.type),v._bottom=bg(v,o,!1,i.type);const P=v._visualValues||(v._visualValues={});P[a]=S}}function cd(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function QC(n,t){return Es(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function tI(n,t,e){return Es(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Go(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const r=s._stacks;if(!r||r[i]===void 0||r[i][e]===void 0)return;delete r[i][e],r[i]._visualValues!==void 0&&r[i]._visualValues[e]!==void 0&&delete r[i]._visualValues[e]}}}const ud=n=>n==="reset"||n==="none",xg=(n,t)=>t?n:Object.assign({},n),eI=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:uy(e,!0),values:null};class jn{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=vg(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Go(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(g,v,y,x)=>g==="x"?v:g==="r"?x:y,r=e.xAxisID=Mt(i.xAxisID,cd(t,"x")),o=e.yAxisID=Mt(i.yAxisID,cd(t,"y")),a=e.rAxisID=Mt(i.rAxisID,cd(t,"r")),l=e.indexAxis,d=e.iAxisID=s(l,r,o,a),h=e.vAxisID=s(l,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(d),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&eg(this._data,this),t._stacked&&Go(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Yt(e)){const s=this._cachedMeta;this._data=GC(e,s)}else if(i!==e){if(i){eg(i,this);const s=this._cachedMeta;Go(s),s._parsed=[]}e&&Object.isExtensible(e)&&VD(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=e._stacked;e._stacked=vg(e.vScale,e),e.stack!==i.stack&&(s=!0,Go(e),e.stack=i.stack),this._resyncElements(t),(s||r!==e._stacked)&&yg(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=t===0&&e===s.length?!0:i._sorted,d=t>0&&i._parsed[t-1],h,g,v;if(this._parsing===!1)i._parsed=s,i._sorted=!0,v=s;else{ce(s[t])?v=this.parseArrayData(i,s,t,e):Yt(s[t])?v=this.parseObjectData(i,s,t,e):v=this.parsePrimitiveData(i,s,t,e);const y=()=>g[a]===null||d&&g[a]<d[a];for(h=0;h<e;++h)i._parsed[h+t]=g=v[h],l&&(y()&&(l=!1),d=g);i._sorted=l}o&&yg(this,v)}parsePrimitiveData(t,e,i,s){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,d=r.getLabels(),h=r===o,g=new Array(s);let v,y,x;for(v=0,y=s;v<y;++v)x=v+i,g[v]={[a]:h||r.parse(d[x],x),[l]:o.parse(e[x],x)};return g}parseArrayData(t,e,i,s){const{xScale:r,yScale:o}=t,a=new Array(s);let l,d,h,g;for(l=0,d=s;l<d;++l)h=l+i,g=e[h],a[l]={x:r.parse(g[0],h),y:o.parse(g[1],h)};return a}parseObjectData(t,e,i,s){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,d=new Array(s);let h,g,v,y;for(h=0,g=s;h<g;++h)v=h+i,y=e[v],d[h]={x:r.parse(gs(y,a),v),y:o.parse(gs(y,l),v)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,r=this._cachedMeta,o=e[t.axis],a={keys:uy(s,!0),values:e._stacks[t.axis]._visualValues};return mg(a,o,r.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const r=i[e.axis];let o=r===null?NaN:r;const a=s&&i._stacks[e.axis];s&&a&&(s.values=a,o=mg(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,o=s.length,a=this._getOtherScale(t),l=eI(e,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:g}=JC(a);let v,y;function x(){y=s[v];const E=y[a.axis];return!xe(y[t.axis])||h>E||g<E}for(v=0;v<o&&!(!x()&&(this.updateRangeFromParsed(d,t,y,l),r));++v);if(r){for(v=o-1;v>=0;--v)if(!x()){this.updateRangeFromParsed(d,t,y,l);break}}return d}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=e.length;s<r;++s)o=e[s][t.axis],xe(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=XC(Mt(this.options.clip,YC(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],r=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,d=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const g=s[h];g.hidden||(g.active&&d?o.push(g):g.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=tI(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=QC(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",r=this._cachedDataOpts,o=t+"-"+e,a=r[o],l=this.enableOptionSharing&&Ca(i);if(a)return xg(a,l);const d=this.chart.config,h=d.datasetElementScopeKeys(this._type,t),g=s?[`${t}Hover`,"hover",t,""]:[t,""],v=d.getOptionScopes(this.getDataset(),h),y=Object.keys(_e.elements[t]),x=()=>this.getContext(i,s,e),E=d.resolveNamedOptions(v,y,x,g);return E.$shared&&(E.$shared=l,r[o]=Object.freeze(xg(E,l))),E}_resolveAnimations(t,e,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,g=h.datasetAnimationScopeKeys(this._type,e),v=h.getOptionScopes(this.getDataset(),g);l=h.createResolver(v,this.getContext(t,i,e))}const d=new cy(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||ud(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(e,r)||r!==s;return this.updateSharedOptions(r,e,i),{sharedOptions:r,includeOptions:o}}updateElement(t,e,i,s){ud(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!ud(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const r=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,l,d]of this._syncList)this[a](l,d);this._syncList=[];const s=i.length,r=e.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,e,i=!0){const s=this._cachedMeta,r=s.data,o=t+e;let a;const l=d=>{for(d.length+=e,a=d.length-1;a>=o;a--)d[a]=d[a-e]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,e),i&&this.updateElements(r,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&Go(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}et(jn,"defaults",{}),et(jn,"datasetElementType",null),et(jn,"dataElementType",null);function nI(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let s=0,r=e.length;s<r;s++)i=i.concat(e[s].controller.getAllParsedValues(n));n._cache.$bar=jb(i.sort((s,r)=>s-r))}return n._cache.$bar}function iI(n){const t=n.iScale,e=nI(t,n.type);let i=t._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(Ca(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=e.length;s<r;++s)o=t.getPixelForValue(e[s]),l();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),l();return i}function sI(n,t,e,i){const s=e.barThickness;let r,o;return Kt(s)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:t.pixels[n]-r/2}}function rI(n,t,e,i){const s=t.pixels,r=s[n];let o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const l=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const d=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:d}}function oI(n,t,e,i){const s=e.parse(n[0],i),r=e.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,d=a;Math.abs(o)>Math.abs(a)&&(l=a,d=o),t[e.axis]=d,t._custom={barStart:l,barEnd:d,start:s,end:r,min:o,max:a}}function dy(n,t,e,i){return ce(n)?oI(n,t,e,i):t[e.axis]=e.parse(n,i),t}function _g(n,t,e,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,l=[];let d,h,g,v;for(d=e,h=e+i;d<h;++d)v=t[d],g={},g[s.axis]=a||s.parse(o[d],d),l.push(dy(v,g,r,d));return l}function dd(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function aI(n,t,e){return n!==0?di(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function lI(n){let t,e,i,s,r;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:e,end:i,reverse:t,top:s,bottom:r}}function cI(n,t,e,i){let s=t.borderSkipped;const r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:d,bottom:h}=lI(n);s==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?s=d:(e._bottom||0)===i?s=h:(r[Eg(h,o,a,l)]=!0,s=d)),r[Eg(s,o,a,l)]=!0,n.borderSkipped=r}function Eg(n,t,e,i){return i?(n=uI(n,t,e),n=wg(n,e,t)):n=wg(n,t,e),n}function uI(n,t,e){return n===t?e:n===e?t:n}function wg(n,t,e){return n==="start"?t:n==="end"?e:n}function dI(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class ac extends jn{parsePrimitiveData(t,e,i,s){return _g(t,e,i,s)}parseArrayData(t,e,i,s){return _g(t,e,i,s)}parseObjectData(t,e,i,s){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,d=r.axis==="x"?a:l,h=o.axis==="x"?a:l,g=[];let v,y,x,E;for(v=i,y=i+s;v<y;++v)E=e[v],x={},x[r.axis]=r.parse(gs(E,d),v),g.push(dy(gs(E,h),x,o,v));return g}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);const r=i._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:s}=e,r=this.getParsed(t),o=r._custom,a=dd(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),d=a.isHorizontal(),h=this._getRuler(),{sharedOptions:g,includeOptions:v}=this._getSharedOptions(e,s);for(let y=e;y<e+i;y++){const x=this.getParsed(y),E=r||Kt(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(y),S=this._calculateBarIndexPixels(y,h),C=(x._stacks||{})[a.axis],P={horizontal:d,base:E.base,enableBorderRadius:!C||dd(x._custom)||o===C._top||o===C._bottom,x:d?E.head:S.center,y:d?S.center:E.head,height:d?S.size:Math.abs(E.size),width:d?Math.abs(E.size):S.size};v&&(P.options=g||this.resolveDataElementOptions(y,t[y].active?"active":s));const V=P.options||t[y].options;cI(P,V,C,o),dI(P,V,h.ratio),this.updateElement(t[y],y,P,s)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=i.options.stacked,o=[],a=l=>{const d=l.controller.getParsed(e),h=d&&d[l.vScale.axis];if(Kt(h)||isNaN(h))return!0};for(const l of s)if(!(e!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const s=this._getStacks(t,i),r=e!==void 0?s.indexOf(e):-1;return r===-1?s.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,s=[];let r,o;for(r=0,o=e.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=t.barThickness;return{min:a||iI(e),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),d=l._custom,h=dd(d);let g=l[e.axis],v=0,y=i?this.applyStack(e,l,i):g,x,E;y!==g&&(v=y-g,y=g),h&&(g=d.barStart,y=d.barEnd-d.barStart,g!==0&&di(g)!==di(d.barEnd)&&(v=0),v+=g);const S=!Kt(r)&&!h?r:v;let C=e.getPixelForValue(S);if(this.chart.getDataVisibility(t)?x=e.getPixelForValue(v+y):x=C,E=x-C,Math.abs(E)<o){E=aI(E,e,a)*o,g===a&&(C-=E/2);const P=e.getPixelForDecimal(0),V=e.getPixelForDecimal(1),$=Math.min(P,V),H=Math.max(P,V);C=Math.max(Math.min(C,H),$),x=C+E,i&&!h&&(l._stacks[e.axis]._visualValues[s]=e.getValueForPixel(x)-e.getValueForPixel(C))}if(C===e.getPixelForValue(a)){const P=di(E)*e.getLineWidthForValue(a)/2;C+=P,E-=P}return{size:E,base:C,head:x,center:x+E/2}}_calculateBarIndexPixels(t,e){const i=e.scale,s=this.options,r=s.skipNull,o=Mt(s.maxBarThickness,1/0);let a,l;if(e.grouped){const d=r?this._getStackCount(t):e.stackCount,h=s.barThickness==="flex"?rI(t,e,s,d):sI(t,e,s,d),g=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=h.start+h.chunk*g+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[e.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}et(ac,"id","bar"),et(ac,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),et(ac,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class lc extends jn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,s){const r=super.parsePrimitiveData(t,e,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(t,e,i,s){const r=super.parseArrayData(t,e,i,s);for(let o=0;o<r.length;o++){const a=e[i+o];r[o]._custom=Mt(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(t,e,i,s){const r=super.parseObjectData(t,e,i,s);for(let o=0;o<r.length;o++){const a=e[i+o];r[o]._custom=Mt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=e,o=this.getParsed(t),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),d=o._custom;return{label:i[t]||"",value:"("+a+", "+l+(d?", "+d:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:d}=this._getSharedOptions(e,s),h=o.axis,g=a.axis;for(let v=e;v<e+i;v++){const y=t[v],x=!r&&this.getParsed(v),E={},S=E[h]=r?o.getPixelForDecimal(.5):o.getPixelForValue(x[h]),C=E[g]=r?a.getBasePixel():a.getPixelForValue(x[g]);E.skip=isNaN(S)||isNaN(C),d&&(E.options=l||this.resolveDataElementOptions(v,y.active?"active":s),r&&(E.options.radius=0)),this.updateElement(y,v,E,s)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return e!=="active"&&(s.radius=0),s.radius+=Mt(i&&i._custom,r),s}}et(lc,"id","bubble"),et(lc,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),et(lc,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function hI(n,t,e){let i=1,s=1,r=0,o=0;if(t<ue){const a=n,l=a+t,d=Math.cos(a),h=Math.sin(a),g=Math.cos(l),v=Math.sin(l),y=(V,$,H)=>Ia(V,a,l,!0)?1:Math.max($,$*e,H,H*e),x=(V,$,H)=>Ia(V,a,l,!0)?-1:Math.min($,$*e,H,H*e),E=y(0,d,g),S=y(Se,h,v),C=x(de,d,g),P=x(de+Se,h,v);i=(E-C)/2,s=(S-P)/2,r=-(E+C)/2,o=-(S+P)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class Gs extends jn{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(Yt(i[t])){const{key:l="value"}=this._parsing;r=d=>+gs(i[d],l)}let o,a;for(o=t,a=t+e;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return Vn(this.options.rotation-90)}_getCircumference(){return Vn(this.options.circumference)}_getRotationExtents(){let t=ue,e=-ue;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(AD(this.options.cutout,a),1),d=this._getRingWeight(this.index),{circumference:h,rotation:g}=this._getRotationExtents(),{ratioX:v,ratioY:y,offsetX:x,offsetY:E}=hI(g,h,l),S=(i.width-o)/v,C=(i.height-o)/y,P=Math.max(Math.min(S,C)/2,0),V=$b(this.options.radius,P),$=Math.max(V*l,0),H=(V-$)/this._getVisibleDatasetWeightTotal();this.offsetX=x*V,this.offsetY=E*V,s.total=this.calculateTotal(),this.outerRadius=V-H*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-H*d,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/ue)}updateElements(t,e,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,d=o.options.animation,h=(a.left+a.right)/2,g=(a.top+a.bottom)/2,v=r&&d.animateScale,y=v?0:this.innerRadius,x=v?0:this.outerRadius,{sharedOptions:E,includeOptions:S}=this._getSharedOptions(e,s);let C=this._getRotation(),P;for(P=0;P<e;++P)C+=this._circumference(P,r);for(P=e;P<e+i;++P){const V=this._circumference(P,r),$=t[P],H={x:h+this.offsetX,y:g+this.offsetY,startAngle:C,endAngle:C+V,circumference:V,outerRadius:x,innerRadius:y};S&&(H.options=E||this.resolveDataElementOptions(P,$.active?"active":s)),C+=V,this.updateElement($,P,H,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,s;for(s=0;s<e.length;s++){const r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?ue*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Qa(e._parsed[t],i.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,r,o,a,l;if(!t){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),t=o.data,a=o.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const r=this.resolveDataElementOptions(i);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(Mt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}et(Gs,"id","doughnut"),et(Gs,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),et(Gs,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),et(Gs,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class cc extends jn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:l}=Yb(e,s,o);this._drawStart=a,this._drawCount=l,Xb(e)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:d},t),this.updateElements(s,a,l,t)}updateElements(t,e,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:g}=this._getSharedOptions(e,s),v=o.axis,y=a.axis,{spanGaps:x,segment:E}=this.options,S=ro(x)?x:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||r||s==="none",P=e+i,V=t.length;let $=e>0&&this.getParsed(e-1);for(let H=0;H<V;++H){const Y=t[H],I=C?Y:{};if(H<e||H>=P){I.skip=!0;continue}const G=this.getParsed(H),it=Kt(G[y]),ut=I[v]=o.getPixelForValue(G[v],H),ft=I[y]=r||it?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,G,l):G[y],H);I.skip=isNaN(ut)||isNaN(ft)||it,I.stop=H>0&&Math.abs(G[v]-$[v])>S,E&&(I.parsed=G,I.raw=d.data[H]),g&&(I.options=h||this.resolveDataElementOptions(H,Y.active?"active":s)),C||this.updateElement(Y,H,I,s),$=G}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}et(cc,"id","line"),et(cc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),et(cc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class va extends jn{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Qa(e._parsed[t].r,i.options.locale);return{label:s[t]||"",value:r}}parseObjectData(t,e,i,s){return ny.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,s=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,d=this._cachedMeta.rScale,h=d.xCenter,g=d.yCenter,v=d.getIndexAngle(0)-.5*de;let y=v,x;const E=360/this.countVisibleElements();for(x=0;x<e;++x)y+=this._computeAngle(x,s,E);for(x=e;x<e+i;x++){const S=t[x];let C=y,P=y+this._computeAngle(x,s,E),V=o.getDataVisibility(x)?d.getDistanceFromCenterForValue(this.getParsed(x).r):0;y=P,r&&(l.animateScale&&(V=0),l.animateRotate&&(C=P=v));const $={x:h,y:g,innerRadius:0,outerRadius:V,startAngle:C,endAngle:P,options:this.resolveDataElementOptions(x,S.active?"active":s)};this.updateElement(S,x,$,s)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Vn(this.resolveDataElementOptions(t,e).angle||i):0}}et(va,"id","polarArea"),et(va,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),et(va,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Yd extends Gs{}et(Yd,"id","pie"),et(Yd,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class uc extends jn{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,s){return ny.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta,i=e.dataset,s=e.data||[],r=e.iScale.getLabels();if(i.points=s,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,t)}this.updateElements(s,0,s.length,t)}updateElements(t,e,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=e;a<e+i;a++){const l=t[a],d=this.resolveDataElementOptions(a,l.active?"active":s),h=r.getPointPositionForValue(a,this.getParsed(a).r),g=o?r.xCenter:h.x,v=o?r.yCenter:h.y,y={x:g,y:v,angle:h.angle,skip:isNaN(g)||isNaN(v),options:d};this.updateElement(l,a,y,s)}}}et(uc,"id","radar"),et(uc,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),et(uc,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class dc extends jn{getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=e,o=this.getParsed(t),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[t]||"",value:"("+a+", "+l+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,s=this.chart._animationsDisabled;let{start:r,count:o}=Yb(e,i,s);if(this._drawStart=r,this._drawCount=o,Xb(e)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const d=this.resolveDatasetElementOptions(t);d.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:d},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:d}=this._cachedMeta,h=this.resolveDataElementOptions(e,s),g=this.getSharedOptions(h),v=this.includeOptions(s,g),y=o.axis,x=a.axis,{spanGaps:E,segment:S}=this.options,C=ro(E)?E:Number.POSITIVE_INFINITY,P=this.chart._animationsDisabled||r||s==="none";let V=e>0&&this.getParsed(e-1);for(let $=e;$<e+i;++$){const H=t[$],Y=this.getParsed($),I=P?H:{},G=Kt(Y[x]),it=I[y]=o.getPixelForValue(Y[y],$),ut=I[x]=r||G?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,Y,l):Y[x],$);I.skip=isNaN(it)||isNaN(ut)||G,I.stop=$>0&&Math.abs(Y[y]-V[y])>C,S&&(I.parsed=Y,I.raw=d.data[$]),v&&(I.options=g||this.resolveDataElementOptions($,H.active?"active":s)),P||this.updateElement(H,$,I,s),V=Y}this.updateSharedOptions(g,s,h)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let l=e.length-1;l>=0;--l)a=Math.max(a,e[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!e.length)return s;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(s,r,o)/2}}et(dc,"id","scatter"),et(dc,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),et(dc,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var fI=Object.freeze({__proto__:null,BarController:ac,BubbleController:lc,DoughnutController:Gs,LineController:cc,PieController:Yd,PolarAreaController:va,RadarController:uc,ScatterController:dc});function zs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hf{constructor(t){et(this,"options");this.options=t||{}}static override(t){Object.assign(hf.prototype,t)}init(){}formats(){return zs()}parse(){return zs()}format(){return zs()}add(){return zs()}diff(){return zs()}startOf(){return zs()}endOf(){return zs()}}var pI={_date:hf};function gI(n,t,e,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?FD:Pi;if(i){if(s._sharedOptions){const d=r[0],h=typeof d.getRange=="function"&&d.getRange(t);if(h){const g=l(r,t,e-h),v=l(r,t,e+h);return{lo:g.lo,hi:v.hi}}}}else return l(r,t,e)}return{lo:0,hi:r.length-1}}function tl(n,t,e,i,s){const r=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){const{index:d,data:h}=r[a],{lo:g,hi:v}=gI(r[a],t,o,s);for(let y=g;y<=v;++y){const x=h[y];x.skip||i(x,d,y)}}}function mI(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const r=t?Math.abs(i.x-s.x):0,o=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function hd(n,t,e,i,s){const r=[];return!s&&!n.isPointInArea(t)||tl(n,e,t,function(a,l,d){!s&&!Ri(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&r.push({element:a,datasetIndex:l,index:d})},!0),r}function vI(n,t,e,i){let s=[];function r(o,a,l){const{startAngle:d,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:g}=zb(o,{x:t.x,y:t.y});Ia(g,d,h)&&s.push({element:o,datasetIndex:a,index:l})}return tl(n,e,t,r),s}function bI(n,t,e,i,s,r){let o=[];const a=mI(e);let l=Number.POSITIVE_INFINITY;function d(h,g,v){const y=h.inRange(t.x,t.y,s);if(i&&!y)return;const x=h.getCenterPoint(s);if(!(!!r||n.isPointInArea(x))&&!y)return;const S=a(t,x);S<l?(o=[{element:h,datasetIndex:g,index:v}],l=S):S===l&&o.push({element:h,datasetIndex:g,index:v})}return tl(n,e,t,d),o}function fd(n,t,e,i,s,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!i?vI(n,t,e,s):bI(n,t,e,i,s,r)}function Sg(n,t,e,i,s){const r=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return tl(n,e,t,(l,d,h)=>{l[o](t[e],s)&&(r.push({element:l,datasetIndex:d,index:h}),a=a||l.inRange(t.x,t.y,s))}),i&&!a?[]:r}var yI={evaluateInteractionItems:tl,modes:{index(n,t,e,i){const s=js(t,n),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?hd(n,s,r,i,o):fd(n,s,r,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const h=a[0].index,g=d.data[h];g&&!g.skip&&l.push({element:g,datasetIndex:d.index,index:h})}),l):[]},dataset(n,t,e,i){const s=js(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?hd(n,s,r,i,o):fd(n,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,d=n.getDatasetMeta(l).data;a=[];for(let h=0;h<d.length;++h)a.push({element:d[h],datasetIndex:l,index:h})}return a},point(n,t,e,i){const s=js(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return hd(n,s,r,i,o)},nearest(n,t,e,i){const s=js(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return fd(n,s,r,e.intersect,i,o)},x(n,t,e,i){const s=js(t,n);return Sg(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=js(t,n);return Sg(n,s,"y",e.intersect,i)}}};const hy=["left","top","right","bottom"];function Ko(n,t){return n.filter(e=>e.pos===t)}function Tg(n,t){return n.filter(e=>hy.indexOf(e.pos)===-1&&e.box.axis===t)}function Jo(n,t){return n.sort((e,i)=>{const s=t?i:e,r=t?e:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function xI(n){const t=[];let e,i,s,r,o,a;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:e,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function _I(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:r}=e;if(!i||!hy.includes(s))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function EI(n,t){const e=_I(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,d=e[a.stack],h=d&&a.stackWeight/d.weight;a.horizontal?(a.width=h?h*i:l&&t.availableWidth,a.height=s):(a.width=i,a.height=h?h*s:l&&t.availableHeight)}return e}function wI(n){const t=xI(n),e=Jo(t.filter(d=>d.box.fullSize),!0),i=Jo(Ko(t,"left"),!0),s=Jo(Ko(t,"right")),r=Jo(Ko(t,"top"),!0),o=Jo(Ko(t,"bottom")),a=Tg(t,"x"),l=Tg(t,"y");return{fullSize:e,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Ko(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function Ag(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function fy(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function SI(n,t,e,i){const{pos:s,box:r}=e,o=n.maxPadding;if(!Yt(s)){e.size&&(n[s]-=e.size);const g=i[e.stack]||{size:0,count:1};g.size=Math.max(g.size,e.horizontal?r.height:r.width),e.size=g.size/g.count,n[s]+=e.size}r.getPadding&&fy(o,r.getPadding());const a=Math.max(0,t.outerWidth-Ag(o,n,"left","right")),l=Math.max(0,t.outerHeight-Ag(o,n,"top","bottom")),d=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:d,other:h}:{same:h,other:d}}function TI(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function AI(n,t){const e=t.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return i(n?["left","right"]:["top","bottom"])}function sa(n,t,e,i){const s=[];let r,o,a,l,d,h;for(r=0,o=n.length,d=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||t.w,a.height||t.h,AI(a.horizontal,t));const{same:g,other:v}=SI(t,e,a,i);d|=g&&s.length,h=h||v,l.fullSize||s.push(a)}return d&&sa(s,t,e,i)||h}function $l(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function kg(n,t,e,i){const s=e.padding;let{x:r,y:o}=t;for(const a of n){const l=a.box,d=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/d.weight||1;if(a.horizontal){const g=t.w*h,v=d.size||l.height;Ca(d.start)&&(o=d.start),l.fullSize?$l(l,s.left,o,e.outerWidth-s.right-s.left,v):$l(l,t.left+d.placed,o,g,v),d.start=o,d.placed+=g,o=l.bottom}else{const g=t.h*h,v=d.size||l.width;Ca(d.start)&&(r=d.start),l.fullSize?$l(l,r,s.top,v,e.outerHeight-s.bottom-s.top):$l(l,r,t.top+d.placed,v,g),d.start=r,d.placed+=g,r=l.right}}t.x=r,t.y=o}var Xe={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=Ke(n.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(e-s.height,0),a=wI(n.boxes),l=a.vertical,d=a.horizontal;ee(n.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const h=l.reduce((E,S)=>S.box.options&&S.box.options.display===!1?E:E+1,0)||1,g=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),v=Object.assign({},s);fy(v,Ke(i));const y=Object.assign({maxPadding:v,w:r,h:o,x:s.left,y:s.top},s),x=EI(l.concat(d),g);sa(a.fullSize,y,g,x),sa(l,y,g,x),sa(d,y,g,x)&&sa(l,y,g,x),TI(y),kg(a.leftAndTop,y,g,x),y.x+=y.w,y.y+=y.h,kg(a.rightAndBottom,y,g,x),n.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},ee(a.chartArea,E=>{const S=E.box;Object.assign(S,n.chartArea),S.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class py{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class kI extends py{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const hc="$chartjs",DI={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Dg=n=>n===null||n==="";function CI(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[hc]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Dg(s)){const r=ug(n,"width");r!==void 0&&(n.width=r)}if(Dg(i))if(n.style.height==="")n.height=n.width/(t||2);else{const r=ug(n,"height");r!==void 0&&(n.height=r)}return n}const gy=LC?{passive:!0}:!1;function II(n,t,e){n&&n.addEventListener(t,e,gy)}function LI(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,gy)}function OI(n,t){const e=DI[n.type]||n.type,{x:i,y:s}=js(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Mc(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function MI(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Mc(a.addedNodes,i),o=o&&!Mc(a.removedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function PI(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Mc(a.removedNodes,i),o=o&&!Mc(a.addedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const Oa=new Map;let Cg=0;function my(){const n=window.devicePixelRatio;n!==Cg&&(Cg=n,Oa.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function RI(n,t){Oa.size||window.addEventListener("resize",my),Oa.set(n,t)}function NI(n){Oa.delete(n),Oa.size||window.removeEventListener("resize",my)}function BI(n,t,e){const i=n.canvas,s=i&&df(i);if(!s)return;const r=Wb((a,l)=>{const d=s.clientWidth;e(a,l),d<s.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],d=l.contentRect.width,h=l.contentRect.height;d===0&&h===0||r(d,h)});return o.observe(s),RI(n,r),o}function pd(n,t,e){e&&e.disconnect(),t==="resize"&&NI(n)}function FI(n,t,e){const i=n.canvas,s=Wb(r=>{n.ctx!==null&&e(OI(r,n))},n);return II(i,t,s),s}class $I extends py{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(CI(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[hc])return!1;const i=e[hc].initial;["height","width"].forEach(r=>{const o=i[r];Kt(o)?e.removeAttribute(r):e.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{e.style[r]=s[r]}),e.width=e.width,delete e[hc],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),o={attach:MI,detach:PI,resize:BI}[e]||FI;s[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:pd,detach:pd,resize:pd}[e]||LI)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return IC(t,e,i,s)}isAttached(t){const e=t&&df(t);return!!(e&&e.isConnected)}}function VI(n){return!uf()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?kI:$I}var Jl;let Hi=(Jl=class{constructor(){et(this,"x");et(this,"y");et(this,"active",!1);et(this,"options");et(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ro(this.x)&&ro(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},et(Jl,"defaults",{}),et(Jl,"defaultRoutes"),Jl);function HI(n,t){const e=n.options.ticks,i=zI(n),s=Math.min(e.maxTicksLimit||i,i),r=e.major.enabled?jI(t):[],o=r.length,a=r[0],l=r[o-1],d=[];if(o>s)return UI(t,d,r,o/s),d;const h=qI(r,t,s);if(o>0){let g,v;const y=o>1?Math.round((l-a)/(o-1)):null;for(Vl(t,d,h,Kt(y)?0:a-y,a),g=0,v=o-1;g<v;g++)Vl(t,d,h,r[g],r[g+1]);return Vl(t,d,h,l,Kt(y)?t.length:l+y),d}return Vl(t,d,h),d}function zI(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function qI(n,t,e){const i=WI(n),s=t.length/e;if(!i)return Math.max(s,1);const r=PD(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function jI(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function UI(n,t,e,i){let s=0,r=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(t.push(n[o]),s++,r=e[s*i])}function Vl(n,t,e,i,s){const r=Mt(i,0),o=Math.min(Mt(s,n.length),n.length);let a=0,l,d,h;for(e=Math.ceil(e),s&&(l=s-i,e=l/Math.floor(l/e)),h=r;h<0;)a++,h=Math.round(r+a*e);for(d=Math.max(r,0);d<o;d++)d===h&&(t.push(n[d]),a++,h=Math.round(r+a*e))}function WI(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const YI=n=>n==="left"?"right":n==="right"?"left":n,Ig=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,Lg=(n,t)=>Math.min(t||n,n);function Og(n,t){const e=[],i=n.length/t,s=n.length;let r=0;for(;r<s;r+=i)e.push(n[Math.floor(r)]);return e}function XI(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(s),d;if(!(e&&(i===1?d=Math.max(l-r,o-l):t===0?d=(n.getPixelForTick(1)-l)/2:d=(l-n.getPixelForTick(s-1))/2,l+=s<t?d:-d,l<r-a||l>o+a)))return l}function GI(n,t){ee(n,e=>{const i=e.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete e.data[i[r]];i.splice(0,s)}})}function Zo(n){return n.drawTicks?n.tickLength:0}function Mg(n,t){if(!n.display)return 0;const e=Re(n.font,t),i=Ke(n.padding);return(ce(n.text)?n.text.length:1)*e.lineHeight+i.height}function KI(n,t){return Es(n,{scale:t,type:"scale"})}function JI(n,t,e){return Es(n,{tick:e,index:t,type:"tick"})}function ZI(n,t,e){let i=sf(n);return(e&&t!=="right"||!e&&t==="right")&&(i=YI(i)),i}function QI(n,t,e,i){const{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:d,scales:h}=l;let g=0,v,y,x;const E=o-s,S=a-r;if(n.isHorizontal()){if(y=We(i,r,a),Yt(e)){const C=Object.keys(e)[0],P=e[C];x=h[C].getPixelForValue(P)+E-t}else e==="center"?x=(d.bottom+d.top)/2+E-t:x=Ig(n,e,t);v=a-r}else{if(Yt(e)){const C=Object.keys(e)[0],P=e[C];y=h[C].getPixelForValue(P)-S+t}else e==="center"?y=(d.left+d.right)/2-S+t:y=Ig(n,e,t);x=We(i,o,s),g=e==="left"?-Se:Se}return{titleX:y,titleY:x,maxWidth:v,rotation:g}}class fr extends Hi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=mn(t,Number.POSITIVE_INFINITY),e=mn(e,Number.NEGATIVE_INFINITY),i=mn(i,Number.POSITIVE_INFINITY),s=mn(s,Number.NEGATIVE_INFINITY),{min:mn(t,i),max:mn(e,s),minDefined:xe(t),maxDefined:xe(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,d=a.length;l<d;++l)o=a[l].controller.getMinMax(this,t),s||(e=Math.min(e,o.min)),r||(i=Math.max(i,o.max));return e=r&&e>i?i:e,i=s&&e>i?e:i,{min:mn(e,mn(i,e)),max:mn(i,mn(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ie(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=lC(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Og(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=HI(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ie(this.options.afterUpdate,[this])}beforeSetDimensions(){ie(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ie(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ie(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ie(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=ie(e.callback,[r.value,i,t],this)}afterTickToLabelConversion(){ie(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ie(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=Lg(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,r=e.maxRotation;let o=s,a,l,d;if(!this._isVisible()||!e.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),g=h.widest.width,v=h.highest.height,y=Be(this.chart.width-g,0,this.maxWidth);a=t.offset?this.maxWidth/i:y/(i-1),g+6>a&&(a=y/(i-(t.offset?.5:1)),l=this.maxHeight-Zo(t.grid)-e.padding-Mg(t.title,this.chart.options.font),d=Math.sqrt(g*g+v*v),o=ef(Math.min(Math.asin(Be((h.highest.height+6)/a,-1,1)),Math.asin(Be(l/d,-1,1))-Math.asin(Be(v/d,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){ie(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ie(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Mg(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=Zo(r)+l):(t.height=this.maxHeight,t.width=Zo(r)+l),i.display&&this.ticks.length){const{first:d,last:h,widest:g,highest:v}=this._getLabelSizes(),y=i.padding*2,x=Vn(this.labelRotation),E=Math.cos(x),S=Math.sin(x);if(a){const C=i.mirror?0:S*g.width+E*v.height;t.height=Math.min(this.maxHeight,t.height+C+y)}else{const C=i.mirror?0:E*g.width+S*v.height;t.width=Math.min(this.maxWidth,t.width+C+y)}this._calculatePadding(d,h,S,E)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,d=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,y=0;l?d?(v=s*t.width,y=i*e.height):(v=i*t.height,y=s*e.width):r==="start"?y=e.width:r==="end"?v=t.width:r!=="inner"&&(v=t.width/2,y=e.width/2),this.paddingLeft=Math.max((v-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((y-g+o)*this.width/(this.width-g),0)}else{let h=e.height/2,g=t.height/2;r==="start"?(h=0,g=t.height):r==="end"&&(h=e.height,g=0),this.paddingTop=h+o,this.paddingBottom=g+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ie(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Kt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Og(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(e/Lg(e,i));let d=0,h=0,g,v,y,x,E,S,C,P,V,$,H;for(g=0;g<e;g+=l){if(x=t[g].label,E=this._resolveTickFontOptions(g),s.font=S=E.string,C=r[S]=r[S]||{data:{},gc:[]},P=E.lineHeight,V=$=0,!Kt(x)&&!ce(x))V=Lc(s,C.data,C.gc,V,x),$=P;else if(ce(x))for(v=0,y=x.length;v<y;++v)H=x[v],!Kt(H)&&!ce(H)&&(V=Lc(s,C.data,C.gc,V,H),$+=P);o.push(V),a.push($),d=Math.max(V,d),h=Math.max($,h)}GI(r,e);const Y=o.indexOf(d),I=a.indexOf(h),G=it=>({width:o[it]||0,height:a[it]||0});return{first:G(0),last:G(e-1),widest:G(Y),highest:G(I),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return BD(this._alignToPixels?Hs(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=JI(this.getContext(),t,i))}return this.$context||(this.$context=KI(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Vn(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,d=this.isHorizontal(),g=this.ticks.length+(l?1:0),v=Zo(r),y=[],x=a.setContext(this.getContext()),E=x.display?x.width:0,S=E/2,C=function(yt){return Hs(i,yt,E)};let P,V,$,H,Y,I,G,it,ut,ft,pt,It;if(o==="top")P=C(this.bottom),I=this.bottom-v,it=P-S,ft=C(t.top)+S,It=t.bottom;else if(o==="bottom")P=C(this.top),ft=t.top,It=C(t.bottom)-S,I=P+S,it=this.top+v;else if(o==="left")P=C(this.right),Y=this.right-v,G=P-S,ut=C(t.left)+S,pt=t.right;else if(o==="right")P=C(this.left),ut=t.left,pt=C(t.right)-S,Y=P+S,G=this.left+v;else if(e==="x"){if(o==="center")P=C((t.top+t.bottom)/2+.5);else if(Yt(o)){const yt=Object.keys(o)[0],Ct=o[yt];P=C(this.chart.scales[yt].getPixelForValue(Ct))}ft=t.top,It=t.bottom,I=P+S,it=I+v}else if(e==="y"){if(o==="center")P=C((t.left+t.right)/2);else if(Yt(o)){const yt=Object.keys(o)[0],Ct=o[yt];P=C(this.chart.scales[yt].getPixelForValue(Ct))}Y=P-S,G=Y-v,ut=t.left,pt=t.right}const Nt=Mt(s.ticks.maxTicksLimit,g),xt=Math.max(1,Math.ceil(g/Nt));for(V=0;V<g;V+=xt){const yt=this.getContext(V),Ct=r.setContext(yt),Ee=a.setContext(yt),Ut=Ct.lineWidth,be=Ct.color,en=Ee.dash||[],$e=Ee.dashOffset,ze=Ct.tickWidth,Te=Ct.tickColor,Ae=Ct.tickBorderDash||[],te=Ct.tickBorderDashOffset;$=XI(this,V,l),$!==void 0&&(H=Hs(i,$,Ut),d?Y=G=ut=pt=H:I=it=ft=It=H,y.push({tx1:Y,ty1:I,tx2:G,ty2:it,x1:ut,y1:ft,x2:pt,y2:It,width:Ut,color:be,borderDash:en,borderDashOffset:$e,tickWidth:ze,tickColor:Te,tickBorderDash:Ae,tickBorderDashOffset:te}))}return this._ticksLength=g,this._borderValue=P,y}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:d,padding:h,mirror:g}=r,v=Zo(i.grid),y=v+h,x=g?-h:y,E=-Vn(this.labelRotation),S=[];let C,P,V,$,H,Y,I,G,it,ut,ft,pt,It="middle";if(s==="top")Y=this.bottom-x,I=this._getXAxisLabelAlignment();else if(s==="bottom")Y=this.top+x,I=this._getXAxisLabelAlignment();else if(s==="left"){const xt=this._getYAxisLabelAlignment(v);I=xt.textAlign,H=xt.x}else if(s==="right"){const xt=this._getYAxisLabelAlignment(v);I=xt.textAlign,H=xt.x}else if(e==="x"){if(s==="center")Y=(t.top+t.bottom)/2+y;else if(Yt(s)){const xt=Object.keys(s)[0],yt=s[xt];Y=this.chart.scales[xt].getPixelForValue(yt)+y}I=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")H=(t.left+t.right)/2-y;else if(Yt(s)){const xt=Object.keys(s)[0],yt=s[xt];H=this.chart.scales[xt].getPixelForValue(yt)}I=this._getYAxisLabelAlignment(v).textAlign}e==="y"&&(l==="start"?It="top":l==="end"&&(It="bottom"));const Nt=this._getLabelSizes();for(C=0,P=a.length;C<P;++C){V=a[C],$=V.label;const xt=r.setContext(this.getContext(C));G=this.getPixelForTick(C)+r.labelOffset,it=this._resolveTickFontOptions(C),ut=it.lineHeight,ft=ce($)?$.length:1;const yt=ft/2,Ct=xt.color,Ee=xt.textStrokeColor,Ut=xt.textStrokeWidth;let be=I;o?(H=G,I==="inner"&&(C===P-1?be=this.options.reverse?"left":"right":C===0?be=this.options.reverse?"right":"left":be="center"),s==="top"?d==="near"||E!==0?pt=-ft*ut+ut/2:d==="center"?pt=-Nt.highest.height/2-yt*ut+ut:pt=-Nt.highest.height+ut/2:d==="near"||E!==0?pt=ut/2:d==="center"?pt=Nt.highest.height/2-yt*ut:pt=Nt.highest.height-ft*ut,g&&(pt*=-1),E!==0&&!xt.showLabelBackdrop&&(H+=ut/2*Math.sin(E))):(Y=G,pt=(1-ft)*ut/2);let en;if(xt.showLabelBackdrop){const $e=Ke(xt.backdropPadding),ze=Nt.heights[C],Te=Nt.widths[C];let Ae=pt-$e.top,te=0-$e.left;switch(It){case"middle":Ae-=ze/2;break;case"bottom":Ae-=ze;break}switch(I){case"center":te-=Te/2;break;case"right":te-=Te;break;case"inner":C===P-1?te-=Te:C>0&&(te-=Te/2);break}en={left:te,top:Ae,width:Te+$e.width,height:ze+$e.height,color:xt.backdropColor}}S.push({label:$,font:it,textOffset:pt,options:{rotation:E,color:Ct,strokeColor:Ee,strokeWidth:Ut,textAlign:be,textBaseline:It,translation:[H,Y],backdrop:en}})}return S}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Vn(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let d,h;return e==="left"?s?(h=this.right+r,i==="near"?d="left":i==="center"?(d="center",h+=l/2):(d="right",h+=l)):(h=this.right-a,i==="near"?d="right":i==="center"?(d="center",h-=l/2):(d="left",h=this.left)):e==="right"?s?(h=this.left+r,i==="near"?d="right":i==="center"?(d="center",h-=l/2):(d="left",h-=l)):(h=this.left+a,i==="near"?d="left":i==="center"?(d="center",h+=l/2):(d="right",h=this.right)):d="right",{textAlign:d,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,d,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(e.display)for(r=0,o=s.length;r<o;++r){const l=s[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let d,h,g,v;this.isHorizontal()?(d=Hs(t,this.left,o)-o/2,h=Hs(t,this.right,a)+a/2,g=v=l):(g=Hs(t,this.top,o)-o/2,v=Hs(t,this.bottom,a)+a/2,d=h=l),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(d,g),e.lineTo(h,v),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&gu(i,s);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,d=o.label,h=o.textOffset;cr(i,d,0,h,l,a)}s&&mu(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const r=Re(i.font),o=Ke(i.padding),a=i.align;let l=r.lineHeight/2;e==="bottom"||e==="center"||Yt(e)?(l+=o.bottom,ce(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:d,titleY:h,maxWidth:g,rotation:v}=QI(this,l,e,a);cr(t,i.text,0,0,r,{color:i.color,maxWidth:g,rotation:v,textAlign:ZI(a,e,s),textBaseline:"middle",translation:[d,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Mt(t.grid&&t.grid.z,-1),s=Mt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==fr.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=e.length;r<o;++r){const a=e[r];a[i]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Re(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Hl{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;nL(e)&&(i=this.register(e));const s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,tL(t,o,i),this.override&&_e.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in _e[s]&&(delete _e[s][i],this.override&&delete lr[i])}}function tL(n,t,e){const i=Da(Object.create(null),[e?_e.get(e):{},_e.get(t),n.defaults]);_e.set(t,i),n.defaultRoutes&&eL(t,n.defaultRoutes),n.descriptors&&_e.describe(t,n.descriptors)}function eL(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),r=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");_e.route(r,s,l,a)})}function nL(n){return"id"in n&&"defaults"in n}class iL{constructor(){this.controllers=new Hl(jn,"datasets",!0),this.elements=new Hl(Hi,"elements"),this.plugins=new Hl(Object,"plugins"),this.scales=new Hl(fr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):ee(s,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const s=tf(t);ie(i["before"+s],[],i),e[t](i),ie(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var ni=new iL;class sL{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,e,i);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(const r of t){const o=r.plugin,a=o[i],l=[e,s,r.options];if(ie(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Kt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=Mt(i.options&&i.options.plugins,{}),r=rL(i);return s===!1&&!e?[]:aL(t,r,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function rL(n){const t={},e=[],i=Object.keys(ni.plugins.items);for(let r=0;r<i.length;r++)e.push(ni.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function oL(n,t){return!t&&n===!1?null:n===!0?{}:n}function aL(n,{plugins:t,localIds:e},i,s){const r=[],o=n.getContext();for(const a of t){const l=a.id,d=oL(i[l],s);d!==null&&r.push({plugin:a,options:lL(n.config,{plugin:a,local:e[l]},d,o)})}return r}function lL(n,{plugin:t,local:e},i,s){const r=n.pluginScopeKeys(t),o=n.getOptionScopes(i,r);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Xd(n,t){const e=_e.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function cL(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function uL(n,t){return n===t?"_index_":"_value_"}function Pg(n){if(n==="x"||n==="y"||n==="r")return n}function dL(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Gd(n,...t){if(Pg(n))return n;for(const e of t){const i=e.axis||dL(e.position)||n.length>1&&Pg(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Rg(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function hL(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return Rg(n,"x",e[0])||Rg(n,"y",e[0])}return{}}function fL(n,t){const e=lr[n.type]||{scales:{}},i=t.scales||{},s=Xd(n.type,t),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Yt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Gd(o,a,hL(o,n),_e.scales[a.type]),d=uL(l,s),h=e.scales||{};r[o]=fa(Object.create(null),[{axis:l},a,h[l],h[d]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||Xd(a,t),h=(lr[a]||{}).scales||{};Object.keys(h).forEach(g=>{const v=cL(g,l),y=o[v+"AxisID"]||v;r[y]=r[y]||Object.create(null),fa(r[y],[{axis:v},i[y],h[g]])})}),Object.keys(r).forEach(o=>{const a=r[o];fa(a,[_e.scales[a.type],_e.scale])}),r}function vy(n){const t=n.options||(n.options={});t.plugins=Mt(t.plugins,{}),t.scales=fL(n,t)}function by(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function pL(n){return n=n||{},n.data=by(n.data),vy(n),n}const Ng=new Map,yy=new Set;function zl(n,t){let e=Ng.get(n);return e||(e=t(),Ng.set(n,e),yy.add(e)),e}const Qo=(n,t,e)=>{const i=gs(t,e);i!==void 0&&n.add(i)};class gL{constructor(t){this._config=pL(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=by(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),vy(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return zl(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return zl(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return zl(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return zl(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:r}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(g=>Qo(l,t,g))),h.forEach(g=>Qo(l,s,g)),h.forEach(g=>Qo(l,lr[r]||{},g)),h.forEach(g=>Qo(l,_e,g)),h.forEach(g=>Qo(l,Ud,g))});const d=Array.from(l);return d.length===0&&d.push(Object.create(null)),yy.has(e)&&o.set(e,d),d}chartOptionScopes(){const{options:t,type:e}=this;return[t,lr[e]||{},_e.datasets[e]||{},{type:e},_e,Ud]}resolveNamedOptions(t,e,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Bg(this._resolverCache,t,s);let l=o;if(vL(o,e)){r.$shared=!1,i=ms(i)?i():i;const d=this.createResolver(t,i,a);l=oo(o,i,d)}for(const d of e)r[d]=l[d];return r}createResolver(t,e,i=[""],s){const{resolver:r}=Bg(this._resolverCache,t,i);return Yt(e)?oo(r,e,void 0,s):r}}function Bg(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let r=i.get(s);return r||(r={resolver:af(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const mL=n=>Yt(n)&&Object.getOwnPropertyNames(n).some(t=>ms(n[t]));function vL(n,t){const{isScriptable:e,isIndexable:i}=Zb(n);for(const s of t){const r=e(s),o=i(s),a=(o||r)&&n[s];if(r&&(ms(a)||mL(a))||o&&ce(a))return!0}return!1}var bL="4.4.3";const yL=["top","bottom","left","right","chartArea"];function Fg(n,t){return n==="top"||n==="bottom"||yL.indexOf(n)===-1&&t==="x"}function $g(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function Vg(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),ie(e&&e.onComplete,[n],t)}function xL(n){const t=n.chart,e=t.options.animation;ie(e&&e.onProgress,[n],t)}function xy(n){return uf()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const fc={},Hg=n=>{const t=xy(n);return Object.values(fc).filter(e=>e.canvas===t).pop()};function _L(n,t,e){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=t){const o=n[s];delete n[s],(e>0||r>t)&&(n[r+e]=o)}}}function EL(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}function ql(n,t,e){return n.options.clip?n[e]:t[e]}function wL(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:ql(e,t,"left"),right:ql(e,t,"right"),top:ql(i,t,"top"),bottom:ql(i,t,"bottom")}:t}class ri{static register(...t){ni.add(...t),zg()}static unregister(...t){ni.remove(...t),zg()}constructor(t,e){const i=this.config=new gL(e),s=xy(t),r=Hg(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||VI(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,d=l&&l.height,h=l&&l.width;if(this.id=TD(),this.ctx=a,this.canvas=l,this.width=h,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new sL,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=HD(g=>this.update(g),o.resizeDelay||0),this._dataChanges=[],fc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ki.listen(this,"complete",Vg),ki.listen(this,"progress",xL),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:r}=this;return Kt(t)?e&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ni}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():cg(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return og(this.canvas,this.ctx),this}stop(){return ki.stop(this),this}resize(t,e){ki.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,cg(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ie(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ee(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const a=e[o],l=Gd(o,a),d=l==="r",h=l==="x";return{options:a,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),ee(r,o=>{const a=o.options,l=a.id,d=Gd(l,a),h=Mt(a.type,o.dtype);(a.position===void 0||Fg(a.position,d)!==Fg(o.dposition))&&(a.position=o.dposition),s[l]=!0;let g=null;if(l in i&&i[l].type===h)g=i[l];else{const v=ni.getScale(h);g=new v({id:l,type:h,ctx:this.ctx,chart:this}),i[g.id]=g}g.init(a,t)}),ee(s,(o,a)=>{o||delete i[a]}),ee(i,o=>{Xe.configure(this,o,o.options),Xe.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort($g("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const r=e[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||Xd(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=ni.getController(a),{datasetElementType:d,dataElementType:h}=_e.datasets[a];Object.assign(l,{dataElementType:ni.getElement(h),datasetElementType:d&&ni.getElement(d)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){ee(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,h=this.data.datasets.length;d<h;d++){const{controller:g}=this.getDatasetMeta(d),v=!s&&r.indexOf(g)===-1;g.buildOrUpdateElements(v),o=Math.max(+g.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||ee(r,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort($g("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ee(this.scales,t=>{Xe.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Jp(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of e){const o=i==="_removeElements"?-r:r;_L(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<e;r++)if(!Jp(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Xe.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],ee(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,ms(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ki.has(this)?this.attached&&!ki.running(this)&&ki.start(this):(this.draw(),Vg({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,r;for(s=0,r=e.length;s<r;++s){const o=e[s];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,s=!i.disabled,r=wL(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&gu(e,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),t.controller.draw(),s&&mu(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Ri(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const r=yI.modes[e];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Es(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);Ca(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),ki.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),og(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete fc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};ee(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,d)=>{e.addEventListener(this,l,d),t[l]=d},s=(l,d)=>{t[l]&&(e.removeEventListener(this,l,d),delete t[l])},r=(l,d)=>{this.canvas&&this.resize(l,d)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){ee(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ee(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let r,o,a,l;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Dc(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,r=(l,d)=>l.filter(h=>!d.some(g=>h.datasetIndex===g.datasetIndex&&h.index===g.index)),o=r(e,t),a=i?t:r(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:r}=this,o=e,a=this._getActiveElements(t,s,i,o),l=LD(t),d=EL(t,this._lastEvent,i,l);i&&(this._lastEvent=null,ie(r.onHover,[t,a,this],this),l&&ie(r.onClick,[t,a,this],this));const h=!Dc(a,s);return(h||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=d,h}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}}et(ri,"defaults",_e),et(ri,"instances",fc),et(ri,"overrides",lr),et(ri,"registry",ni),et(ri,"version",bL),et(ri,"getChart",Hg);function zg(){return ee(ri.instances,n=>n._plugins.invalidate())}function SL(n,t,e){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=t;let d=s/a;n.beginPath(),n.arc(r,o,a,i-d,e+d),l>s?(d=s/l,n.arc(r,o,l,e+d,i-d,!0)):n.arc(r,o,s,e+Se,i-Se),n.closePath(),n.clip()}function TL(n){return of(n,["outerStart","outerEnd","innerStart","innerEnd"])}function AL(n,t,e,i){const s=TL(n.options.borderRadius),r=(e-t)/2,o=Math.min(r,i*t/2),a=l=>{const d=(e-Math.min(r,l))*i/2;return Be(l,0,Math.min(r,d))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Be(s.innerStart,0,o),innerEnd:Be(s.innerEnd,0,o)}}function $r(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Pc(n,t,e,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:d,innerRadius:h}=t,g=Math.max(t.outerRadius+i+e-d,0),v=h>0?h+i+e+d:0;let y=0;const x=s-l;if(i){const xt=h>0?h-i:0,yt=g>0?g-i:0,Ct=(xt+yt)/2,Ee=Ct!==0?x*Ct/(Ct+i):x;y=(x-Ee)/2}const E=Math.max(.001,x*g-e/de)/g,S=(x-E)/2,C=l+S+y,P=s-S-y,{outerStart:V,outerEnd:$,innerStart:H,innerEnd:Y}=AL(t,v,g,P-C),I=g-V,G=g-$,it=C+V/I,ut=P-$/G,ft=v+H,pt=v+Y,It=C+H/ft,Nt=P-Y/pt;if(n.beginPath(),r){const xt=(it+ut)/2;if(n.arc(o,a,g,it,xt),n.arc(o,a,g,xt,ut),$>0){const Ut=$r(G,ut,o,a);n.arc(Ut.x,Ut.y,$,ut,P+Se)}const yt=$r(pt,P,o,a);if(n.lineTo(yt.x,yt.y),Y>0){const Ut=$r(pt,Nt,o,a);n.arc(Ut.x,Ut.y,Y,P+Se,Nt+Math.PI)}const Ct=(P-Y/v+(C+H/v))/2;if(n.arc(o,a,v,P-Y/v,Ct,!0),n.arc(o,a,v,Ct,C+H/v,!0),H>0){const Ut=$r(ft,It,o,a);n.arc(Ut.x,Ut.y,H,It+Math.PI,C-Se)}const Ee=$r(I,C,o,a);if(n.lineTo(Ee.x,Ee.y),V>0){const Ut=$r(I,it,o,a);n.arc(Ut.x,Ut.y,V,C-Se,it)}}else{n.moveTo(o,a);const xt=Math.cos(it)*g+o,yt=Math.sin(it)*g+a;n.lineTo(xt,yt);const Ct=Math.cos(ut)*g+o,Ee=Math.sin(ut)*g+a;n.lineTo(Ct,Ee)}n.closePath()}function kL(n,t,e,i,s){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){Pc(n,t,e,i,l,s);for(let d=0;d<r;++d)n.fill();isNaN(a)||(l=o+(a%ue||ue))}return Pc(n,t,e,i,l,s),n.fill(),l}function DL(n,t,e,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:d,borderJoinStyle:h,borderDash:g,borderDashOffset:v}=l,y=l.borderAlign==="inner";if(!d)return;n.setLineDash(g||[]),n.lineDashOffset=v,y?(n.lineWidth=d*2,n.lineJoin=h||"round"):(n.lineWidth=d,n.lineJoin=h||"bevel");let x=t.endAngle;if(r){Pc(n,t,e,i,x,s);for(let E=0;E<r;++E)n.stroke();isNaN(a)||(x=o+(a%ue||ue))}y&&SL(n,t,x),r||(Pc(n,t,e,i,x,s),n.stroke())}class ra extends Hi{constructor(e){super();et(this,"circumference");et(this,"endAngle");et(this,"fullCircles");et(this,"innerRadius");et(this,"outerRadius");et(this,"pixelMargin");et(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,s){const r=this.getProps(["x","y"],s),{angle:o,distance:a}=zb(r,{x:e,y:i}),{startAngle:l,endAngle:d,innerRadius:h,outerRadius:g,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),y=(this.options.spacing+this.options.borderWidth)/2,E=Mt(v,d-l)>=ue||Ia(o,l,d),S=Mi(a,h+y,g+y);return E&&S}getCenterPoint(e){const{x:i,y:s,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:h}=this.options,g=(r+o)/2,v=(a+l+h+d)/2;return{x:i+Math.cos(g)*v,y:s+Math.sin(g)*v}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:s}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>ue?Math.floor(s/ue):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*r,Math.sin(l)*r);const d=1-Math.sin(Math.min(de,s||0)),h=r*d;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,kL(e,this,h,o,a),DL(e,this,h,o,a),e.restore()}}et(ra,"id","arc"),et(ra,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),et(ra,"defaultRoutes",{backgroundColor:"backgroundColor"}),et(ra,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function _y(n,t,e=t){n.lineCap=Mt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Mt(e.borderDash,t.borderDash)),n.lineDashOffset=Mt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Mt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Mt(e.borderWidth,t.borderWidth),n.strokeStyle=Mt(e.borderColor,t.borderColor)}function CL(n,t,e){n.lineTo(e.x,e.y)}function IL(n){return n.stepped?QD:n.tension||n.cubicInterpolationMode==="monotone"?tC:CL}function Ey(n,t,e={}){const i=n.length,{start:s=0,end:r=i-1}=e,{start:o,end:a}=t,l=Math.max(s,o),d=Math.min(r,a),h=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:t.loop,ilen:d<l&&!h?i+d-l:d-l}}function LL(n,t,e,i){const{points:s,options:r}=t,{count:o,start:a,loop:l,ilen:d}=Ey(s,e,i),h=IL(r);let{move:g=!0,reverse:v}=i||{},y,x,E;for(y=0;y<=d;++y)x=s[(a+(v?d-y:y))%o],!x.skip&&(g?(n.moveTo(x.x,x.y),g=!1):h(n,E,x,v,r.stepped),E=x);return l&&(x=s[(a+(v?d:0))%o],h(n,E,x,v,r.stepped)),!!l}function OL(n,t,e,i){const s=t.points,{count:r,start:o,ilen:a}=Ey(s,e,i),{move:l=!0,reverse:d}=i||{};let h=0,g=0,v,y,x,E,S,C;const P=$=>(o+(d?a-$:$))%r,V=()=>{E!==S&&(n.lineTo(h,S),n.lineTo(h,E),n.lineTo(h,C))};for(l&&(y=s[P(0)],n.moveTo(y.x,y.y)),v=0;v<=a;++v){if(y=s[P(v)],y.skip)continue;const $=y.x,H=y.y,Y=$|0;Y===x?(H<E?E=H:H>S&&(S=H),h=(g*h+$)/++g):(V(),n.lineTo($,H),x=Y,g=0,E=S=H),C=H}V()}function Kd(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?OL:LL}function ML(n){return n.stepped?OC:n.tension||n.cubicInterpolationMode==="monotone"?MC:Us}function PL(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),_y(n,t.options),n.stroke(s)}function RL(n,t,e,i){const{segments:s,options:r}=t,o=Kd(t);for(const a of s)_y(n,r,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const NL=typeof Path2D=="function";function BL(n,t,e,i){NL&&!t.options.segment?PL(n,t,e,i):RL(n,t,e,i)}class as extends Hi{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;SC(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=$C(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],r=this.points,o=ly(this,{property:e,start:s,end:s});if(!o.length)return;const a=[],l=ML(i);let d,h;for(d=0,h=o.length;d<h;++d){const{start:g,end:v}=o[d],y=r[g],x=r[v];if(y===x){a.push(y);continue}const E=Math.abs((s-y[e])/(x[e]-y[e])),S=l(y,x,E,i.stepped);S[e]=t[e],a.push(S)}return a.length===1?a[0]:a}pathSegment(t,e,i){return Kd(this)(t,this,e,i)}path(t,e,i){const s=this.segments,r=Kd(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const a of s)o&=r(t,this,a,{start:e,end:e+i-1});return!!o}draw(t,e,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),BL(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}et(as,"id","line"),et(as,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),et(as,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),et(as,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function qg(n,t,e,i){const s=n.options,{[e]:r}=n.getProps([e],i);return Math.abs(t-r)<s.radius+s.hitRadius}class pc extends Hi{constructor(e){super();et(this,"parsed");et(this,"skip");et(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(e-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,i){return qg(this,e,"x",i)}inYRange(e,i){return qg(this,e,"y",i)}getCenterPoint(e){const{x:i,y:s}=this.getProps(["x","y"],e);return{x:i,y:s}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const s=i&&e.borderWidth||0;return(i+s)*2}draw(e,i){const s=this.options;this.skip||s.radius<.1||!Ri(this,i,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,Wd(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}et(pc,"id","point"),et(pc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),et(pc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function wy(n,t){const{x:e,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],t);let a,l,d,h,g;return n.horizontal?(g=o/2,a=Math.min(e,s),l=Math.max(e,s),d=i-g,h=i+g):(g=r/2,a=e-g,l=e+g,d=Math.min(i,s),h=Math.max(i,s)),{left:a,top:d,right:l,bottom:h}}function ls(n,t,e,i){return n?0:Be(t,e,i)}function FL(n,t,e){const i=n.options.borderWidth,s=n.borderSkipped,r=Jb(i);return{t:ls(s.top,r.top,0,e),r:ls(s.right,r.right,0,t),b:ls(s.bottom,r.bottom,0,e),l:ls(s.left,r.left,0,t)}}function $L(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=Zs(s),o=Math.min(t,e),a=n.borderSkipped,l=i||Yt(s);return{topLeft:ls(!l||a.top||a.left,r.topLeft,0,o),topRight:ls(!l||a.top||a.right,r.topRight,0,o),bottomLeft:ls(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:ls(!l||a.bottom||a.right,r.bottomRight,0,o)}}function VL(n){const t=wy(n),e=t.right-t.left,i=t.bottom-t.top,s=FL(n,e/2,i/2),r=$L(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function gd(n,t,e,i){const s=t===null,r=e===null,a=n&&!(s&&r)&&wy(n,i);return a&&(s||Mi(t,a.left,a.right))&&(r||Mi(e,a.top,a.bottom))}function HL(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function zL(n,t){n.rect(t.x,t.y,t.w,t.h)}function md(n,t,e={}){const i=n.x!==e.x?-t:0,s=n.y!==e.y?-t:0,r=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}class gc extends Hi{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=VL(this),a=HL(o.radius)?La:zL;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,md(o,e,r)),t.clip(),a(t,md(r,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,md(r,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return gd(this,t,e,i)}inXRange(t,e){return gd(this,t,null,e)}inYRange(t,e){return gd(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+s)/2:e,y:r?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}et(gc,"id","bar"),et(gc,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),et(gc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var qL=Object.freeze({__proto__:null,ArcElement:ra,BarElement:gc,LineElement:as,PointElement:pc});const Jd=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],jg=Jd.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function Sy(n){return Jd[n%Jd.length]}function Ty(n){return jg[n%jg.length]}function jL(n,t){return n.borderColor=Sy(t),n.backgroundColor=Ty(t),++t}function UL(n,t){return n.backgroundColor=n.data.map(()=>Sy(t++)),t}function WL(n,t){return n.backgroundColor=n.data.map(()=>Ty(t++)),t}function YL(n){let t=0;return(e,i)=>{const s=n.getDatasetMeta(i).controller;s instanceof Gs?t=UL(e,t):s instanceof va?t=WL(e,t):s&&(t=jL(e,t))}}function Ug(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function XL(n){return n&&(n.borderColor||n.backgroundColor)}var GL={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:s}=n.config,{elements:r}=s;if(!e.forceOverride&&(Ug(i)||XL(s)||r&&Ug(r)))return;const o=YL(n);i.forEach(o)}};function KL(n,t,e,i,s){const r=s.samples||i;if(r>=e)return n.slice(t,t+e);const o=[],a=(e-2)/(r-2);let l=0;const d=t+e-1;let h=t,g,v,y,x,E;for(o[l++]=n[h],g=0;g<r-2;g++){let S=0,C=0,P;const V=Math.floor((g+1)*a)+1+t,$=Math.min(Math.floor((g+2)*a)+1,e)+t,H=$-V;for(P=V;P<$;P++)S+=n[P].x,C+=n[P].y;S/=H,C/=H;const Y=Math.floor(g*a)+1+t,I=Math.min(Math.floor((g+1)*a)+1,e)+t,{x:G,y:it}=n[h];for(y=x=-1,P=Y;P<I;P++)x=.5*Math.abs((G-S)*(n[P].y-it)-(G-n[P].x)*(C-it)),x>y&&(y=x,v=n[P],E=P);o[l++]=v,h=E}return o[l++]=n[d],o}function JL(n,t,e,i){let s=0,r=0,o,a,l,d,h,g,v,y,x,E;const S=[],C=t+e-1,P=n[t].x,$=n[C].x-P;for(o=t;o<t+e;++o){a=n[o],l=(a.x-P)/$*i,d=a.y;const H=l|0;if(H===h)d<x?(x=d,g=o):d>E&&(E=d,v=o),s=(r*s+a.x)/++r;else{const Y=o-1;if(!Kt(g)&&!Kt(v)){const I=Math.min(g,v),G=Math.max(g,v);I!==y&&I!==Y&&S.push({...n[I],x:s}),G!==y&&G!==Y&&S.push({...n[G],x:s})}o>0&&Y!==y&&S.push(n[Y]),S.push(a),h=H,r=0,x=E=d,g=v=y=o}}return S}function Ay(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Wg(n){n.data.datasets.forEach(t=>{Ay(t)})}function ZL(n,t){const e=t.length;let i=0,s;const{iScale:r}=n,{min:o,max:a,minDefined:l,maxDefined:d}=r.getUserBounds();return l&&(i=Be(Pi(t,r.axis,o).lo,0,e-1)),d?s=Be(Pi(t,r.axis,a).hi+1,i,e)-i:s=e-i,{start:i,count:s}}var QL={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){Wg(n);return}const i=n.width;n.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=n.getDatasetMeta(r),d=o||s.data;if(ia([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=n.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||n.options.parsing)return;let{start:g,count:v}=ZL(l,d);const y=e.threshold||4*i;if(v<=y){Ay(s);return}Kt(o)&&(s._data=d,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}}));let x;switch(e.algorithm){case"lttb":x=KL(d,g,v,i,e);break;case"min-max":x=JL(d,g,v,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}s._decimated=x})},destroy(n){Wg(n)}};function tO(n,t,e){const i=n.segments,s=n.points,r=t.points,o=[];for(const a of i){let{start:l,end:d}=a;d=ff(l,d,s);const h=Zd(e,s[l],s[d],a.loop);if(!t.segments){o.push({source:a,target:h,start:s[l],end:s[d]});continue}const g=ly(t,h);for(const v of g){const y=Zd(e,r[v.start],r[v.end],v.loop),x=ay(a,s,y);for(const E of x)o.push({source:E,target:v,start:{[e]:Yg(h,y,"start",Math.max)},end:{[e]:Yg(h,y,"end",Math.min)}})}}return o}function Zd(n,t,e,i){if(i)return;let s=t[n],r=e[n];return n==="angle"&&(s=bn(s),r=bn(r)),{property:n,start:s,end:r}}function eO(n,t){const{x:e=null,y:i=null}=n||{},s=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=ff(o,a,s);const l=s[o],d=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:d.x,y:i})):e!==null&&(r.push({x:e,y:l.y}),r.push({x:e,y:d.y}))}),r}function ff(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Yg(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function ky(n,t){let e=[],i=!1;return ce(n)?(i=!0,e=n):e=eO(n,t),e.length?new as({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function Xg(n){return n&&n.fill!==!1}function nO(n,t,e){let s=n[t].fill;const r=[t];let o;if(!e)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!xe(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function iO(n,t,e){const i=aO(n);if(Yt(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return xe(s)&&Math.floor(s)===s?sO(i[0],t,s,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function sO(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function rO(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Yt(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function oO(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:Yt(n)?i=n.value:i=t.getBaseValue(),i}function aO(n){const t=n.options,e=t.fill;let i=Mt(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function lO(n){const{scale:t,index:e,line:i}=n,s=[],r=i.segments,o=i.points,a=cO(t,e);a.push(ky({x:null,y:t.bottom},i));for(let l=0;l<r.length;l++){const d=r[l];for(let h=d.start;h<=d.end;h++)uO(s,o[h],a)}return new as({points:s,options:{}})}function cO(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function uO(n,t,e){const i=[];for(let s=0;s<e.length;s++){const r=e[s],{first:o,last:a,point:l}=dO(r,t,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function dO(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const s=i[e],r=n.segments,o=n.points;let a=!1,l=!1;for(let d=0;d<r.length;d++){const h=r[d],g=o[h.start][e],v=o[h.end][e];if(Mi(s,g,v)){a=s===g,l=s===v;break}}return{first:a,last:l,point:i}}class Dy{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:s,y:r,radius:o}=this;return e=e||{start:0,end:ue},t.arc(s,r,o,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:s}=this,r=t.angle;return{x:e+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function hO(n){const{chart:t,fill:e,line:i}=n;if(xe(e))return fO(t,e);if(e==="stack")return lO(n);if(e==="shape")return!0;const s=pO(n);return s instanceof Dy?s:ky(s,i)}function fO(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function pO(n){return(n.scale||{}).getPointPositionForValue?mO(n):gO(n)}function gO(n){const{scale:t={},fill:e}=n,i=rO(e,t);if(xe(i)){const s=t.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function mO(n){const{scale:t,fill:e}=n,i=t.options,s=t.getLabels().length,r=i.reverse?t.max:t.min,o=oO(e,t,r),a=[];if(i.grid.circular){const l=t.getPointPositionForValue(0,r);return new Dy({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(t.getPointPositionForValue(l,o));return a}function vd(n,t,e){const i=hO(t),{line:s,scale:r,axis:o}=t,a=s.options,l=a.fill,d=a.backgroundColor,{above:h=d,below:g=d}=l||{};i&&s.points.length&&(gu(n,e),vO(n,{line:s,target:i,above:h,below:g,area:e,scale:r,axis:o}),mu(n))}function vO(n,t){const{line:e,target:i,above:s,below:r,area:o,scale:a}=t,l=e._loop?"angle":t.axis;n.save(),l==="x"&&r!==s&&(Gg(n,i,o.top),Kg(n,{line:e,target:i,color:s,scale:a,property:l}),n.restore(),n.save(),Gg(n,i,o.bottom)),Kg(n,{line:e,target:i,color:r,scale:a,property:l}),n.restore()}function Gg(n,t,e){const{segments:i,points:s}=t;let r=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:d}=a,h=s[l],g=s[ff(l,d,s)];r?(n.moveTo(h.x,h.y),r=!1):(n.lineTo(h.x,e),n.lineTo(h.x,h.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(g.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function Kg(n,t){const{line:e,target:i,property:s,color:r,scale:o}=t,a=tO(e,i,s);for(const{source:l,target:d,start:h,end:g}of a){const{style:{backgroundColor:v=r}={}}=l,y=i!==!0;n.save(),n.fillStyle=v,bO(n,o,y&&Zd(s,h,g)),n.beginPath();const x=!!e.pathSegment(n,l);let E;if(y){x?n.closePath():Jg(n,i,g,s);const S=!!i.pathSegment(n,d,{move:x,reverse:!0});E=x&&S,E||Jg(n,i,h,s)}n.closePath(),n.fill(E?"evenodd":"nonzero"),n.restore()}}function bO(n,t,e){const{top:i,bottom:s}=t.chart.chartArea,{property:r,start:o,end:a}=e||{};r==="x"&&(n.beginPath(),n.rect(o,i,a-o,s-i),n.clip())}function Jg(n,t,e,i){const s=t.interpolate(e,i);s&&n.lineTo(s.x,s.y)}var yO={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof as&&(l={visible:n.isDatasetVisible(o),index:o,fill:iO(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=nO(s,o,e.propagate))},beforeDraw(n,t,e){const i=e.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&vd(n.ctx,a,r))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;Xg(r)&&vd(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!Xg(i)||e.drawTime!=="beforeDatasetDraw"||vd(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Zg=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},xO=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class Qg extends Hi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=ie(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=Re(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Zg(i,r);let d,h;e.font=s.string,this.isHorizontal()?(d=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,d=this._fitCols(o,s,a,l)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],d=this.lineWidths=[0],h=s+a;let g=t;r.textAlign="left",r.textBaseline="middle";let v=-1,y=-h;return this.legendItems.forEach((x,E)=>{const S=i+e/2+r.measureText(x.text).width;(E===0||d[d.length-1]+S+2*a>o)&&(g+=h,d[d.length-(E>0?0:1)]=0,y+=h,v++),l[E]={left:0,top:y,row:v,width:S,height:s},d[d.length-1]+=S+a}),g}_fitCols(t,e,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],d=this.columnSizes=[],h=o-t;let g=a,v=0,y=0,x=0,E=0;return this.legendItems.forEach((S,C)=>{const{itemWidth:P,itemHeight:V}=_O(i,e,r,S,s);C>0&&y+V+2*a>h&&(g+=v+a,d.push({width:v,height:y}),x+=v+a,E++,v=y=0),l[C]={left:x,top:y,col:E,width:P,height:V},v=Math.max(v,P),y+=V+a}),g+=v,d.push({width:v,height:y}),g}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Yr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=We(i,this.left+s,this.right-this.lineWidths[a]);for(const d of e)a!==d.row&&(a=d.row,l=We(i,this.left+s,this.right-this.lineWidths[a])),d.top+=this.top+t+s,d.left=o.leftForLtr(o.x(l),d.width),l+=d.width+s}else{let a=0,l=We(i,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const d of e)d.col!==a&&(a=d.col,l=We(i,this.top+t+s,this.bottom-this.columnSizes[a].height)),d.top=l,d.left+=this.left+s,d.left=o.leftForLtr(o.x(d.left),d.width),l+=d.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;gu(t,this),this._draw(),mu(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:r,labels:o}=t,a=_e.color,l=Yr(t.rtl,this.left,this.width),d=Re(o.font),{padding:h}=o,g=d.size,v=g/2;let y;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=d.string;const{boxWidth:x,boxHeight:E,itemHeight:S}=Zg(o,g),C=function(Y,I,G){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;s.save();const it=Mt(G.lineWidth,1);if(s.fillStyle=Mt(G.fillStyle,a),s.lineCap=Mt(G.lineCap,"butt"),s.lineDashOffset=Mt(G.lineDashOffset,0),s.lineJoin=Mt(G.lineJoin,"miter"),s.lineWidth=it,s.strokeStyle=Mt(G.strokeStyle,a),s.setLineDash(Mt(G.lineDash,[])),o.usePointStyle){const ut={radius:E*Math.SQRT2/2,pointStyle:G.pointStyle,rotation:G.rotation,borderWidth:it},ft=l.xPlus(Y,x/2),pt=I+v;Kb(s,ut,ft,pt,o.pointStyleWidth&&x)}else{const ut=I+Math.max((g-E)/2,0),ft=l.leftForLtr(Y,x),pt=Zs(G.borderRadius);s.beginPath(),Object.values(pt).some(It=>It!==0)?La(s,{x:ft,y:ut,w:x,h:E,radius:pt}):s.rect(ft,ut,x,E),s.fill(),it!==0&&s.stroke()}s.restore()},P=function(Y,I,G){cr(s,G.text,Y,I+S/2,d,{strikethrough:G.hidden,textAlign:l.textAlign(G.textAlign)})},V=this.isHorizontal(),$=this._computeTitleHeight();V?y={x:We(r,this.left+h,this.right-i[0]),y:this.top+h+$,line:0}:y={x:this.left+h,y:We(r,this.top+$+h,this.bottom-e[0].height),line:0},sy(this.ctx,t.textDirection);const H=S+h;this.legendItems.forEach((Y,I)=>{s.strokeStyle=Y.fontColor,s.fillStyle=Y.fontColor;const G=s.measureText(Y.text).width,it=l.textAlign(Y.textAlign||(Y.textAlign=o.textAlign)),ut=x+v+G;let ft=y.x,pt=y.y;l.setWidth(this.width),V?I>0&&ft+ut+h>this.right&&(pt=y.y+=H,y.line++,ft=y.x=We(r,this.left+h,this.right-i[y.line])):I>0&&pt+H>this.bottom&&(ft=y.x=ft+e[y.line].width+h,y.line++,pt=y.y=We(r,this.top+$+h,this.bottom-e[y.line].height));const It=l.x(ft);if(C(It,pt,Y),ft=zD(it,ft+x+v,V?ft+ut:this.right,t.rtl),P(l.x(ft),pt,Y),V)y.x+=ut+h;else if(typeof Y.text!="string"){const Nt=d.lineHeight;y.y+=Cy(Y,Nt)+h}else y.y+=H}),ry(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Re(e.font),s=Ke(e.padding);if(!e.display)return;const r=Yr(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=i.size/2,d=s.top+l;let h,g=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),h=this.top+d,g=We(t.align,g,this.right-v);else{const x=this.columnSizes.reduce((E,S)=>Math.max(E,S.height),0);h=d+We(t.align,this.top,this.bottom-x-t.labels.padding-this._computeTitleHeight())}const y=We(a,g,g+v);o.textAlign=r.textAlign(sf(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,cr(o,e.text,y,h,i)}_computeTitleHeight(){const t=this.options.title,e=Re(t.font),i=Ke(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,r;if(Mi(t,this.left,this.right)&&Mi(e,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Mi(t,s.left,s.left+s.width)&&Mi(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!SO(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=xO(s,i);s&&!r&&ie(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&ie(e.onHover,[t,i,this],this)}else i&&ie(e.onClick,[t,i,this],this)}}function _O(n,t,e,i,s){const r=EO(i,n,t,e),o=wO(s,i,t.lineHeight);return{itemWidth:r,itemHeight:o}}function EO(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+i.measureText(s).width}function wO(n,t,e){let i=n;return typeof t.text!="string"&&(i=Cy(t,e)),i}function Cy(n,t){const e=n.text?n.text.length:0;return t*e}function SO(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var TO={id:"legend",_element:Qg,start(n,t,e){const i=n.legend=new Qg({ctx:n.ctx,options:e,chart:n});Xe.configure(n,i,e),Xe.addBox(n,i)},stop(n){Xe.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Xe.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const d=l.controller.getStyle(e?0:void 0),h=Ke(d.borderWidth);return{text:t[l.index].label,fillStyle:d.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:s||d.textAlign,borderRadius:o&&(a||d.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class pf extends Hi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=ce(i.text)?i.text.length:1;this._padding=Ke(i.padding);const r=s*Re(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,d,h,g;return this.isHorizontal()?(h=We(a,i,r),g=e+t,d=r-i):(o.position==="left"?(h=i+t,g=We(a,s,e),l=de*-.5):(h=r-t,g=We(a,e,s),l=de*.5),d=s-e),{titleX:h,titleY:g,maxWidth:d,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Re(e.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:d}=this._drawArgs(r);cr(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:d,textAlign:sf(e.align),textBaseline:"middle",translation:[o,a]})}}function AO(n,t){const e=new pf({ctx:n.ctx,options:t,chart:n});Xe.configure(n,e,t),Xe.addBox(n,e),n.titleBlock=e}var kO={id:"title",_element:pf,start(n,t,e){AO(n,e)},stop(n){const t=n.titleBlock;Xe.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Xe.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const jl=new WeakMap;var DO={id:"subtitle",start(n,t,e){const i=new pf({ctx:n.ctx,options:e,chart:n});Xe.configure(n,i,e),Xe.addBox(n,i),jl.set(n,i)},stop(n){Xe.removeBox(n,jl.get(n)),jl.delete(n)},beforeUpdate(n,t,e){const i=jl.get(n);Xe.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const oa={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,r=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const d=l.getCenterPoint(),h=jd(t,d);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function ei(n,t){return t&&(ce(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Di(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function CO(n,t){const{element:e,datasetIndex:i,index:s}=t,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function tm(n,t){const e=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=t,l=Re(t.bodyFont),d=Re(t.titleFont),h=Re(t.footerFont),g=r.length,v=s.length,y=i.length,x=Ke(t.padding);let E=x.height,S=0,C=i.reduce(($,H)=>$+H.before.length+H.lines.length+H.after.length,0);if(C+=n.beforeBody.length+n.afterBody.length,g&&(E+=g*d.lineHeight+(g-1)*t.titleSpacing+t.titleMarginBottom),C){const $=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=y*$+(C-y)*l.lineHeight+(C-1)*t.bodySpacing}v&&(E+=t.footerMarginTop+v*h.lineHeight+(v-1)*t.footerSpacing);let P=0;const V=function($){S=Math.max(S,e.measureText($).width+P)};return e.save(),e.font=d.string,ee(n.title,V),e.font=l.string,ee(n.beforeBody.concat(n.afterBody),V),P=t.displayColors?o+2+t.boxPadding:0,ee(i,$=>{ee($.before,V),ee($.lines,V),ee($.after,V)}),P=0,e.font=h.string,ee(n.footer,V),e.restore(),S+=x.width,{width:S,height:E}}function IO(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function LO(n,t,e,i){const{x:s,width:r}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&s+r+o>t.width||n==="right"&&s-r-o<0)return!0}function OO(n,t,e,i){const{x:s,width:r}=e,{width:o,chartArea:{left:a,right:l}}=n;let d="center";return i==="center"?d=s<=(a+l)/2?"left":"right":s<=r/2?d="left":s>=o-r/2&&(d="right"),LO(d,n,t,e)&&(d="center"),d}function em(n,t,e){const i=e.yAlign||t.yAlign||IO(n,e);return{xAlign:e.xAlign||t.xAlign||OO(n,t,e,i),yAlign:i}}function MO(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function PO(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function nm(n,t,e,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,d=s+r,{topLeft:h,topRight:g,bottomLeft:v,bottomRight:y}=Zs(o);let x=MO(t,a);const E=PO(t,l,d);return l==="center"?a==="left"?x+=d:a==="right"&&(x-=d):a==="left"?x-=Math.max(h,v)+s:a==="right"&&(x+=Math.max(g,y)+s),{x:Be(x,0,i.width-t.width),y:Be(E,0,i.height-t.height)}}function Ul(n,t,e){const i=Ke(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function im(n){return ei([],Di(n))}function RO(n,t,e){return Es(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function sm(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Iy={beforeTitle:Ai,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Ai,beforeBody:Ai,beforeLabel:Ai,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Kt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ai,afterBody:Ai,beforeFooter:Ai,footer:Ai,afterFooter:Ai};function on(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?Iy[t].call(e,i):s}class Qd extends Hi{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,r=new cy(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=RO(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=on(i,"beforeTitle",this,t),r=on(i,"title",this,t),o=on(i,"afterTitle",this,t);let a=[];return a=ei(a,Di(s)),a=ei(a,Di(r)),a=ei(a,Di(o)),a}getBeforeBody(t,e){return im(on(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return ee(t,r=>{const o={before:[],lines:[],after:[]},a=sm(i,r);ei(o.before,Di(on(a,"beforeLabel",this,r))),ei(o.lines,on(a,"label",this,r)),ei(o.after,Di(on(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,e){return im(on(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=on(i,"beforeFooter",this,t),r=on(i,"footer",this,t),o=on(i,"afterFooter",this,t);let a=[];return a=ei(a,Di(s)),a=ei(a,Di(r)),a=ei(a,Di(o)),a}_createItems(t){const e=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,d;for(l=0,d=e.length;l<d;++l)a.push(CO(this.chart,e[l]));return t.filter&&(a=a.filter((h,g,v)=>t.filter(h,g,v,i))),t.itemSort&&(a=a.sort((h,g)=>t.itemSort(h,g,i))),ee(a,h=>{const g=sm(t.callbacks,h);s.push(on(g,"labelColor",this,h)),r.push(on(g,"labelPointStyle",this,h)),o.push(on(g,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=oa[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=tm(this,i),d=Object.assign({},a,l),h=em(this.chart,i,d),g=nm(i,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:g.x,y:g.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const r=this.getCaretPosition(t,i,s);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:d,bottomLeft:h,bottomRight:g}=Zs(a),{x:v,y}=t,{width:x,height:E}=e;let S,C,P,V,$,H;return r==="center"?($=y+E/2,s==="left"?(S=v,C=S-o,V=$+o,H=$-o):(S=v+x,C=S+o,V=$-o,H=$+o),P=S):(s==="left"?C=v+Math.max(l,h)+o:s==="right"?C=v+x-Math.max(d,g)-o:C=this.caretX,r==="top"?(V=y,$=V-o,S=C-o,P=C+o):(V=y+E,$=V+o,S=C+o,P=C-o),H=V),{x1:S,x2:C,x3:P,y1:V,y2:$,y3:H}}drawTitle(t,e,i){const s=this.title,r=s.length;let o,a,l;if(r){const d=Yr(i.rtl,this.x,this.width);for(t.x=Ul(this,i.titleAlign,i),e.textAlign=d.textAlign(i.titleAlign),e.textBaseline="middle",o=Re(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,l=0;l<r;++l)e.fillText(s[l],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:d}=r,h=Re(r.bodyFont),g=Ul(this,"left",r),v=s.x(g),y=l<h.lineHeight?(h.lineHeight-l)/2:0,x=e.y+y;if(r.usePointStyle){const E={radius:Math.min(d,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},S=s.leftForLtr(v,d)+d/2,C=x+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Wd(t,E,S,C),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Wd(t,E,S,C)}else{t.lineWidth=Yt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const E=s.leftForLtr(v,d),S=s.leftForLtr(s.xPlus(v,1),d-2),C=Zs(o.borderRadius);Object.values(C).some(P=>P!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,La(t,{x:E,y:x,w:d,h:l,radius:C}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),La(t,{x:S,y:x+1,w:d-2,h:l-2,radius:C}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(E,x,d,l),t.strokeRect(E,x,d,l),t.fillStyle=o.backgroundColor,t.fillRect(S,x+1,d-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:d,boxPadding:h}=i,g=Re(i.bodyFont);let v=g.lineHeight,y=0;const x=Yr(i.rtl,this.x,this.width),E=function(G){e.fillText(G,x.x(t.x+y),t.y+v/2),t.y+=v+r},S=x.textAlign(o);let C,P,V,$,H,Y,I;for(e.textAlign=o,e.textBaseline="middle",e.font=g.string,t.x=Ul(this,S,i),e.fillStyle=i.bodyColor,ee(this.beforeBody,E),y=a&&S!=="right"?o==="center"?d/2+h:d+2+h:0,$=0,Y=s.length;$<Y;++$){for(C=s[$],P=this.labelTextColors[$],e.fillStyle=P,ee(C.before,E),V=C.lines,a&&V.length&&(this._drawColorBox(e,t,$,x,i),v=Math.max(g.lineHeight,l)),H=0,I=V.length;H<I;++H)E(V[H]),v=g.lineHeight;ee(C.after,E)}y=0,v=g.lineHeight,ee(this.afterBody,E),t.y-=r}drawFooter(t,e,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Yr(i.rtl,this.x,this.width);for(t.x=Ul(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",o=Re(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(s[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:d,height:h}=i,{topLeft:g,topRight:v,bottomLeft:y,bottomRight:x}=Zs(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(a+g,l),o==="top"&&this.drawCaret(t,e,i,s),e.lineTo(a+d-v,l),e.quadraticCurveTo(a+d,l,a+d,l+v),o==="center"&&r==="right"&&this.drawCaret(t,e,i,s),e.lineTo(a+d,l+h-x),e.quadraticCurveTo(a+d,l+h,a+d-x,l+h),o==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(a+y,l+h),e.quadraticCurveTo(a,l+h,a,l+h-y),o==="center"&&r==="left"&&this.drawCaret(t,e,i,s),e.lineTo(a,l+g),e.quadraticCurveTo(a,l,a+g,l),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=oa[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=tm(this,t),l=Object.assign({},o,this._size),d=em(e,t,l),h=nm(t,l,d,e);(s._to!==h.x||r._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Ke(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,e),sy(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),ry(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:a,index:l})=>{const d=this.chart.getDatasetMeta(a);if(!d)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:d.data[l],index:l}}),r=!Dc(i,s),o=this._positionChanged(s,e);(r||o)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,i),a=this._positionChanged(o,t),l=e||!Dc(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:s,options:r}=this,o=oa[r.position].call(this,t,e);return o!==!1&&(i!==o.x||s!==o.y)}}et(Qd,"positioners",oa);var NO={id:"tooltip",_element:Qd,positioners:oa,afterInit(n,t,e){e&&(n.tooltip=new Qd({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Iy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},BO=Object.freeze({__proto__:null,Colors:GL,Decimation:QL,Filler:yO,Legend:TO,SubTitle:DO,Title:kO,Tooltip:NO});const FO=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function $O(n,t,e,i){const s=n.indexOf(t);if(s===-1)return FO(n,t,e,i);const r=n.lastIndexOf(t);return s!==r?e:s}const VO=(n,t)=>n===null?null:Be(Math.round(n),0,t);function rm(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class th extends fr{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:r}of e)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Kt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:$O(i,t,Mt(e,t),this._addedLabels),VO(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)s.push({value:o});return s}getLabelForValue(t){return rm.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}et(th,"id","category"),et(th,"defaults",{ticks:{callback:rm}});function HO(n,t){const e=[],{bounds:s,step:r,min:o,max:a,precision:l,count:d,maxTicks:h,maxDigits:g,includeBounds:v}=n,y=r||1,x=h-1,{min:E,max:S}=t,C=!Kt(o),P=!Kt(a),V=!Kt(d),$=(S-E)/(g+1);let H=Qp((S-E)/x/y)*y,Y,I,G,it;if(H<1e-14&&!C&&!P)return[{value:E},{value:S}];it=Math.ceil(S/H)-Math.floor(E/H),it>x&&(H=Qp(it*H/x/y)*y),Kt(l)||(Y=Math.pow(10,l),H=Math.ceil(H*Y)/Y),s==="ticks"?(I=Math.floor(E/H)*H,G=Math.ceil(S/H)*H):(I=E,G=S),C&&P&&r&&RD((a-o)/r,H/1e3)?(it=Math.round(Math.min((a-o)/H,h)),H=(a-o)/it,I=o,G=a):V?(I=C?o:I,G=P?a:G,it=d-1,H=(G-I)/it):(it=(G-I)/H,pa(it,Math.round(it),H/1e3)?it=Math.round(it):it=Math.ceil(it));const ut=Math.max(tg(H),tg(I));Y=Math.pow(10,Kt(l)?ut:l),I=Math.round(I*Y)/Y,G=Math.round(G*Y)/Y;let ft=0;for(C&&(v&&I!==o?(e.push({value:o}),I<o&&ft++,pa(Math.round((I+ft*H)*Y)/Y,o,om(o,$,n))&&ft++):I<o&&ft++);ft<it;++ft){const pt=Math.round((I+ft*H)*Y)/Y;if(P&&pt>a)break;e.push({value:pt})}return P&&v&&G!==a?e.length&&pa(e[e.length-1].value,a,om(a,$,n))?e[e.length-1].value=a:e.push({value:a}):(!P||G===a)&&e.push({value:G}),e}function om(n,t,{horizontal:e,minRotation:i}){const s=Vn(i),r=(e?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+n).length;return Math.min(t/r,o)}class Rc extends fr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Kt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=e?s:l,a=l=>r=i?r:l;if(t){const l=di(s),d=di(r);l<0&&d<0?a(0):l>0&&d>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(s-l)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=HO(s,r);return t.bounds==="ticks"&&Hb(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Qa(t,this.chart.options.locale,this.options.ticks.format)}}class eh extends Rc{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=xe(t)?t:0,this.max=xe(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Vn(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}et(eh,"id","linear"),et(eh,"defaults",{ticks:{callback:pu.formatters.numeric}});const Ma=n=>Math.floor(os(n)),qs=(n,t)=>Math.pow(10,Ma(n)+t);function am(n){return n/Math.pow(10,Ma(n))===1}function lm(n,t,e){const i=Math.pow(10,e),s=Math.floor(n/i);return Math.ceil(t/i)-s}function zO(n,t){const e=t-n;let i=Ma(e);for(;lm(n,t,i)>10;)i++;for(;lm(n,t,i)<10;)i--;return Math.min(i,Ma(n))}function qO(n,{min:t,max:e}){t=mn(n.min,t);const i=[],s=Ma(t);let r=zO(t,e),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,d=Math.round((t-l)*o)/o,h=Math.floor((t-l)/a/10)*a*10;let g=Math.floor((d-h)/Math.pow(10,r)),v=mn(n.min,Math.round((l+h+g*Math.pow(10,r))*o)/o);for(;v<e;)i.push({value:v,major:am(v),significand:g}),g>=10?g=g<15?15:20:g++,g>=20&&(r++,g=2,o=r>=0?1:o),v=Math.round((l+h+g*Math.pow(10,r))*o)/o;const y=mn(n.max,v);return i.push({value:y,major:am(y),significand:g}),i}class nh extends fr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Rc.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return xe(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=xe(t)?Math.max(0,t):null,this.max=xe(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!xe(this._userMin)&&(this.min=t===qs(this.min,0)?qs(this.min,-1):qs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=t?i:a,o=a=>s=e?s:a;i===s&&(i<=0?(r(1),o(10)):(r(qs(i,-1)),o(qs(s,1)))),i<=0&&r(qs(s,-1)),s<=0&&o(qs(i,1)),this.min=i,this.max=s}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=qO(e,this);return t.bounds==="ticks"&&Hb(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Qa(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=os(t),this._valueRange=os(this.max)-os(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(os(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}et(nh,"id","logarithmic"),et(nh,"defaults",{ticks:{callback:pu.formatters.logarithmic,major:{enabled:!0}}});function ih(n){const t=n.ticks;if(t.display&&n.display){const e=Ke(t.backdropPadding);return Mt(t.font&&t.font.size,_e.font.size)+e.height}return 0}function jO(n,t,e){return e=ce(e)?e:[e],{w:ZD(n,t.string,e),h:e.length*t.lineHeight}}function cm(n,t,e,i,s){return n===i||n===s?{start:t-e/2,end:t+e/2}:n<i||n>s?{start:t-e,end:t}:{start:t,end:t+e}}function UO(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?de/r:0;for(let l=0;l<r;l++){const d=o.setContext(n.getPointLabelContext(l));s[l]=d.padding;const h=n.getPointPosition(l,n.drawingArea+s[l],a),g=Re(d.font),v=jO(n.ctx,g,n._pointLabels[l]);i[l]=v;const y=bn(n.getIndexAngle(l)+a),x=Math.round(ef(y)),E=cm(x,h.x,v.w,0,180),S=cm(x,h.y,v.h,90,270);WO(e,t,y,E,S)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=GO(n,i,s)}function WO(n,t,e,i,s){const r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/r,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/r,n.r=Math.max(n.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/o,n.t=Math.min(n.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function YO(n,t,e){const i=n.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=e,l=n.getPointPosition(t,i+s+o,r),d=Math.round(ef(bn(l.angle+Se))),h=ZO(l.y,a.h,d),g=KO(d),v=JO(l.x,a.w,g);return{visible:!0,x:l.x,y:h,textAlign:g,left:v,top:h,right:v+a.w,bottom:h+a.h}}function XO(n,t){if(!t)return!0;const{left:e,top:i,right:s,bottom:r}=n;return!(Ri({x:e,y:i},t)||Ri({x:e,y:r},t)||Ri({x:s,y:i},t)||Ri({x:s,y:r},t))}function GO(n,t,e){const i=[],s=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:ih(r)/2,additionalAngle:o?de/s:0};let d;for(let h=0;h<s;h++){l.padding=e[h],l.size=t[h];const g=YO(n,h,l);i.push(g),a==="auto"&&(g.visible=XO(g,d),g.visible&&(d=g))}return i}function KO(n){return n===0||n===180?"center":n<180?"left":"right"}function JO(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function ZO(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function QO(n,t,e){const{left:i,top:s,right:r,bottom:o}=e,{backdropColor:a}=t;if(!Kt(a)){const l=Zs(t.borderRadius),d=Ke(t.backdropPadding);n.fillStyle=a;const h=i-d.left,g=s-d.top,v=r-i+d.width,y=o-s+d.height;Object.values(l).some(x=>x!==0)?(n.beginPath(),La(n,{x:h,y:g,w:v,h:y,radius:l}),n.fill()):n.fillRect(h,g,v,y)}}function tM(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let s=t-1;s>=0;s--){const r=n._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(n.getPointLabelContext(s));QO(e,o,r);const a=Re(o.font),{x:l,y:d,textAlign:h}=r;cr(e,n._pointLabels[s],l,d+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Ly(n,t,e,i){const{ctx:s}=n;if(e)s.arc(n.xCenter,n.yCenter,t,0,ue);else{let r=n.getPointPosition(0,t);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,t),s.lineTo(r.x,r.y)}}function eM(n,t,e,i,s){const r=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash),r.lineDashOffset=s.dashOffset,r.beginPath(),Ly(n,e,o,i),r.closePath(),r.stroke(),r.restore())}function nM(n,t,e){return Es(n,{label:e,index:t,type:"pointLabel"})}class aa extends Rc{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Ke(ih(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=xe(t)&&!isNaN(t)?t:0,this.max=xe(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ih(this.options))}generateTickLabels(t){Rc.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const s=ie(this.options.pointLabels.callback,[e,i],this);return s||s===0?s:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?UO(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){const e=ue/(this._pointLabels.length||1),i=this.options.startAngle||0;return bn(t*e+Vn(i))}getDistanceFromCenterForValue(t){if(Kt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Kt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return nM(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const s=this.getIndexAngle(t)-Se+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:s,bottom:r}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Ly(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:s,border:r}=e,o=this._pointLabels.length;let a,l,d;if(e.pointLabels.display&&tM(this,o),s.display&&this.ticks.forEach((h,g)=>{if(g!==0||g===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const v=this.getContext(g),y=s.setContext(v),x=r.setContext(v);eM(this,y,l,o,x)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const h=i.setContext(this.getPointLabelContext(a)),{color:g,lineWidth:v}=h;!v||!g||(t.lineWidth=v,t.strokeStyle=g,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),d=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(d.x,d.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const d=i.setContext(this.getContext(l)),h=Re(d.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),d.showLabelBackdrop){t.font=h.string,o=t.measureText(a.label).width,t.fillStyle=d.backdropColor;const g=Ke(d.backdropPadding);t.fillRect(-o/2-g.left,-r-h.size/2-g.top,o+g.width,h.size+g.height)}cr(t,a.label,0,-r,h,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),t.restore()}drawTitle(){}}et(aa,"id","radialLinear"),et(aa,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:pu.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),et(aa,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),et(aa,"descriptors",{angleLines:{_fallback:"grid"}});const bu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ln=Object.keys(bu);function um(n,t){return n-t}function dm(n,t){if(Kt(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),xe(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(s&&(o=s==="week"&&(ro(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,s)),+o)}function hm(n,t,e,i){const s=ln.length;for(let r=ln.indexOf(n);r<s-1;++r){const o=bu[ln[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return ln[r]}return ln[s-1]}function iM(n,t,e,i,s){for(let r=ln.length-1;r>=ln.indexOf(e);r--){const o=ln[r];if(bu[o].common&&n._adapter.diff(s,i,o)>=t-1)return o}return ln[e?ln.indexOf(e):0]}function sM(n){for(let t=ln.indexOf(n)+1,e=ln.length;t<e;++t)if(bu[ln[t]].common)return ln[t]}function fm(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=nf(e,t),r=e[i]>=t?e[i]:e[s];n[r]=!0}}function rM(n,t,e,i){const s=n._adapter,r=+s.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function pm(n,t,e){const i=[],s={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,i.push({value:a,major:!1});return r===0||!e?i:rM(n,i,s,e)}class Pa extends fr{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new pI._date(t.adapters.date);s.init(e),fa(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:dm(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(d){!o&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!a&&!isNaN(d.max)&&(r=Math.max(r,d.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=xe(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),r=xe(r)&&!isNaN(r)?r:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=$D(s,r,o);return this._unit=e.unit||(i.autoSkip?hm(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):iM(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:sM(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),pm(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=Be(e,0,o),i=Be(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||hm(r.minUnit,e,i,this._getLabelCapacity(e)),a=Mt(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,d=ro(l)||l===!0,h={};let g=e,v,y;if(d&&(g=+t.startOf(g,"isoWeek",l)),g=+t.startOf(g,d?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);const x=s.ticks.source==="data"&&this.getDataTimestamps();for(v=g,y=0;v<i;v=+t.add(v,a,o),y++)fm(h,v,x);return(v===i||s.bounds==="ticks"||y===1)&&fm(h,v,x),Object.keys(h).sort(um).map(E=>+E)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,r=this._unit,o=e||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,s){const r=this.options,o=r.ticks.callback;if(o)return ie(o,[t,e,i],this);const a=r.time.displayFormats,l=this._unit,d=this._majorUnit,h=l&&a[l],g=d&&a[d],v=i[e],y=d&&g&&v&&v.major;return this._adapter.format(t,s||(y?g:h))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Vn(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,r=this._tickFormatFunction(t,0,pm(this,[t],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(dm(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return jb(t.sort(um))}}et(Pa,"id","time"),et(Pa,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Wl(n,t,e){let i=0,s=n.length-1,r,o,a,l;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=Pi(n,"pos",t)),{pos:r,time:a}=n[i],{pos:o,time:l}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=Pi(n,"time",t)),{time:r,pos:a}=n[i],{time:o,pos:l}=n[s]);const d=o-r;return d?a+(l-a)*(t-r)/d:a}class sh extends Pa{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Wl(e,this.min),this._tableRange=Wl(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],r=[];let o,a,l,d,h;for(o=0,a=t.length;o<a;++o)d=t[o],d>=e&&d<=i&&s.push(d);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],d=s[o],Math.round((h+l)/2)!==d&&r.push({time:d,pos:o/(a-1)});return r}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Wl(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Wl(this._table,i*this._tableRange+this._minPos,!0)}}et(sh,"id","timeseries"),et(sh,"defaults",Pa.defaults);var oM=Object.freeze({__proto__:null,CategoryScale:th,LinearScale:eh,LogarithmicScale:nh,RadialLinearScale:aa,TimeScale:Pa,TimeSeriesScale:sh});const aM=[fI,qL,BO,oM];ri.register(...aM);F0.registerModules([$0]);const mc=[{id:"rg2-stats-summary",title:"Summary",active:"true"},{id:"rg2-legs",title:"Leg times"},{id:"rg2-cumulative",title:"Cumulative times"},{id:"rg2-split-times",title:"Split times"},{id:"rg2-time-loss",title:"Time loss"}],lM=['<div id="rg2-stats-summary" class="container"></div><div style="height: 400px;"><canvas id="rg2-splits-chart"></canvas></div>','<div id="rg2-leg-table" style="width: 950px; height: 100%" class="ag-theme-balham"></div>','<div id="rg2-race-table" style="width: 950px; height: 100%;" class="ag-theme-balham"></div>',`<div id="rg2-results-table" class="rg2-results-table-container">
     <div id="rg2-results-grid-wrapper">
       <div id="rg2-results-grid" style="height: 100%" class="ag-theme-balham"></div>
     </div>
   </div>`,`<div id="rg2-time-loss" class="container">
     <div class="d-flex align-items-center justify-content-between">
       <div class="d-flex align-items-center">
         <div id="rg2-control-change" class="pe-4">
           <button id="rg2-stats-control-back" class="btn btn-outline-primary btn-sm p-2">&lt;</button>
           <button id="rg2-stats-control-forward" class="btn btn-outline-primary btn-sm p-2">&gt;</button>
         </div>
         <div id="rg2-control-number" class="fw-bold pe-2"></div>
       </div>
       <div id="rg2-loss-details" class="d-flex justify-content-center"></div>
     </div>
     <canvas id="rg2-loss-chart"></canvas>
   </div>`];let ae=null,ba=null,j=[],rh=!1,jt=null,Me=0,ii=[],si=[],Ht=null,Yl,Xl,De=1,cM=9,Ge=2;const Oy="#rg2-stats-summary-tab-label";let gf=Oy;function uM(){if(jt.excludeType===F.EXCLUDED_REAL_SPLITS)for(let n=0;n<j.length;n+=1){let t=0;for(let e=1;e<jt.exclude.length;e+=1){if(jt.exclude[e]){const i=Math.min(j[n].splits[e]-j[n].splits[e-1]-t,jt.allowed[e]);t=t+i}j[n].splits[e]=j[n].splits[e]-t,j[n].legSplits[e]=j[n].splits[e]-j[n].splits[e-1]}}}function dM(n){for(let t=0;t<j.length;t+=1){n===0&&(j[t].predictedSplits=[],j[t].loss=[],j[t].totalLoss=[]),j[t].predictedSplits[n]=[],j[t].predictedSplits[n][0]=0,j[t].loss[n]=[],j[t].loss[n][0]=0;let e=0;for(let i=0;i<Me;i+=1)j[t].performanceIndex[n]>0?j[t].predictedSplits[n][i]=parseInt(jt.refLegTime[n][i]/j[t].normalPerformanceIndex[n],10):j[t].predictedSplits[n][i]=j[t].legSplits[i],j[t].loss[n][i]=j[t].legSplits[i]-j[t].predictedSplits[n][i],j[t].loss[n][i]<0&&(j[t].loss[n][i]=0),e=e+j[t].loss[n][i];j[t].totalLoss[n]=e}}function hM(n){n===0&&(jt.refLegTime=[],jt.refTime=[]);let t=[],e=[];for(let i=0;i<Me;i+=1){if(t.length=0,!jt.exclude[i])for(let r=0;r<j.length;r+=1)j[r].iterSplits[n][i]!==0&&t.push(j[r].iterSplits[n][i]);const s=oh(t,25);e.push(s.median)}jt.refLegTime[n]=e.slice(0),jt.refTime[n]=e.reduce((i,s)=>i+s);for(let i=0;i<j.length;i+=1){n===0&&(j[i].refRatio=[],j[i].performanceIndex=[],j[i].normalPerformanceIndex=[],j[i].totalSecs=[]),j[i].refRatio[n]=[];const s=[];for(let d=0;d<Me;d+=1)j[i].iterSplits[n][d]===0?j[i].refRatio[n][d]=0:j[i].refRatio[n][d]=jt.refLegTime[n][d]/j[i].iterSplits[n][d],s.push(j[i].refRatio[n][d]);const r=s.filter(d=>d>0),o=oh(r,100);j[i].performanceIndex[n]=o.median,j[i].totalSecs[n]=j[i].iterSplits[n].reduce((d,h)=>d+h);let a=0,l=0;for(let d=0;d<Me;d+=1)j[i].iterSplits[n][d]!==0&&(a=a+j[i].refRatio[n][d]*jt.refLegTime[n][d],l=l+jt.refLegTime[n][d]);a===0?j[i].normalPerformanceIndex[n]=0:j[i].normalPerformanceIndex[n]=a/l}}function fM(n){for(let t=0;t<j.length;t+=1){n===0&&(j[t].iterSplits=[]);let e=[];for(let i=0;i<Me;i+=1)n===0?e.push(j[t].legSplits[i]):e.push(j[t].predictedSplits[n-1][i]);j[t].iterSplits[n]=e.slice(0)}}function My(){De=De===ae.splits.length-1?1:De+1,mf()}function Py(){De=De>1?De-1:ae.splits.length-1,mf()}function gm(n){let t=j[Ht].rawid;try{const e=e0();let i=e.findIndex(o=>o?o.courseid===jt.courseid:!1);n<0?i=i===e.length-1?1:i+1:i=i>1?i-1:e.length-1;const s=e[i].courseid,r=Lb(s);r.length>0&&(t=r[0].rawid)}catch(e){console.log("Error switching to new course: "+e)}vf(t)}function Nc(n){n<0?Ht=Ht===j.length-1?0:Ht+1:Ht=Ht>0?Ht-1:j.length-1,vf(j[Ht].rawid)}function pM(n){let t="",e="";ae.splits.length-1===De?t=W("Finish"):(t=W("Control"),e=": "+De);let i=`<div>${t}${e}</div>`;if(document.getElementById("rg2-control-number").innerHTML=i,i="",jt.exclude[De])i=W("Control excluded","");else{const s=n.filter(o=>o.loss>0).map(o=>o.loss),r=oh(s,100);i=`<div class="px-2 fw-bold">${W("Runners with loss")}: ${r.count}</div >`,i+=`<div class="px-2 fw-bold">${W("Average")}: ${parseInt(r.mean,10)}s (${parseInt(r.mean*1e3/jt.refLegTime[Ge][De],10)/10}%)</div>`,i+=`<div class="px-2 fw-bold">${W("Median")}: ${r.median}s (${parseInt(r.median*1e3/jt.refLegTime[Ge][De],10)/10}%)</div>`}document.getElementById("rg2-loss-details").innerHTML=i}function gM(){document.getElementById("rg2-stats-panel-tab-headers").addEventListener("show.bs.tab",s=>{AM(s.target)});const n=document.getElementsByClassName("rg2-stats-name-back");for(let s of n)s.addEventListener("click",()=>{Nc(1)});const t=document.getElementsByClassName("rg2-stats-name-forward");for(let s of t)s.addEventListener("click",()=>{Nc(-1)});const e=document.getElementsByClassName("rg2-stats-course-back");for(let s of e)s.addEventListener("click",()=>{gm(1)});const i=document.getElementsByClassName("rg2-stats-course-forward");for(let s of i)s.addEventListener("click",()=>{gm(-1)});document.getElementById("rg2-stats-control-back").addEventListener("click",Py),document.getElementById("rg2-stats-control-forward").addEventListener("click",My),document.getElementById(gf.replace("#","")).click()}function mf(){Xl!==void 0&&(Xl.destroy(),Xl=void 0);const n=document.getElementById("rg2-loss-chart"),t=S=>r.length===0?F.DARK_GREEN_30:r[S.dataIndex].activeRunner?F.DARK_GREEN:F.DARK_GREEN_30,e=S=>r.length===0?F.RED_30:r[S.dataIndex].activeRunner?F.RED:F.RED_30,i=S=>r.length===0?F.BLUE_30:r[S.dataIndex].activeRunner?F.BLUE:F.BLUE_30,s=S=>r.length===0?F.PURPLE_30:r[S.dataIndex].activeRunner?F.PURPLE:F.PURPLE_30,r=[];jt.exclude[De]||j.map(S=>{if(parseInt(S.legSplits[De],10)>0){let C={};const P=parseInt(S.loss[Ge][De],10),V=parseInt(S.predictedSplits[Ge][De],10),$=parseInt(S.legSplits[De],10);C.loss=P,C.predicted=P===0?0:V,C.rawPredicted=V,C.actual=$<=V?$:0,C.gain=$<=V?V-$:0,C.realSplit=$,C.pos=S.legpos[De],C.name=S.name,S.rawid===ba&&(C.activeRunner=!0),r.push(C)}}),r.sort((S,C)=>S.realSplit-C.realSplit);const o=r.map(S=>S.predicted),a=r.map(S=>S.actual),l=r.map(S=>S.loss),d=r.map(S=>S.gain),h=r.map(S=>S.pos),g=r.map(()=>jt.refLegTime[Ge][De]),v=j.reduce((S,C)=>Math.max(S,C.legSplits[De]),0),y=120,x=parseInt((v+y-1)/y,10)*y;pM(r),Xl=new ri(n,{data:{labels:h,datasets:[{label:"Actual",type:"bar",data:a,backgroundColor:t},{label:"Gain",type:"bar",data:d,yAxisID:"yLoss",backgroundColor:i},{label:"Predicted",type:"bar",data:o,yAxisID:"yLoss",backgroundColor:s},{label:"Loss",type:"bar",data:l,yAxisID:"yLoss",backgroundColor:e},{label:"Reference time",type:"line",data:g,borderColor:F.RED,backgroundColor:F.WHITE,borderDash:[5,5],yAxisID:"yLoss",pointStyle:"circle",pointRadius:0,pointHoverRadius:0}]},options:{scales:{x:{stacked:!0,title:{display:!0,text:"Position"}},yLoss:{stacked:!0,min:0,max:x,title:{display:!0,text:"Time (s)"}}},plugins:{tooltip:{callbacks:{label(S){let C=S.dataset.label+": ";return S.dataset.label==="Loss"?C+=ne(r[S.dataIndex].loss):S.dataset.label==="Gain"?C+=ne(r[S.dataIndex].gain):S.dataset.label==="Actual"?C+=ne(r[S.dataIndex].actual):C+=ne(r[S.dataIndex].predicted),C},title(S){return r[S[0].dataIndex].name+": "+ne(r[S[0].dataIndex].realSplit)}}}}}});const E=document.querySelector("#rg2-loss-chart");E.onwheel=S=>{S.preventDefault(),S.deltaY<0?My():Py()}}function mM(){De=1,mf()}function vM(){let n=[];for(let t=1;t<jt.codes.length;t+=1){n.length=0;for(let s=0;s<j.length;s+=1)j[s].resultid===j[s].rawid&&(j[s].isScoreEvent?j[s].variant===jt.courseid&&n.push({time:j[s].legSplits[t],id:s}):j[s].courseid===jt.courseid&&n.push({time:j[s].legSplits[t],id:s}));n.sort(ym);let e=0,i=0;for(let s=0;s<n.length;s+=1){if(jt.exclude[t]){j[n[s].id].legpos[t]=0;continue}n[s].time!==i?n[s].time===0?(j[n[s].id].legpos[t]=0,i=0,e=0):(j[n[s].id].legpos[t]=s+1,i=n[s].time,e=s+1):j[n[s].id].legpos[t]=e}}n.length=0;for(let t=1;t<jt.codes.length;t+=1){n.length=0;let e=0;for(let r=0;r<j.length;r+=1)j[r].resultid===j[r].rawid&&(j[r].isScoreEvent?j[r].variant===jt.courseid&&(t>j[r].lastValidSplit?e=0:e=j[r].splits[t],n.push({time:e,id:r})):j[r].courseid===jt.courseid&&(t>j[r].lastValidSplit?e=0:e=j[r].splits[t],n.push({time:e,id:r})));n.sort(ym);let i=0,s=0;for(let r=0;r<n.length;r+=1)n[r].time!==s?n[r].time===0?(j[n[r].id].racepos[t]=0,i=0,s=0):(j[n[r].id].racepos[t]=r+1,s=n[r].time,i=r+1):j[n[r].id].racepos[t]=i}}function bM(){Yl!==void 0&&(Yl.destroy(),Yl=void 0);const n=(x,E)=>x.p0.skip||x.p1.skip?E:void 0,t=document.getElementById("rg2-splits-chart"),e=j[Ht],i=e.legpos.map((x,E,S)=>E===S.length-1?"F":E),s=Ry(),r=e.legpos.map(x=>x===0?NaN:x),o=e.loss[Ge].map((x,E)=>e.legpos[E]===0?NaN:x),a=e.predictedSplits[Ge].map((x,E)=>e.legpos[E]===0?NaN:x>e.legSplits[E]?x-e.legSplits[E]:0),l=e.legpos.map(()=>s.average),d=o.reduce((x,E)=>Math.max(x,isNaN(E)?0:E),0),h=a.reduce((x,E)=>Math.max(x,isNaN(E)?0:E),0),g=120,v=parseInt((Math.max(d,h)+g-1)/g,10)*g;Yl=new ri(t,{data:{labels:i,datasets:[{label:"Leg position",type:"line",data:r,borderColor:F.PURPLE,backgroundColor:F.PURPLE_30,yAxisID:"yPosition",segment:{borderColor:x=>n(x,"rgb(0,0,0,0.2)"),borderDash:x=>n(x,[6,6])},spanGaps:!0},{label:"Average leg position",type:"line",data:l,borderColor:F.RED,backgroundColor:F.WHITE,borderDash:[5,5],yAxisID:"yPosition",pointStyle:"circle",pointRadius:0,pointHoverRadius:0},{label:"Time loss",type:"bar",data:o,borderColor:F.RED,backgroundColor:F.RED_30,yAxisID:"yLoss",segment:{borderColor:x=>n(x,"rgb(0,0,0,0.2)"),borderDash:x=>n(x,[6,6])}},{label:"Time gain",type:"bar",data:a,borderColor:F.BLUE,backgroundColor:F.BLUE_30,yAxisID:"yLoss",segment:{borderColor:x=>n(x,"rgb(0,0,0,0.2)"),borderDash:x=>n(x,[6,6])}}]},options:{maintainAspectRatio:!1,responsive:!0,scales:{x:{min:1,title:{display:!0,text:W("Control","")},stacked:!0},yPosition:{type:"linear",display:!0,position:"left",min:0,max:parseInt((j.length+9)/10,10)*10,title:{display:!0,text:"Leg position"}},yLoss:{type:"linear",display:!0,position:"right",min:0,max:v,grid:{drawOnChartArea:!1},title:{display:!0,text:"Time gain/loss (s)"}}},plugins:{tooltip:{callbacks:{label:function(x){return x.dataset.label==="Time loss"?"Loss: "+ne(o[x.dataIndex]):x.dataset.label==="Time gain"?"Gain: "+ne(a[x.dataIndex]):x.dataset.label==="Leg position"?"Position: "+r[x.dataIndex]:""},title:function(x){return x[0].label==="F"?W("Finish",""):W("Control","")+" "+x[0].label}}}}}});const y=document.querySelector("#rg2-splits-chart");y.onwheel=x=>{x.preventDefault(),x.deltaY<0?Nc(-1):Nc(1)}}function yM(){const n=[{headerName:W("Pos",""),field:"position",cellDataType:"text",width:60,pinned:"left",sortable:!0},{headerName:W("Name",""),field:"name",cellDataType:"text",headerClass:"align-left",cellClass:"align-left",width:150,pinned:"left"},{headerName:W("Time",""),field:"time",cellDataType:"text",width:85}];for(let o=1;o<Me-1;o+=1)n.push({headerName:o+" ("+jt.codes[o]+")",field:"C"+o,cellDataType:"text",cellRenderer:bm,width:110});n.push({headerName:W("F",""),field:"finish",cellDataType:"text",cellRenderer:bm,width:110}),n.push({headerName:W("Loss",""),field:"loss",cellDataType:"text",width:100}),n.push({headerName:W("Performance",""),field:"performance",cellDataType:"text",width:100}),n.push({headerName:W("Consistency",""),field:"consistency",cellDataType:"text",width:100});let t=[];j.sort(function(o,a){return o.racepos[o.splits.length-1]<=0?1:a.racepos[a.splits.length-1]<=0?-1:o.racepos[o.splits.length-1]-a.racepos[a.splits.length-1]}),Ht=Fy(ba);for(let o=0;o<j.length;o+=1){let a={};const l=j[o];l.racepos[Me-1]==0?a.position="":a.position=l.racepos[Me-1],a.name=l.name,a.time=l.time;for(let h=1;h<Me-1;h+=1)l.splits[h]===l.splits[h-1]?a["C"+h]={split:"0:00",pos:l.racepos[h],loss:!1}:a["C"+h]={split:ne(l.splits[h]),pos:l.racepos[h],loss:!1};a.finish={split:ne(l.splits[Me-1]),pos:l.racepos[Me-1]},a.loss=ne(l.timeInSecs-l.totalLoss[Ge]),a.performance=(l.performanceIndex[0]*100).toFixed(1);const d=l.refRatio[0].filter(h=>h>0);a.consistency=(100*Ny(d)).toFixed(1),t.push(a),a={};for(let h=1;h<Me-1;h+=1)a["C"+h]={split:ne(l.legSplits[h]),pos:l.legpos[h],loss:l.loss[Ge][h]>19};a.finish={split:ne(l.legSplits[Me-1]),pos:l.legpos[Me-1],loss:l.loss[Ge][Me-1]>19},a.loss=ne(l.totalLoss[Ge]),t.push(a)}const e={columnDefs:n,rowData:t,defaultColDef:{headerClass:"align-center",cellClass:"align-center"}},i=document.getElementById("rg2-map-canvas").height*.98-120,s=document.getElementById("rg2-results-grid-wrapper");s.removeAttribute("style"),s.setAttribute("style","height: "+i+"px;");const r=document.getElementById("rg2-results-grid");r.innerHTML="",gh(r,e)}function xM(){const n=Ry(),t=l=>`${l}`,e=`<div class="rg2-stats-runner-change pe-4">
      <button class="rg2-stats-name-back btn btn-outline-primary btn-sm p-2">
        &lt;
      </button>
      <button class="rg2-stats-name-forward btn btn-outline-primary btn-sm p-2">
        &gt;
      </button>
    </div >`,i=`<div class="rg2-stats-course-change pe-4">
      <button class="rg2-stats-course-back btn btn-outline-primary btn-sm p-2">
        &lt;
      </button>
      <button class="rg2-stats-course-forward btn btn-outline-primary btn-sm p-2">
        &gt;
      </button>
    </div >`;let s=t('<div class="d-flex align-items-center justify-content-between pb-4">');s+=t('<div class="d-flex align-items-center">'),s+=t(`${e}`),s+=t(`<div class="fw-bold pe-4">${ae.name}</div>`),s+=t(`<div class="fw-bold pe-4">${ae.time}</div>`),s+=t(`<div class="fw-bold pe-4">(${j[Ht].racepos[Me-1]}/${j.length})</div>`);let r="";CM(ae.timeInSecs)&&(r=` (${(100*j[Ht].totalLoss[Ge]/ae.timeInSecs).toFixed(1)}%)`),s+=t(`<div class="fw-bold pe-4">${W("Estimated loss")}: ${ne(j[Ht].totalLoss[Ge])}${r}</div>`),s+=t("</div>"),s+=t('<div class="d-flex align-items-center">'),s+=t(`<div class="fw-bold pe-4">${ae.coursename}</div><div>${i}</div>`),s+=t("</div></div>");const o=document.getElementsByClassName("rg2-stats-title-row");for(let l of o)l.innerHTML=s;s='<div class="d-flex align-items-center">',s+=t(`<div class="fw-bold pe-4">${W("Average leg position")}: ${n.average} (${W("Best","")}: ${n.best}, ${W("Worst")}: ${n.worst})</div >`),s+=t(`<div  class="fw-bold pe-4">${W("Performance")} ${(ae.performanceIndex[0]*100).toFixed(1)}%</div>`);const a=j[Ht].refRatio[0].filter(l=>l>0);s+=t(`<div  class="fw-bold">${W("Consistency")} ${(100*Ny(a)).toFixed(1)}%</div>`),s+=t("</div>"),document.getElementById("rg2-stats-summary").innerHTML=s}function _M(){const n=[];for(let i=0;i<j[Ht].splits.length;i+=1){let s={};if(s.name=ae.name,i===0?s.control="S":i==j[Ht].splits.length-1?s.control="F":s.control=i+" ("+jt.codes[i]+")",i===0?s.time="0:00":s.time=ne(j[Ht].legSplits[i]),i===0||j[Ht].legpos[i]===0||jt.exclude[i]?s.position="-":s.position=j[Ht].legpos[i],i===0||jt.exclude[i]?s.performance="-":s.performance=(100*j[Ht].refRatio[0][i]).toFixed(1),jt.exclude[i]?s.best="-":s.best=ne(ii[i][0].t),i===0||jt.exclude[i])s.who="-";else{let o=ii[i][0].name;for(let a=1;a<ii[i].length&&ii[i][0].t===ii[i][a].t;a+=1)o+=", "+ii[i][a].name;s.who=o}const r=j[Ht].legSplits[i]-ii[i][0].t;if(i===0||j[Ht].legSplits[i]<=0?s.behind="-":s.behind=ne(r),i===0||j[Ht].legSplits[i]<=0?s.percent=0:s.percent=parseInt(r*100/ii[i][0].t,10),jt.exclude[i]?s.predicted="-":s.predicted=ne(j[Ht].predictedSplits[Ge][i]),j[Ht].legSplits[i]<=0)s.loss="";else{const o=j[Ht].predictedSplits[Ge][i]-j[Ht].legSplits[i];s.loss=o>=0?ne(o):"-"+ne(o*-1)}n.push(s)}const t={columnDefs:[{headerName:W("Control",""),field:"control",width:80},{headerName:W("Time",""),field:"time",width:80,comparator:Gl.bind(this)},{headerName:W("Position",""),field:"position",width:75},{headerName:W("Performance",""),field:"performance",width:95,comparator:OM.bind(this)},{headerName:W("Best",""),field:"best",width:80},{headerName:W("Who",""),field:"who",headerClass:"align-left",cellClass:i=>i.data.who.indexOf(i.data.name)>-1?"rg2-green-text align-left":"align-left",flex:1,tooltipField:"who"},{headerName:W("Behind",""),field:"behind",width:80,comparator:Gl.bind(this)},{headerName:"%",field:"percent",width:60},{headerName:W("Predicted",""),field:"predicted",width:100,comparator:Gl.bind(this)},{headerName:W("+/-",""),field:"loss",width:75,cellClass:i=>i.data.loss.substring(0,1)==="-"?"rg2-red-text align-center":"align-center",comparator:Gl.bind(this)}],rowData:n,domLayout:"autoHeight",defaultColDef:{headerClass:"align-center",cellClass:"align-center",sortable:!0}},e=document.getElementById("rg2-leg-table");e.innerHTML="",gh(e,t)}function EM(){const n=[];let t=0;for(let s=0;s<j[Ht].splits.length;s+=1){let r={};if(r.name=ae.name,s==0?r.control="S":s==j[Ht].splits.length-1?r.control="F":r.control=s+" ("+jt.codes[s]+")",s==0?r.time="0:00":j[Ht].splits[s]===j[Ht].splits[s-1]?r.time="":r.time=ne(j[Ht].splits[s]),s===0||j[Ht].racepos[s]===0?r.position="-":r.position=j[Ht].racepos[s],r.best=ne(si[s][0].t),s===0)r.who="-";else{let a=si[s][0].name;for(let l=1;l<si[s].length&&si[s][0].t===si[s][l].t;l+=1)a+=", "+si[s][l].name;r.who=a}const o=j[Ht].splits[s]-si[s][0].t;s===0||j[Ht].racepos[s]===0?r.behind="-":r.behind=ne(o),s===0||j[Ht].racepos[s]===0?r.percent="-":r.percent=parseInt(o*100/si[s][0].t,10),t=t+j[Ht].loss[Ge][s],r.loss=ne(t),n.push(r)}const e={columnDefs:[{headerName:W("Control",""),field:"control",width:88},{headerName:W("Time",""),field:"time",width:85},{headerName:W("Position",""),field:"position",width:100},{headerName:W("Best",""),field:"best",width:85},{headerName:W("Who",""),field:"who",headerClass:"align-left",cellClass:s=>s.data.who.indexOf(s.data.name)>-1?"rg2-green-text align-left":"align-left",flex:1,tooltipField:"who"},{headerName:W("Behind",""),field:"behind",width:85},{headerName:"%",field:"percent",width:85},{headerName:"Loss",field:"loss",width:100}],rowData:n,domLayout:"autoHeight",defaultColDef:{headerClass:"align-center",cellClass:"align-center"}},i=document.getElementById("rg2-race-table");i.innerHTML="",gh(i,e)}function oh(n,t){let e=n.slice();if(e.length===0)return{mean:0,median:0,count:0};e.sort(function(a,l){return a-l});let i=0,s=e.length;if(t<100){const o=Math.max(parseInt(s*t/100,10),3);e.splice(o),s=e.length}for(let o=0;o<s;o+=1)i=i+e[o];let r;return s===1?r=e[0]:s%2===0?r=(e[s/2-1]+e[s/2])/2:r=e[Math.floor(s/2)],{mean:i/s,median:r,count:s}}function Ry(){let n=0,t=0,e=0,i=9999;for(let r=1;r<ae.legpos.length;r+=1)ae.legpos[r]!==0&&(n+=ae.legpos[r],t+=1,i>ae.legpos[r]&&(i=ae.legpos[r]),e<ae.legpos[r]&&(e=ae.legpos[r]));let s;return t>0?s=(n/t).toFixed(1):(s=0,i=0,e=0),{best:i,worst:e,average:s}}function wM(n){return n.reduce((t,e)=>t+e,0)/n.length}function mm(n){return n==="-"?0:parseFloat(n)}function Ny(n){if(n.length===0)return 0;const t=wM(n);return Math.sqrt(n.reduce((e,i)=>e+Math.pow(i-t,2),0)/n.length)}function SM(){let n='<ul class="nav nav-pills" id="rg2-stats-panel-tab-headers" role="tablist">';for(let t of mc){const e=W(t.title),i=t.active?" active":"",s=t.active?"":"tabindex='-1'";n+=`<li class="nav-item${i}" role="presentation">
    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#${t.id}-tab"
      type="button" role="tab" ${s}>
      <div id="${t.id}-tab-label">${e}</div>
    </button>
    </li>`}return n+="</ul>",n}function TM(){const n='<div class="rg2-stats-title-row container"></div>';let t='<div id="rg2-stats-table"><div class="tab-content" id="rg2-stats-panel-tab-body">';for(let e=0;e<mc.length;e+=1){const i=mc[e].active?" active":"";t+=`<div class="tab-pane fade ${i} pt-2" id="${mc[e].id}-tab" role="tabpanel" tabindex="${e}">
      ${n}${lM[e]}</div>`}return t+="</div></div></div>",t}function vm(n){return n==="-"?0:parseFloat(n.replace(":","."))}function AM(n){var t;gf=(t=n==null?void 0:n.dataset)==null?void 0:t.bsTarget}function kM(n){ba=n,rh=Na(),ae=Mb(ba),rh?j=Ik(ae.variant):j=Lb(ae.courseid),DM(ae.courseid),uM(),vM(),Ht=Fy(ba)}function DM(n){if(rh?jt={courseid:ae.variant,codes:ae.scorecodes,exclude:!1}:jt=hi(n),Me=jt.codes.length,Me<=2)throw new By(W("No splits available."));ii.length=0,si.length=0;let t=[],e=[];for(let i=0;i<Me;i+=1){t.length=0,e.length=0;for(let s=0;s<j.length;s+=1)i===0?(t.push({t:0,name:"",pos:0}),e.push({t:0,name:"",pos:0})):(t.push({t:j[s].legSplits[i],name:j[s].name,pos:j[s].legpos[i]}),i<=j[s].lastValidSplit&&e.push({t:j[s].splits[i],name:j[s].name,pos:j[s].racepos[i]}));t.sort(function(s,r){return s.t===0?1:r.t===0?-1:s.t-r.t}),e.sort(function(s,r){return s.t-r.t}),ii.push(t.slice()),si.push(e.slice())}}function CM(n){return!isNaN(parseFloat(n))&&isFinite(n)?n>0:!1}function IM(){for(let n=0;n<=cM;n+=1)fM(n),hM(n),dM(n)}function LM(n){return wf()?(gf=Oy,vf(n)):(bt(W("Statistics",""),W("No statistics available for this event format.","")),!1)}function OM(n,t){return mm(n)-mm(t)}function vf(n){try{return kM(n),IM(),xM(),bM(),mM(),_M(),EM(),yM(),gM(),!0}catch(t){t instanceof By?bt(W("Statistics"),t.message):bt(W("Statistics",""),W("Data inconsistency.","")),Un.getInstance(document.getElementById("rg2-right-info-panel")).hide()}return!1}function bm(n){if(n.value.split==="0:00")return"";let t=n.value.split,e="";return n.value.pos!==0&&(t+=" ("+n.value.pos+")",n.value.pos===1&&(e="rg2-first"),n.value.pos===2&&(e="rg2-second"),n.value.pos===3&&(e="rg2-third")),n.value.loss&&(e+=" rg2-lost-time"),'<span class="'+e+'">'+t+"</span>"}function By(n){this.message=n}function Fy(n){for(let t=0;t<j.length;t+=1)if(j[t].rawid===n)return ae=j[t],t;return null}function ym(n,t){return n.time===0?1:t.time===0?-1:n.time-t.time}function Gl(n,t){return vm(n)-vm(t)}const ah=document.getElementById("rg2-show-info-panel-control"),tr=document.getElementById("rg2-right-info-panel"),bf=document.getElementById("rg2-right-info-panel-title"),yf=new Un(tr,{backdrop:!1}),Xr=document.getElementById("rg2-left-info-panel"),xm=document.getElementById("rg2-left-info-panel-title");let _m=document.getElementById("rg2-left-info-panel-body");const $y=new Un(Xr,{backdrop:!1});Xr.style.width="420px";Xr.addEventListener("hidden.bs.offcanvas",()=>{ah.classList.remove("d-none")});xf();const bd=10,yd=-10;function MM(){return!document.getElementById("rg2-animation-controls").classList.contains("d-none")}function PM(){document.querySelector("label[for=rg2-select-course]").innerHTML=`${W("Select course")}`,document.querySelector("label[for=rg2-select-name]").innerHTML=`${W("Select name")}`,document.querySelector("label[for=rg2-name-entry]").innerHTML=W("Name"),document.querySelector("#rg2-name-entry").addEventListener("input",()=>{Am()}),document.querySelector("label[for=rg2-time-entry]").innerHTML=W("Time"),document.querySelector("#rg2-time-entry").addEventListener("input",()=>{Am()});const n=document.getElementById("rg2-new-comments");n.setAttribute("placeholder",W(F.DEFAULT_NEW_COMMENT,"")),n.addEventListener("focus",()=>{document.getElementById("rg2-new-comments").setAttribute("placeholder","")});const t=document.getElementById("btn-three-seconds");t.innerHTML=W("+3 secs"),t.addEventListener("click",h=>{h.preventDefault(),TP()});const e=document.getElementById("btn-undo");e.innerHTML=W("Undo"),e.addEventListener("click",h=>{h.preventDefault(),SP()});const i=document.getElementById("btn-save-route");i.innerHTML=W("Save"),i.addEventListener("click",h=>{h.preventDefault(),bP()});const s=document.getElementById("btn-reset-drawing");s.innerHTML=W("Reset"),s.addEventListener("click",h=>{h.preventDefault(),pP()}),document.getElementById("rg2-load-gps-title").innerHTML=W("Load GPS file (GPX or TCX)"),document.getElementById("btn-offset-plus").addEventListener("click",()=>{const h=document.getElementById("rg2-offset-value");let g=parseInt(h.value,10);g<bd&&(g=g+1,h.value=g,xd(g))}),document.getElementById("btn-offset-minus").addEventListener("click",()=>{const h=document.getElementById("rg2-offset-value");let g=parseInt(h.value,10);g>yd&&(g=g-1,h.value=g,xd(g))}),document.getElementById("rg2-offset-value").addEventListener("input",()=>{const h=document.getElementById("rg2-offset-value");let g=parseInt(h.value,10);isNaN(g)&&(g=0),g<yd&&(g=yd),g>bd&&(g=bd),h.value=g,xd(g)});const r=document.getElementById("btn-undo-gps-adjust");r.innerHTML=W("Undo"),r.addEventListener("click",h=>{h.preventDefault(),wP()});const o=document.getElementById("btn-autofit-gps");o.innerHTML=W("Autofit"),o.addEventListener("click",h=>{h.preventDefault(),GM()}),document.querySelector("label[for=chk-move-all]").innerHTML=W("Move track and map together (or right click-drag)");const a=document.getElementById("btn-save-gps-route");a.innerHTML=W("Save GPS route"),a.addEventListener("click",h=>{h.preventDefault(),vP()}),["Left click to add/lock/unlock a handle","Green - draggable","Red - locked","Right click to delete a handle","Drag a handle to adjust track around locked point(s)"].forEach((h,g)=>{const v=document.getElementById(`draw-text-${g+1}`);v.innerHTML=`${W(h)}.`}),document.getElementById("rg2-load-gps-file").addEventListener("input",h=>{fP(h)})}function RM(){document.querySelector("label[for=rg2-select-language]").innerHTML=`${W("Language")}`,g1(F.languages),vc("chk-show-GPS-speed","showGPSSpeed","Show GPS speed colours"),vc("chk-snap-toggle","snap","Snap to control when drawing"),vc("chk-show-three-seconds","showThreeSeconds","Show +3 time loss for GPS routes"),Vr("map-intensity","perCentMapIntensity","Map intensity","%"),Vr("route-intensity","perCentRouteIntensity","Route intensity","%"),Vr("control-circle","circleSize","Control circle size"),Vr("course-width","courseWidth","Course overprint width"),Vr("route-width","routeWidth","Route width"),Vr("name-font-size","replayFontSize","Replay label font size");const n=document.getElementById("rg2-gps-speed-slider");n.setAttribute("value1",$t.maxSpeed),n.setAttribute("value2",$t.minSpeed),n.addEventListener("change",VM),document.getElementById("rg2-min-gps-speed-label").innerHTML=Hy(),document.getElementById("rg2-max-gps-speed-label").innerHTML=Vy()}function vc(n,t,e){document.querySelector(`label[for=${n}]`).innerHTML=`${W(e)}`;const i=document.getElementById(n);i.addEventListener("click",s=>{$t[t]=s.target.checked,ou(),wt()}),i.checked=$t[t]}function Vr(n,t,e,i=""){let s=document.querySelector(`label[for=spn-${n}]`);s.innerHTML=`${W(e)} ${$t[t]}${i}`;let r=document.getElementById(`spn-${n}`);r.setAttribute("value",$t[t]),r.addEventListener("change",o=>{D1(t,parseInt(o.target.value,10)),s=document.querySelector(`label[for=spn-${n}`),s.innerHTML=`${W(e)} ${$t[t]}${i}`,wt()})}function NM(){document.body.addEventListener("contextmenu",i=>{i.preventDefault()}),window.addEventListener("resize",()=>{xf(),E0()}),document.getElementById("rg2-left-info-panel-body").addEventListener("scroll",i=>{document.getElementById("rg2-info-panel").setAttribute(zy(),i.target.scrollTop)}),zM(),F.managing()||PM(),Em(),document.getElementById("rg2-logo").addEventListener("click",()=>{$y.toggle()}),document.querySelector("#rg2-info-panel-tab-headers").querySelectorAll('button[data-bs-toggle="tab"]').forEach(i=>{i.addEventListener("shown.bs.tab",s=>{UM(s)})}),ah.addEventListener("click",()=>{Em(),ah.classList.add("d-none")}),HM()}function BM(){if(F.managing())return;let n=document.getElementById("rg2-event-list");n.innerHTML=CP();let t=document.getElementById("rg2-event-table"),e=document.getElementById("rg2-event-search");e.innerHTML=`<form class="d-flex pb-2" role="search">
  <input class="form-control mr-2" type="search" aria-label="${W("Search")}">
  <i class="bi-search ms-2 mt-2"></i>
  </form>`,e.addEventListener("keyup",i=>{let s=i.target.value.toUpperCase(),r=t.getElementsByTagName("tr");for(let o=0;o<r.length;o+=1)r[o].innerText.toUpperCase().indexOf(s)>-1?r[o].classList.remove("d-none"):r[o].classList.add("d-none")}),t.addEventListener("click",i=>{const s=i.target.closest("tr"),r=parseInt(s.dataset.kartatid,10);isNaN(r)||el(r)})}function FM(){tr.style.width="800px",bf.innerHTML="RG2 Version "+F.RG2VERSION,document.getElementById("rg2-about-dialog").classList.remove("d-none"),document.getElementById("rg2-option-controls").classList.add("d-none"),document.getElementById("rg2-stats-dialog").classList.add("d-none");let n=document.getElementById("rg2-event-stats");n.innerHTML=RP(),document.getElementById("rg2-manager-link").innerHTML=`<a href="${rg2Config.api_url.replace("rg2api.php","?manage")}">Manager Login</a>`,yf.show()}function Em(){$y.show()}function $M(){tr.style.width="420px",bf.innerHTML=W("Configuration options"),document.getElementById("rg2-about-dialog").classList.add("d-none"),document.getElementById("rg2-option-controls").classList.remove("d-none"),document.getElementById("rg2-stats-dialog").classList.add("d-none"),RM(),yf.show()}function lh(n){tr.style.width="1000px",bf.innerHTML=SM(),document.getElementById("rg2-stats-dialog").innerHTML=TM(),document.getElementById("rg2-about-dialog").classList.add("d-none"),document.getElementById("rg2-option-controls").classList.add("d-none"),document.getElementById("rg2-stats-dialog").classList.remove("d-none"),LM(n)&&yf.show()}function yo(){return document.querySelector("#rg2-info-panel-tab-headers button.active").id}function wm(n){let t='<div id="rg2-info-panel">';t+='<div class="tab-content" id="rg2-info-panel-tab-body">';for(let e=0;e<n.length;e=e+1){const i=document.getElementById(n[e].body),s=n[e].active?" active show":"";t+=`<div class="tab-pane fade ${s}" id="rg2-${n[e].name}-body" role="tabpanel" 
    aria-labelledby="${n[e].name}" tabindex="${e}">${i.innerHTML}</div>`,i.remove()}return t+="</div></div>",t}function Sm(n){let t='<ul class="nav nav-pills" id="rg2-info-panel-tab-headers" role="tablist">';for(let e=0;e<n.length;e=e+1){const i=n[e].hidden?" d-none":"",s=n[e].active?" active":"",r=n[e].disabled?" disabled ":"";t+=`
    <li class="nav-item" role="presentation">
      <button class="nav-link${s}${i}"${r}id="${n[e].name}" data-bs-toggle="tab"
      data-bs-target="#rg2-${n[e].name}-body"
        type="button" role="tab"><div id="${n[e].name}-label">${W(n[e].title)}</div>
      </button>
    </li>`}return t+="</ul>",t}function Vy(){return`<i class="bi-emoji-smile rg2-run-green"></i> ${$t.maxSpeed.toFixed(1)} min/km`}function Hy(){return`<i class="bi-emoji-smile rg2-run-red"></i> ${$t.minSpeed.toFixed(1)} min/km`}function zy(){return`scroll-${yo()}`}function VM(n){$t.maxSpeed=n.detail.value1,$t.minSpeed=n.detail.value2;const t=document.getElementById("rg2-min-gps-speed-label");t.innerHTML=Hy();const e=document.getElementById("rg2-max-gps-speed-label");e.innerHTML=Vy(),Uk(),wt()}function HM(){document.getElementById("btn-about").addEventListener("click",n=>{FM()}),document.getElementById("btn-settings").addEventListener("click",n=>{$M()}),document.getElementById("btn-toggle-controls").addEventListener("click",()=>{Ye.toggleControlDisplay(),wt()}),document.getElementById("btn-stats").addEventListener("click",()=>{lh(1)}),document.getElementById("btn-splitsbrowser").addEventListener("click",()=>{window.open(rg2Config.api_url+"?type=splitsbrowser&id="+pr()+"&_="+Date.now())}),document.getElementById("btn-measure").setAttribute("disabled",""),document.getElementById("btn-runners").setAttribute("disabled",""),document.getElementById("btn-toggle-controls").setAttribute("disabled",""),document.getElementById("btn-stats").setAttribute("disabled",""),document.getElementById("btn-splitsbrowser").setAttribute("disabled","")}function zM(){const n=[{name:F.TAB_EVENTS,title:"Events",body:"rg2-event-body",active:!0},{name:F.TAB_COURSES,title:"Courses",body:"rg2-course-body",disabled:!0},{name:F.TAB_RESULTS,title:"Results",body:"rg2-result-body",disabled:!0},{name:F.TAB_DRAW,title:"Draw",body:"rg2-draw-body",disabled:!0}],t=[{name:F.TAB_LOGIN,title:"Login",body:"rg2-login-body",active:!0},{name:F.TAB_CREATE,title:"Add event",body:"rg2-add-event-body",hidden:!0},{name:F.TAB_EDIT,title:"Edit event",body:"rg2-edit-event-body",hidden:!0},{name:F.TAB_MAP,title:"Add map",body:"rg2-add-map-body",hidden:!0},{name:F.TAB_DELETE_MAP,title:"Delete maps",body:"rg2-delete-maps-body",hidden:!0}];F.managing()?(xm.innerHTML=Sm(t),_m.innerHTML=wm(t)):(xm.innerHTML=Sm(n),_m.innerHTML=wm(n))}function qM(){jP(),Ib(void 0),document.getElementById("rg2-select-name").setAttribute("disabled",""),wf()?(document.getElementById("rg2-name-select").classList.remove("d-none"),document.getElementById("rg2-enter-name-and-time").classList.add("d-none")):(document.getElementById("rg2-name-select").classList.add("d-none"),document.getElementById("rg2-enter-name-and-time").classList.remove("d-none")),vc("chk-align-map","alignMap","Align map to next control"),document.getElementById("btn-three-seconds").setAttribute("disabled",""),document.getElementById("btn-undo").setAttribute("disabled",""),document.getElementById("btn-save-route").setAttribute("disabled",""),document.getElementById("btn-reset-drawing").setAttribute("disabled",""),document.getElementById("rg2-load-gps-file").setAttribute("disabled",""),document.getElementById("btn-autofit-gps").setAttribute("disabled",""),document.getElementById("btn-undo-gps-adjust").setAttribute("disabled",""),document.getElementById("btn-save-gps-route").setAttribute("disabled",""),document.getElementById("chk-move-all").checked=!1}function xf(){const n=document.getElementById("rg2-header-container").offsetHeight,t=MM()?document.getElementById("rg2-animation-controls").offsetHeight:0;Xr.style.top=`${n}px`,tr.style.top=`${n}px`,Xr.style.bottom=`${t}px`,tr.style.bottom=`${t}px`,Xr.style.maxWidth=`${window.innerWidth}px`,tr.style.maxWidth=`${window.innerWidth}px`,document.getElementById("rg2-track-names").style.maxHeight=`${window.innerHeight-n-10}px`}function jM(){document.querySelectorAll(".showcourse").forEach(h=>{h.addEventListener("click",g=>{const v=parseInt(g.target.dataset.courseid,10);nl(v,g.target.checked);const y=document.querySelectorAll(".showcourse");for(let E of y)parseInt(E.dataset.courseid,10)===v&&(E.checked=g.target.checked);const x=document.querySelector(".showallcourses");x.checked=qP(),xa(v),Mp(Dm()),wt()})}),document.querySelector(".showallcourses").addEventListener("click",h=>{i0(h.target.checked);const g=document.querySelectorAll(".showcourse");for(let v of g)v.checked=h.target.checked;Cm(),Mp(Dm()),wt()}),document.querySelectorAll(".showscorecourse").forEach(h=>{h.addEventListener("click",g=>{Ak(parseInt(g.target.dataset.courseid,10),g.target.checked),wt()})}),document.querySelectorAll(".showtrack").forEach(h=>{h.addEventListener("click",g=>{const v=parseInt(g.target.dataset.id,10);eD(v,g.target.checked);const y=parseInt(g.target.dataset.courseid,10);document.querySelectorAll(".allcoursetracks").forEach(S=>{parseInt(S.dataset.courseid,10)===y&&(S.checked=_k(y))}),document.querySelectorAll(".alltracks").forEach(S=>{S.checked=Vp()}),xa(y),nd(rd()),wt()})});const s=document.querySelectorAll(".deleteroute");for(let h of s)h.addEventListener("click",g=>{ZM(parseInt(g.target.dataset.resultidx,10))});const r=document.querySelectorAll(".allcoursetracks");for(let h of r)h.addEventListener("click",g=>{let v=parseInt(g.target.dataset.courseid,10);Up(v,g.target.checked);const y=document.querySelectorAll(".allcoursetracks");for(let S of y)parseInt(S.dataset.courseid,10)===v&&(S.checked=g.target.checked);const x=document.querySelectorAll(".showtrack");for(let S of x)parseInt(S.dataset.courseid,10)===v&&(S.checked=g.target.checked);const E=document.querySelectorAll(".alltracks");for(let S of E)S.checked=Vp();xa(v),nd(rd()),wt()});const o=document.querySelectorAll(".alltracks");for(let h of o)h.addEventListener("click",g=>{Up(F.DISPLAY_ALL_COURSES,g.target.checked);const v=document.querySelectorAll(".allcoursetracks");for(let x of v)x.checked=g.target.checked;const y=document.querySelectorAll(".showtrack");for(let x of y)x.checked=g.target.checked;Cm(g.target.checked),nd(rd()),wt()});const a=document.querySelectorAll(".showreplay");for(let h of a)h.addEventListener("click",g=>{let v=parseInt(g.target.dataset.id,10);g.target.checked?a0(new Rb(v)):h0(v);const y=Pk(v),x=document.querySelectorAll(".allcoursetracksreplay");for(let S of x)parseInt(S.dataset.courseid,10)===y&&(S.checked=Hp(y));const E=document.querySelectorAll(".allcoursereplay");for(let S of E)S.checked=$p(y);wt()});const l=document.querySelectorAll(".allcoursetracksreplay");for(let h of l)h.addEventListener("click",g=>{let v=parseInt(g.target.dataset.courseid,10);const y=Ok(v);Lm(y,g.target.checked);const x=document.querySelectorAll(".showreplay.showtrackreplay");for(let C of x)parseInt(C.dataset.courseid,10)===v&&(C.checked=g.target.checked);const E=document.querySelectorAll(".allcoursetracksreplay");for(let C of E)parseInt(C.dataset.courseid,10)===v&&(C.checked=g.target.checked);let S=document.querySelectorAll(".allcoursereplay");for(let C of S)parseInt(C.dataset.courseid,10)===v&&(C.checked=$p(v));wt()});const d=document.querySelectorAll(".allcoursereplay");for(let h of d)h.addEventListener("click",g=>{const v=parseInt(g.target.dataset.courseid,10),y=Lk(v);Lm(y,g.target.checked);const x=document.querySelectorAll(".showreplay");for(let S of x)parseInt(S.dataset.courseid,10)===v&&(S.checked=g.target.checked);const E=document.querySelectorAll(".allcoursetracksreplay");for(let S of E)parseInt(S.dataset.courseid,10)===v&&(S.checked=Hp(v));wt()})}function UM(n){switch(n.target.id){case F.TAB_DRAW:i0(!1),EP();break}const t=document.getElementById("rg2-info-panel").getAttribute(zy());document.getElementById("rg2-left-info-panel-body").scrollTop=t,wt()}const WM=50,ta=20;let Bc=null,Fc=[],Ra=!1,Tm="#ff0000",qy=null,B=new hb;B.routeData=new au;let yu=null,ge=[],Ie=[],_f=[],pe=0,cs=0,lo=!1;function YM(n,t){Ra&&(KM(n,t)?(ch(ge[pe],Ie[pe]),Uy(pe),cs=pe,pe=Yy(pe),pe===ge.length&&(document.getElementById("btn-save-route").removeAttribute("disabled"),sl())):ch(Math.round(n),Math.round(t)),document.getElementById("btn-undo").removeAttribute("disabled"),wt())}function ch(n,t){B.routeData.x.push(n),B.routeData.y.push(t)}function XM(n,t,e){const i=B.handles.getPreviousLockedHandle(e),s=B.handles.getNextLockedHandle(e);ya(n,t,i,i.time,e.time),ya(n,t,s,e.time,s.time)}function xd(n){B.adjustOffset(n)}function jy(n,t,e=void 0){if(document.getElementById("chk-move-all").checked||e===F.RIGHT_CLICK)D.translate(t.x-n.x,t.y-n.y);else if(B.handles.handlesLocked()>0)if(B.handles.handlesLocked()===1)ya(n,t,B.handles.getSingleLockedHandle(),B.handles.getStartHandle().time,B.handles.getFinishHandle().time);else{let r=B.handles.getHandleClicked(n);if(r===void 0||r.locked)return;const o=B.handles.getEarliestLockedHandle(),a=B.handles.getLatestLockedHandle();o.time>=r.time?ya(n,t,o,B.handles.getStartHandle().time,o.time):a.time<r.time?ya(n,t,a,a.time,B.handles.getFinishHandle().time):XM(n,t,r)}else iP(t.x-n.x,t.y-n.y)}function Uy(n){if($t.alignMap&&n<ge.length-1){Ra=!1,Fc=[];const t=ge[n],e=Ie[n],i=ge[n+1],s=Ie[n+1],r=Lf(),o=b0(),a=Fe(t,e,i,s),l=Fe(r.x,r.y,o.x,o.y);let d=Math.min(l/a,F.MAX_ZOOM);d=Math.max(d,F.MIN_ZOOM);let h;lo?h=ar(ge[n],Ie[n],ge[n+1],Ie[n+1]):h=_f[n];let g=(D.displayAngle-h-Math.PI/2)%(Math.PI*2);g<-1*Math.PI&&(g=g+2*Math.PI);for(let v=1;v<=ta;v=v+1){let y={};y.x=r.x-(r.x-t)*v/ta,y.y=r.y-(r.y-e)*v/ta,y.angle=(D.displayAngle-g*v/ta)%(Math.PI*2),y.scale=Math.pow(d,1/ta),Fc.push(y)}Bc=setInterval(()=>{dP()},WM)}else Su(0,ge[n],Ie[n],!1,1),Ra=!0,Bc=null}function GM(){B.autofitTrack()}function KM(n,t){let e=$t.snap?8:2;return console.log(n,t,ge[pe],Ie[pe]),Math.abs(n-ge[pe])<e&&Math.abs(t-Ie[pe])<e}function JM(){let n={};n.body="The route you have started to draw will be discarded. Are you sure you want to change the course?",n.title="Confirm course change",n.doText="Change course",n.onDo=tP,n.onCancel=QM,mi(n)}function ZM(n){qy=n;let t={};t.body="This route will be permanently deleted. Are you sure?",t.title="Confirm route delete",t.doText="Delete route",t.onDo=eP,mi(t)}function QM(){document.getElementById("rg2-select-course").value=B.routeData.courseid,document.getElementById("rg2-select-name").value=B.routeData.resultid,yu=null}function tP(){Ef(),uh(yu)}function eP(){const n=Nk(qy),t={type:"deletemyroute",id:pr(),routeid:n.id};gi(JSON.stringify({token:n.token}),t,cP,"Route save failed")}function Ef(){B.routeData.courseid!==null&&nl(B.routeData.courseid,!1),B.routeData.resultid!==null&&Aa(B.routeData.resultid,!1),Xy()}function Wy(){yP();const n={type:"addroute",id:B.routeData.eventid};gi(JSON.stringify(B.routeData),n,uP(B.routeData.name),"Route save failed"),Ef()}function nP(){B.fileLoaded&&(B.savedBaseX=B.baseX.slice(0),B.savedBaseY=B.baseY.slice(0),B.baseX=B.routeData.x.slice(0),B.baseY=B.routeData.y.slice(0),B.handles.saveForUndo(),B.handles.rebaselineXY(),document.getElementById("btn-undo-gps-adjust").removeAttribute("disabled"))}function iP(n,t){for(let e=0;e<B.baseX.length;e+=1)B.routeData.x[e]=B.baseX[e]+n,B.routeData.y[e]=B.baseY[e]+t;B.handles.dragHandles(n,t)}function _d(n){D.arc(ge[pe],Ie[pe],n,0,2*Math.PI,!1),D.fill()}function sP(){const n=Ya();D.lineWidth=n.overprintWidth,D.strokeStyle=F.RED,D.fillStyle=F.RED_30,pe>0&&!B.fileLoaded&&(D.beginPath(),pe<ge.length-1?_d(n.controlRadius):(_d(n.finishInnerRadius),D.stroke(),D.beginPath(),_d(n.finishOuterRadius)),D.fillRect(ge[pe]-1,Ie[pe]-1,3,3),D.stroke()),D.strokeStyle=Tm,D.fillStyle=Tm,D.font="10pt Arial",D.textAlign="left",D.globalAlpha=.6,rP(),B.handles.drawHandles()}function rP(){if(B.routeData.x.length>1){D.beginPath(),D.moveTo(B.routeData.x[0],B.routeData.y[0]);for(let n=1;n<B.routeData.x.length;n+=1)D.lineTo(B.routeData.x[n],B.routeData.y[n]);D.stroke()}}function oP(){return{x:ge,y:Ie}}function Yy(n){const t=B.routeData.splits;if(t.length===2)return n+1;for(let e=n+1;e<t.length;e+=1)if(t[e]!==t[e-1])return e;return t.length}function aP(n){const t=B.routeData.splits;if(t.length===2)return n-1;for(let e=n-1;e>0;e-=1)if(t[e]!==t[e-1])return e;return 0}function lP(){return B.fileLoaded}function cP(n){n.ok?(bt(W("Route deleted"),W("Route has been deleted")),A1({eventid:parseInt(n.eventid,10),id:parseInt(n.routeid,10)}),xo()):bt(W("Delete failed"),W("Delete failed"))}const uP=n=>t=>{t.ok?mP(t,n):bt(n,W("Your route was not saved. Please try again"))};function dP(){if(Fc.length===0)clearInterval(Bc),Bc=null,Ra=!0;else{const n=Fc.shift();Su(n.angle,n.x,n.y,!0,n.scale)}wt()}function uh(n){yu=null,B.routeData=new au,B.routeData.eventid=pr(),B.routeData.courseid=n;const t=hi(n);lo=t.isScoreCourse,lo||(nl(n,!0),B.routeData.coursename=t.name,t.excludeType===F.EXCLUDED_ZERO_SPLITS?B.routeData.controlsToAdjust=t.exclude.indexOf(!0):B.routeData.controlsToAdjust=t.x.length-1,ge=t.x.slice(),Ie=t.y.slice(),B.routeData.x.length=0,B.routeData.y.length=0,B.routeData.x[0]=ge[0],B.routeData.y[0]=Ie[0],B.routeData.controlx=ge.slice(),B.routeData.controly=Ie.slice(),_f=t.angle.slice()),document.getElementById("rg2-select-course").value=B.routeData.courseid,Ib(n),wt()}function Xy(){B=new hb,B.routeData=new au,ge.length=0,Ie.length=0,_f.length=0,pe=0,cs=0,lo=!1,B.initialiseGPS(),qM(),wt()}function hP(n,t,e){if(yo()===F.TAB_DRAW)if(B.fileLoaded){const s=B.handles.getHandleClicked({x:n,y:t});if(s!==void 0)e===F.RIGHT_CLICK&&s.index!==0&&s.index!==B.handles.length?s.locked?B.handles.unlockHandle(s.index):B.handles.deleteHandle(s.index):s.locked?B.handles.unlockHandle(s.index):B.handles.lockHandle(s.index);else for(let r=0;r<B.baseX.length;r+=1)if(B.baseX[r]+3>=n&&B.baseX[r]-3<=n&&B.baseY[r]+3>=t&&B.baseY[r]-3<=t){B.handles.addHandle(n,t,r);break}}else B.routeData.resultid!==null&&B.routeData.courseid!==null?YM(n,t):bt("No course/name","Please select course, name and time before you start drawing a route or upload a file.")}function fP(n){sl(),B.readGPS(n)}function pP(){let n={};n.body="All information you have entered will be removed. Are you sure you want to reset?",n.title="Confirm reset",n.doText="Reset",n.onDo=Ef,mi(n)}function gP(n,t,e){let i={};return i.x=Math.cos(e)*n-Math.sin(e)*t,i.y=Math.sin(e)*n+Math.cos(e)*t,i}function mP(n,t){bt(t,W("Your route has been saved")),k1({eventid:parseInt(n.eventid,10),id:n.newid,token:n.token}),el(pr())}function vP(){const n=B.routeData.time[B.routeData.time.length-1]-B.routeData.time[0];B.routeData.totaltime=ne(n);const e=new Date().getTimezoneOffset()*60;B.routeData.startsecs=B.routeData.time[0]-e;for(let i=0;i<B.routeData.x.length;i+=1)B.routeData.x[i]=Math.round(B.routeData.x[i]),B.routeData.y[i]=Math.round(B.routeData.y[i]),B.routeData.time[i]-=B.routeData.startsecs;for(B.routeData.resultid+=F.GPS_RESULT_OFFSET;Wk(B.routeData.resultid);)B.routeData.resultid+=F.GPS_RESULT_OFFSET,B.routeData.name+="*";B.routeData.comments=document.getElementById("rg2-new-comments").value,document.getElementById("btn-undo-gps-adjust").setAttribute("disabled",""),Wy()}function bP(){B.routeData.comments=document.getElementById("rg2-new-comments").value,B.routeData.controlx=ge,B.routeData.controly=Ie,B.routeData.controlx.splice(0,1),B.routeData.controly.splice(0,1),Wy()}function ya(n,t,e,i,s){const r=Fe(t.x,t.y,e.x,e.y)/Fe(n.x,n.y,e.x,e.y),o=ar(t.x,t.y,e.x,e.y)-ar(n.x,n.y,e.x,e.y);for(let a=i;a<=s;a+=1){const l=gP(B.baseX[a]-e.x,B.baseY[a]-e.y,o);B.routeData.x[a]=l.x*r+e.x,B.routeData.y[a]=l.y*r+e.y}B.handles.alignHandles(B.routeData)}function yP(){for(let n=B.routeData.x.length-1;n>0;n-=1)B.routeData.x[n]=B.routeData.x[n]-B.routeData.x[n-1],B.routeData.y[n]=B.routeData.y[n]-B.routeData.y[n-1];for(let n=B.routeData.time.length-1;n>0;n-=1)B.routeData.time[n]=B.routeData.time[n]-B.routeData.time[n-1]}function xP(n){isNaN(n)||(B.routeData.courseid!==null?B.routeData.x.length>1?(yu=n,JM()):(B.routeData.resultid!==null&&Aa(B.routeData.resultid,!1),nl(B.routeData.courseid,!1),uh(n)):uh(n))}function _P(n){if(!isNaN(n)){const t=Ob(n);if(t.hasValidTrack){const e=W("If you draw a new route it will overwrite the old route for this runner.")+" "+W("GPS routes are saved separately and will not be overwritten.");bt(W("Route already drawn"),e)}B.routeData.resultid!==null&&Aa(B.routeData.resultid,!1),B.routeData.resultid=t.resultid,B.routeData.name=t.name,B.routeData.splits=t.splits,lo?(Aa(t.resultid,!0),ge=t.scorex,Ie=t.scorey,B.routeData.x.length=0,B.routeData.y.length=0,B.routeData.x[0]=ge[0],B.routeData.y[0]=Ie[0],B.routeData.controlx=ge,B.routeData.controly=Ie,pe=1,wt()):(pe=Yy(0),cs=0),Gy()}}function Am(){const n=document.getElementById("rg2-name-entry"),t=n.value.trim();t?n.classList.add("is-valid"):n.classList.remove("is-valid");const e=document.getElementById("rg2-time-entry");let i=e.value.trim();if(i.match(/\d+[:.][0-5]\d$/)?e.classList.add("is-valid"):(e.classList.remove("is-valid"),i=null),t&&i&&B.routeData.courseid!==null){i=i.replace(".",":"),B.routeData.name=t,B.routeData.resultid=0,B.routeData.totaltime=i,B.routeData.startsecs=0,B.routeData.time[0]=Li(i),B.routeData.totalsecs=Li(i),pe=1;const s=ZP(B.routeData.courseid),r=s[s.length-1];let o=[];for(let a=0;a<s.length;a=a+1)o[a]=parseInt(s[a]/r*B.routeData.totalsecs,10);B.routeData.splits=o,cs=0,Gy()}}function EP(){B.routeData.courseid!==null&&(lo?Aa(B.routeData.resultid,!0):nl(B.routeData.courseid,!0))}function Gy(){document.getElementById("btn-three-seconds").removeAttribute("disabled"),document.getElementById("btn-reset-drawing").removeAttribute("disabled",""),document.getElementById("rg2-load-gps-file").removeAttribute("disabled"),Uy(0),wt()}function wP(){B.baseX=B.savedBaseX.slice(0),B.baseY=B.savedBaseY.slice(0),B.routeData.x=B.savedBaseX.slice(0),B.routeData.y=B.savedBaseY.slice(0),B.handles.undo(),document.getElementById("btn-undo-gps-adjust").setAttribute("disabled",""),wt()}function SP(){if(Ra){const n=B.routeData.x.length;n>1&&(ge[cs]===B.routeData.x[n-1]&&Ie[cs]===B.routeData.y[n-1]&&(pe===ge.length&&document.getElementById("btn-save-route").setAttribute("disabled",""),pe=cs,cs=aP(pe)),B.routeData.x.pop(),B.routeData.y.pop()),B.routeData.x.length>1?document.getElementById("btn-undo").removeAttribute("disabled"):document.getElementById("btn-undo").setAttribute("disabled",""),wt()}}function TP(){ch(B.routeData.x[B.routeData.x.length-1],B.routeData.y[B.routeData.y.length-1]),wt()}let AP=class{constructor(t){switch(this.kartatid=t.id,this.mapid=t.mapid,this.format=t.format,this.name=t.name,this.date=t.date,this.club=t.club,this.rawtype=t.type,t.type){case"I":this.type="International event";break;case"N":this.type="National event";break;case"R":this.type="Regional event";break;case"L":this.type="Local event";break;case"T":this.type="Training event";break;default:this.type="Unknown";break}this.comment=t.comment,this.locked=t.locked,this.courses=0,t.suffix===void 0?this.mapfilename=this.mapid+".jpg":this.mapfilename=this.mapid+"."+t.suffix,this.worldfile=new ai(t)}},zt=[],Qt=null,dh=!1;function kP(n){const t=document.querySelectorAll("#rg2-event-table tr");for(let i of t)parseInt(i.dataset.kartatid,10)===n?i.classList.add("table-success"):i.classList.remove("table-success");const e=document.getElementById("btn-splitsbrowser");rg2Config.enable_splitsbrowser&&wf()?e.removeAttribute("disabled"):e.setAttribute("disabled",""),document.getElementById("btn-toggle-controls").removeAttribute("disabled"),document.getElementById("btn-runners").removeAttribute("disabled"),document.getElementById("btn-measure").removeAttribute("disabled"),document.getElementById("btn-stats").removeAttribute("disabled")}function DP(n){Eu(null),ru({type:"event",id:n},FP,"Event request failed")}function xo(){ru({type:"events"},$P,"Events request failed")}function Ky(){return Qt===null?!1:zt[Qt].locked}function CP(){let n="<table class='table table-striped table-hover table-sm'><tbody id='rg2-event-table'>";for(let t=zt.length-1;t>=0;t-=1){let e=W(zt[t].type,"")+": "+zt[t].date;zt[t].comment!==""&&(e+=": "+zt[t].comment);let i="";zt[t].comment!==""&&(i=`<i class='bi-info-circle' id='info-${t}'></i>`);let s="";zt[t].worldfile.valid&&(s=`<i class='bi-globe' id='info-${t}'></i>`);let r="";zt[t].locked&&(r=`<i class='bi-lock-fill' id='info-${t}'></i>`),n+=`<tr data-kartatid="${zt[t].kartatid}"><td class="event-date">${zt[t].date}</td><td title='${e}'>`,n+=`${zt[t].name} ${r} ${s} ${i}</td ></tr >`}return n+="</tbody></table>",n}function IP(){return Qt!==null?zt[Qt].date:""}function Jy(){return Qt}function LP(){if(Qt!==null)return zt[Qt].kartatid}function OP(){return Qt!==null?zt[Qt].name:"Routegadget 2"}function MP(){return Qt!==null?zt[Qt].mapid:null}function PP(n){for(let t=0;t<zt.length;t+=1)if(zt[t].kartatid===n)return t}function wf(){return Qt!==null?zt[Qt].format===F.FORMAT_NORMAL||zt[Qt].format===F.FORMAT_SCORE_EVENT:!0}function Sf(n){n=n||pr();const t=PP(n);let e=zt[t];return e.id=t,e.controls=Ye.getControlCount(),e.exclude=eR(),e}function RP(){if(Qt===null)return"";const n=pr(),t=Sf(parseInt(n,10));let e=`<div class='fs-4 fw-bolder pb-3'>${W("Event statistics")}</div>`;return e+="<table class='table table-sm table-striped-columns table-bordered'><tbody>",e+=`<tr><td>${W("Event")}</td><td>${t.name}:&nbsp;${t.date}</td></tr>`,t.comment&&(e+=`<tr><td>${W("Comments")}</td><td>${t.comment}</td></tr>`),e+=Vk(t.controls,t.worldfile.valid),e+="</tbody></table>",e+='<hr class="border border-primary opacity-75" />',e+=Mk(),e=e.replace(/&amp;/g,"&"),e}function pr(){return Qt===null?null:zt[Qt].kartatid}function NP(){return Qt===null||!_u()?"px":"m"}function BP(n){for(let t=0;t<zt.length;t+=1)if(zt[t].kartatid===n)return zt[t].mapfilename;return""}function xu(){if(Qt===null||!_u())return;const n=vs(),t=Fe(0,0,n.width,n.height),e=zt[Qt].worldfile,i=e.C,s=e.F,r=e.A*n.width+e.B*n.height+e.C,o=e.D*n.width+e.E*n.height+e.F;return Vd(s,i,o,r)/t}function Zy(){return Qt===null?null:zt[Qt].worldfile}function FP(n,t){dh=!1,N1(t),Eu(t),Tf(),aR(n.courses),Xk(n.results),Gk(n.routes),Xy(),kP(t)}function $P(n){zt.length=0,Qt=null;for(const e of n.events)zt.push(new AP(e));BM();const t=O1();t&&el(t),F.managing()&&EA(zt)}function Na(){return Qt!==null?zt[Qt].format===F.FORMAT_SCORE_EVENT||zt[Qt].format===F.FORMAT_SCORE_EVENT_NO_RESULTS:!1}function Qy(n){for(let t=0;t<zt.length;t+=1)if(zt[t].kartatid===n)return!0;return!1}function el(n){dh||!Qy(n)||(dh=!0,TR(),Tk(),t0(),Of(rg2Config.maps_url+BP(n)),document.getElementById("rg2-load-progress-label").textContent=W("Loading event",""),document.getElementById("rg2-load-progress").classList.remove("d-none"),DP(n),wt())}function VP(n){for(let t=0;t<zt.length;t+=1)if(zt[t].mapid===n)return!0;return!1}function _u(){return Qt===null?!1:zt[Qt].worldfile.valid}function Eu(n){Qt=null;for(let t=0;t<zt.length;t+=1)if(zt[t].kartatid===n){Qt=t;break}}function Tf(){let n="";n=IP()+" "+qn(OP()),document.title=n,_u()&&(n="<i class='bi-globe'>&nbsp;</i>"+n),Ky()&&(n="<i class='bi-lock-fill'>&nbsp;</i>"+n),document.getElementById("rg2-event-title").innerHTML=n}class HP{constructor(t,e){this.name=t.name,this.trackcount=0,this.display=!1,this.courseid=t.courseid,this.codes=t.codes,this.setExcluded(t),this.filterTo=this.codes.length,this.filterFrom=0,this.x=t.xpos,this.y=t.ypos,this.isScoreCourse=e,this.resultcount=0,this.angle=[],this.textAngle=[],this.setAngles(),this.length=this.setLength()}drawCourse(t){if(this.display){const e=Ya();if(D.globalAlpha=t,Ye.drawStart(this.x[0],this.y[0],"",this.angle[0],e),!this.isScoreCourse){const i={from:this.filterFrom,to:this.filterTo};this.drawLinesBetweenControls({x:this.x,y:this.y},this.angle,e,i)}if(this.isScoreCourse)for(let i=1;i<this.x.length;i+=1)this.codes[i].indexOf("F")===0||this.codes[i].indexOf("M")===0?Ye.drawFinish(this.x[i],this.y[i],"",e):Ye.drawSingleControl(this.x[i],this.y[i],this.codes[i],this.textAngle[i],e);else{const i=Math.max(this.filterFrom,1),s=Math.min(this.filterTo+1,this.x.length-1);for(let r=i;r<s;r+=1)Ye.drawSingleControl(this.x[r],this.y[r],r,this.textAngle[r],e);Ye.drawFinish(this.x[this.x.length-1],this.y[this.y.length-1],"",e)}}}drawLinesBetweenControls(t,e,i,s){let r;for(let o=s.from;o<s.to;o+=1){o===0?r=i.startTriangleLength:r=i.controlRadius;const a=t.x[o]+r*Math.cos(e[o]),l=t.y[o]+r*Math.sin(e[o]);o===this.x.length-2?r=i.finishOuterRadius:r=i.controlRadius;const d=t.x[o+1]-r*Math.cos(e[o]),h=t.y[o+1]-r*Math.sin(e[o]);D.beginPath(),D.moveTo(a,l),D.lineTo(d,h),D.stroke()}}getLegLengths(){let t=[];if(this.isScoreCourse)return t[1]=1,t;t[0]=0;for(let e=1;e<this.x.length;e+=1)t[e]=parseInt(t[e-1]+Fe(this.x[e],this.y[e],this.x[e-1],this.y[e-1]),0);return t}incrementTracksCount(){this.trackcount+=1}setAngles(){for(let t=0;t<this.x.length-1;t+=1)if(this.isScoreCourse)this.angle[t]=Math.PI*1.5,this.textAngle[t]=Math.PI*.25;else{this.angle[t]=ar(this.x[t],this.y[t],this.x[t+1],this.y[t+1]);const e=Math.sin(this.angle[t-1]),i=Math.cos(this.angle[t-1]),s=Math.sin(this.angle[t])+e,r=Math.cos(this.angle[t])+i,o=s/2,a=r/2;this.textAngle[t]=ar(o,a,e,i)}this.angle[this.x.length-1]=Math.PI*1.5,this.textAngle[this.x.length-1]=Math.PI*1.5}setDisplay(t){this.display=t}setExcluded(t){this.excludeType=t.excludeType,this.exclude=t.codes.map((e,i)=>t.exclude.findIndex(s=>s===i)>-1),this.allowed=t.codes.map((e,i)=>t.exclude.findIndex(s=>s===i)>-1?t.allowed[t.exclude.findIndex(s=>s===i)]:0)}setLength(){let t=0;const e=xu();if(!(e===void 0||this.isScoreCourse)){for(let i=1;i<this.x.length;i+=1)t+=Fe(this.x[i],this.y[i],this.x[i-1],this.y[i-1]);if(t!==0)return(t*e/1e3).toFixed(1)}}}(()=>{var n=Object.defineProperty,t=Math.pow,e=(k,M,X)=>M in k?n(k,M,{enumerable:!0,configurable:!0,writable:!0,value:X}):k[M]=X,i=(k,M,X)=>(e(k,typeof M!="symbol"?M+"":M,X),X),s=(k,M)=>` ${M&&M.length>0?M.map(X=>`<link rel="stylesheet" href="${X}" />`).join(""):""} <style> ${k} </style> <div class="range-slider-box"> <div class="row"> <div id="range-slider" class="range-slider"> <div class="container"> <div class="panel"></div> <div class="panel-fill"></div> <div class="container"> <div class="pointer" tabindex="0" role="slider"> <div class="pointer-shape"></div> </div> </div> </div> </div> </div> </div>`,r=":host{--width:300px;--height:.25rem;--opacity:.4;--panel-bg:#cbd5e1;--panel-bg-hover:#94a3b8;--panel-bg-fill:#475569;--panel-bg-border-radius:1rem;--pointer-width:1rem;--pointer-height:1rem;--pointer-bg:#fff;--pointer-bg-hover:#dcdcdc;--pointer-bg-focus:#dcdcdc;--pointer-shadow:0 0 2px rgba(0,0,0,0.8);--pointer-shadow-hover:0 0 2px #000;--pointer-shadow-focus:var(--pointer-shadow-hover);--pointer-border:1px solid hsla(0,0%,88%,0.5);--pointer-border-hover:1px solid #94a3b8;--pointer-border-focus:var(--pointer-border-hover);--pointer-border-radius:100%;--animate-onclick:.3s}:host{max-width:100%}.range-slider-box{display:flex;position:relative;flex-direction:column}.range-slider{position:relative;width:var(--width,100%);height:var(--height,0.25rem);touch-action:none;max-width:100%;box-sizing:border-box;cursor:pointer}.row{width:100%;display:flex;align-items:center}.range-slider.disabled{opacity:var(--opacity,0.4);cursor:default}.pointer.disabled{-webkit-filter:brightness(0.8);filter:brightness(0.8);cursor:default}.range-slider *{box-sizing:border-box}.container{position:absolute;width:100%;height:100%}.panel{position:absolute;z-index:10;width:100%;height:100%;background:var(--panel-bg,#2d4373);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;transition:.3s all ease}.panel-fill{background:var(--panel-bg-fill,#000);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;height:100%;position:absolute;z-index:10}.panel:hover{background:var(--panel-bg-hover,#5f79b7)}.disabled .panel:hover{background:var(--panel-bg,#5f79b7)}.pointer{position:absolute;z-index:20;outline:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;box-shadow:var(--pointer-shadow);border:var(--pointer-border);border-radius:var(--pointer-border-radius,100%);-webkit-transform:translateX(-50%);transform:translateX(-50%);width:var(--pointer-width,15px);height:var(--pointer-height,15px);transition:.3s all ease}.pointer-shape:hover{background:var(--pointer-bg-hover,#fff);background-size:contain;border:var(--pointer-border-hover);box-shadow:var(--pointer-shadow-hover)}.disabled .pointer-shape:hover{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.pointer:focus .pointer-shape{background:var(--pointer-bg-focus,#fff);background-size:contain;border:var(--pointer-border-focus);box-shadow:var(--pointer-shadow-focus)}.disabled .pointer:focus .pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.type-vertical .range-slider{--width:.25rem;--height:300px;max-height:100%}.type-vertical .range-slider .pointer{left:50%}.type-vertical .range-slider .panel-fill{width:100%}.type-vertical.range-slider-box{flex-direction:row}.type-vertical .row{flex-direction:column}.animate-on-click .pointer,.animate-on-click .panel-fill{transition:all var(--animate-onclick)}.range-dragging .panel-fill{cursor:move}",o="pointers-overlap",a="pointers-min-distance",l="pointers-max-distance",d="range-dragging",h="data",g="min",v="max",y="step",x="round",E="type",S="theme",C="rtl",P="btt",V="disabled",$="keyboard-disabled",H="mousewheel-disabled",Y="slider-width",I="slider-height",G="slider-radius",it="slider-bg",ut="slider-bg-hover",ft="slider-bg-fill",pt="pointer-width",It="pointer-height",Nt="pointer-radius",xt="pointer-bg",yt="pointer-bg-hover",Ct="pointer-bg-focus",Ee="pointer-shadow",Ut="pointer-shadow-hover",be="pointer-shadow-focus",en="pointer-border",$e="pointer-border-hover",ze="pointer-border-focus",Te="animate-onclick",Ae="css-links",te="vertical",nn="horizontal",sn=(k,M,X,z,st)=>{let Et=M-k;return Et===0?X:(z-X)*(st-k)/Et+X},at=k=>!isNaN(parseFloat(k))&&isFinite(k),re=(k,M)=>at(k)?Number(k):M,En=(k,M)=>M===0?0:Math.round(k/M)*M,zi=(k,M=1/0)=>{if(M===1/0)return k;let X=t(10,M);return Math.round(k*X)/X},he=k=>k==null?!1:typeof k=="boolean"?k:k.trim().toLowerCase()==="true",qi=(k,M)=>{k.dispatchEvent(new CustomEvent("onPointerClicked",{detail:{$pointer:M}}))},vi=(k,M)=>{k.dispatchEvent(new CustomEvent("onMouseDown",{detail:{nativeEvent:M}}))},wn=(k,M)=>{k.dispatchEvent(new CustomEvent("onMouseUp",{detail:{nativeEvent:M}}))},Ss=(k,M)=>{k.dispatchEvent(new CustomEvent("onKeyDown",{detail:{nativeEvent:M}}))},bi=(k,M)=>{if(!M||M.length<=0)return;let X=M.map(st=>at(st)?re(st,st):st),z={values:X||[]};z.value=X[0],z.value0=X[0],z.value1=X[0];for(let st=1;st<X.length;st++)z[`value${st+1}`]=X[st];k.dispatchEvent(new CustomEvent("change",{detail:z}))},Ts=(k,M,X)=>{let z=0,st,Et,Pt,ot,lt=!1,Bt=(Tt,Zt,ke,we,me,ve)=>{let je=z;ke!==void 0&&Tt>ke&&(Tt=ke),Zt!==void 0&&Tt<Zt&&(Tt=Zt),z=Tt;let Ve=z;return(we===te&&ve||we===nn&&me)&&(Ve=100-Ve),we===te?M.style.top=`${Ve}%`:M.style.left=`${Ve}%`,je!==z},qt=Tt=>Tt===M||M.contains(Tt),mt=(Tt,Zt,ke,we)=>{st=Tt,Et=Zt,Pt=ke,ot=we},Xt=Tt=>{lt=Tt,M.classList.toggle("disabled",lt),lt?M.setAttribute("aria-disabled","true"):M.hasAttribute("aria-disabled")&&M.removeAttribute("aria-disabled")},qe=(Tt,Zt)=>{Zt==null?M.removeAttribute(Tt):M.setAttribute(Tt,Zt)},Oe=Tt=>M.getAttribute(Tt),St=Tt=>{if(!lt){switch(Tt.key){case"ArrowLeft":{Tt.preventDefault(),typeof st=="function"&&st(X);break}case"ArrowRight":{Tt.preventDefault(),typeof Et=="function"&&Et(X);break}case"ArrowUp":{Tt.preventDefault(),typeof Pt=="function"&&Pt(X);break}case"ArrowDown":{Tt.preventDefault(),typeof ot=="function"&&ot(X);break}}Ss(k,Tt)}},Ft=()=>{lt||qi(k,M)};return M.className=`pointer pointer-${X}`,M.addEventListener("keydown",St),M.addEventListener("click",Ft),{$pointer:M,get percent(){return z},get disabled(){return lt},set disabled(Tt){Xt(Tt)},updatePosition:Bt,isClicked:qt,setCallbacks:mt,setAttr:qe,getAttr:Oe,destroy:()=>{M.removeEventListener("keydown",St),M.removeEventListener("click",Ft),M.remove()}}},rn=k=>{if(k==null)return;if(Array.isArray(k))return k;if(k.trim()==="")return;let M=k.split(","),X=[],z=!0;for(let st=0;st<M.length;st++){let Et=M[st].trim();Et!==""&&(X.push(Et),at(Et)||(z=!1))}return z?X.map(st=>Number(st)):X},Pn=(k,M)=>M?M.findIndex(X=>X===k||X.toString().trim()===k.toString().trim()):-1,As=k=>({updatePosition:(M,X,z,st)=>{if(X.length<=0)return;let Et=X.length===1,Pt=X[0],ot=X[X.length-1];M===te?(k.style.removeProperty("width"),k.style.removeProperty("right"),k.style.removeProperty("left"),Et?k.style.height=`${Pt}%`:k.style.height=`${Math.abs(Pt-ot)}%`,st?(k.style.bottom="0%",Et?k.style.top="auto":k.style.top=`${Math.min(100-ot,100-Pt)}%`):(k.style.bottom="auto",Et?k.style.top="0%":k.style.top=`${Math.min(Pt,ot)}%`)):(k.style.removeProperty("height"),k.style.removeProperty("top"),k.style.removeProperty("bottom"),Et?k.style.width=`${Pt}%`:k.style.width=`${Math.abs(Pt-ot)}%`,z?(k.style.right="0%",Et?k.style.left="auto":k.style.left=`${Math.min(100-ot,100-Pt)}%`):(k.style.right="auto",Et?k.style.left="0%":k.style.left=`${Math.min(Pt,ot)}%`))}}),ji="--animate-onclick",Gn="--width",ks="--height",Kn="--panel-bg-border-radius",mr="--panel-bg",Ui="--panel-bg-hover",rl="--panel-bg-fill",Eo="--pointer-width",wo="--pointer-height",So="--pointer-border-radius",ol="--pointer-bg",al="--pointer-bg-hover",vr="--pointer-bg-focus",ll="--pointer-shadow",cl="--pointer-shadow-hover",Ds="--pointer-shadow-focus",Cs="--pointer-border",Wi="--pointer-border-hover",ul="--pointer-border-focus",Yi=(k,M,X)=>{let z=new Map;for(let st of k.attributes){let Et=st.nodeName.trim().toLowerCase();if(!M.test(Et))continue;let Pt=Et.replace(/\D/g,"").trim(),ot=Pt===""||Pt==="0"||Pt==="1"?0:re(Pt,0)-1,lt=X&&typeof X=="function"?X(st.value):st.value;z.set(ot,lt)}return z},dl=k=>{if(!k)return null;let M=k.getAttribute(Ae);if(!M)return null;let X=M.split(";"),z=[];for(let st of X)st.trim()!==""&&z.push(st.trim());return z},br=[[Gn,Y,"sliderWidth",null],[ks,I,"sliderHeight",null],[Kn,G,"sliderRadius",null],[mr,it,"sliderBg",null],[Ui,ut,"sliderBgHover",null],[rl,ft,"sliderBgFill",null],[Eo,pt,"pointer#Width",/^pointer([0-9]*)-width$/],[wo,It,"pointer#Height",/^pointer([0-9]*)-height$/],[So,Nt,"pointer#Radius",/^pointer([0-9]*)-radius$/],[ol,xt,"pointer#Bg",/^pointer([0-9]*)-bg$/],[al,yt,"pointer#BgHover",/^pointer([0-9]*)-bg-hover$/],[vr,Ct,"pointer#BgFocus",/^pointer([0-9]*)-bg-focus$/],[ll,Ee,"pointer#Shadow",/^pointer([0-9]*)-shadow$/],[cl,Ut,"pointer#ShadowHover",/^pointer([0-9]*)-shadow-hover$/],[Ds,be,"pointer#ShadowFocus",/^pointer([0-9]*)-shadow-focus$/],[Cs,en,"pointer#Border",/^pointer([0-9]*)-border$/],[Wi,$e,"pointer#BorderHover",/^pointer([0-9]*)-border-hover$/],[ul,ze,"pointer#BorderFocus",/^pointer([0-9]*)-border-focus$/]],To=(k,M,X)=>{let z=null,st=[],Et=new Map,Pt=(St,Ft=M)=>{let Tt=[...Ft.classList];for(let Zt of Tt)Zt.startsWith(St)&&M.classList.remove(Zt)},ot=()=>{Pt("shape");let St=M.querySelectorAll(".pointer");for(let Ft of St)Pt("shape",Ft)},lt=St=>{z=St,Pt("theme-"),typeof St=="string"&&M.classList.add(`theme-${St}`)},Bt=()=>{if(ot(),!(st.length<=0)){M.classList.add("shape",`shape-${st[0]}`);for(let St=1;St<st.length;St++){let Ft=st[St];if(!Ft)continue;let Tt=M.querySelector(`.pointer-${St}`);!Tt||Tt.classList.add("shape",`shape-${Ft}`)}}},qt=(St,Ft)=>{st[St]=Ft,Bt()},mt=()=>{ot();let St=Yi(k,/^pointer([0-9]*)-shape$/);if(!(St.size<=0)){for(let Ft of St){let Tt=Ft[0];st[Tt]=Ft[1]}Bt()}},Xt=(St,Ft)=>`${St}-${Ft}`,qe=(St,Ft,Tt)=>{let Zt=X[Tt];if(!Zt)return;let ke=Tt===0?M:Zt.$pointer;if(Ft==null){Et.has(Xt(St,Tt))&&Et.delete(Xt(St,Tt)),ke.style.removeProperty(St);return}Et.set(Xt(St,Tt),Ft),ke.style.setProperty(St,Ft)},Oe=(St,Ft)=>Et.get(Xt(St,Ft));return(()=>{for(let St of br){let[Ft,Tt,Zt,ke]=St;if(ke){let me=Yi(k,ke);for(let ve of me){let je=ve[0],Ve=ve[1];qe(Ft,Ve,je)}}else{let me=k.getAttribute(Tt);qe(Ft,me,0)}let we=[];if(Zt.indexOf("#")===-1)we.push([Zt,0]);else{we.push([Zt.replace("#",""),0]),we.push([Zt.replace("#","0"),0]),we.push([Zt.replace("#","1"),0]);for(let me=1;me<X.length;me++)we.push([Zt.replace("#",(me+1).toString()),me])}for(let me of we)try{let ve=me[0],je=me[1];Object.prototype.hasOwnProperty.call(k,ve)||Object.defineProperty(k,ve,{get(){return Oe(Ft,je)},set:Ve=>{qe(Ft,Ve,je)}})}catch(ve){console.error(ve)}}lt(k.getAttribute(S)),mt()})(),{setStyle:qe,getStyle:Oe,get theme(){return z},set theme(St){lt(St)},get pointerShapes(){return st},setPointerShape:qt}},yi="animate-on-click",Ao="range-dragging",Tu=(k,M,X,z)=>{let st=[],Et=qt=>{for(let mt of st)mt.update&&typeof mt.update=="function"&&mt.update(qt)},Pt=()=>{for(let qt of st)qt.destroy&&typeof qt.destroy=="function"&&qt.destroy()},ot=(qt,mt)=>{for(let Xt of st)Xt.onAttrChange&&typeof Xt.onAttrChange=="function"&&Xt.onAttrChange(qt,mt)},lt=qt=>{if(qt.gettersAndSetters){for(let mt of qt.gettersAndSetters)if(!(!mt.name||!mt.attributes))try{Object.prototype.hasOwnProperty.call(k,mt.name)||Object.defineProperty(k,mt.name,mt.attributes)}catch(Xt){console.error("defineSettersGetters error:",Xt)}}},Bt=qt=>{var mt;if(!qt.css)return;let Xt=(mt=k.shadowRoot)==null?void 0:mt.querySelector("style");!Xt||(Xt.innerHTML+=qt.css)};return{init:()=>{if(window.tcRangeSliderPlugins)for(let qt of window.tcRangeSliderPlugins){let mt=qt();st.push(mt),mt.init&&typeof mt.init=="function"&&(mt.init(k,M,X,z),lt(mt),Bt(mt))}},update:Et,onAttrChange:ot,destroy:Pt}},ko=10,yr=20,Au=(k,M)=>{let X=new Map,z=/^value([0-9]*)$/;for(let ot of k.attributes){let lt=ot.nodeName.trim().toLowerCase();if(!z.test(lt))continue;let Bt=lt.replace("value","").trim(),qt=Bt===""||Bt==="0"||Bt==="1"?0:re(Bt,0)-1,mt=at(ot.value)?re(ot.value,0):ot.value;X.set(qt,mt)}let st=Math.max(...Array.from(X.keys())),Et=[];Et.push([Ts(k,M,0),X.get(0)]);let Pt=M;for(let ot=1;ot<=st;ot++){let lt=M.cloneNode(!0);Pt.after(lt),Pt=lt,Et.push([Ts(k,lt,ot),X.get(ot)])}return Et},hl=(k,M,X,z,st,Et,Pt)=>{try{Object.defineProperty(k,z,{configurable:!0,get(){if(!M)return;let ot=M.pointers[X];if(!ot)return;let lt=M.getTextValue(ot.percent);return at(lt)?re(lt,lt):lt},set:ot=>{M.pointers[X]?M==null||M.setValue(ot,X):M==null||M.addPointer(ot)}}),Object.defineProperty(k,st,{configurable:!0,get(){var ot,lt;return(lt=(ot=M==null?void 0:M.pointers[X])==null?void 0:ot.getAttr("aria-label"))!=null?lt:void 0},set:ot=>{!M||M.setAriaLabel(X,ot)}}),Object.defineProperty(k,Et,{configurable:!0,get(){var ot,lt;return(lt=(ot=M==null?void 0:M.styles)==null?void 0:ot.pointerShapes[X])!=null?lt:null},set:ot=>{!M||!M.styles||M.styles.setPointerShape(X,ot)}}),Object.defineProperty(k,Pt,{configurable:!0,get(){var ot;return(ot=M==null?void 0:M.pointers[X].disabled)!=null?ot:!1},set:ot=>{if(!M)return;let lt=M==null?void 0:M.pointers[X];!lt||(lt.disabled=ot)}})}catch(ot){console.error(ot)}},fl=(k,M)=>{let X=[["value","ariaLabel","pointerShape","pointerDisabled",0],["value0","ariaLabel0","pointerShape0","pointer0Disabled",0],["value1","ariaLabel1","pointerShape1","pointer1Disabled",0]];for(let z=2;z<ko;z++)X.push([`value${z}`,`ariaLabel${z}`,`pointer${z}Shape`,`pointer${z}Disabled`,z-1]);for(let z of X)hl(k,M,z[4],z[0],z[1],z[2],z[3])},Sn=(k,M,X)=>{var z;let st=(z=X.shadowRoot)==null?void 0:z.querySelector(".container");if(st)for(let Et of k)M?st.prepend(Et.$pointer):st.append(Et.$pointer)},xi=(k,M)=>{if(!(!M||k.length<=1)){for(let X of k)X.$pointer.style.zIndex=yr.toString();M.$pointer.style.zIndex=(yr*2).toString()}},dn=0,Is=100,Xi=2,Do="0.3s",Jn=(k,M,X)=>{let z=X.map(O=>O[0]),st=null,Et=null,Pt=null,ot=null,lt=dn,Bt=Is,qt,mt,Xt=nn,qe=Xi,Oe=!1,St=!1,Ft=!1,Tt=0,Zt=1/0,ke=!1,we,me,ve=!1,je=!1,Ve=!1,hn=Do,_i=[],_r=O=>{ve||(O.preventDefault&&O.preventDefault(),wi(O),window.addEventListener("mousemove",wi),window.addEventListener("mouseup",Ei),vi(k,O))},Ei=O=>{ve||(we=void 0,me=void 0,window.removeEventListener("mousemove",wi),window.removeEventListener("mouseup",Ei),hn&&M.classList.add(yi),wn(k,O))},Zn=(O,K)=>{if(z.length<=0)return;if(z.length===1)return z[0].isClicked(O)&&hn&&M.classList.remove(yi),z[0];let ht=ku(O);if(ke){let Gt=K,pn=Ms(Gt);pn!==void 0&&(Gt=En(Gt,pn)),ht?(we=Gt,me=0,hn&&M.classList.remove(yi)):we!==void 0&&(me=Gt-we,we=Gt)}if(!vl(O)&&!ht){for(let Gt of z)if(!(!Gt.isClicked(O)||Gt.disabled))return hn&&M.classList.remove(yi),Gt;for(let Gt of z)if(st===Gt)return Gt}let Jt=1/0,oe=null;for(let Gt of z){if(Gt.disabled)continue;let pn=Math.abs(K-Gt.percent);pn<Jt&&(Jt=pn,oe=Gt)}return oe},Gi=()=>z.findIndex(O=>st===O&&!O.disabled),wi=O=>{let K;if(Xt===te){let{height:Jt,top:oe}=M.getBoundingClientRect(),Gt=O.type.indexOf("mouse")!==-1?O.clientY:O.touches[0].clientY;K=Math.min(Math.max(0,Gt-oe),Jt)*100/Jt}else{let{width:Jt,left:oe}=M.getBoundingClientRect(),Gt=O.type.indexOf("mouse")!==-1?O.clientX:O.touches[0].clientX;K=Math.min(Math.max(0,Gt-oe),Jt)*100/Jt}if((Oe||St)&&(K=100-K),st=Zn(O.target,K),st&&xi(z,st),ke&&z.length>1&&me!==void 0){let Jt=z[0],oe=z[z.length-1],Gt=Jt.percent+me<0,pn=oe.percent+me>100;if(Gt||pn)return;for(let $s=0;$s<z.length;$s++)Ue($s,z[$s].percent+me);return}let ht=Gi();ht!==-1&&(Ue(ht,K),st==null||st.$pointer.focus())},Ls=O=>{if(ve||document.activeElement!==k||st!=null&&st.disabled)return;O.stopPropagation(),O.preventDefault();let K=O.deltaY<0,ht=Oe||St,Jt=K?!ht:ht,oe=Gi();oe!==-1&&(Jt?Os(oe,z[oe].percent):Ki(oe,z[oe].percent))},Co=O=>{ve||je||(Xt===te?St?Ue(O,100):Ue(O,0):Oe?Ki(O,z[O].percent):Os(O,z[O].percent))},Er=O=>{ve||je||(Xt===te?St?Ue(O,0):Ue(O,100):Oe?Os(O,z[O].percent):Ki(O,z[O].percent))},gl=O=>{ve||je||(Xt===te?St?Ki(O,z[O].percent):Os(O,z[O].percent):Oe?Ue(O,100):Ue(O,0))},ml=O=>{ve||je||(Xt===te?St?Os(O,z[O].percent):Ki(O,z[O].percent):Oe?Ue(O,0):Ue(O,100))},vl=O=>O.classList.contains("panel"),ku=O=>O.classList.contains("panel-fill"),Os=(O,K)=>{if(K===void 0)return;let ht=Ms(K);ht==null&&(ht=1),K-=ht,K<0&&(K=0),Ue(O,K)},Ki=(O,K)=>{if(K===void 0)return;let ht=Ms(K);ht==null&&(ht=1),K+=ht,K>100&&(K=100),Ue(O,K)},Qn=()=>{!ot||ot.update({percents:Lo(),values:Oo(),$pointers:yl(),min:Zi(),max:Ps(),data:Mo(),step:Sr(),round:Tr(),type:Rs(),textMin:Si(),textMax:wr(),rightToLeft:Ar(),bottomToTop:Bs(),pointersOverlap:Bo(),pointersMinDistance:Po(),pointersMaxDistance:Ns(),rangeDragging:Fo(),disabled:Ro(),keyboardDisabled:No(),mousewheelDisabled:Tn()})},Du=()=>{Qn()},Io=O=>{if(!(Ft||z.length<=1||Bt===lt))if(O===0){let K=Zt*100/(Bt-lt);return Math.max(0,z[O+1].percent-K)}else{let K=Tt*100/(Bt-lt);return Math.min(z[O-1].percent+K,100)}},Cu=O=>{if(!(Ft||z.length<=1||Bt===lt))if(O===z.length-1){let K=Zt*100/(Bt-lt);return Math.min(z[O-1].percent+K,100)}else{let K=Tt*100/(Bt-lt);return Math.max(0,z[O+1].percent-K)}},Ms=O=>{let K;if(typeof qt=="function"){let ht=sn(0,100,lt,Bt,O);K=qt(ht,O)}else K=qt;if(at(K)){let ht=Bt-lt;return K=ht===0?0:K*100/ht,K}},Ji=O=>{if(O===void 0)return;let K=sn(0,100,lt,Bt,O);return mt!==void 0?mt[Math.round(K)]:zi(K,qe)},Si=()=>mt!==void 0?mt[lt]:lt,wr=()=>mt!==void 0?mt[Bt]:Bt,Sr=()=>qt,bl=O=>{var K;return O<=0||Ft?Si():(K=Ji(z[O-1].percent))!=null?K:""},Iu=O=>{var K;return z.length<=1||O>=z.length-1||Ft?wr():(K=Ji(z[O+1].percent))!=null?K:""},Lo=()=>z.map(O=>O.percent),Oo=()=>z.map(O=>Ji(O.percent)),yl=()=>z.map(O=>O.$pointer),Zi=()=>lt,Ps=()=>Bt,Mo=()=>mt,Rs=()=>Xt,Tr=()=>qe,Po=()=>Tt,Ns=()=>Zt,xl=O=>_i[O],Ar=()=>Oe,Bs=()=>St,Ro=()=>ve,No=()=>je,Tn=()=>Ve,Bo=()=>Ft,Fo=()=>ke,Ue=(O,K)=>{if(K===void 0)return;let ht=Ms(K);ht!==void 0&&(K=En(K,ht));let Jt=z[O];if(!Jt)return;let oe=Jt.updatePosition(K,Io(O),Cu(O),Xt,Oe,St);Et==null||Et.updatePosition(Xt,z.map(Gt=>Gt.percent),Oe,St),Qn();for(let Gt of z){let pn=Ji(Gt.percent);pn!==void 0&&(Gt.setAttr("aria-valuenow",pn.toString()),Gt.setAttr("aria-valuetext",pn.toString()))}He(),oe&&bi(k,z.map(Gt=>Ji(Gt.percent)))},fn=()=>{for(let O=0;O<z.length;O++)Ue(O,z[O].percent)},_l=(O,K)=>{lt=mt!==void 0?0:re(O,dn),Bt=mt!==void 0?mt.length-1:re(K,Is),kr(lt),Dr(Bt)},He=()=>{var O,K;for(let ht=0;ht<z.length;ht++){let Jt=z[ht];Jt.setAttr("aria-valuemin",((O=bl(ht))!=null?O:"").toString()),Jt.setAttr("aria-valuemax",((K=Iu(ht))!=null?K:"").toString())}},kr=O=>{lt=re(O,dn),lt>Bt&&(Bt=lt+Is),fn()},Dr=O=>{Bt=re(O,Is),Bt<lt&&(Bt=lt+Is),fn()},El=O=>{Ft=!0;for(let K=0;K<O.length;K++)Cr(O[K],K);Ft=!1;for(let K=0;K<O.length;K++)Cr(O[K],K)},Cr=(O,K)=>{let ht;mt!==void 0?(ht=O==null?0:Pn(O,mt),ht===-1&&(ht=0)):(ht=re(O,lt),ht<lt&&(ht=lt),ht>Bt&&(ht=Bt));let Jt=sn(lt,Bt,0,100,ht);Ue(K,Jt)},Ir=O=>{if(O==null){qt=void 0;return}if(typeof O=="function"){qt=O,fn();return}if(at(O)){qt=re(O,1);let K=Math.abs(Bt-lt);qt>K&&(qt=void 0),fn();return}qt=void 0},$o=O=>{Ft=O,fn()},Vo=O=>{(!at(O)||O<0)&&(O=0),Tt=O},Ho=O=>{(!at(O)||O<0)&&(O=1/0),Zt=O},Lr=O=>{ve=O,M.classList.toggle("disabled",ve),ve?M.setAttribute("aria-disabled","true"):M.hasAttribute("aria-disabled")&&M.removeAttribute("aria-disabled")},Fs=O=>{je=O},ti=O=>{Ve=O,Ve?document.removeEventListener("wheel",Ls):document.addEventListener("wheel",Ls,{passive:!1})},Qi=O=>{if(O==null){mt=void 0;return}if(mt=rn(O),mt===void 0||mt.length<=0){mt=void 0;return}kr(0),Dr(mt.length-1),qt===void 0&&Ir(1)},zo=O=>{var K;typeof O=="string"?Xt=O.trim().toLowerCase()===te?te:nn:Xt=nn;let ht=(K=k.shadowRoot)==null?void 0:K.querySelector(".range-slider-box");if(!ht)return;ht.className=`range-slider-box type-${Xt}`,fn();let Jt=Xt===te?"vertical":"horizontal";for(let oe of z)oe.setAttr("aria-orientation",Jt)},Or=O=>{Oe=O,z.length>1&&Sn(z,Oe,k),fn(),Qn()},Mr=O=>{St=O,z.length>1&&Sn(z,St,k),fn(),Qn()},Pr=O=>{qe=re(O,Xi),qe<0&&(qe=Xi),Qn()},ts=O=>{O==null||O.toString().trim().toLowerCase()==="false"?(hn=void 0,M.style.removeProperty(ji),M.classList.remove(yi)):(hn=O.toString(),M.style.setProperty(ji,hn),M.classList.add(yi))},wl=(O,K)=>{let ht=z[O];!ht||(ht.setAttr("aria-label",K),_i[O]=K)},Rr=O=>{if(we=void 0,z.length<=1){ke=!1,M.classList.remove(Ao);return}ke=O,M.classList.toggle(Ao,ke)},Lu=()=>{Lr(he(k.getAttribute(V))),je=he(k.getAttribute($)),Ve=he(k.getAttribute(H));let O=Yi(k,/^pointer([0-9]*)-disabled$/,K=>he(K));for(let K of O){let ht=K[0];!z[ht]||(z[ht].disabled=K[1])}},Ou=()=>{let O=Yi(k,/^aria-label([0-9]*)$/);for(let K of O){let ht=K[0];wl(ht,K[1])}},Mu=O=>{let K=z.length,ht=z[K-1].$pointer,Jt=ht.cloneNode(!0);ht.after(Jt);let oe=Ts(k,Jt,K);return oe.setCallbacks(Co,Er,gl,ml),z.push(oe),Cr(O,K),fn(),Qn(),K},Pu=()=>{let O=z.length,K=z[O-1];return K?(K.destroy(),z.pop(),z.length<=1&&Rr(!1),fn(),Qn(),O-1):-1};return(()=>{var O,K;for(let Jt of z)Jt.setCallbacks(Co,Er,gl,ml);let ht=(O=k.shadowRoot)==null?void 0:O.querySelector(".panel-fill");ht&&(Et=As(ht)),zo(k.getAttribute(E)),Or(he(k.getAttribute(C))),Mr(he(k.getAttribute(P))),_l(k.getAttribute(g),k.getAttribute(v)),Ir(k.getAttribute(y)),Qi(k.getAttribute(h)),El(X.map(Jt=>Jt[1])),$o(he(k.getAttribute(o))),Vo(re(k.getAttribute(a),0)),Ho(re(k.getAttribute(l),1/0)),Rr(he(k.getAttribute(d))),Pr(re(k.getAttribute(x),Xi)),Lu(),Ou(),Pt=To(k,M,z),ts((K=k.getAttribute(Te))!=null?K:Do),M.addEventListener("mousedown",_r),M.addEventListener("mouseup",Ei),M.addEventListener("touchmove",wi),M.addEventListener("touchstart",wi),Ve||document.addEventListener("wheel",Ls,{passive:!1}),ot=Tu(k,Du,{setValues:El,setMin:kr,setMax:Dr,setStep:Ir,setPointersOverlap:$o,setPointersMinDistance:Vo,setPointersMaxDistance:Ho,setDisabled:Lr,setType:zo,setRightToLeft:Or,setBottomToTop:Mr,setRound:Pr,setKeyboardDisabled:Fs,setMousewheelDisabled:ti,setRangeDragging:Rr,setData:Qi},{getPercents:Lo,getValues:Oo,getPointerElements:yl,getMin:Zi,getMax:Ps,getStep:Sr,getData:Mo,getType:Rs,getRound:Tr,getTextMin:Si,getTextMax:wr,isRightToLeft:Ar,isBottomToTop:Bs,isDisabled:Ro,isKeyboardDisabled:No,isMousewheelDisabled:Tn,isPointersOverlap:Bo,isRangeDraggingEnabled:Fo,getPointersMinDistance:Po,getPointersMaxDistance:Ns}),ot.init()})(),{get pointers(){return z},get styles(){return Pt},get pluginsManager(){return ot},get min(){return Si()},get max(){return wr()},get step(){return Sr()},get pointersOverlap(){return Bo()},set pointersOverlap(O){$o(O)},get pointersMinDistance(){return Po()},set pointersMinDistance(O){Vo(O)},get pointersMaxDistance(){return Ns()},set pointersMaxDistance(O){Ho(O)},get disabled(){return Ro()},set disabled(O){Lr(O)},get data(){return Mo()},get type(){return Rs()},set type(O){zo(O)},get rightToLeft(){return Ar()},set rightToLeft(O){Or(O)},get bottomToTop(){return Bs()},set bottomToTop(O){Mr(O)},get round(){return Tr()},set round(O){Pr(O)},get animateOnClick(){return hn},set animateOnClick(O){ts(O)},get keyboardDisabled(){return No()},set keyboardDisabled(O){Fs(O)},get mousewheelDisabled(){return Tn()},set mousewheelDisabled(O){ti(O)},get rangeDragging(){return Fo()},set rangeDragging(O){Rr(O)},setMin:kr,setMax:Dr,setValue:Cr,setStep:Ir,setData:Qi,getTextValue:Ji,setAriaLabel:wl,getAriaLabel:xl,addPointer:Mu,removePointer:Pu,destroy:()=>{M.removeEventListener("mousedown",_r),M.removeEventListener("mouseup",Ei),M.removeEventListener("touchmove",wi),M.removeEventListener("touchstart",wi),document.removeEventListener("wheel",Ls);for(let O of z)O.destroy();ot==null||ot.destroy()}}},_t=(k,M,X)=>{let z=br.find(([ot,lt,Bt,qt])=>lt.replace("#","")===M.replace(/\d+/g,""));if(z&&k.styles){let[ot,lt,Bt,qt]=z,mt=M.replace(/\D/g,"").trim(),Xt=mt===""||mt==="0"||mt==="1"?0:re(mt,0)-1;k.styles.setStyle(ot,X,Xt);return}switch(k&&k.pluginsManager&&k.pluginsManager.onAttrChange(M,X),M){case g:{k.setMin(X);break}case v:{k.setMax(X);break}case y:{k.setStep(X);break}case o:{k.pointersOverlap=he(X);break}case a:{k.pointersMinDistance=re(X,0);break}case d:{k.rangeDragging=he(X);break}case l:{k.pointersMaxDistance=re(X,1/0);break}case V:{k.disabled=he(X);break}case $:{k.keyboardDisabled=he(X);break}case H:{k.mousewheelDisabled=he(X);break}case h:{k.setData(X);break}case E:{k.type=X;break}case C:{k.rightToLeft=he(X);break}case P:{k.bottomToTop=he(X);break}case x:{k.round=re(X,Xi);break}case S:{k.styles&&(k.styles.theme=X);break}case Te:{k.animateOnClick=X;break}}let st=null;if(/^value([0-9]*)$/.test(M)&&(st="value"),/^pointer([0-9]*)-disabled$/.test(M)&&(st="pointer-disabled"),/^aria-label([0-9]*)$/.test(M)&&(st="aria-label"),/^pointer([0-9]*)-shape$/.test(M)&&(st="pointer-shape"),!st)return;let Et=M.replace(/\D/g,"").trim(),Pt=Et===""||Et==="0"||Et==="1"?0:re(Et,0)-1;switch(st){case"value":{k.setValue(X,Pt);break}case"pointer-disabled":{let ot=k==null?void 0:k.pointers[Pt];if(!ot)return;ot.disabled=he(X);break}case"aria-label":{k.setAriaLabel(Pt,X);break}case"pointer-shape":{k.styles&&k.styles.setPointerShape(Pt,X);break}}},pl=class extends HTMLElement{constructor(){super(),i(this,"slider"),i(this,"_externalCSSList",[]),i(this,"_observer",null),this.attachShadow({mode:"open"})}set step(k){this.slider&&this.slider.setStep(k)}get step(){var k;return(k=this.slider)==null?void 0:k.step}set disabled(k){this.slider&&(this.slider.disabled=k)}get disabled(){var k,M;return(M=(k=this.slider)==null?void 0:k.disabled)!=null?M:!1}set data(k){var M;(M=this.slider)==null||M.setData(k)}get data(){var k;return(k=this.slider)==null?void 0:k.data}set min(k){var M;(M=this.slider)==null||M.setMin(k)}get min(){var k;return(k=this.slider)==null?void 0:k.min}set max(k){var M;(M=this.slider)==null||M.setMax(k)}get max(){var k;return(k=this.slider)==null?void 0:k.max}set round(k){!this.slider||(this.slider.round=k)}get round(){var k,M;return(M=(k=this.slider)==null?void 0:k.round)!=null?M:Xi}set type(k){!this.slider||(this.slider.type=k??nn)}get type(){var k;return((k=this.slider)==null?void 0:k.type)||nn}set pointersOverlap(k){!this.slider||(this.slider.pointersOverlap=k)}get pointersOverlap(){var k,M;return(M=(k=this.slider)==null?void 0:k.pointersOverlap)!=null?M:!1}set pointersMinDistance(k){!this.slider||(this.slider.pointersMinDistance=k)}get pointersMinDistance(){var k,M;return(M=(k=this.slider)==null?void 0:k.pointersMinDistance)!=null?M:0}set pointersMaxDistance(k){!this.slider||(this.slider.pointersMaxDistance=k)}get pointersMaxDistance(){var k,M;return(M=(k=this.slider)==null?void 0:k.pointersMaxDistance)!=null?M:1/0}set theme(k){!this.slider||!this.slider.styles||(this.slider.styles.theme=k)}get theme(){var k,M,X;return(X=(M=(k=this.slider)==null?void 0:k.styles)==null?void 0:M.theme)!=null?X:null}set rtl(k){!this.slider||(this.slider.rightToLeft=k)}get rtl(){var k,M;return(M=(k=this.slider)==null?void 0:k.rightToLeft)!=null?M:!1}set btt(k){!this.slider||(this.slider.bottomToTop=k)}get btt(){var k,M;return(M=(k=this.slider)==null?void 0:k.bottomToTop)!=null?M:!1}set keyboardDisabled(k){!this.slider||(this.slider.keyboardDisabled=k)}get keyboardDisabled(){var k,M;return(M=(k=this.slider)==null?void 0:k.keyboardDisabled)!=null?M:!1}set mousewheelDisabled(k){!this.slider||(this.slider.mousewheelDisabled=k)}get mousewheelDisabled(){var k,M;return(M=(k=this.slider)==null?void 0:k.mousewheelDisabled)!=null?M:!1}set animateOnClick(k){!this.slider||(this.slider.animateOnClick=k)}get animateOnClick(){var k;return(k=this.slider)==null?void 0:k.animateOnClick}get rangeDragging(){var k,M;return(M=(k=this.slider)==null?void 0:k.rangeDragging)!=null?M:!1}set rangeDragging(k){this.slider&&(this.slider.rangeDragging=he(k))}get externalCSSList(){return this._externalCSSList}addPointer(k){var M,X;if(!this.slider)return;let z=(X=(M=this.slider)==null?void 0:M.addPointer(k))!=null?X:0;hl(this,this.slider,z,`value${z+1}`,`ariaLabel${z+1}`,`pointerShape${z+1}`,`pointer${z+1}Disabled`)}removePointer(){var k;!this.slider||(k=this.slider)==null||k.removePointer()}addCSS(k){if(!this.shadowRoot)return;let M=document.createElement("style");M.textContent=k,this.shadowRoot.appendChild(M)}connectedCallback(){var k,M;if(!this.shadowRoot)return;this._externalCSSList=dl(this),this.shadowRoot.innerHTML=s(r,this._externalCSSList);let X=(k=this.shadowRoot)==null?void 0:k.querySelector(".pointer");if(!X)return;let z=(M=this.shadowRoot)==null?void 0:M.getElementById("range-slider");if(!z)return;let st=Au(this,X);this.slider=Jn(this,z,st),fl(this,this.slider),this._observer=new MutationObserver(Et=>{Et.forEach(Pt=>{var ot;if(!this.slider||Pt.type!=="attributes")return;let lt=Pt.attributeName;!lt||_t(this.slider,lt,(ot=this.getAttribute(lt))!=null?ot:"")})}),this._observer.observe(this,{attributes:!0})}disconnectedCallback(){this._observer&&this._observer.disconnect(),this.slider&&this.slider.destroy()}},xr=pl;window.tcRangeSlider=xr,customElements.get("toolcool-range-slider")||customElements.define("toolcool-range-slider",xr),customElements.get("tc-range-slider")||customElements.define("tc-range-slider",class extends xr{})})();let nt=[],Ye,$c=0,Af=0,hh=0;function zP(n){nt[n.courseid]=new HP(n,Na()),Af+=1,nt[n.courseid].codes!==void 0&&nt[n.courseid].codes.length>hh&&(hh=nt[n.courseid].codes.length-1)}function qP(){for(let n=0;n<nt.length;n+=1)if(nt[n]!==void 0&&!nt[n].display)return!1;return!0}function jP(){let n=document.getElementById("rg2-select-course");n.innerHTML="",n.options.add(io(null,W("Select course","")));for(let t=0;t<nt.length;t=t+1)nt[t]!==void 0&&n.options.add(io(t,qn(nt[t].name)));n.addEventListener("change",t=>{xP(parseInt(t.target.value,10))})}function UP(){const n=document.getElementById("rg2-course-table");n.innerHTML=KP();const t=document.getElementById("rg2-course-filter-table");t.innerHTML=GP(),document.querySelectorAll("[data-course-filter]").forEach(i=>{i.addEventListener("change",YP)})}function t0(){nt.length=0,$c=0,Af=0,hh=0}function km(n){for(let t=0;t<nt.length;t+=1)nt[t]!==void 0&&nt[t].drawCourse(n)}function WP(n,t,e,i,s){nt[e].drawLinesBetweenControls(n,t,i,s)}function YP(n){const t=parseInt(n.target.dataset.courseFilter,10);nt[t].filterFrom=n.detail.value1,nt[t].filterTo=n.detail.value2,wt()}function XP(){let n={html:"",res:0,coursecount:0};for(let t=0;t<nt.length;t+=1)nt[t]!==void 0&&(n.coursecount=n.coursecount+1,n.html+=[`<tr><td>${nt[t].name}</td >`,`<td><input class='showcourse' data-courseid=${t} type='checkbox' name='course'></input></td>`,`<td class='text-center'>${nt[t].resultcount}</td><td class='text-center'>${nt[t].trackcount}</td><td>`].join(""),n.res+=nt[t].resultcount,nt[t].trackcount>0?(n.html+=`<input data-courseid=${nt[t].courseid} class='allcoursetracks' type=checkbox name=track></input></td>`,n.html+=`<td><input data-courseid=${nt[t].courseid} class='allcoursetracksreplay' type=checkbox name=replay></input>`):n.html+="</td><td>",n.html+="</td></tr>");return n}function GP(){let n="";for(let t=0;t<nt.length;t+=1)nt[t]!==void 0&&!nt[t].isScoreCourse&&nt[t].codes.length>2&&(n+=[`<div id='course-filter-${nt[t].courseid}' data-display="false" data-course="${nt[t].courseid}" class="row">`,`<div class="col-3">${nt[t].name}</div>`,'<div class="col-9 pt-2">',`  <tc-range-slider step="1" min="0" max="${nt[t].codes.length}" value1="0"`,`value2="${nt[t].codes.length}" round="0" data-course-filter="${nt[t].courseid}>"`,"</tc-range-slider></div></div>"].join(""));return n}function KP(){let n=["<table class='table table-striped table-hover table-sm'><thead>",`<tr><th>${W("Course")}</th><th><i class='bi-eye-fill'></i></th><th>${W("Runners")}</th>`,`<th>${W("Routes")}</th><th><i class='bi-pencil'></i></th><th><i class='bi-play-fill'></i></th></tr>`,'</thead><tbody class="table-group-divider">'].join("");const t=XP();return n+=t.html+`</tbody><tfoot class="table-group-divider"><tr class='allitemsrow'><td>${W("All")}</td>
    <td><input class='showallcourses' data-id="all" type=checkbox name=course></input></td>
    <td class='text-center'>${t.res}</td><td class='text-center'>${$c}</td><td>`,$c>0&&(n+=`<input data-id="all" class='alltracks' type=checkbox name=track></input>`),n+="</td><td></td></tr></tfoot></table>",n}function e0(){return nt}function hi(n){return nt[n]}function JP(n){return nt.find(t=>t?t.name===n:!1)}function ZP(n){return nt[n].getLegLengths()}function QP(n){return nt[n].name}function tR(){let n=[];for(let t=0;t<nt.length;t+=1)if(nt[t]!==void 0){let e={};e.id=nt[t].courseid,e.name=nt[t].name,e.results=nt[t].resultcount,n.push(e)}return n}function Dm(){let n=[];for(let t=0;t<nt.length;t+=1)nt[t]!==void 0&&nt[t].display&&n.push(t);return n}function eR(){let n="";for(let t=0;t<nt.length;t+=1)nt[t]!==void 0&&nt[t].excludeType!==F.EXCLUDED_NONE&&(n=n+nt[t].courseid+"|"+nt[t].excludeType,n=n+nt[t].exclude.reduce((e,i,s)=>i?e+"|"+s+","+nt[t].allowed[s]:e,""),n=n+`
`);return n}function nR(n){let t={};return t.filterFrom=nt[n].filterFrom,t.filterTo=nt[n].filterTo,t}function iR(n){return nt[n].codes.length-2}function n0(){return Af}function sR(n){nt[n].incrementTracksCount(),$c+=1}function rR(){Ye=new Hh}function oR(n){return n in nt}function aR(n){t0(),Ye.deleteAllControls(),document.getElementById("rg2-load-progress-label").innerHTML=W("Saving courses");for(const t of n)zP(t);Ye.generateControlList()}function i0(n){for(let t=0;t<nt.length;t+=1)nt[t]!==void 0&&nt[t].setDisplay(n)}function Cm(){for(let n=0;n<nt.length;n+=1)nt[n]!==void 0&&xa(n)}function nl(n,t){nt[n]!==void 0&&(nt[n].setDisplay(t),xa(n))}function xa(n){n=parseInt(n,10);const t=nt[n].display||Ek(n);document.querySelectorAll("[data-display]").forEach(e=>{parseInt(e.dataset.course,10)===n&&(e.dataset.display=t)})}function lR(){for(let n=0;n<nt.length;n+=1)nt[n]!==void 0&&(nt[n].resultcount=wk(n))}function cR(n,t,e,i){for(let s=0;s<nt.length;s+=1)if(nt[s]!==void 0&&nt[s].courseid===n){nt[s].codes=t,nt[s].x=e,nt[s].y=i,nt[s].setAngles();break}}var Vc={exports:{}};Vc.exports;(function(n,t){(function(e,i){n.exports=i()})(Sd,function(){function e(u,c){var f=Object.keys(u);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(u);c&&(p=p.filter(function(m){return Object.getOwnPropertyDescriptor(u,m).enumerable})),f.push.apply(f,p)}return f}function i(u){for(var c=1;c<arguments.length;c++){var f=arguments[c]!=null?arguments[c]:{};c%2?e(Object(f),!0).forEach(function(p){l(u,p,f[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):e(Object(f)).forEach(function(p){Object.defineProperty(u,p,Object.getOwnPropertyDescriptor(f,p))})}return u}function s(u){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},s(u)}function r(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}function o(u,c){for(var f=0;f<c.length;f++){var p=c[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,E(p.key),p)}}function a(u,c,f){return c&&o(u.prototype,c),f&&o(u,f),Object.defineProperty(u,"prototype",{writable:!1}),u}function l(u,c,f){return(c=E(c))in u?Object.defineProperty(u,c,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[c]=f,u}function d(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(c&&c.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),c&&g(u,c)}function h(u){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},h(u)}function g(u,c){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,p){return f.__proto__=p,f},g(u,c)}function v(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function y(u){var c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var f,p=h(u);if(c){var m=h(this).constructor;f=Reflect.construct(p,arguments,m)}else f=p.apply(this,arguments);return function(b,_){if(_&&(typeof _=="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v(b)}(this,f)}}function x(){return x=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(u,c,f){var p=function(b,_){for(;!Object.prototype.hasOwnProperty.call(b,_)&&(b=h(b))!==null;);return b}(u,c);if(p){var m=Object.getOwnPropertyDescriptor(p,c);return m.get?m.get.call(arguments.length<3?u:f):m.value}},x.apply(this,arguments)}function E(u){var c=function(f,p){if(typeof f!="object"||f===null)return f;var m=f[Symbol.toPrimitive];if(m!==void 0){var b=m.call(f,p||"default");if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(f)}(u,"string");return typeof c=="symbol"?c:c+""}var S=function(u){return!(!u||!u.Window)&&u instanceof u.Window},C=void 0,P=void 0;function V(u){C=u;var c=u.document.createTextNode("");c.ownerDocument!==u.document&&typeof u.wrap=="function"&&u.wrap(c)===c&&(u=u.wrap(u)),P=u}function $(u){return S(u)?u:(u.ownerDocument||u).defaultView||P.window}typeof window<"u"&&window&&V(window);var H=function(u){return!!u&&s(u)==="object"},Y=function(u){return typeof u=="function"},I={window:function(u){return u===P||S(u)},docFrag:function(u){return H(u)&&u.nodeType===11},object:H,func:Y,number:function(u){return typeof u=="number"},bool:function(u){return typeof u=="boolean"},string:function(u){return typeof u=="string"},element:function(u){if(!u||s(u)!=="object")return!1;var c=$(u)||P;return/object|function/.test(typeof Element>"u"?"undefined":s(Element))?u instanceof Element||u instanceof c.Element:u.nodeType===1&&typeof u.nodeName=="string"},plainObject:function(u){return H(u)&&!!u.constructor&&/function Object\b/.test(u.constructor.toString())},array:function(u){return H(u)&&u.length!==void 0&&Y(u.splice)}};function G(u){var c=u.interaction;if(c.prepared.name==="drag"){var f=c.prepared.axis;f==="x"?(c.coords.cur.page.y=c.coords.start.page.y,c.coords.cur.client.y=c.coords.start.client.y,c.coords.velocity.client.y=0,c.coords.velocity.page.y=0):f==="y"&&(c.coords.cur.page.x=c.coords.start.page.x,c.coords.cur.client.x=c.coords.start.client.x,c.coords.velocity.client.x=0,c.coords.velocity.page.x=0)}}function it(u){var c=u.iEvent,f=u.interaction;if(f.prepared.name==="drag"){var p=f.prepared.axis;if(p==="x"||p==="y"){var m=p==="x"?"y":"x";c.page[m]=f.coords.start.page[m],c.client[m]=f.coords.start.client[m],c.delta[m]=0}}}var ut={id:"actions/drag",install:function(u){var c=u.actions,f=u.Interactable,p=u.defaults;f.prototype.draggable=ut.draggable,c.map.drag=ut,c.methodDict.drag="draggable",p.actions.drag=ut.defaults},listeners:{"interactions:before-action-move":G,"interactions:action-resume":G,"interactions:action-move":it,"auto-start:check":function(u){var c=u.interaction,f=u.interactable,p=u.buttons,m=f.options.drag;if(m&&m.enabled&&(!c.pointerIsDown||!/mouse|pointer/.test(c.pointerType)||p&f.options.drag.mouseButtons))return u.action={name:"drag",axis:m.lockAxis==="start"?m.startAxis:m.lockAxis},!1}},draggable:function(u){return I.object(u)?(this.options.drag.enabled=u.enabled!==!1,this.setPerAction("drag",u),this.setOnEvents("drag",u),/^(xy|x|y|start)$/.test(u.lockAxis)&&(this.options.drag.lockAxis=u.lockAxis),/^(xy|x|y)$/.test(u.startAxis)&&(this.options.drag.startAxis=u.startAxis),this):I.bool(u)?(this.options.drag.enabled=u,this):this.options.drag},beforeMove:G,move:it,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(u){return u.search("drag")===0}},ft=ut,pt={init:function(u){var c=u;pt.document=c.document,pt.DocumentFragment=c.DocumentFragment||It,pt.SVGElement=c.SVGElement||It,pt.SVGSVGElement=c.SVGSVGElement||It,pt.SVGElementInstance=c.SVGElementInstance||It,pt.Element=c.Element||It,pt.HTMLElement=c.HTMLElement||pt.Element,pt.Event=c.Event,pt.Touch=c.Touch||It,pt.PointerEvent=c.PointerEvent||c.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function It(){}var Nt=pt,xt={init:function(u){var c=Nt.Element,f=u.navigator||{};xt.supportsTouch="ontouchstart"in u||I.func(u.DocumentTouch)&&Nt.document instanceof u.DocumentTouch,xt.supportsPointerEvent=f.pointerEnabled!==!1&&!!Nt.PointerEvent,xt.isIOS=/iP(hone|od|ad)/.test(f.platform),xt.isIOS7=/iP(hone|od|ad)/.test(f.platform)&&/OS 7[^\d]/.test(f.appVersion),xt.isIe9=/MSIE 9/.test(f.userAgent),xt.isOperaMobile=f.appName==="Opera"&&xt.supportsTouch&&/Presto/.test(f.userAgent),xt.prefixedMatchesSelector="matches"in c.prototype?"matches":"webkitMatchesSelector"in c.prototype?"webkitMatchesSelector":"mozMatchesSelector"in c.prototype?"mozMatchesSelector":"oMatchesSelector"in c.prototype?"oMatchesSelector":"msMatchesSelector",xt.pEventTypes=xt.supportsPointerEvent?Nt.PointerEvent===u.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,xt.wheelEvent=Nt.document&&"onmousewheel"in Nt.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},yt=xt;function Ct(u,c){if(u.contains)return u.contains(c);for(;c;){if(c===u)return!0;c=c.parentNode}return!1}function Ee(u,c){for(;I.element(u);){if(be(u,c))return u;u=Ut(u)}return null}function Ut(u){var c=u.parentNode;if(I.docFrag(c)){for(;(c=c.host)&&I.docFrag(c););return c}return c}function be(u,c){return P!==C&&(c=c.replace(/\/deep\//g," ")),u[yt.prefixedMatchesSelector](c)}var en=function(u){return u.parentNode||u.host};function $e(u,c){for(var f,p=[],m=u;(f=en(m))&&m!==c&&f!==m.ownerDocument;)p.unshift(m),m=f;return p}function ze(u,c,f){for(;I.element(u);){if(be(u,c))return!0;if((u=Ut(u))===f)return be(u,c)}return!1}function Te(u){return u.correspondingUseElement||u}function Ae(u){var c=u instanceof Nt.SVGElement?u.getBoundingClientRect():u.getClientRects()[0];return c&&{left:c.left,right:c.right,top:c.top,bottom:c.bottom,width:c.width||c.right-c.left,height:c.height||c.bottom-c.top}}function te(u){var c,f=Ae(u);if(!yt.isIOS7&&f){var p={x:(c=(c=$(u))||P).scrollX||c.document.documentElement.scrollLeft,y:c.scrollY||c.document.documentElement.scrollTop};f.left+=p.x,f.right+=p.x,f.top+=p.y,f.bottom+=p.y}return f}function nn(u){for(var c=[];u;)c.push(u),u=Ut(u);return c}function sn(u){return!!I.string(u)&&(Nt.document.querySelector(u),!0)}function at(u,c){for(var f in c)u[f]=c[f];return u}function re(u,c,f){return u==="parent"?Ut(f):u==="self"?c.getRect(f):Ee(f,u)}function En(u,c,f,p){var m=u;return I.string(m)?m=re(m,c,f):I.func(m)&&(m=m.apply(void 0,p)),I.element(m)&&(m=te(m)),m}function zi(u){return u&&{x:"x"in u?u.x:u.left,y:"y"in u?u.y:u.top}}function he(u){return!u||"x"in u&&"y"in u||((u=at({},u)).x=u.left||0,u.y=u.top||0,u.width=u.width||(u.right||0)-u.x,u.height=u.height||(u.bottom||0)-u.y),u}function qi(u,c,f){u.left&&(c.left+=f.x),u.right&&(c.right+=f.x),u.top&&(c.top+=f.y),u.bottom&&(c.bottom+=f.y),c.width=c.right-c.left,c.height=c.bottom-c.top}function vi(u,c,f){var p=f&&u.options[f];return zi(En(p&&p.origin||u.options.origin,u,c,[u&&c]))||{x:0,y:0}}function wn(u,c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(T){return!0},p=arguments.length>3?arguments[3]:void 0;if(p=p||{},I.string(u)&&u.search(" ")!==-1&&(u=Ss(u)),I.array(u))return u.forEach(function(T){return wn(T,c,f,p)}),p;if(I.object(u)&&(c=u,u=""),I.func(c)&&f(u))p[u]=p[u]||[],p[u].push(c);else if(I.array(c))for(var m=0,b=c;m<b.length;m++){var _=b[m];wn(u,_,f,p)}else if(I.object(c))for(var w in c)wn(Ss(w).map(function(T){return"".concat(u).concat(T)}),c[w],f,p);return p}function Ss(u){return u.trim().split(/ +/)}var bi=function(u,c){return Math.sqrt(u*u+c*c)},Ts=["webkit","moz"];function rn(u,c){u.__set||(u.__set={});var f=function(m){if(Ts.some(function(b){return m.indexOf(b)===0}))return 1;typeof u[m]!="function"&&m!=="__set"&&Object.defineProperty(u,m,{get:function(){return m in u.__set?u.__set[m]:u.__set[m]=c[m]},set:function(b){u.__set[m]=b},configurable:!0})};for(var p in c)f(p);return u}function Pn(u,c){u.page=u.page||{},u.page.x=c.page.x,u.page.y=c.page.y,u.client=u.client||{},u.client.x=c.client.x,u.client.y=c.client.y,u.timeStamp=c.timeStamp}function As(u){u.page.x=0,u.page.y=0,u.client.x=0,u.client.y=0}function ji(u){return u instanceof Nt.Event||u instanceof Nt.Touch}function Gn(u,c,f){return u=u||"page",(f=f||{}).x=c[u+"X"],f.y=c[u+"Y"],f}function ks(u,c){return c=c||{x:0,y:0},yt.isOperaMobile&&ji(u)?(Gn("screen",u,c),c.x+=window.scrollX,c.y+=window.scrollY):Gn("page",u,c),c}function Kn(u){return I.number(u.pointerId)?u.pointerId:u.identifier}function mr(u,c,f){var p=c.length>1?rl(c):c[0];ks(p,u.page),function(m,b){b=b||{},yt.isOperaMobile&&ji(m)?Gn("screen",m,b):Gn("client",m,b)}(p,u.client),u.timeStamp=f}function Ui(u){var c=[];return I.array(u)?(c[0]=u[0],c[1]=u[1]):u.type==="touchend"?u.touches.length===1?(c[0]=u.touches[0],c[1]=u.changedTouches[0]):u.touches.length===0&&(c[0]=u.changedTouches[0],c[1]=u.changedTouches[1]):(c[0]=u.touches[0],c[1]=u.touches[1]),c}function rl(u){for(var c={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},f=0;f<u.length;f++){var p=u[f];for(var m in c)c[m]+=p[m]}for(var b in c)c[b]/=u.length;return c}function Eo(u){if(!u.length)return null;var c=Ui(u),f=Math.min(c[0].pageX,c[1].pageX),p=Math.min(c[0].pageY,c[1].pageY),m=Math.max(c[0].pageX,c[1].pageX),b=Math.max(c[0].pageY,c[1].pageY);return{x:f,y:p,left:f,top:p,right:m,bottom:b,width:m-f,height:b-p}}function wo(u,c){var f=c+"X",p=c+"Y",m=Ui(u),b=m[0][f]-m[1][f],_=m[0][p]-m[1][p];return bi(b,_)}function So(u,c){var f=c+"X",p=c+"Y",m=Ui(u),b=m[1][f]-m[0][f],_=m[1][p]-m[0][p];return 180*Math.atan2(_,b)/Math.PI}function ol(u){return I.string(u.pointerType)?u.pointerType:I.number(u.pointerType)?[void 0,void 0,"touch","pen","mouse"][u.pointerType]:/touch/.test(u.type||"")||u instanceof Nt.Touch?"touch":"mouse"}function al(u){var c=I.func(u.composedPath)?u.composedPath():u.path;return[Te(c?c[0]:u.target),Te(u.currentTarget)]}var vr=function(){function u(c){r(this,u),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=c}return a(u,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),u}();Object.defineProperty(vr.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var ll=function(u,c){for(var f=0;f<c.length;f++){var p=c[f];u.push(p)}return u},cl=function(u){return ll([],u)},Ds=function(u,c){for(var f=0;f<u.length;f++)if(c(u[f],f,u))return f;return-1},Cs=function(u,c){return u[Ds(u,c)]},Wi=function(u){d(f,u);var c=y(f);function f(p,m,b){var _;r(this,f),(_=c.call(this,m._interaction)).dropzone=void 0,_.dragEvent=void 0,_.relatedTarget=void 0,_.draggable=void 0,_.propagationStopped=!1,_.immediatePropagationStopped=!1;var w=b==="dragleave"?p.prev:p.cur,T=w.element,L=w.dropzone;return _.type=b,_.target=T,_.currentTarget=T,_.dropzone=L,_.dragEvent=m,_.relatedTarget=m.target,_.draggable=m.interactable,_.timeStamp=m.timeStamp,_}return a(f,[{key:"reject",value:function(){var p=this,m=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&m.cur.dropzone===this.dropzone&&m.cur.element===this.target)if(m.prev.dropzone=this.dropzone,m.prev.element=this.target,m.rejected=!0,m.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var b=m.activeDrops,_=Ds(b,function(T){var L=T.dropzone,A=T.element;return L===p.dropzone&&A===p.target});m.activeDrops.splice(_,1);var w=new f(m,this.dragEvent,"dropdeactivate");w.dropzone=this.dropzone,w.target=this.target,this.dropzone.fire(w)}else this.dropzone.fire(new f(m,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),f}(vr);function ul(u,c){for(var f=0,p=u.slice();f<p.length;f++){var m=p[f],b=m.dropzone,_=m.element;c.dropzone=b,c.target=_,b.fire(c),c.propagationStopped=c.immediatePropagationStopped=!1}}function Yi(u,c){for(var f=function(b,_){for(var w=[],T=0,L=b.interactables.list;T<L.length;T++){var A=L[T];if(A.options.drop.enabled){var N=A.options.drop.accept;if(!(I.element(N)&&N!==_||I.string(N)&&!be(_,N)||I.func(N)&&!N({dropzone:A,draggableElement:_})))for(var q=0,Q=A.getAllElements();q<Q.length;q++){var J=Q[q];J!==_&&w.push({dropzone:A,element:J,rect:A.getRect(J)})}}}return w}(u,c),p=0;p<f.length;p++){var m=f[p];m.rect=m.dropzone.getRect(m.element)}return f}function dl(u,c,f){for(var p=u.dropState,m=u.interactable,b=u.element,_=[],w=0,T=p.activeDrops;w<T.length;w++){var L=T[w],A=L.dropzone,N=L.element,q=L.rect,Q=A.dropCheck(c,f,m,b,N,q);_.push(Q?N:null)}var J=function(tt){for(var ct,rt,gt,Lt=[],Wt=0;Wt<tt.length;Wt++){var At=tt[Wt],Rt=tt[ct];if(At&&Wt!==ct)if(Rt){var Je=en(At),fe=en(Rt);if(Je!==At.ownerDocument)if(fe!==At.ownerDocument)if(Je!==fe){Lt=Lt.length?Lt:$e(Rt);var gn=void 0;if(Rt instanceof Nt.HTMLElement&&At instanceof Nt.SVGElement&&!(At instanceof Nt.SVGSVGElement)){if(At===fe)continue;gn=At.ownerSVGElement}else gn=At;for(var Rn=$e(gn,Rt.ownerDocument),Ti=0;Rn[Ti]&&Rn[Ti]===Lt[Ti];)Ti++;var Sl=[Rn[Ti-1],Rn[Ti],Lt[Ti]];if(Sl[0])for(var jo=Sl[0].lastChild;jo;){if(jo===Sl[1]){ct=Wt,Lt=Rn;break}if(jo===Sl[2])break;jo=jo.previousSibling}}else gt=Rt,(parseInt($(rt=At).getComputedStyle(rt).zIndex,10)||0)>=(parseInt($(gt).getComputedStyle(gt).zIndex,10)||0)&&(ct=Wt);else ct=Wt}else ct=Wt}return ct}(_);return p.activeDrops[J]||null}function br(u,c,f){var p=u.dropState,m={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return f.type==="dragstart"&&(m.activate=new Wi(p,f,"dropactivate"),m.activate.target=null,m.activate.dropzone=null),f.type==="dragend"&&(m.deactivate=new Wi(p,f,"dropdeactivate"),m.deactivate.target=null,m.deactivate.dropzone=null),p.rejected||(p.cur.element!==p.prev.element&&(p.prev.dropzone&&(m.leave=new Wi(p,f,"dragleave"),f.dragLeave=m.leave.target=p.prev.element,f.prevDropzone=m.leave.dropzone=p.prev.dropzone),p.cur.dropzone&&(m.enter=new Wi(p,f,"dragenter"),f.dragEnter=p.cur.element,f.dropzone=p.cur.dropzone)),f.type==="dragend"&&p.cur.dropzone&&(m.drop=new Wi(p,f,"drop"),f.dropzone=p.cur.dropzone,f.relatedTarget=p.cur.element),f.type==="dragmove"&&p.cur.dropzone&&(m.move=new Wi(p,f,"dropmove"),f.dropzone=p.cur.dropzone)),m}function To(u,c){var f=u.dropState,p=f.activeDrops,m=f.cur,b=f.prev;c.leave&&b.dropzone.fire(c.leave),c.enter&&m.dropzone.fire(c.enter),c.move&&m.dropzone.fire(c.move),c.drop&&m.dropzone.fire(c.drop),c.deactivate&&ul(p,c.deactivate),f.prev.dropzone=m.dropzone,f.prev.element=m.element}function yi(u,c){var f=u.interaction,p=u.iEvent,m=u.event;if(p.type==="dragmove"||p.type==="dragend"){var b=f.dropState;c.dynamicDrop&&(b.activeDrops=Yi(c,f.element));var _=p,w=dl(f,_,m);b.rejected=b.rejected&&!!w&&w.dropzone===b.cur.dropzone&&w.element===b.cur.element,b.cur.dropzone=w&&w.dropzone,b.cur.element=w&&w.element,b.events=br(f,0,_)}}var Ao={id:"actions/drop",install:function(u){var c=u.actions,f=u.interactStatic,p=u.Interactable,m=u.defaults;u.usePlugin(ft),p.prototype.dropzone=function(b){return function(_,w){if(I.object(w)){if(_.options.drop.enabled=w.enabled!==!1,w.listeners){var T=wn(w.listeners),L=Object.keys(T).reduce(function(N,q){return N[/^(enter|leave)/.test(q)?"drag".concat(q):/^(activate|deactivate|move)/.test(q)?"drop".concat(q):q]=T[q],N},{}),A=_.options.drop.listeners;A&&_.off(A),_.on(L),_.options.drop.listeners=L}return I.func(w.ondrop)&&_.on("drop",w.ondrop),I.func(w.ondropactivate)&&_.on("dropactivate",w.ondropactivate),I.func(w.ondropdeactivate)&&_.on("dropdeactivate",w.ondropdeactivate),I.func(w.ondragenter)&&_.on("dragenter",w.ondragenter),I.func(w.ondragleave)&&_.on("dragleave",w.ondragleave),I.func(w.ondropmove)&&_.on("dropmove",w.ondropmove),/^(pointer|center)$/.test(w.overlap)?_.options.drop.overlap=w.overlap:I.number(w.overlap)&&(_.options.drop.overlap=Math.max(Math.min(1,w.overlap),0)),"accept"in w&&(_.options.drop.accept=w.accept),"checker"in w&&(_.options.drop.checker=w.checker),_}return I.bool(w)?(_.options.drop.enabled=w,_):_.options.drop}(this,b)},p.prototype.dropCheck=function(b,_,w,T,L,A){return function(N,q,Q,J,tt,ct,rt){var gt=!1;if(!(rt=rt||N.getRect(ct)))return!!N.options.drop.checker&&N.options.drop.checker(q,Q,gt,N,ct,J,tt);var Lt=N.options.drop.overlap;if(Lt==="pointer"){var Wt=vi(J,tt,"drag"),At=ks(q);At.x+=Wt.x,At.y+=Wt.y;var Rt=At.x>rt.left&&At.x<rt.right,Je=At.y>rt.top&&At.y<rt.bottom;gt=Rt&&Je}var fe=J.getRect(tt);if(fe&&Lt==="center"){var gn=fe.left+fe.width/2,Rn=fe.top+fe.height/2;gt=gn>=rt.left&&gn<=rt.right&&Rn>=rt.top&&Rn<=rt.bottom}return fe&&I.number(Lt)&&(gt=Math.max(0,Math.min(rt.right,fe.right)-Math.max(rt.left,fe.left))*Math.max(0,Math.min(rt.bottom,fe.bottom)-Math.max(rt.top,fe.top))/(fe.width*fe.height)>=Lt),N.options.drop.checker&&(gt=N.options.drop.checker(q,Q,gt,N,ct,J,tt)),gt}(this,b,_,w,T,L,A)},f.dynamicDrop=function(b){return I.bool(b)?(u.dynamicDrop=b,f):u.dynamicDrop},at(c.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),c.methodDict.drop="dropzone",u.dynamicDrop=!1,m.actions.drop=Ao.defaults},listeners:{"interactions:before-action-start":function(u){var c=u.interaction;c.prepared.name==="drag"&&(c.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(u,c){var f=u.interaction,p=(u.event,u.iEvent);if(f.prepared.name==="drag"){var m=f.dropState;m.activeDrops=[],m.events={},m.activeDrops=Yi(c,f.element),m.events=br(f,0,p),m.events.activate&&(ul(m.activeDrops,m.events.activate),c.fire("actions/drop:start",{interaction:f,dragEvent:p}))}},"interactions:action-move":yi,"interactions:after-action-move":function(u,c){var f=u.interaction,p=u.iEvent;if(f.prepared.name==="drag"){var m=f.dropState;To(f,m.events),c.fire("actions/drop:move",{interaction:f,dragEvent:p}),m.events={}}},"interactions:action-end":function(u,c){if(u.interaction.prepared.name==="drag"){var f=u.interaction,p=u.iEvent;yi(u,c),To(f,f.dropState.events),c.fire("actions/drop:end",{interaction:f,dragEvent:p})}},"interactions:stop":function(u){var c=u.interaction;if(c.prepared.name==="drag"){var f=c.dropState;f&&(f.activeDrops=null,f.events=null,f.cur.dropzone=null,f.cur.element=null,f.prev.dropzone=null,f.prev.element=null,f.rejected=!1)}}},getActiveDrops:Yi,getDrop:dl,getDropEvents:br,fireDropEvents:To,filterEventType:function(u){return u.search("drag")===0||u.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Tu=Ao;function ko(u){var c=u.interaction,f=u.iEvent,p=u.phase;if(c.prepared.name==="gesture"){var m=c.pointers.map(function(L){return L.pointer}),b=p==="start",_=p==="end",w=c.interactable.options.deltaSource;if(f.touches=[m[0],m[1]],b)f.distance=wo(m,w),f.box=Eo(m),f.scale=1,f.ds=0,f.angle=So(m,w),f.da=0,c.gesture.startDistance=f.distance,c.gesture.startAngle=f.angle;else if(_||c.pointers.length<2){var T=c.prevEvent;f.distance=T.distance,f.box=T.box,f.scale=T.scale,f.ds=0,f.angle=T.angle,f.da=0}else f.distance=wo(m,w),f.box=Eo(m),f.scale=f.distance/c.gesture.startDistance,f.angle=So(m,w),f.ds=f.scale-c.gesture.scale,f.da=f.angle-c.gesture.angle;c.gesture.distance=f.distance,c.gesture.angle=f.angle,I.number(f.scale)&&f.scale!==1/0&&!isNaN(f.scale)&&(c.gesture.scale=f.scale)}}var yr={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(u){var c=u.actions,f=u.Interactable,p=u.defaults;f.prototype.gesturable=function(m){return I.object(m)?(this.options.gesture.enabled=m.enabled!==!1,this.setPerAction("gesture",m),this.setOnEvents("gesture",m),this):I.bool(m)?(this.options.gesture.enabled=m,this):this.options.gesture},c.map.gesture=yr,c.methodDict.gesture="gesturable",p.actions.gesture=yr.defaults},listeners:{"interactions:action-start":ko,"interactions:action-move":ko,"interactions:action-end":ko,"interactions:new":function(u){u.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(u){if(!(u.interaction.pointers.length<2)){var c=u.interactable.options.gesture;if(c&&c.enabled)return u.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(u){return u.search("gesture")===0}},Au=yr;function hl(u,c,f,p,m,b,_){if(!c)return!1;if(c===!0){var w=I.number(b.width)?b.width:b.right-b.left,T=I.number(b.height)?b.height:b.bottom-b.top;if(_=Math.min(_,Math.abs((u==="left"||u==="right"?w:T)/2)),w<0&&(u==="left"?u="right":u==="right"&&(u="left")),T<0&&(u==="top"?u="bottom":u==="bottom"&&(u="top")),u==="left"){var L=w>=0?b.left:b.right;return f.x<L+_}if(u==="top"){var A=T>=0?b.top:b.bottom;return f.y<A+_}if(u==="right")return f.x>(w>=0?b.right:b.left)-_;if(u==="bottom")return f.y>(T>=0?b.bottom:b.top)-_}return!!I.element(p)&&(I.element(c)?c===p:ze(p,c,m))}function fl(u){var c=u.iEvent,f=u.interaction;if(f.prepared.name==="resize"&&f.resizeAxes){var p=c;f.interactable.options.resize.square?(f.resizeAxes==="y"?p.delta.x=p.delta.y:p.delta.y=p.delta.x,p.axes="xy"):(p.axes=f.resizeAxes,f.resizeAxes==="x"?p.delta.y=0:f.resizeAxes==="y"&&(p.delta.x=0))}}var Sn,xi,dn={id:"actions/resize",before:["actions/drag"],install:function(u){var c=u.actions,f=u.browser,p=u.Interactable,m=u.defaults;dn.cursors=function(b){return b.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(f),dn.defaultMargin=f.supportsTouch||f.supportsPointerEvent?20:10,p.prototype.resizable=function(b){return function(_,w,T){return I.object(w)?(_.options.resize.enabled=w.enabled!==!1,_.setPerAction("resize",w),_.setOnEvents("resize",w),I.string(w.axis)&&/^x$|^y$|^xy$/.test(w.axis)?_.options.resize.axis=w.axis:w.axis===null&&(_.options.resize.axis=T.defaults.actions.resize.axis),I.bool(w.preserveAspectRatio)?_.options.resize.preserveAspectRatio=w.preserveAspectRatio:I.bool(w.square)&&(_.options.resize.square=w.square),_):I.bool(w)?(_.options.resize.enabled=w,_):_.options.resize}(this,b,u)},c.map.resize=dn,c.methodDict.resize="resizable",m.actions.resize=dn.defaults},listeners:{"interactions:new":function(u){u.interaction.resizeAxes="xy"},"interactions:action-start":function(u){(function(c){var f=c.iEvent,p=c.interaction;if(p.prepared.name==="resize"&&p.prepared.edges){var m=f,b=p.rect;p._rects={start:at({},b),corrected:at({},b),previous:at({},b),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},m.edges=p.prepared.edges,m.rect=p._rects.corrected,m.deltaRect=p._rects.delta}})(u),fl(u)},"interactions:action-move":function(u){(function(c){var f=c.iEvent,p=c.interaction;if(p.prepared.name==="resize"&&p.prepared.edges){var m=f,b=p.interactable.options.resize.invert,_=b==="reposition"||b==="negate",w=p.rect,T=p._rects,L=T.start,A=T.corrected,N=T.delta,q=T.previous;if(at(q,A),_){if(at(A,w),b==="reposition"){if(A.top>A.bottom){var Q=A.top;A.top=A.bottom,A.bottom=Q}if(A.left>A.right){var J=A.left;A.left=A.right,A.right=J}}}else A.top=Math.min(w.top,L.bottom),A.bottom=Math.max(w.bottom,L.top),A.left=Math.min(w.left,L.right),A.right=Math.max(w.right,L.left);for(var tt in A.width=A.right-A.left,A.height=A.bottom-A.top,A)N[tt]=A[tt]-q[tt];m.edges=p.prepared.edges,m.rect=A,m.deltaRect=N}})(u),fl(u)},"interactions:action-end":function(u){var c=u.iEvent,f=u.interaction;if(f.prepared.name==="resize"&&f.prepared.edges){var p=c;p.edges=f.prepared.edges,p.rect=f._rects.corrected,p.deltaRect=f._rects.delta}},"auto-start:check":function(u){var c=u.interaction,f=u.interactable,p=u.element,m=u.rect,b=u.buttons;if(m){var _=at({},c.coords.cur.page),w=f.options.resize;if(w&&w.enabled&&(!c.pointerIsDown||!/mouse|pointer/.test(c.pointerType)||b&w.mouseButtons)){if(I.object(w.edges)){var T={left:!1,right:!1,top:!1,bottom:!1};for(var L in T)T[L]=hl(L,w.edges[L],_,c._latestPointer.eventTarget,p,m,w.margin||dn.defaultMargin);T.left=T.left&&!T.right,T.top=T.top&&!T.bottom,(T.left||T.right||T.top||T.bottom)&&(u.action={name:"resize",edges:T})}else{var A=w.axis!=="y"&&_.x>m.right-dn.defaultMargin,N=w.axis!=="x"&&_.y>m.bottom-dn.defaultMargin;(A||N)&&(u.action={name:"resize",axes:(A?"x":"")+(N?"y":"")})}return!u.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(u){var c=u.edges,f=u.axis,p=u.name,m=dn.cursors,b=null;if(f)b=m[p+f];else if(c){for(var _="",w=0,T=["top","bottom","left","right"];w<T.length;w++){var L=T[w];c[L]&&(_+=L)}b=m[_]}return b},filterEventType:function(u){return u.search("resize")===0},defaultMargin:null},Is=dn,Xi={id:"actions",install:function(u){u.usePlugin(Au),u.usePlugin(Is),u.usePlugin(ft),u.usePlugin(Tu)}},Do=0,Jn={request:function(u){return Sn(u)},cancel:function(u){return xi(u)},init:function(u){if(Sn=u.requestAnimationFrame,xi=u.cancelAnimationFrame,!Sn)for(var c=["ms","moz","webkit","o"],f=0;f<c.length;f++){var p=c[f];Sn=u["".concat(p,"RequestAnimationFrame")],xi=u["".concat(p,"CancelAnimationFrame")]||u["".concat(p,"CancelRequestAnimationFrame")]}Sn=Sn&&Sn.bind(u),xi=xi&&xi.bind(u),Sn||(Sn=function(m){var b=Date.now(),_=Math.max(0,16-(b-Do)),w=u.setTimeout(function(){m(b+_)},_);return Do=b+_,w},xi=function(m){return clearTimeout(m)})}},_t={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(u){_t.isScrolling=!0,Jn.cancel(_t.i),u.autoScroll=_t,_t.interaction=u,_t.prevTime=_t.now(),_t.i=Jn.request(_t.scroll)},stop:function(){_t.isScrolling=!1,_t.interaction&&(_t.interaction.autoScroll=null),Jn.cancel(_t.i)},scroll:function(){var u=_t.interaction,c=u.interactable,f=u.element,p=u.prepared.name,m=c.options[p].autoScroll,b=pl(m.container,c,f),_=_t.now(),w=(_-_t.prevTime)/1e3,T=m.speed*w;if(T>=1){var L={x:_t.x*T,y:_t.y*T};if(L.x||L.y){var A=xr(b);I.window(b)?b.scrollBy(L.x,L.y):b&&(b.scrollLeft+=L.x,b.scrollTop+=L.y);var N=xr(b),q={x:N.x-A.x,y:N.y-A.y};(q.x||q.y)&&c.fire({type:"autoscroll",target:f,interactable:c,delta:q,interaction:u,container:b})}_t.prevTime=_}_t.isScrolling&&(Jn.cancel(_t.i),_t.i=Jn.request(_t.scroll))},check:function(u,c){var f;return(f=u.options[c].autoScroll)==null?void 0:f.enabled},onInteractionMove:function(u){var c=u.interaction,f=u.pointer;if(c.interacting()&&_t.check(c.interactable,c.prepared.name))if(c.simulation)_t.x=_t.y=0;else{var p,m,b,_,w=c.interactable,T=c.element,L=c.prepared.name,A=w.options[L].autoScroll,N=pl(A.container,w,T);if(I.window(N))_=f.clientX<_t.margin,p=f.clientY<_t.margin,m=f.clientX>N.innerWidth-_t.margin,b=f.clientY>N.innerHeight-_t.margin;else{var q=Ae(N);_=f.clientX<q.left+_t.margin,p=f.clientY<q.top+_t.margin,m=f.clientX>q.right-_t.margin,b=f.clientY>q.bottom-_t.margin}_t.x=m?1:_?-1:0,_t.y=b?1:p?-1:0,_t.isScrolling||(_t.margin=A.margin,_t.speed=A.speed,_t.start(c))}}};function pl(u,c,f){return(I.string(u)?re(u,c,f):u)||$(f)}function xr(u){return I.window(u)&&(u=window.document.body),{x:u.scrollLeft,y:u.scrollTop}}var k={id:"auto-scroll",install:function(u){var c=u.defaults,f=u.actions;u.autoScroll=_t,_t.now=function(){return u.now()},f.phaselessTypes.autoscroll=!0,c.perAction.autoScroll=_t.defaults},listeners:{"interactions:new":function(u){u.interaction.autoScroll=null},"interactions:destroy":function(u){u.interaction.autoScroll=null,_t.stop(),_t.interaction&&(_t.interaction=null)},"interactions:stop":_t.stop,"interactions:action-move":function(u){return _t.onInteractionMove(u)}}},M=k;function X(u,c){var f=!1;return function(){return f||(P.console.warn(c),f=!0),u.apply(this,arguments)}}function z(u,c){return u.name=c.name,u.axis=c.axis,u.edges=c.edges,u}function st(u){return I.bool(u)?(this.options.styleCursor=u,this):u===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Et(u){return I.func(u)?(this.options.actionChecker=u,this):u===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Pt={id:"auto-start/interactableMethods",install:function(u){var c=u.Interactable;c.prototype.getAction=function(f,p,m,b){var _=function(w,T,L,A,N){var q=w.getRect(A),Q=T.buttons||{0:1,1:4,3:8,4:16}[T.button],J={action:null,interactable:w,interaction:L,element:A,rect:q,buttons:Q};return N.fire("auto-start:check",J),J.action}(this,p,m,b,u);return this.options.actionChecker?this.options.actionChecker(f,p,_,this,b,m):_},c.prototype.ignoreFrom=X(function(f){return this._backCompatOption("ignoreFrom",f)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),c.prototype.allowFrom=X(function(f){return this._backCompatOption("allowFrom",f)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),c.prototype.actionChecker=Et,c.prototype.styleCursor=st}};function ot(u,c,f,p,m){return c.testIgnoreAllow(c.options[u.name],f,p)&&c.options[u.name].enabled&&mt(c,f,u,m)?u:null}function lt(u,c,f,p,m,b,_){for(var w=0,T=p.length;w<T;w++){var L=p[w],A=m[w],N=L.getAction(c,f,u,A);if(N){var q=ot(N,L,A,b,_);if(q)return{action:q,interactable:L,element:A}}}return{action:null,interactable:null,element:null}}function Bt(u,c,f,p,m){var b=[],_=[],w=p;function T(A){b.push(A),_.push(w)}for(;I.element(w);){b=[],_=[],m.interactables.forEachMatch(w,T);var L=lt(u,c,f,b,_,p,m);if(L.action&&!L.interactable.options[L.action.name].manualStart)return L;w=Ut(w)}return{action:null,interactable:null,element:null}}function qt(u,c,f){var p=c.action,m=c.interactable,b=c.element;p=p||{name:null},u.interactable=m,u.element=b,z(u.prepared,p),u.rect=m&&p.name?m.getRect(b):null,Oe(u,f),f.fire("autoStart:prepared",{interaction:u})}function mt(u,c,f,p){var m=u.options,b=m[f.name].max,_=m[f.name].maxPerElement,w=p.autoStart.maxInteractions,T=0,L=0,A=0;if(!(b&&_&&w))return!1;for(var N=0,q=p.interactions.list;N<q.length;N++){var Q=q[N],J=Q.prepared.name;if(Q.interacting()&&(++T>=w||Q.interactable===u&&((L+=J===f.name?1:0)>=b||Q.element===c&&(A++,J===f.name&&A>=_))))return!1}return w>0}function Xt(u,c){return I.number(u)?(c.autoStart.maxInteractions=u,this):c.autoStart.maxInteractions}function qe(u,c,f){var p=f.autoStart.cursorElement;p&&p!==u&&(p.style.cursor=""),u.ownerDocument.documentElement.style.cursor=c,u.style.cursor=c,f.autoStart.cursorElement=c?u:null}function Oe(u,c){var f=u.interactable,p=u.element,m=u.prepared;if(u.pointerType==="mouse"&&f&&f.options.styleCursor){var b="";if(m.name){var _=f.options[m.name].cursorChecker;b=I.func(_)?_(m,f,p,u._interacting):c.actions.map[m.name].getCursor(m)}qe(u.element,b||"",c)}else c.autoStart.cursorElement&&qe(c.autoStart.cursorElement,"",c)}var St={id:"auto-start/base",before:["actions"],install:function(u){var c=u.interactStatic,f=u.defaults;u.usePlugin(Pt),f.base.actionChecker=null,f.base.styleCursor=!0,at(f.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),c.maxInteractions=function(p){return Xt(p,u)},u.autoStart={maxInteractions:1/0,withinInteractionLimit:mt,cursorElement:null}},listeners:{"interactions:down":function(u,c){var f=u.interaction,p=u.pointer,m=u.event,b=u.eventTarget;f.interacting()||qt(f,Bt(f,p,m,b,c),c)},"interactions:move":function(u,c){(function(f,p){var m=f.interaction,b=f.pointer,_=f.event,w=f.eventTarget;m.pointerType!=="mouse"||m.pointerIsDown||m.interacting()||qt(m,Bt(m,b,_,w,p),p)})(u,c),function(f,p){var m=f.interaction;if(m.pointerIsDown&&!m.interacting()&&m.pointerWasMoved&&m.prepared.name){p.fire("autoStart:before-start",f);var b=m.interactable,_=m.prepared.name;_&&b&&(b.options[_].manualStart||!mt(b,m.element,m.prepared,p)?m.stop():(m.start(m.prepared,b,m.element),Oe(m,p)))}}(u,c)},"interactions:stop":function(u,c){var f=u.interaction,p=f.interactable;p&&p.options.styleCursor&&qe(f.element,"",c)}},maxInteractions:Xt,withinInteractionLimit:mt,validateAction:ot},Ft=St,Tt={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(u,c){var f=u.interaction,p=u.eventTarget,m=u.dx,b=u.dy;if(f.prepared.name==="drag"){var _=Math.abs(m),w=Math.abs(b),T=f.interactable.options.drag,L=T.startAxis,A=_>w?"x":_<w?"y":"xy";if(f.prepared.axis=T.lockAxis==="start"?A[0]:T.lockAxis,A!=="xy"&&L!=="xy"&&L!==A){f.prepared.name=null;for(var N=p,q=function(J){if(J!==f.interactable){var tt=f.interactable.options.drag;if(!tt.manualStart&&J.testIgnoreAllow(tt,N,p)){var ct=J.getAction(f.downPointer,f.downEvent,f,N);if(ct&&ct.name==="drag"&&function(rt,gt){if(!gt)return!1;var Lt=gt.options.drag.startAxis;return rt==="xy"||Lt==="xy"||Lt===rt}(A,J)&&Ft.validateAction(ct,J,N,p,c))return J}}};I.element(N);){var Q=c.interactables.forEachMatch(N,q);if(Q){f.prepared.name="drag",f.interactable=Q,f.element=N;break}N=Ut(N)}}}}}};function Zt(u){var c=u.prepared&&u.prepared.name;if(!c)return null;var f=u.interactable.options;return f[c].hold||f[c].delay}var ke={id:"auto-start/hold",install:function(u){var c=u.defaults;u.usePlugin(Ft),c.perAction.hold=0,c.perAction.delay=0},listeners:{"interactions:new":function(u){u.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(u){var c=u.interaction,f=Zt(c);f>0&&(c.autoStartHoldTimer=setTimeout(function(){c.start(c.prepared,c.interactable,c.element)},f))},"interactions:move":function(u){var c=u.interaction,f=u.duplicate;c.autoStartHoldTimer&&c.pointerWasMoved&&!f&&(clearTimeout(c.autoStartHoldTimer),c.autoStartHoldTimer=null)},"autoStart:before-start":function(u){var c=u.interaction;Zt(c)>0&&(c.prepared.name=null)}},getHoldDuration:Zt},we=ke,me={id:"auto-start",install:function(u){u.usePlugin(Ft),u.usePlugin(we),u.usePlugin(Tt)}},ve=function(u){return/^(always|never|auto)$/.test(u)?(this.options.preventDefault=u,this):I.bool(u)?(this.options.preventDefault=u?"always":"never",this):this.options.preventDefault};function je(u){var c=u.interaction,f=u.event;c.interactable&&c.interactable.checkAndPreventDefault(f)}var Ve={id:"core/interactablePreventDefault",install:function(u){var c=u.Interactable;c.prototype.preventDefault=ve,c.prototype.checkAndPreventDefault=function(f){return function(p,m,b){var _=p.options.preventDefault;if(_!=="never")if(_!=="always"){if(m.events.supportsPassive&&/^touch(start|move)$/.test(b.type)){var w=$(b.target).document,T=m.getDocOptions(w);if(!T||!T.events||T.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(b.type)||I.element(b.target)&&be(b.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||b.preventDefault()}else b.preventDefault()}(this,u,f)},u.interactions.docEvents.push({type:"dragstart",listener:function(f){for(var p=0,m=u.interactions.list;p<m.length;p++){var b=m[p];if(b.element&&(b.element===f.target||Ct(b.element,f.target)))return void b.interactable.checkAndPreventDefault(f)}}})},listeners:["down","move","up","cancel"].reduce(function(u,c){return u["interactions:".concat(c)]=je,u},{})};function hn(u,c){if(c.phaselessTypes[u])return!0;for(var f in c.map)if(u.indexOf(f)===0&&u.substr(f.length)in c.phases)return!0;return!1}function _i(u){var c={};for(var f in u){var p=u[f];I.plainObject(p)?c[f]=_i(p):I.array(p)?c[f]=cl(p):c[f]=p}return c}var _r=function(){function u(c){r(this,u),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=c,this.result=Ei(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return a(u,[{key:"start",value:function(c,f){var p,m,b=c.phase,_=this.interaction,w=function(L){var A=L.interactable.options[L.prepared.name],N=A.modifiers;return N&&N.length?N:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(q){var Q=A[q];return Q&&Q.enabled&&{options:Q,methods:Q._methods}}).filter(function(q){return!!q})}(_);this.prepareStates(w),this.startEdges=at({},_.edges),this.edges=at({},this.startEdges),this.startOffset=(p=_.rect,m=f,p?{left:m.x-p.left,top:m.y-p.top,right:p.right-m.x,bottom:p.bottom-m.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var T=this.fillArg({phase:b,pageCoords:f,preEnd:!1});return this.result=Ei(),this.startAll(T),this.result=this.setAll(T)}},{key:"fillArg",value:function(c){var f=this.interaction;return c.interaction=f,c.interactable=f.interactable,c.element=f.element,c.rect||(c.rect=f.rect),c.edges||(c.edges=this.startEdges),c.startOffset=this.startOffset,c}},{key:"startAll",value:function(c){for(var f=0,p=this.states;f<p.length;f++){var m=p[f];m.methods.start&&(c.state=m,m.methods.start(c))}}},{key:"setAll",value:function(c){var f=c.phase,p=c.preEnd,m=c.skipModifiers,b=c.rect,_=c.edges;c.coords=at({},c.pageCoords),c.rect=at({},b),c.edges=at({},_);for(var w=m?this.states.slice(m):this.states,T=Ei(c.coords,c.rect),L=0;L<w.length;L++){var A,N=w[L],q=N.options,Q=at({},c.coords),J=null;(A=N.methods)!=null&&A.set&&this.shouldDo(q,p,f)&&(c.state=N,J=N.methods.set(c),qi(c.edges,c.rect,{x:c.coords.x-Q.x,y:c.coords.y-Q.y})),T.eventProps.push(J)}at(this.edges,c.edges),T.delta.x=c.coords.x-c.pageCoords.x,T.delta.y=c.coords.y-c.pageCoords.y,T.rectDelta.left=c.rect.left-b.left,T.rectDelta.right=c.rect.right-b.right,T.rectDelta.top=c.rect.top-b.top,T.rectDelta.bottom=c.rect.bottom-b.bottom;var tt=this.result.coords,ct=this.result.rect;if(tt&&ct){var rt=T.rect.left!==ct.left||T.rect.right!==ct.right||T.rect.top!==ct.top||T.rect.bottom!==ct.bottom;T.changed=rt||tt.x!==T.coords.x||tt.y!==T.coords.y}return T}},{key:"applyToInteraction",value:function(c){var f=this.interaction,p=c.phase,m=f.coords.cur,b=f.coords.start,_=this.result,w=this.startDelta,T=_.delta;p==="start"&&at(this.startDelta,_.delta);for(var L=0,A=[[b,w],[m,T]];L<A.length;L++){var N=A[L],q=N[0],Q=N[1];q.page.x+=Q.x,q.page.y+=Q.y,q.client.x+=Q.x,q.client.y+=Q.y}var J=this.result.rectDelta,tt=c.rect||f.rect;tt.left+=J.left,tt.right+=J.right,tt.top+=J.top,tt.bottom+=J.bottom,tt.width=tt.right-tt.left,tt.height=tt.bottom-tt.top}},{key:"setAndApply",value:function(c){var f=this.interaction,p=c.phase,m=c.preEnd,b=c.skipModifiers,_=this.setAll(this.fillArg({preEnd:m,phase:p,pageCoords:c.modifiedCoords||f.coords.cur.page}));if(this.result=_,!_.changed&&(!b||b<this.states.length)&&f.interacting())return!1;if(c.modifiedCoords){var w=f.coords.cur.page,T={x:c.modifiedCoords.x-w.x,y:c.modifiedCoords.y-w.y};_.coords.x+=T.x,_.coords.y+=T.y,_.delta.x+=T.x,_.delta.y+=T.y}this.applyToInteraction(c)}},{key:"beforeEnd",value:function(c){var f=c.interaction,p=c.event,m=this.states;if(m&&m.length){for(var b=!1,_=0;_<m.length;_++){var w=m[_];c.state=w;var T=w.options,L=w.methods,A=L.beforeEnd&&L.beforeEnd(c);if(A)return this.endResult=A,!1;b=b||!b&&this.shouldDo(T,!0,c.phase,!0)}b&&f.move({event:p,preEnd:!0})}}},{key:"stop",value:function(c){var f=c.interaction;if(this.states&&this.states.length){var p=at({states:this.states,interactable:f.interactable,element:f.element,rect:null},c);this.fillArg(p);for(var m=0,b=this.states;m<b.length;m++){var _=b[m];p.state=_,_.methods.stop&&_.methods.stop(p)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(c){this.states=[];for(var f=0;f<c.length;f++){var p=c[f],m=p.options,b=p.methods,_=p.name;this.states.push({options:m,methods:b,index:f,name:_})}return this.states}},{key:"restoreInteractionCoords",value:function(c){var f=c.interaction,p=f.coords,m=f.rect,b=f.modification;if(b.result){for(var _=b.startDelta,w=b.result,T=w.delta,L=w.rectDelta,A=0,N=[[p.start,_],[p.cur,T]];A<N.length;A++){var q=N[A],Q=q[0],J=q[1];Q.page.x-=J.x,Q.page.y-=J.y,Q.client.x-=J.x,Q.client.y-=J.y}m.left-=L.left,m.right-=L.right,m.top-=L.top,m.bottom-=L.bottom}}},{key:"shouldDo",value:function(c,f,p,m){return!(!c||c.enabled===!1||m&&!c.endOnly||c.endOnly&&!f||p==="start"&&!c.setStart)}},{key:"copyFrom",value:function(c){this.startOffset=c.startOffset,this.startDelta=c.startDelta,this.startEdges=c.startEdges,this.edges=c.edges,this.states=c.states.map(function(f){return _i(f)}),this.result=Ei(at({},c.result.coords),at({},c.result.rect))}},{key:"destroy",value:function(){for(var c in this)this[c]=null}}]),u}();function Ei(u,c){return{rect:c,coords:u,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Zn(u,c){var f=u.defaults,p={start:u.start,set:u.set,beforeEnd:u.beforeEnd,stop:u.stop},m=function(b){var _=b||{};for(var w in _.enabled=_.enabled!==!1,f)w in _||(_[w]=f[w]);var T={options:_,methods:p,name:c,enable:function(){return _.enabled=!0,T},disable:function(){return _.enabled=!1,T}};return T};return c&&typeof c=="string"&&(m._defaults=f,m._methods=p),m}function Gi(u){var c=u.iEvent,f=u.interaction.modification.result;f&&(c.modifiers=f.eventProps)}var wi={id:"modifiers/base",before:["actions"],install:function(u){u.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(u){var c=u.interaction;c.modification=new _r(c)},"interactions:before-action-start":function(u){var c=u.interaction,f=u.interaction.modification;f.start(u,c.coords.start.page),c.edges=f.edges,f.applyToInteraction(u)},"interactions:before-action-move":function(u){var c=u.interaction,f=c.modification,p=f.setAndApply(u);return c.edges=f.edges,p},"interactions:before-action-end":function(u){var c=u.interaction,f=c.modification,p=f.beforeEnd(u);return c.edges=f.startEdges,p},"interactions:action-start":Gi,"interactions:action-move":Gi,"interactions:action-end":Gi,"interactions:after-action-start":function(u){return u.interaction.modification.restoreInteractionCoords(u)},"interactions:after-action-move":function(u){return u.interaction.modification.restoreInteractionCoords(u)},"interactions:stop":function(u){return u.interaction.modification.stop(u)}}},Ls=wi,Co={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},Er=function(u){d(f,u);var c=y(f);function f(p,m,b,_,w,T,L){var A;r(this,f),(A=c.call(this,p)).relatedTarget=null,A.screenX=void 0,A.screenY=void 0,A.button=void 0,A.buttons=void 0,A.ctrlKey=void 0,A.shiftKey=void 0,A.altKey=void 0,A.metaKey=void 0,A.page=void 0,A.client=void 0,A.delta=void 0,A.rect=void 0,A.x0=void 0,A.y0=void 0,A.t0=void 0,A.dt=void 0,A.duration=void 0,A.clientX0=void 0,A.clientY0=void 0,A.velocity=void 0,A.speed=void 0,A.swipe=void 0,A.axes=void 0,A.preEnd=void 0,w=w||p.element;var N=p.interactable,q=(N&&N.options||Co).deltaSource,Q=vi(N,w,b),J=_==="start",tt=_==="end",ct=J?v(A):p.prevEvent,rt=J?p.coords.start:tt?{page:ct.page,client:ct.client,timeStamp:p.coords.cur.timeStamp}:p.coords.cur;return A.page=at({},rt.page),A.client=at({},rt.client),A.rect=at({},p.rect),A.timeStamp=rt.timeStamp,tt||(A.page.x-=Q.x,A.page.y-=Q.y,A.client.x-=Q.x,A.client.y-=Q.y),A.ctrlKey=m.ctrlKey,A.altKey=m.altKey,A.shiftKey=m.shiftKey,A.metaKey=m.metaKey,A.button=m.button,A.buttons=m.buttons,A.target=w,A.currentTarget=w,A.preEnd=T,A.type=L||b+(_||""),A.interactable=N,A.t0=J?p.pointers[p.pointers.length-1].downTime:ct.t0,A.x0=p.coords.start.page.x-Q.x,A.y0=p.coords.start.page.y-Q.y,A.clientX0=p.coords.start.client.x-Q.x,A.clientY0=p.coords.start.client.y-Q.y,A.delta=J||tt?{x:0,y:0}:{x:A[q].x-ct[q].x,y:A[q].y-ct[q].y},A.dt=p.coords.delta.timeStamp,A.duration=A.timeStamp-A.t0,A.velocity=at({},p.coords.velocity[q]),A.speed=bi(A.velocity.x,A.velocity.y),A.swipe=tt||_==="inertiastart"?A.getSwipe():null,A}return a(f,[{key:"getSwipe",value:function(){var p=this._interaction;if(p.prevEvent.speed<600||this.timeStamp-p.prevEvent.timeStamp>150)return null;var m=180*Math.atan2(p.prevEvent.velocityY,p.prevEvent.velocityX)/Math.PI;m<0&&(m+=360);var b=112.5<=m&&m<247.5,_=202.5<=m&&m<337.5;return{up:_,down:!_&&22.5<=m&&m<157.5,left:b,right:!b&&(292.5<=m||m<67.5),angle:m,speed:p.prevEvent.speed,velocity:{x:p.prevEvent.velocityX,y:p.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),f}(vr);Object.defineProperties(Er.prototype,{pageX:{get:function(){return this.page.x},set:function(u){this.page.x=u}},pageY:{get:function(){return this.page.y},set:function(u){this.page.y=u}},clientX:{get:function(){return this.client.x},set:function(u){this.client.x=u}},clientY:{get:function(){return this.client.y},set:function(u){this.client.y=u}},dx:{get:function(){return this.delta.x},set:function(u){this.delta.x=u}},dy:{get:function(){return this.delta.y},set:function(u){this.delta.y=u}},velocityX:{get:function(){return this.velocity.x},set:function(u){this.velocity.x=u}},velocityY:{get:function(){return this.velocity.y},set:function(u){this.velocity.y=u}}});var gl=a(function u(c,f,p,m,b){r(this,u),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=c,this.pointer=f,this.event=p,this.downTime=m,this.downTarget=b}),ml=function(u){return u.interactable="",u.element="",u.prepared="",u.pointerIsDown="",u.pointerWasMoved="",u._proxy="",u}({}),vl=function(u){return u.start="",u.move="",u.end="",u.stop="",u.interacting="",u}({}),ku=0,Os=function(){function u(c){var f=this,p=c.pointerType,m=c.scopeFire;r(this,u),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=X(function(A){this.move(A)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=ku++,this._scopeFire=m,this.pointerType=p;var b=this;this._proxy={};var _=function(A){Object.defineProperty(f._proxy,A,{get:function(){return b[A]}})};for(var w in ml)_(w);var T=function(A){Object.defineProperty(f._proxy,A,{value:function(){return b[A].apply(b,arguments)}})};for(var L in vl)T(L);this._scopeFire("interactions:new",{interaction:this})}return a(u,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(c,f,p){var m=this.updatePointer(c,f,p,!0),b=this.pointers[m];this._scopeFire("interactions:down",{pointer:c,event:f,eventTarget:p,pointerIndex:m,pointerInfo:b,type:"down",interaction:this})}},{key:"start",value:function(c,f,p){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(c.name==="gesture"?2:1)||!f.options[c.name].enabled)&&(z(this.prepared,c),this.interactable=f,this.element=p,this.rect=f.getRect(p),this.edges=this.prepared.edges?at({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(c,f,p){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(c,f,p,!1);var m,b,_=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(m=this.coords.cur.client.x-this.coords.start.client.x,b=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=bi(m,b)>this.pointerMoveTolerance);var w,T,L,A=this.getPointerIndex(c),N={pointer:c,pointerIndex:A,pointerInfo:this.pointers[A],event:f,type:"move",eventTarget:p,dx:m,dy:b,duplicate:_,interaction:this};_||(w=this.coords.velocity,T=this.coords.delta,L=Math.max(T.timeStamp/1e3,.001),w.page.x=T.page.x/L,w.page.y=T.page.y/L,w.client.x=T.client.x/L,w.client.y=T.client.y/L,w.timeStamp=L),this._scopeFire("interactions:move",N),_||this.simulation||(this.interacting()&&(N.type=null,this.move(N)),this.pointerWasMoved&&Pn(this.coords.prev,this.coords.cur))}},{key:"move",value:function(c){c&&c.event||As(this.coords.delta),(c=at({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},c||{})).phase="move",this._doPhase(c)}},{key:"pointerUp",value:function(c,f,p,m){var b=this.getPointerIndex(c);b===-1&&(b=this.updatePointer(c,f,p,!1));var _=/cancel$/i.test(f.type)?"cancel":"up";this._scopeFire("interactions:".concat(_),{pointer:c,pointerIndex:b,pointerInfo:this.pointers[b],event:f,eventTarget:p,type:_,curEventTarget:m,interaction:this}),this.simulation||this.end(f),this.removePointer(c,f)}},{key:"documentBlur",value:function(c){this.end(c),this._scopeFire("interactions:blur",{event:c,type:"blur",interaction:this})}},{key:"end",value:function(c){var f;this._ending=!0,c=c||this._latestPointer.event,this.interacting()&&(f=this._doPhase({event:c,interaction:this,phase:"end"})),this._ending=!1,f===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(c){var f=Kn(c);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Ds(this.pointers,function(p){return p.id===f})}},{key:"getPointerInfo",value:function(c){return this.pointers[this.getPointerIndex(c)]}},{key:"updatePointer",value:function(c,f,p,m){var b,_,w,T=Kn(c),L=this.getPointerIndex(c),A=this.pointers[L];return m=m!==!1&&(m||/(down|start)$/i.test(f.type)),A?A.pointer=c:(A=new gl(T,c,f,null,null),L=this.pointers.length,this.pointers.push(A)),mr(this.coords.cur,this.pointers.map(function(N){return N.pointer}),this._now()),b=this.coords.delta,_=this.coords.prev,w=this.coords.cur,b.page.x=w.page.x-_.page.x,b.page.y=w.page.y-_.page.y,b.client.x=w.client.x-_.client.x,b.client.y=w.client.y-_.client.y,b.timeStamp=w.timeStamp-_.timeStamp,m&&(this.pointerIsDown=!0,A.downTime=this.coords.cur.timeStamp,A.downTarget=p,rn(this.downPointer,c),this.interacting()||(Pn(this.coords.start,this.coords.cur),Pn(this.coords.prev,this.coords.cur),this.downEvent=f,this.pointerWasMoved=!1)),this._updateLatestPointer(c,f,p),this._scopeFire("interactions:update-pointer",{pointer:c,event:f,eventTarget:p,down:m,pointerInfo:A,pointerIndex:L,interaction:this}),L}},{key:"removePointer",value:function(c,f){var p=this.getPointerIndex(c);if(p!==-1){var m=this.pointers[p];this._scopeFire("interactions:remove-pointer",{pointer:c,event:f,eventTarget:null,pointerIndex:p,pointerInfo:m,interaction:this}),this.pointers.splice(p,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(c,f,p){this._latestPointer.pointer=c,this._latestPointer.event=f,this._latestPointer.eventTarget=p}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(c,f,p,m){return new Er(this,c,this.prepared.name,f,this.element,p,m)}},{key:"_fireEvent",value:function(c){var f;(f=this.interactable)==null||f.fire(c),(!this.prevEvent||c.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=c)}},{key:"_doPhase",value:function(c){var f=c.event,p=c.phase,m=c.preEnd,b=c.type,_=this.rect;if(_&&p==="move"&&(qi(this.edges,_,this.coords.delta[this.interactable.options.deltaSource]),_.width=_.right-_.left,_.height=_.bottom-_.top),this._scopeFire("interactions:before-action-".concat(p),c)===!1)return!1;var w=c.iEvent=this._createPreparedEvent(f,p,m,b);return this._scopeFire("interactions:action-".concat(p),c),p==="start"&&(this.prevEvent=w),this._fireEvent(w),this._scopeFire("interactions:after-action-".concat(p),c),!0}},{key:"_now",value:function(){return Date.now()}}]),u}();function Ki(u){Qn(u.interaction)}function Qn(u){if(!function(f){return!(!f.offset.pending.x&&!f.offset.pending.y)}(u))return!1;var c=u.offset.pending;return Io(u.coords.cur,c),Io(u.coords.delta,c),qi(u.edges,u.rect,c),c.x=0,c.y=0,!0}function Du(u){var c=u.x,f=u.y;this.offset.pending.x+=c,this.offset.pending.y+=f,this.offset.total.x+=c,this.offset.total.y+=f}function Io(u,c){var f=u.page,p=u.client,m=c.x,b=c.y;f.x+=m,f.y+=b,p.x+=m,p.y+=b}vl.offsetBy="";var Cu={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(u){u.Interaction.prototype.offsetBy=Du},listeners:{"interactions:new":function(u){u.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(u){return function(c){c.pointerIsDown&&(Io(c.coords.cur,c.offset.total),c.offset.pending.x=0,c.offset.pending.y=0)}(u.interaction)},"interactions:before-action-start":Ki,"interactions:before-action-move":Ki,"interactions:before-action-end":function(u){var c=u.interaction;if(Qn(c))return c.move({offset:!0}),c.end(),!1},"interactions:stop":function(u){var c=u.interaction;c.offset.total.x=0,c.offset.total.y=0,c.offset.pending.x=0,c.offset.pending.y=0}}},Ms=Cu,Ji=function(){function u(c){r(this,u),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=c}return a(u,[{key:"start",value:function(c){var f=this.interaction,p=Si(f);if(!p||!p.enabled)return!1;var m=f.coords.velocity.client,b=bi(m.x,m.y),_=this.modification||(this.modification=new _r(f));if(_.copyFrom(f.modification),this.t0=f._now(),this.allowResume=p.allowResume,this.v0=b,this.currentOffset={x:0,y:0},this.startCoords=f.coords.cur.page,this.modifierArg=_.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-f.coords.cur.timeStamp<50&&b>p.minSpeed&&b>p.endSpeed)this.startInertia();else{if(_.result=_.setAll(this.modifierArg),!_.result.changed)return!1;this.startSmoothEnd()}return f.modification.result.rect=null,f.offsetBy(this.targetOffset),f._doPhase({interaction:f,event:c,phase:"inertiastart"}),f.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),f.modification.result.rect=null,this.active=!0,f.simulation=this,!0}},{key:"startInertia",value:function(){var c=this,f=this.interaction.coords.velocity.client,p=Si(this.interaction),m=p.resistance,b=-Math.log(p.endSpeed/this.v0)/m;this.targetOffset={x:(f.x-b)/m,y:(f.y-b)/m},this.te=b,this.lambda_v0=m/this.v0,this.one_ve_v0=1-p.endSpeed/this.v0;var _=this.modification,w=this.modifierArg;w.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},_.result=_.setAll(w),_.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+_.result.delta.x,y:this.targetOffset.y+_.result.delta.y}),this.onNextFrame(function(){return c.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var c=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return c.smoothEndTick()})}},{key:"onNextFrame",value:function(c){var f=this;this.timeout=Jn.request(function(){f.active&&c()})}},{key:"inertiaTick",value:function(){var c,f,p,m,b,_,w,T=this,L=this.interaction,A=Si(L).resistance,N=(L._now()-this.t0)/1e3;if(N<this.te){var q,Q=1-(Math.exp(-A*N)-this.lambda_v0)/this.one_ve_v0;this.isModified?(c=0,f=0,p=this.targetOffset.x,m=this.targetOffset.y,b=this.modifiedOffset.x,_=this.modifiedOffset.y,q={x:Sr(w=Q,c,p,b),y:Sr(w,f,m,_)}):q={x:this.targetOffset.x*Q,y:this.targetOffset.y*Q};var J={x:q.x-this.currentOffset.x,y:q.y-this.currentOffset.y};this.currentOffset.x+=J.x,this.currentOffset.y+=J.y,L.offsetBy(J),L.move(),this.onNextFrame(function(){return T.inertiaTick()})}else L.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var c=this,f=this.interaction,p=f._now()-this.t0,m=Si(f).smoothEndDuration;if(p<m){var b={x:bl(p,0,this.targetOffset.x,m),y:bl(p,0,this.targetOffset.y,m)},_={x:b.x-this.currentOffset.x,y:b.y-this.currentOffset.y};this.currentOffset.x+=_.x,this.currentOffset.y+=_.y,f.offsetBy(_),f.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return c.smoothEndTick()})}else f.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(c){var f=c.pointer,p=c.event,m=c.eventTarget,b=this.interaction;b.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),b.updatePointer(f,p,m,!0),b._doPhase({interaction:b,event:p,phase:"resume"}),Pn(b.coords.prev,b.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Jn.cancel(this.timeout)}}]),u}();function Si(u){var c=u.interactable,f=u.prepared;return c&&c.options&&f.name&&c.options[f.name].inertia}var wr={id:"inertia",before:["modifiers","actions"],install:function(u){var c=u.defaults;u.usePlugin(Ms),u.usePlugin(Ls),u.actions.phases.inertiastart=!0,u.actions.phases.resume=!0,c.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(u){var c=u.interaction;c.inertia=new Ji(c)},"interactions:before-action-end":function(u){var c=u.interaction,f=u.event;return(!c._interacting||c.simulation||!c.inertia.start(f))&&null},"interactions:down":function(u){var c=u.interaction,f=u.eventTarget,p=c.inertia;if(p.active)for(var m=f;I.element(m);){if(m===c.element){p.resume(u);break}m=Ut(m)}},"interactions:stop":function(u){var c=u.interaction.inertia;c.active&&c.stop()},"interactions:before-action-resume":function(u){var c=u.interaction.modification;c.stop(u),c.start(u,u.interaction.coords.cur.page),c.applyToInteraction(u)},"interactions:before-action-inertiastart":function(u){return u.interaction.modification.setAndApply(u)},"interactions:action-resume":Gi,"interactions:action-inertiastart":Gi,"interactions:after-action-inertiastart":function(u){return u.interaction.modification.restoreInteractionCoords(u)},"interactions:after-action-resume":function(u){return u.interaction.modification.restoreInteractionCoords(u)}}};function Sr(u,c,f,p){var m=1-u;return m*m*c+2*m*u*f+u*u*p}function bl(u,c,f,p){return-f*(u/=p)*(u-2)+c}var Iu=wr;function Lo(u,c){for(var f=0;f<c.length;f++){var p=c[f];if(u.immediatePropagationStopped)break;p(u)}}var Oo=function(){function u(c){r(this,u),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=at({},c||{})}return a(u,[{key:"fire",value:function(c){var f,p=this.global;(f=this.types[c.type])&&Lo(c,f),!c.propagationStopped&&p&&(f=p[c.type])&&Lo(c,f)}},{key:"on",value:function(c,f){var p=wn(c,f);for(c in p)this.types[c]=ll(this.types[c]||[],p[c])}},{key:"off",value:function(c,f){var p=wn(c,f);for(c in p){var m=this.types[c];if(m&&m.length)for(var b=0,_=p[c];b<_.length;b++){var w=_[b],T=m.indexOf(w);T!==-1&&m.splice(T,1)}}}},{key:"getRect",value:function(c){return null}}]),u}(),yl=function(){function u(c){r(this,u),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=c,rn(this,c)}return a(u,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),u}();function Zi(u){return I.object(u)?{capture:!!u.capture,passive:!!u.passive}:{capture:!!u,passive:!1}}function Ps(u,c){return u===c||(typeof u=="boolean"?!!c.capture===u&&!c.passive:!!u.capture==!!c.capture&&!!u.passive==!!c.passive)}var Mo={id:"events",install:function(u){var c,f=[],p={},m=[],b={add:_,remove:w,addDelegate:function(A,N,q,Q,J){var tt=Zi(J);if(!p[q]){p[q]=[];for(var ct=0;ct<m.length;ct++){var rt=m[ct];_(rt,q,T),_(rt,q,L,!0)}}var gt=p[q],Lt=Cs(gt,function(Wt){return Wt.selector===A&&Wt.context===N});Lt||(Lt={selector:A,context:N,listeners:[]},gt.push(Lt)),Lt.listeners.push({func:Q,options:tt})},removeDelegate:function(A,N,q,Q,J){var tt,ct=Zi(J),rt=p[q],gt=!1;if(rt)for(tt=rt.length-1;tt>=0;tt--){var Lt=rt[tt];if(Lt.selector===A&&Lt.context===N){for(var Wt=Lt.listeners,At=Wt.length-1;At>=0;At--){var Rt=Wt[At];if(Rt.func===Q&&Ps(Rt.options,ct)){Wt.splice(At,1),Wt.length||(rt.splice(tt,1),w(N,q,T),w(N,q,L,!0)),gt=!0;break}}if(gt)break}}},delegateListener:T,delegateUseCapture:L,delegatedEvents:p,documents:m,targets:f,supportsOptions:!1,supportsPassive:!1};function _(A,N,q,Q){if(A.addEventListener){var J=Zi(Q),tt=Cs(f,function(ct){return ct.eventTarget===A});tt||(tt={eventTarget:A,events:{}},f.push(tt)),tt.events[N]||(tt.events[N]=[]),Cs(tt.events[N],function(ct){return ct.func===q&&Ps(ct.options,J)})||(A.addEventListener(N,q,b.supportsOptions?J:J.capture),tt.events[N].push({func:q,options:J}))}}function w(A,N,q,Q){if(A.addEventListener&&A.removeEventListener){var J=Ds(f,function(Je){return Je.eventTarget===A}),tt=f[J];if(tt&&tt.events)if(N!=="all"){var ct=!1,rt=tt.events[N];if(rt){if(q==="all"){for(var gt=rt.length-1;gt>=0;gt--){var Lt=rt[gt];w(A,N,Lt.func,Lt.options)}return}for(var Wt=Zi(Q),At=0;At<rt.length;At++){var Rt=rt[At];if(Rt.func===q&&Ps(Rt.options,Wt)){A.removeEventListener(N,q,b.supportsOptions?Wt:Wt.capture),rt.splice(At,1),rt.length===0&&(delete tt.events[N],ct=!0);break}}}ct&&!Object.keys(tt.events).length&&f.splice(J,1)}else for(N in tt.events)tt.events.hasOwnProperty(N)&&w(A,N,"all")}}function T(A,N){for(var q=Zi(N),Q=new yl(A),J=p[A.type],tt=al(A)[0],ct=tt;I.element(ct);){for(var rt=0;rt<J.length;rt++){var gt=J[rt],Lt=gt.selector,Wt=gt.context;if(be(ct,Lt)&&Ct(Wt,tt)&&Ct(Wt,ct)){var At=gt.listeners;Q.currentTarget=ct;for(var Rt=0;Rt<At.length;Rt++){var Je=At[Rt];Ps(Je.options,q)&&Je.func(Q)}}}ct=Ut(ct)}}function L(A){return T(A,!0)}return(c=u.document)==null||c.createElement("div").addEventListener("test",null,{get capture(){return b.supportsOptions=!0},get passive(){return b.supportsPassive=!0}}),u.events=b,b}},Rs={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(u){for(var c=0,f=Rs.methodOrder;c<f.length;c++){var p=f[c],m=Rs[p](u);if(m)return m}return null},simulationResume:function(u){var c=u.pointerType,f=u.eventType,p=u.eventTarget,m=u.scope;if(!/down|start/i.test(f))return null;for(var b=0,_=m.interactions.list;b<_.length;b++){var w=_[b],T=p;if(w.simulation&&w.simulation.allowResume&&w.pointerType===c)for(;T;){if(T===w.element)return w;T=Ut(T)}}return null},mouseOrPen:function(u){var c,f=u.pointerId,p=u.pointerType,m=u.eventType,b=u.scope;if(p!=="mouse"&&p!=="pen")return null;for(var _=0,w=b.interactions.list;_<w.length;_++){var T=w[_];if(T.pointerType===p){if(T.simulation&&!Tr(T,f))continue;if(T.interacting())return T;c||(c=T)}}if(c)return c;for(var L=0,A=b.interactions.list;L<A.length;L++){var N=A[L];if(!(N.pointerType!==p||/down/i.test(m)&&N.simulation))return N}return null},hasPointer:function(u){for(var c=u.pointerId,f=0,p=u.scope.interactions.list;f<p.length;f++){var m=p[f];if(Tr(m,c))return m}return null},idle:function(u){for(var c=u.pointerType,f=0,p=u.scope.interactions.list;f<p.length;f++){var m=p[f];if(m.pointers.length===1){var b=m.interactable;if(b&&(!b.options.gesture||!b.options.gesture.enabled))continue}else if(m.pointers.length>=2)continue;if(!m.interacting()&&c===m.pointerType)return m}return null}};function Tr(u,c){return u.pointers.some(function(f){return f.id===c})}var Po=Rs,Ns=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function xl(u,c){return function(f){var p=c.interactions.list,m=ol(f),b=al(f),_=b[0],w=b[1],T=[];if(/^touch/.test(f.type)){c.prevTouchTime=c.now();for(var L=0,A=f.changedTouches;L<A.length;L++){var N=A[L],q={pointer:N,pointerId:Kn(N),pointerType:m,eventType:f.type,eventTarget:_,curEventTarget:w,scope:c},Q=Ar(q);T.push([q.pointer,q.eventTarget,q.curEventTarget,Q])}}else{var J=!1;if(!yt.supportsPointerEvent&&/mouse/.test(f.type)){for(var tt=0;tt<p.length&&!J;tt++)J=p[tt].pointerType!=="mouse"&&p[tt].pointerIsDown;J=J||c.now()-c.prevTouchTime<500||f.timeStamp===0}if(!J){var ct={pointer:f,pointerId:Kn(f),pointerType:m,eventType:f.type,curEventTarget:w,eventTarget:_,scope:c},rt=Ar(ct);T.push([ct.pointer,ct.eventTarget,ct.curEventTarget,rt])}}for(var gt=0;gt<T.length;gt++){var Lt=T[gt],Wt=Lt[0],At=Lt[1],Rt=Lt[2];Lt[3][u](Wt,f,At,Rt)}}}function Ar(u){var c=u.pointerType,f=u.scope,p={interaction:Po.search(u),searchDetails:u};return f.fire("interactions:find",p),p.interaction||f.interactions.new({pointerType:c})}function Bs(u,c){var f=u.doc,p=u.scope,m=u.options,b=p.interactions.docEvents,_=p.events,w=_[c];for(var T in p.browser.isIOS&&!m.events&&(m.events={passive:!1}),_.delegatedEvents)w(f,T,_.delegateListener),w(f,T,_.delegateUseCapture,!0);for(var L=m&&m.events,A=0;A<b.length;A++){var N=b[A];w(f,N.type,N.listener,L)}}var Ro={id:"core/interactions",install:function(u){for(var c={},f=0;f<Ns.length;f++){var p=Ns[f];c[p]=xl(p,u)}var m,b=yt.pEventTypes;function _(){for(var w=0,T=u.interactions.list;w<T.length;w++){var L=T[w];if(L.pointerIsDown&&L.pointerType==="touch"&&!L._interacting)for(var A=function(){var Q=q[N];u.documents.some(function(J){return Ct(J.doc,Q.downTarget)})||L.removePointer(Q.pointer,Q.event)},N=0,q=L.pointers;N<q.length;N++)A()}}(m=Nt.PointerEvent?[{type:b.down,listener:_},{type:b.down,listener:c.pointerDown},{type:b.move,listener:c.pointerMove},{type:b.up,listener:c.pointerUp},{type:b.cancel,listener:c.pointerUp}]:[{type:"mousedown",listener:c.pointerDown},{type:"mousemove",listener:c.pointerMove},{type:"mouseup",listener:c.pointerUp},{type:"touchstart",listener:_},{type:"touchstart",listener:c.pointerDown},{type:"touchmove",listener:c.pointerMove},{type:"touchend",listener:c.pointerUp},{type:"touchcancel",listener:c.pointerUp}]).push({type:"blur",listener:function(w){for(var T=0,L=u.interactions.list;T<L.length;T++)L[T].documentBlur(w)}}),u.prevTouchTime=0,u.Interaction=function(w){d(L,w);var T=y(L);function L(){return r(this,L),T.apply(this,arguments)}return a(L,[{key:"pointerMoveTolerance",get:function(){return u.interactions.pointerMoveTolerance},set:function(A){u.interactions.pointerMoveTolerance=A}},{key:"_now",value:function(){return u.now()}}]),L}(Os),u.interactions={list:[],new:function(w){w.scopeFire=function(L,A){return u.fire(L,A)};var T=new u.Interaction(w);return u.interactions.list.push(T),T},listeners:c,docEvents:m,pointerMoveTolerance:1},u.usePlugin(Ve)},listeners:{"scope:add-document":function(u){return Bs(u,"add")},"scope:remove-document":function(u){return Bs(u,"remove")},"interactable:unset":function(u,c){for(var f=u.interactable,p=c.interactions.list.length-1;p>=0;p--){var m=c.interactions.list[p];m.interactable===f&&(m.stop(),c.fire("interactions:destroy",{interaction:m}),m.destroy(),c.interactions.list.length>2&&c.interactions.list.splice(p,1))}}},onDocSignal:Bs,doOnInteractions:xl,methodNames:Ns},No=Ro,Tn=function(u){return u[u.On=0]="On",u[u.Off=1]="Off",u}(Tn||{}),Bo=function(){function u(c,f,p,m){r(this,u),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new Oo,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=f.actions,this.target=c,this._context=f.context||p,this._win=$(sn(c)?this._context:c),this._doc=this._win.document,this._scopeEvents=m,this.set(f)}return a(u,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(c,f){return I.func(f.onstart)&&this.on("".concat(c,"start"),f.onstart),I.func(f.onmove)&&this.on("".concat(c,"move"),f.onmove),I.func(f.onend)&&this.on("".concat(c,"end"),f.onend),I.func(f.oninertiastart)&&this.on("".concat(c,"inertiastart"),f.oninertiastart),this}},{key:"updatePerActionListeners",value:function(c,f,p){var m,b=this,_=(m=this._actions.map[c])==null?void 0:m.filterEventType,w=function(T){return(_==null||_(T))&&hn(T,b._actions)};(I.array(f)||I.object(f))&&this._onOff(Tn.Off,c,f,void 0,w),(I.array(p)||I.object(p))&&this._onOff(Tn.On,c,p,void 0,w)}},{key:"setPerAction",value:function(c,f){var p=this._defaults;for(var m in f){var b=m,_=this.options[c],w=f[b];b==="listeners"&&this.updatePerActionListeners(c,_.listeners,w),I.array(w)?_[b]=cl(w):I.plainObject(w)?(_[b]=at(_[b]||{},_i(w)),I.object(p.perAction[b])&&"enabled"in p.perAction[b]&&(_[b].enabled=w.enabled!==!1)):I.bool(w)&&I.object(p.perAction[b])?_[b].enabled=w:_[b]=w}}},{key:"getRect",value:function(c){return c=c||(I.element(this.target)?this.target:null),I.string(this.target)&&(c=c||this._context.querySelector(this.target)),te(c)}},{key:"rectChecker",value:function(c){var f=this;return I.func(c)?(this.getRect=function(p){var m=at({},c.apply(f,p));return"width"in m||(m.width=m.right-m.left,m.height=m.bottom-m.top),m},this):c===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(c,f){if(sn(f)||I.object(f)){for(var p in this.options[c]=f,this._actions.map)this.options[p][c]=f;return this}return this.options[c]}},{key:"origin",value:function(c){return this._backCompatOption("origin",c)}},{key:"deltaSource",value:function(c){return c==="page"||c==="client"?(this.options.deltaSource=c,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var c=this.target;return I.string(c)?Array.from(this._context.querySelectorAll(c)):I.func(c)&&c.getAllElements?c.getAllElements():I.element(c)?[c]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(c){return this._context===c.ownerDocument||Ct(this._context,c)}},{key:"testIgnoreAllow",value:function(c,f,p){return!this.testIgnore(c.ignoreFrom,f,p)&&this.testAllow(c.allowFrom,f,p)}},{key:"testAllow",value:function(c,f,p){return!c||!!I.element(p)&&(I.string(c)?ze(p,c,f):!!I.element(c)&&Ct(c,p))}},{key:"testIgnore",value:function(c,f,p){return!(!c||!I.element(p))&&(I.string(c)?ze(p,c,f):!!I.element(c)&&Ct(c,p))}},{key:"fire",value:function(c){return this.events.fire(c),this}},{key:"_onOff",value:function(c,f,p,m,b){I.object(f)&&!I.array(f)&&(m=p,p=null);var _=wn(f,p,b);for(var w in _){w==="wheel"&&(w=yt.wheelEvent);for(var T=0,L=_[w];T<L.length;T++){var A=L[T];hn(w,this._actions)?this.events[c===Tn.On?"on":"off"](w,A):I.string(this.target)?this._scopeEvents[c===Tn.On?"addDelegate":"removeDelegate"](this.target,this._context,w,A,m):this._scopeEvents[c===Tn.On?"add":"remove"](this.target,w,A,m)}}return this}},{key:"on",value:function(c,f,p){return this._onOff(Tn.On,c,f,p)}},{key:"off",value:function(c,f,p){return this._onOff(Tn.Off,c,f,p)}},{key:"set",value:function(c){var f=this._defaults;for(var p in I.object(c)||(c={}),this.options=_i(f.base),this._actions.methodDict){var m=p,b=this._actions.methodDict[m];this.options[m]={},this.setPerAction(m,at(at({},f.perAction),f.actions[m])),this[b](c[m])}for(var _ in c)_!=="getRect"?I.func(this[_])&&this[_](c[_]):this.rectChecker(c.getRect);return this}},{key:"unset",value:function(){if(I.string(this.target))for(var c in this._scopeEvents.delegatedEvents)for(var f=this._scopeEvents.delegatedEvents[c],p=f.length-1;p>=0;p--){var m=f[p],b=m.selector,_=m.context,w=m.listeners;b===this.target&&_===this._context&&f.splice(p,1);for(var T=w.length-1;T>=0;T--)this._scopeEvents.removeDelegate(this.target,this._context,c,w[T][0],w[T][1])}else this._scopeEvents.remove(this.target,"all")}}]),u}(),Fo=function(){function u(c){var f=this;r(this,u),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=c,c.addListeners({"interactable:unset":function(p){var m=p.interactable,b=m.target,_=I.string(b)?f.selectorMap[b]:b[f.scope.id],w=Ds(_,function(T){return T===m});_.splice(w,1)}})}return a(u,[{key:"new",value:function(c,f){f=at(f||{},{actions:this.scope.actions});var p=new this.scope.Interactable(c,f,this.scope.document,this.scope.events);return this.scope.addDocument(p._doc),this.list.push(p),I.string(c)?(this.selectorMap[c]||(this.selectorMap[c]=[]),this.selectorMap[c].push(p)):(p.target[this.scope.id]||Object.defineProperty(c,this.scope.id,{value:[],configurable:!0}),c[this.scope.id].push(p)),this.scope.fire("interactable:new",{target:c,options:f,interactable:p,win:this.scope._win}),p}},{key:"getExisting",value:function(c,f){var p=f&&f.context||this.scope.document,m=I.string(c),b=m?this.selectorMap[c]:c[this.scope.id];if(b)return Cs(b,function(_){return _._context===p&&(m||_.inContext(c))})}},{key:"forEachMatch",value:function(c,f){for(var p=0,m=this.list;p<m.length;p++){var b=m[p],_=void 0;if((I.string(b.target)?I.element(c)&&be(c,b.target):c===b.target)&&b.inContext(c)&&(_=f(b)),_!==void 0)return _}}}]),u}(),Ue=function(){function u(){var c=this;r(this,u),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=yt,this.defaults=_i(Co),this.Eventable=Oo,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(p){var m=function b(_,w){var T=p.interactables.getExisting(_,w);return T||((T=p.interactables.new(_,w)).events.global=b.globalEvents),T};return m.getPointerAverage=rl,m.getTouchBBox=Eo,m.getTouchDistance=wo,m.getTouchAngle=So,m.getElementRect=te,m.getElementClientRect=Ae,m.matchesSelector=be,m.closest=Ee,m.globalEvents={},m.version="1.10.27",m.scope=p,m.use=function(b,_){return this.scope.usePlugin(b,_),this},m.isSet=function(b,_){return!!this.scope.interactables.get(b,_&&_.context)},m.on=X(function(b,_,w){if(I.string(b)&&b.search(" ")!==-1&&(b=b.trim().split(/ +/)),I.array(b)){for(var T=0,L=b;T<L.length;T++){var A=L[T];this.on(A,_,w)}return this}if(I.object(b)){for(var N in b)this.on(N,b[N],_);return this}return hn(b,this.scope.actions)?this.globalEvents[b]?this.globalEvents[b].push(_):this.globalEvents[b]=[_]:this.scope.events.add(this.scope.document,b,_,{options:w}),this},"The interact.on() method is being deprecated"),m.off=X(function(b,_,w){if(I.string(b)&&b.search(" ")!==-1&&(b=b.trim().split(/ +/)),I.array(b)){for(var T=0,L=b;T<L.length;T++){var A=L[T];this.off(A,_,w)}return this}if(I.object(b)){for(var N in b)this.off(N,b[N],_);return this}var q;return hn(b,this.scope.actions)?b in this.globalEvents&&(q=this.globalEvents[b].indexOf(_))!==-1&&this.globalEvents[b].splice(q,1):this.scope.events.remove(this.scope.document,b,_,w),this},"The interact.off() method is being deprecated"),m.debug=function(){return this.scope},m.supportsTouch=function(){return yt.supportsTouch},m.supportsPointerEvent=function(){return yt.supportsPointerEvent},m.stop=function(){for(var b=0,_=this.scope.interactions.list;b<_.length;b++)_[b].stop();return this},m.pointerMoveTolerance=function(b){return I.number(b)?(this.scope.interactions.pointerMoveTolerance=b,this):this.scope.interactions.pointerMoveTolerance},m.addDocument=function(b,_){this.scope.addDocument(b,_)},m.removeDocument=function(b){this.scope.removeDocument(b)},m}(this),this.InteractEvent=Er,this.Interactable=void 0,this.interactables=new Fo(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(p){return c.removeDocument(p.target)};var f=this;this.Interactable=function(p){d(b,p);var m=y(b);function b(){return r(this,b),m.apply(this,arguments)}return a(b,[{key:"_defaults",get:function(){return f.defaults}},{key:"set",value:function(_){return x(h(b.prototype),"set",this).call(this,_),f.fire("interactable:set",{options:_,interactable:this}),this}},{key:"unset",value:function(){x(h(b.prototype),"unset",this).call(this);var _=f.interactables.list.indexOf(this);_<0||(f.interactables.list.splice(_,1),f.fire("interactable:unset",{interactable:this}))}}]),b}(Bo)}return a(u,[{key:"addListeners",value:function(c,f){this.listenerMaps.push({id:f,map:c})}},{key:"fire",value:function(c,f){for(var p=0,m=this.listenerMaps;p<m.length;p++){var b=m[p].map[c];if(b&&b(f,this,c)===!1)return!1}}},{key:"init",value:function(c){return this.isInitialized?this:function(f,p){return f.isInitialized=!0,I.window(p)&&V(p),Nt.init(p),yt.init(p),Jn.init(p),f.window=p,f.document=p.document,f.usePlugin(No),f.usePlugin(Mo),f}(this,c)}},{key:"pluginIsInstalled",value:function(c){var f=c.id;return f?!!this._plugins.map[f]:this._plugins.list.indexOf(c)!==-1}},{key:"usePlugin",value:function(c,f){if(!this.isInitialized)return this;if(this.pluginIsInstalled(c))return this;if(c.id&&(this._plugins.map[c.id]=c),this._plugins.list.push(c),c.install&&c.install(this,f),c.listeners&&c.before){for(var p=0,m=this.listenerMaps.length,b=c.before.reduce(function(w,T){return w[T]=!0,w[fn(T)]=!0,w},{});p<m;p++){var _=this.listenerMaps[p].id;if(_&&(b[_]||b[fn(_)]))break}this.listenerMaps.splice(p,0,{id:c.id,map:c.listeners})}else c.listeners&&this.listenerMaps.push({id:c.id,map:c.listeners});return this}},{key:"addDocument",value:function(c,f){if(this.getDocIndex(c)!==-1)return!1;var p=$(c);f=f?at({},f):{},this.documents.push({doc:c,options:f}),this.events.documents.push(c),c!==this.document&&this.events.add(p,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:c,window:p,scope:this,options:f})}},{key:"removeDocument",value:function(c){var f=this.getDocIndex(c),p=$(c),m=this.documents[f].options;this.events.remove(p,"unload",this.onWindowUnload),this.documents.splice(f,1),this.events.documents.splice(f,1),this.fire("scope:remove-document",{doc:c,window:p,scope:this,options:m})}},{key:"getDocIndex",value:function(c){for(var f=0;f<this.documents.length;f++)if(this.documents[f].doc===c)return f;return-1}},{key:"getDocOptions",value:function(c){var f=this.getDocIndex(c);return f===-1?null:this.documents[f].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),u}();function fn(u){return u&&u.replace(/\/.*$/,"")}var _l=new Ue,He=_l.interactStatic,kr=typeof globalThis<"u"?globalThis:window;_l.init(kr);var Dr=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(u){var c=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(p){var m=p[0],b=p[1];return m in u||b in u}),f=function(p,m){for(var b=u.range,_=u.limits,w=_===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:_,T=u.offset,L=T===void 0?{x:0,y:0}:T,A={range:b,grid:u,x:null,y:null},N=0;N<c.length;N++){var q=c[N],Q=q[0],J=q[1],tt=Math.round((p-L.x)/u[Q]),ct=Math.round((m-L.y)/u[J]);A[Q]=Math.max(w.left,Math.min(w.right,tt*u[Q]+L.x)),A[J]=Math.max(w.top,Math.min(w.bottom,ct*u[J]+L.y))}return A};return f.grid=u,f.coordFields=c,f}}),El={id:"snappers",install:function(u){var c=u.interactStatic;c.snappers=at(c.snappers||{},Dr),c.createSnapGrid=c.snappers.grid}},Cr=El,Ir={start:function(u){var c=u.state,f=u.rect,p=u.edges,m=u.pageCoords,b=c.options,_=b.ratio,w=b.enabled,T=c.options,L=T.equalDelta,A=T.modifiers;_==="preserve"&&(_=f.width/f.height),c.startCoords=at({},m),c.startRect=at({},f),c.ratio=_,c.equalDelta=L;var N=c.linkedEdges={top:p.top||p.left&&!p.bottom,left:p.left||p.top&&!p.right,bottom:p.bottom||p.right&&!p.top,right:p.right||p.bottom&&!p.left};if(c.xIsPrimaryAxis=!(!p.left&&!p.right),c.equalDelta){var q=(N.left?1:-1)*(N.top?1:-1);c.edgeSign={x:q,y:q}}else c.edgeSign={x:N.left?-1:1,y:N.top?-1:1};if(w!==!1&&at(p,N),A!=null&&A.length){var Q=new _r(u.interaction);Q.copyFrom(u.interaction.modification),Q.prepareStates(A),c.subModification=Q,Q.startAll(i({},u))}},set:function(u){var c=u.state,f=u.rect,p=u.coords,m=c.linkedEdges,b=at({},p),_=c.equalDelta?$o:Vo;if(at(u.edges,m),_(c,c.xIsPrimaryAxis,p,f),!c.subModification)return null;var w=at({},f);qi(m,w,{x:p.x-b.x,y:p.y-b.y});var T=c.subModification.setAll(i(i({},u),{},{rect:w,edges:m,pageCoords:p,prevCoords:p,prevRect:w})),L=T.delta;return T.changed&&(_(c,Math.abs(L.x)>Math.abs(L.y),T.coords,T.rect),at(p,T.coords)),T.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function $o(u,c,f){var p=u.startCoords,m=u.edgeSign;c?f.y=p.y+(f.x-p.x)*m.y:f.x=p.x+(f.y-p.y)*m.x}function Vo(u,c,f,p){var m=u.startRect,b=u.startCoords,_=u.ratio,w=u.edgeSign;if(c){var T=p.width/_;f.y=b.y+(T-m.height)*w.y}else{var L=p.height*_;f.x=b.x+(L-m.width)*w.x}}var Ho=Zn(Ir,"aspectRatio"),Lr=function(){};Lr._defaults={};var Fs=Lr;function ti(u,c,f){return I.func(u)?En(u,c.interactable,c.element,[f.x,f.y,c]):En(u,c.interactable,c.element)}var Qi={start:function(u){var c=u.rect,f=u.startOffset,p=u.state,m=u.interaction,b=u.pageCoords,_=p.options,w=_.elementRect,T=at({left:0,top:0,right:0,bottom:0},_.offset||{});if(c&&w){var L=ti(_.restriction,m,b);if(L){var A=L.right-L.left-c.width,N=L.bottom-L.top-c.height;A<0&&(T.left+=A,T.right+=A),N<0&&(T.top+=N,T.bottom+=N)}T.left+=f.left-c.width*w.left,T.top+=f.top-c.height*w.top,T.right+=f.right-c.width*(1-w.right),T.bottom+=f.bottom-c.height*(1-w.bottom)}p.offset=T},set:function(u){var c=u.coords,f=u.interaction,p=u.state,m=p.options,b=p.offset,_=ti(m.restriction,f,c);if(_){var w=function(T){return!T||"left"in T&&"top"in T||((T=at({},T)).left=T.x||0,T.top=T.y||0,T.right=T.right||T.left+T.width,T.bottom=T.bottom||T.top+T.height),T}(_);c.x=Math.max(Math.min(w.right-b.right,c.x),w.left+b.left),c.y=Math.max(Math.min(w.bottom-b.bottom,c.y),w.top+b.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},zo=Zn(Qi,"restrict"),Or={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Mr={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Pr(u,c){for(var f=0,p=["top","left","bottom","right"];f<p.length;f++){var m=p[f];m in u||(u[m]=c[m])}return u}var ts={noInner:Or,noOuter:Mr,start:function(u){var c,f=u.interaction,p=u.startOffset,m=u.state,b=m.options;b&&(c=zi(ti(b.offset,f,f.coords.start.page))),c=c||{x:0,y:0},m.offset={top:c.y+p.top,left:c.x+p.left,bottom:c.y-p.bottom,right:c.x-p.right}},set:function(u){var c=u.coords,f=u.edges,p=u.interaction,m=u.state,b=m.offset,_=m.options;if(f){var w=at({},c),T=ti(_.inner,p,w)||{},L=ti(_.outer,p,w)||{};Pr(T,Or),Pr(L,Mr),f.top?c.y=Math.min(Math.max(L.top+b.top,w.y),T.top+b.top):f.bottom&&(c.y=Math.max(Math.min(L.bottom+b.bottom,w.y),T.bottom+b.bottom)),f.left?c.x=Math.min(Math.max(L.left+b.left,w.x),T.left+b.left):f.right&&(c.x=Math.max(Math.min(L.right+b.right,w.x),T.right+b.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},wl=Zn(ts,"restrictEdges"),Rr=at({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(u){}},Qi.defaults),Lu=Zn({start:Qi.start,set:Qi.set,defaults:Rr},"restrictRect"),Ou={width:-1/0,height:-1/0},Mu={width:1/0,height:1/0},Pu=Zn({start:function(u){return ts.start(u)},set:function(u){var c=u.interaction,f=u.state,p=u.rect,m=u.edges,b=f.options;if(m){var _=he(ti(b.min,c,u.coords))||Ou,w=he(ti(b.max,c,u.coords))||Mu;f.options={endOnly:b.endOnly,inner:at({},ts.noInner),outer:at({},ts.noOuter)},m.top?(f.options.inner.top=p.bottom-_.height,f.options.outer.top=p.bottom-w.height):m.bottom&&(f.options.inner.bottom=p.top+_.height,f.options.outer.bottom=p.top+w.height),m.left?(f.options.inner.left=p.right-_.width,f.options.outer.left=p.right-w.width):m.right&&(f.options.inner.right=p.left+_.width,f.options.outer.right=p.left+w.width),ts.set(u),f.options=b}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),O={start:function(u){var c,f=u.interaction,p=u.interactable,m=u.element,b=u.rect,_=u.state,w=u.startOffset,T=_.options,L=T.offsetWithOrigin?function(q){var Q=q.interaction.element,J=zi(En(q.state.options.origin,null,null,[Q])),tt=J||vi(q.interactable,Q,q.interaction.prepared.name);return tt}(u):{x:0,y:0};if(T.offset==="startCoords")c={x:f.coords.start.page.x,y:f.coords.start.page.y};else{var A=En(T.offset,p,m,[f]);(c=zi(A)||{x:0,y:0}).x+=L.x,c.y+=L.y}var N=T.relativePoints;_.offsets=b&&N&&N.length?N.map(function(q,Q){return{index:Q,relativePoint:q,x:w.left-b.width*q.x+c.x,y:w.top-b.height*q.y+c.y}}):[{index:0,relativePoint:null,x:c.x,y:c.y}]},set:function(u){var c=u.interaction,f=u.coords,p=u.state,m=p.options,b=p.offsets,_=vi(c.interactable,c.element,c.prepared.name),w=at({},f),T=[];m.offsetWithOrigin||(w.x-=_.x,w.y-=_.y);for(var L=0,A=b;L<A.length;L++)for(var N=A[L],q=w.x-N.x,Q=w.y-N.y,J=0,tt=m.targets.length;J<tt;J++){var ct=m.targets[J],rt=void 0;(rt=I.func(ct)?ct(q,Q,c._proxy,N,J):ct)&&T.push({x:(I.number(rt.x)?rt.x:q)+N.x,y:(I.number(rt.y)?rt.y:Q)+N.y,range:I.number(rt.range)?rt.range:m.range,source:ct,index:J,offset:N})}for(var gt={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Lt=0;Lt<T.length;Lt++){var Wt=T[Lt],At=Wt.range,Rt=Wt.x-w.x,Je=Wt.y-w.y,fe=bi(Rt,Je),gn=fe<=At;At===1/0&&gt.inRange&&gt.range!==1/0&&(gn=!1),gt.target&&!(gn?gt.inRange&&At!==1/0?fe/At<gt.distance/gt.range:At===1/0&&gt.range!==1/0||fe<gt.distance:!gt.inRange&&fe<gt.distance)||(gt.target=Wt,gt.distance=fe,gt.range=At,gt.inRange=gn,gt.delta.x=Rt,gt.delta.y=Je)}return gt.inRange&&(f.x=gt.target.x,f.y=gt.target.y),p.closest=gt,gt},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},K=Zn(O,"snap"),ht={start:function(u){var c=u.state,f=u.edges,p=c.options;if(!f)return null;u.state={options:{targets:null,relativePoints:[{x:f.left?0:1,y:f.top?0:1}],offset:p.offset||"self",origin:{x:0,y:0},range:p.range}},c.targetFields=c.targetFields||[["width","height"],["x","y"]],O.start(u),c.offsets=u.state.offsets,u.state=c},set:function(u){var c=u.interaction,f=u.state,p=u.coords,m=f.options,b=f.offsets,_={x:p.x-b[0].x,y:p.y-b[0].y};f.options=at({},m),f.options.targets=[];for(var w=0,T=m.targets||[];w<T.length;w++){var L=T[w],A=void 0;if(A=I.func(L)?L(_.x,_.y,c):L){for(var N=0,q=f.targetFields;N<q.length;N++){var Q=q[N],J=Q[0],tt=Q[1];if(J in A||tt in A){A.x=A[J],A.y=A[tt];break}}f.options.targets.push(A)}}var ct=O.set(u);return f.options=m,ct},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},Jt=Zn(ht,"snapSize"),oe={aspectRatio:Ho,restrictEdges:wl,restrict:zo,restrictRect:Lu,restrictSize:Pu,snapEdges:Zn({start:function(u){var c=u.edges;return c?(u.state.targetFields=u.state.targetFields||[[c.left?"left":"right",c.top?"top":"bottom"]],ht.start(u)):null},set:ht.set,defaults:at(_i(ht.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:K,snapSize:Jt,spring:Fs,avoid:Fs,transform:Fs,rubberband:Fs},Gt={id:"modifiers",install:function(u){var c=u.interactStatic;for(var f in u.usePlugin(Ls),u.usePlugin(Cr),c.modifiers=oe,oe){var p=oe[f],m=p._defaults,b=p._methods;m._methods=b,u.defaults.perAction[f]=m}}},pn=Gt,$s=function(u){d(f,u);var c=y(f);function f(p,m,b,_,w,T){var L;if(r(this,f),rn(v(L=c.call(this,w)),b),b!==m&&rn(v(L),m),L.timeStamp=T,L.originalEvent=b,L.type=p,L.pointerId=Kn(m),L.pointerType=ol(m),L.target=_,L.currentTarget=null,p==="tap"){var A=w.getPointerIndex(m);L.dt=L.timeStamp-w.pointers[A].downTime;var N=L.timeStamp-w.tapTime;L.double=!!w.prevTap&&w.prevTap.type!=="doubletap"&&w.prevTap.target===L.target&&N<500}else p==="doubletap"&&(L.dt=m.timeStamp-w.tapTime,L.double=!0);return L}return a(f,[{key:"_subtractOrigin",value:function(p){var m=p.x,b=p.y;return this.pageX-=m,this.pageY-=b,this.clientX-=m,this.clientY-=b,this}},{key:"_addOrigin",value:function(p){var m=p.x,b=p.y;return this.pageX+=m,this.pageY+=b,this.clientX+=m,this.clientY+=b,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),f}(vr),qo={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(u){u.pointerEvents=qo,u.defaults.actions.pointerEvents=qo.defaults,at(u.actions.phaselessTypes,qo.types)},listeners:{"interactions:new":function(u){var c=u.interaction;c.prevTap=null,c.tapTime=0},"interactions:update-pointer":function(u){var c=u.down,f=u.pointerInfo;!c&&f.hold||(f.hold={duration:1/0,timeout:null})},"interactions:move":function(u,c){var f=u.interaction,p=u.pointer,m=u.event,b=u.eventTarget;u.duplicate||f.pointerIsDown&&!f.pointerWasMoved||(f.pointerIsDown&&Ru(u),es({interaction:f,pointer:p,event:m,eventTarget:b,type:"move"},c))},"interactions:down":function(u,c){(function(f,p){for(var m=f.interaction,b=f.pointer,_=f.event,w=f.eventTarget,T=f.pointerIndex,L=m.pointers[T].hold,A=nn(w),N={interaction:m,pointer:b,event:_,eventTarget:w,type:"hold",targets:[],path:A,node:null},q=0;q<A.length;q++){var Q=A[q];N.node=Q,p.fire("pointerEvents:collect-targets",N)}if(N.targets.length){for(var J=1/0,tt=0,ct=N.targets;tt<ct.length;tt++){var rt=ct[tt].eventable.options.holdDuration;rt<J&&(J=rt)}L.duration=J,L.timeout=setTimeout(function(){es({interaction:m,eventTarget:w,pointer:b,event:_,type:"hold"},p)},J)}})(u,c),es(u,c)},"interactions:up":function(u,c){Ru(u),es(u,c),function(f,p){var m=f.interaction,b=f.pointer,_=f.event,w=f.eventTarget;m.pointerWasMoved||es({interaction:m,eventTarget:w,pointer:b,event:_,type:"tap"},p)}(u,c)},"interactions:cancel":function(u,c){Ru(u),es(u,c)}},PointerEvent:$s,fire:es,collectEventTargets:Mf,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function es(u,c){var f=u.interaction,p=u.pointer,m=u.event,b=u.eventTarget,_=u.type,w=u.targets,T=w===void 0?Mf(u,c):w,L=new $s(_,p,m,b,f,c.now());c.fire("pointerEvents:new",{pointerEvent:L});for(var A={interaction:f,pointer:p,event:m,eventTarget:b,targets:T,type:_,pointerEvent:L},N=0;N<T.length;N++){var q=T[N];for(var Q in q.props||{})L[Q]=q.props[Q];var J=vi(q.eventable,q.node);if(L._subtractOrigin(J),L.eventable=q.eventable,L.currentTarget=q.node,q.eventable.fire(L),L._addOrigin(J),L.immediatePropagationStopped||L.propagationStopped&&N+1<T.length&&T[N+1].node!==L.currentTarget)break}if(c.fire("pointerEvents:fired",A),_==="tap"){var tt=L.double?es({interaction:f,pointer:p,event:m,eventTarget:b,type:"doubletap"},c):L;f.prevTap=tt,f.tapTime=tt.timeStamp}return L}function Mf(u,c){var f=u.interaction,p=u.pointer,m=u.event,b=u.eventTarget,_=u.type,w=f.getPointerIndex(p),T=f.pointers[w];if(_==="tap"&&(f.pointerWasMoved||!T||T.downTarget!==b))return[];for(var L=nn(b),A={interaction:f,pointer:p,event:m,eventTarget:b,type:_,path:L,targets:[],node:null},N=0;N<L.length;N++){var q=L[N];A.node=q,c.fire("pointerEvents:collect-targets",A)}return _==="hold"&&(A.targets=A.targets.filter(function(Q){var J,tt;return Q.eventable.options.holdDuration===((J=f.pointers[w])==null||(tt=J.hold)==null?void 0:tt.duration)})),A.targets}function Ru(u){var c=u.interaction,f=u.pointerIndex,p=c.pointers[f].hold;p&&p.timeout&&(clearTimeout(p.timeout),p.timeout=null)}var T0=Object.freeze({__proto__:null,default:qo});function A0(u){var c=u.interaction;c.holdIntervalHandle&&(clearInterval(c.holdIntervalHandle),c.holdIntervalHandle=null)}var k0={id:"pointer-events/holdRepeat",install:function(u){u.usePlugin(qo);var c=u.pointerEvents;c.defaults.holdRepeatInterval=0,c.types.holdrepeat=u.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(u,c){return u["pointerEvents:".concat(c)]=A0,u},{"pointerEvents:new":function(u){var c=u.pointerEvent;c.type==="hold"&&(c.count=(c.count||0)+1)},"pointerEvents:fired":function(u,c){var f=u.interaction,p=u.pointerEvent,m=u.eventTarget,b=u.targets;if(p.type==="hold"&&b.length){var _=b[0].eventable.options.holdRepeatInterval;_<=0||(f.holdIntervalHandle=setTimeout(function(){c.pointerEvents.fire({interaction:f,eventTarget:m,type:"hold",pointer:p,event:p},c)},_))}}})},D0=k0,C0={id:"pointer-events/interactableTargets",install:function(u){var c=u.Interactable;c.prototype.pointerEvents=function(p){return at(this.events.options,p),this};var f=c.prototype._backCompatOption;c.prototype._backCompatOption=function(p,m){var b=f.call(this,p,m);return b===this&&(this.events.options[p]=m),b}},listeners:{"pointerEvents:collect-targets":function(u,c){var f=u.targets,p=u.node,m=u.type,b=u.eventTarget;c.interactables.forEachMatch(p,function(_){var w=_.events,T=w.options;w.types[m]&&w.types[m].length&&_.testIgnoreAllow(T,p,b)&&f.push({node:p,eventable:w,props:{interactable:_}})})},"interactable:new":function(u){var c=u.interactable;c.events.getRect=function(f){return c.getRect(f)}},"interactable:set":function(u,c){var f=u.interactable,p=u.options;at(f.events.options,c.pointerEvents.defaults),at(f.events.options,p.pointerEvents||{})}}},I0=C0,L0={id:"pointer-events",install:function(u){u.usePlugin(T0),u.usePlugin(D0),u.usePlugin(I0)}},O0=L0,M0={id:"reflow",install:function(u){var c=u.Interactable;u.actions.phases.reflow=!0,c.prototype.reflow=function(f){return function(p,m,b){for(var _=p.getAllElements(),w=b.window.Promise,T=w?[]:null,L=function(){var N=_[A],q=p.getRect(N);if(!q)return 1;var Q,J=Cs(b.interactions.list,function(rt){return rt.interacting()&&rt.interactable===p&&rt.element===N&&rt.prepared.name===m.name});if(J)J.move(),T&&(Q=J._reflowPromise||new w(function(rt){J._reflowResolve=rt}));else{var tt=he(q),ct=function(rt){return{coords:rt,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:tt.x,y:tt.y},client:{x:tt.x,y:tt.y},timeStamp:b.now()});Q=function(rt,gt,Lt,Wt,At){var Rt=rt.interactions.new({pointerType:"reflow"}),Je={interaction:Rt,event:At,pointer:At,eventTarget:Lt,phase:"reflow"};Rt.interactable=gt,Rt.element=Lt,Rt.prevEvent=At,Rt.updatePointer(At,At,Lt,!0),As(Rt.coords.delta),z(Rt.prepared,Wt),Rt._doPhase(Je);var fe=rt.window,gn=fe.Promise,Rn=gn?new gn(function(Ti){Rt._reflowResolve=Ti}):void 0;return Rt._reflowPromise=Rn,Rt.start(Wt,gt,Lt),Rt._interacting?(Rt.move(Je),Rt.end(At)):(Rt.stop(),Rt._reflowResolve()),Rt.removePointer(At,At),Rn}(b,p,N,m,ct)}T&&T.push(Q)},A=0;A<_.length&&!L();A++);return T&&w.all(T).then(function(){return p})}(this,f,u)}},listeners:{"interactions:stop":function(u,c){var f=u.interaction;f.pointerType==="reflow"&&(f._reflowResolve&&f._reflowResolve(),function(p,m){p.splice(p.indexOf(m),1)}(c.interactions.list,f))}}},P0=M0;if(He.use(Ve),He.use(Ms),He.use(O0),He.use(Iu),He.use(pn),He.use(me),He.use(Xi),He.use(M),He.use(P0),He.default=He,s(n)==="object"&&n)try{n.exports=He}catch{}return He.default=He,He})})(Vc,Vc.exports);var uR=Vc.exports;const Hc=B0(uR);let Dt=[],Ii={};const Ed=[100,200,500,1e3,2e3,3e3,5e3,7500,1e4,15e3,2e4,5e4,1e5],dR=100,hR=50,ea=20;let fi=!1,s0="px",Ba=3e3,ur=null,co=null,zc=[],Ce=0,Ws=0,ws=!1,Gr=0,er=0,Fa=60,_a=0,le=0,_o=!1,Ea=!1,Kr=!0,wa=0,nr=0,qc=null,vn;const kf=`<i title=${W("Run","")} class="bi-play-circle-fill"></i>`,r0=`<i title=${W("Start","")} class="bi-triangle"></i>`,fR=`<i title=${W("Pause","")} class="bi-pause-btn"></i>`,o0=`<i title=${W("Wait","")} class="bi-hourglass-split"></i>`,uo=document.getElementById("rg2-track-names"),Im=document.querySelector("#rg2-track-names .card-body"),fh=document.getElementById("btn-runners"),gr=document.getElementById("btn-start-stop");document.querySelector("#rg2-track-names .card-title").innerHTML=W("Runners");document.getElementById("btn-close-track-names").addEventListener("click",()=>{uo.classList.add("d-none")});fh.addEventListener("click",()=>{uo.classList.toggle("d-none")});const bc=document.getElementById("rg2-replay-by-control");bc.classList.add("d-none");let Kl={x:0,y:0};Hc(uo).draggable({inertia:!0,listeners:{move(n){Kl.x+=n.dx,Kl.y+=n.dy,n.target.style.transform=`translate(${Kl.x}px, ${Kl.y}px)`}},modifiers:[Hc.modifiers.restrictRect({restriction:"#rg2-container"})]});function a0(n,t=!0){for(let e=0;e<Dt.length;e+=1)if(Dt[e].resultid===n.resultid)return;Dt.length===0&&(Ii=JP(n.coursename)),n.userColour!==null?n.trackColour=n.userColour:n.trackColour=db(),Dt.push(n),t&&wu()}function l0(n){fi=!1,zc=[];const t=Ii.x[n],e=Ii.y[n],i=Ii.x[n+1],s=Ii.y[n+1];if(Ii.angle.length>=n){const r=Lf(),o=b0(),a=Fe(t,e,i,s),l=Fe(r.x,r.y,o.x,o.y);let d=Math.min(l/a,F.MAX_ZOOM);d=Math.max(d,F.MIN_ZOOM);let h=(D.displayAngle-Ii.angle[n]-Math.PI/2)%(Math.PI*2);h<-1*Math.PI&&(h=h+2*Math.PI);for(let g=1;g<=ea;g=g+1){let v={};v.x=r.x-(r.x-t)*g/ea,v.y=r.y-(r.y-e)*g/ea,v.angle=(D.displayAngle-h*g/ea)%(Math.PI*2),v.scale=Math.pow(d,1/ea),zc.push(v)}co=setInterval(()=>{ER()},hR)}else Su(0,t,e,!0,1),co=null,fi=!0}function Lm(n,t){for(let e=0;e<n.length;e+=1)t?a0(new Rb(n[e]),!1):h0(n[e]);wu()}function c0(){Gr=86400,er=0,nr=0;for(let n=0;n<Dt.length;n+=1)Dt[n].starttime<Gr&&(Gr=Dt[n].starttime),Dt[n].starttime+Dt[n].x.length>er&&(er=Dt[n].starttime+Dt[n].x.length),Dt[n].x.length>nr&&(nr=Dt[n].x.length)}function pR(n){if(Dt.length===0)return;let t=!0;for(let e=0;e<Dt.length;e+=1)if(Dt[e].splits[le+1]-Dt[e].splits[le]>n){t=!1;break}t&&(le+=1,fi=!1,Df(le),Cf())}function gR(n){n!==Ce&&il(n)}function mR(){let n=document.getElementById("rg2-replay-speed-list"),t="";for(let e=0;e<Ed.length;e=e+1)t+=`<li class="dropdown-item" data-speed="${Ed[e]}">${"x"+Ed[e]/100}</li>`;n.innerHTML=t,document.getElementById("rg2-replay-speed-select").addEventListener("hidden.bs.dropdown",e=>{e.clickEvent&&g0(parseInt(e.clickEvent.target.dataset.speed,10))})}function vR(){let n=document.getElementById("rg2-replay-start-control-list");n.removeEventListener("hidden.bs.dropdown",Mm);let t="";const i=Dt.reduce((s,r)=>Math.min(r.splits.length,s),9999);for(let s=0;s<i-1;s=s+1){const r=s===0?`<div>${r0}</div>`:s;t+=`<li class="dropdown-item" data-control="${s}">${r}</li>`}n.innerHTML=t,document.getElementById("rg2-replay-start-control-select").addEventListener("hidden.bs.dropdown",Mm)}function bR(){let n=document.getElementById("rg2-tails-length-list"),t="";const e=["0:00","0:30","1:00","1:30","2:00","3:00",W("Full tails","")],i=[0,30,60,90,120,180,"Full"];for(let s=0;s<e.length;s=s+1)t+=`<li class="dropdown-item" data-length="${i[s]}">${e[s]}</li>`;n.innerHTML=t,document.getElementById("rg2-tails-length-select").addEventListener("hidden.bs.dropdown",s=>{s.clickEvent&&IR(s.clickEvent.target.dataset.length)})}function yR(){if(Dt.length===0)return;if(vn){vn.value!==Ce&&(vn.value=Ce);const t=document.getElementById("rg2-clock");t.innerText=x1(Ce)}let n=0;for(let t=0;t<Dt.length;t+=1){const e=Dt[t];let i=0;if(ws?i=e.starttime:le===0||e.splits.length<le?i=0:i=-1*e.splits[le],D.strokeStyle=e.trackColour,D.globalAlpha=$t.perCentRouteIntensity/100,D.lineWidth=$t.routeWidth/Math.pow(D.displayScale,.5),D.lineJoin="round",D.beginPath(),!fi&&!co&&le>0){const s=e.splits[le];let r=Math.max(s-Fa,e.splits[le-1]);D.moveTo(e.x[r],e.y[r]);for(let o=r+1;o<=s;o+=1)D.lineTo(e.x[o],e.y[o])}else{D.moveTo(e.x[_a-i],e.y[_a-i]);for(let s=_a;s<Ce;s+=1)s>i&&s-i<e.nextStopTime&&D.lineTo(e.x[s-i],e.y[s-i])}D.stroke(),D.beginPath(),n=Ce,n-i<e.nextStopTime?n=n-i:n=e.nextStopTime,D.arc(e.x[n],e.y[n],F.RUNNER_DOT_RADIUS/Math.pow(D.displayScale,.5),0,2*Math.PI,!1),D.globalAlpha=F.FULL_INTENSITY,D.strokeStyle=F.BLACK,D.fillStyle=e.trackColour,D.fill(),D.lineWidth=F.RUNNER_DOT_RADIUS/Math.pow(D.displayScale,.5)/4,D.stroke(),xR(e,n)}LR(n),_o&&pR(Ce)}function xR(n,t){let e="";if((Ea||Kr)&&t<n.x.length&&t>=0){D.fillStyle=n.trackColour,D.strokeStyle="darkslategray",D.font=$t.replayFontSize/Math.pow(D.displayScale,.8)+"pt Arial",D.globalAlpha=F.FULL_INTENSITY,D.textAlign="left",Kr?e=n.initials:e=n.name,D.save(),D.translate(n.x[t],n.y[t]),D.rotate(D.displayAngle),D.lineWidth=$t.replayFontSize/Math.pow(D.displayScale,.8)/8;const i=2+8/Math.pow(D.displayScale,1),s=2+4/Math.pow(D.displayScale,1);D.strokeText(e,i,s),D.fillText(e,i,s),D.restore()}}function Om(n,t){const e=Dt[n].cumulativeDistance;let i=t>e.length-1?e[e.length-1]:e[t];return i===void 0&&(i=0),i}function u0(n){let t=[];for(let i=0;i<Dt.length;i+=1){let s={};s.trackColour=Dt[i].trackColour,s.course=Dt[i].coursename,s.name=Dt[i].name,s.resultid=Dt[i].resultid,s.rawid=Dt[i].rawid,ws?s.distance=Om(i,Ce-Dt[i].starttime):s.distance=Om(i,n),s.distance+=s0,t.push(s)}let e=Bk();for(let i=0;i<e.length;i+=1)if(t.findIndex(s=>s.resultid===e[i].resultid)===-1){let s={};s.trackColour=e[i].trackColour,s.course=e[i].course,s.name=e[i].name,s.resultid=e[i].resultid,s.rawid=e[i].rawid,s.distance="",t.push(s)}return t}function _R(n){if(n.length===0)return"";let t="",e="";for(let i=0;i<n.length;i+=1)e!==n[i].course&&(t+=`<div></div><div><strong>${n[i].course}</strong></div><div></div>`,e=n[i].course),t+=`<input type="color" class="form-control form-control-color" data-rawid="${n[i].rawid}"`,t+=` value = "${n[i].trackColour}" ><div>${n[i].name}</div><div class="runner-distance text-end"`,t+=` data-resultid="${n[i].resultid}">${n[i].distance}</div>`;return t}function Mm(n){n.clickEvent&&(le=parseInt(n.clickEvent.target.dataset.control),isNaN(le)&&(le=0),fi=!1,Df(le),Cf(),l0(le),gr.innerHTML=o0)}function ER(){if(zc.length===0)clearInterval(co),co=null,fi=!0,gr.innerHTML=kf;else{const n=zc.shift();Su(n.angle,n.x,n.y,!0,n.scale)}wt()}function wR(){ws?Ce<er&&(Ws=Math.min(Ws+Ba,er*1e3)):Ce<nr&&(Ws=Math.min(Ws+Ba,nr*1e3)),Ce=parseInt(Ws/1e3,10),_a=Math.max(Ce-Fa,wa+1),wt()}function SR(){if(qc)return;qc=document.getElementById("rg2-animation-controls");const n=document.getElementById("rg2-clock");n.innerText="00:00:00",d0(0,0,0),mR(),g0(Ba),gr.addEventListener("click",()=>{MR()}),document.getElementById("btn-mass-start").addEventListener("click",()=>{bc.classList.add("d-none"),kR()});const e=document.getElementById("btn-real-time");e.setAttribute("title",W("Real time","")),e.addEventListener("click",()=>{bc.classList.add("d-none"),DR()}),document.getElementById("btn-by-control").addEventListener("click",()=>{AR(),vR(),bc.classList.remove("d-none")}),bR();let s=document.querySelectorAll("[data-toggle-names]");for(let r of s)r.innerHTML=W(r.dataset.toggleNames),r.addEventListener("click",o=>{PR(o.currentTarget.dataset.toggleNames)});document.getElementById("rg2-toggle-names-value").setAttribute("title",W("Show names",""))}function d0(n,t,e){if(vn&&vn.min===n&&vn.max===t&&vn.value===e)return;vn&&vn.remove();const i=document.getElementById("rg2-clock-slider-container"),s=document.createElement("tc-range-slider");s.setAttribute("id","rg2-clock-slider"),s.setAttribute("min",n),s.setAttribute("max",t),s.setAttribute("value",e),s.setAttribute("step",1),i.append(s),vn=document.getElementById("rg2-clock-slider"),vn.addEventListener("change",r=>{gR(r.target.value)})}function h0(n){for(let t=0;t<Dt.length;t+=1)Dt[t].resultid===n&&Dt.splice(t,1),Dt.length===0&&(Ii={});wu()}function TR(){Dt.length=0,Ii={},Ba=3e3,Ce=0,Ws=0,ws=!1,Gr=0,er=0,Fa=60,_a=0,le=0,_o=!1,Ea=!1,Kr=!0,wa=0,nr=0,clearInterval(ur),ur=null,wu(),gr.innerHTML=kf,uo.classList.add("d-none")}function f0(){Dt.forEach(n=>n.nextStopTime=F.VERY_HIGH_TIME_IN_SECS)}function p0(n){return Dt.findIndex(t=>t.resultid===n)>-1}function il(n){s0=NP();let t=0;ws?(n>0?Ce=n:Ce=Gr,t=er,wa=Gr):(n>0?Ce=n:Ce=0,t=nr,wa=0),Ws=Ce*1e3,n===0&&d0(wa,t,Ce),wt()}function Df(n){document.getElementById("rg2-replay-start-control").innerHTML=n===0?r0:n}function Cf(){let n=9999;n=Dt.reduce((t,e)=>Math.min(e.splits.length,t),n),le>n&&(le=0);for(let t=0;t<Dt.length;t+=1)le+1<Dt[t].splits.length?Dt[t].nextStopTime=Dt[t].splits[le+1]:Dt[t].nextStopTime=F.VERY_HIGH_TIME_IN_SECS;il(0),m0(),wt()}function AR(){document.getElementById("rg2-clock-slider").setAttribute("disabled",""),ws=!1,le=0,_o=!0,fi=!1,Df(le),Cf()}function kR(){ws=!1,_o=!1,le=0,f0(),il(0),vn.removeAttribute("disabled")}function DR(){ws=!0,_o=!1,le=0,f0(),il(0),vn.removeAttribute("disabled")}function g0(n){isNaN(n)&&(n=1e3),Ba=n,document.getElementById("rg2-replay-speed").innerText="x"+n/100}function CR(n,t){for(let e=0;e<Dt.length;e+=1)Dt[e].rawid===n&&(Dt[e].userColour=t,Dt[e].trackColour=t);Zk(n,t)}function IR(n){n==="Full"?Fa=F.VERY_HIGH_TIME_IN_SECS:Fa=parseInt(n,10),c0(),wt()}function LR(n){const t=u0(n);if(t.length===0)return;const e=document.querySelectorAll(".track-names .runner-distance");e&&e.forEach(i=>{const s=parseInt(i.dataset.resultid),r=t.findIndex(o=>o.resultid===s);r>-1&&(i.innerText=t[r].distance)})}function OR(){ur===null&&(ur=setInterval(()=>{wR()},dR)),gr.innerHTML=fR}function m0(){clearInterval(ur),ur=null,gr.innerHTML=kf}function MR(){ur===null?(_o?!fi&&co===null&&(l0(le),gr.innerHTML=o0):fi=!0,fi&&OR()):m0()}function PR(n){switch(document.getElementById("rg2-toggle-names-value").setAttribute("title",W(n,"")),n){case"Show names":Ea=!0,Kr=!1;break;case"Show initials":Ea=!1,Kr=!0;break;default:Ea=!1,Kr=!1;break}wt()}function wu(){SR(),If(),Dt.length>0?(qc.classList.remove("d-none"),fh.classList.remove("d-none")):(qc.classList.add("d-none"),fh.classList.add("d-none")),xf(),c0(),il(0)}function If(){const n=u0(Ce);return n.length>0?(Im.innerHTML=_R(n),document.querySelectorAll(".track-names input").forEach(e=>{e.addEventListener("input",i=>{CR(parseInt(i.target.dataset.rawid,10),i.target.value),wt()})}),uo.classList.remove("d-none")):(Im.innerHTML="",uo.classList.add("d-none")),n.length}class RR{constructor(t){this.ctx=t,this.measuring=!1,this.dragging=!1,this.colours=["#ff00ff","#0000ff","#00ff00","#ff0000","#00ffff"],this.colourIndex=0,this.overlays=[],this.currentOverlay=this.initialiseOverlay(),this.units="px",this.metresPerPixel=1,this.dotSize=5,this.lineWidth=3,this.measureDialog=document.getElementById("rg2-measure-dialog"),document.getElementById("btn-measure").addEventListener("click",()=>{Jy()!==null&&(document.getElementById("rg2-map-canvas").style.cursor="crosshair",this.measureDialog.classList.remove("d-none"),this.measuring=!0,this.createMeasureDialog(),wt())}),document.getElementById("btn-close-measure-dialog").addEventListener("click",()=>{this.measuring=!1,this.measureDialog.classList.add("d-none"),document.getElementById("rg2-map-canvas").style.cursor="auto",wt()}),document.getElementById("btn-measure").addEventListener("click",()=>{document.getElementById("rg2-map-canvas").style.cursor="crosshair",this.measureDialog.classList.remove("d-none"),this.measuring=!0,this.createMeasureDialog(),wt()});let e={x:0,y:0};Hc(this.measureDialog).draggable({inertia:!0,listeners:{move(i){e.x+=i.dx,e.y+=i.dy,i.target.style.transform=`translate(${e.x}px, ${e.y}px)`}},modifiers:[Hc.modifiers.restrictRect({restriction:"#rg2-container"})]}),this.createMeasureDialog()}calculateLength(t,e){if(t.length<2)return 0;let i=0;for(let s=1;s<t.length;s+=1)i=i+Fe(t[s-1],e[s-1],t[s],e[s]);return i}closeEnough(t,e,i,s){return Math.abs(t-i)<10&&Math.abs(e-s)<10}createMeasureDialog(){this.metresPerPixel=xu(),this.metresPerPixel===void 0?(this.metresPerPixel=1,this.units="px"):this.units="m";let t="";for(let r=0;r<this.overlays.length;r+=1)t=t+this.formatOverlay(this.overlays[r],!0);t=t+this.formatOverlay(this.currentOverlay,!1),this.overlays.length>1&&(t+=`<div>${W("All")}</div><div></div><div></div>`,t+="<div><i class='delete-all-overlays bi-trash'></i></div>"),document.querySelector(".rg2-overlay-table").innerHTML=t;let e=document.getElementsByClassName("delete-overlay");for(let r of e)r.addEventListener("click",o=>{this.deleteOverlay(parseInt(o.target.id,10))});let i=document.getElementsByClassName("delete-all-overlays");for(let r of i)r.addEventListener("click",o=>{this.deleteAllOverlays(parseInt(o.target.id,10))});let s=document.getElementsByClassName("end-overlay");for(let r of s)r.addEventListener("click",o=>{this.endOverlay(parseInt(o.target.id,10))})}deleteAllOverlays(){this.overlays.length=0,this.currentOverlay=this.initialiseOverlay(),this.updateOverlays(),this.createMeasureDialog(),wt()}deleteOverlay(t){this.overlays.splice(t,1),this.updateOverlays(),this.createMeasureDialog(),wt()}dragEnded(){this.dragging=!1}drawSingleOverlay(t,e){this.ctx.strokeStyle=t.colour,this.ctx.fillStyle=t.colour,this.ctx.beginPath(),this.ctx.moveTo(t.x[0],t.y[0]);for(let i=1;i<t.x.length;i+=1)this.ctx.lineTo(t.x[i],t.y[i]);this.ctx.stroke();for(let i=0;i<t.x.length;i+=1)this.ctx.beginPath(),this.ctx.arc(t.x[i],t.y[i],this.dotSize,0,2*Math.PI,!1),e?this.ctx.fill():this.ctx.stroke()}drawOverlays(){if(this.measuring){if(this.ctx.lineWidth=this.lineWidth,this.ctx.globalAlpha=.6,this.overlays.length>0)for(let t=0;t<this.overlays.length;t+=1)this.drawSingleOverlay(this.overlays[t],!0);this.currentOverlay.started&&(this.currentOverlay.x.length===1?(this.ctx.strokeStyle=this.currentOverlay.colour,this.ctx.fillStyle=this.currentOverlay.colour,this.ctx.beginPath(),this.ctx.arc(this.currentOverlay.x[0],this.currentOverlay.y[0],this.dotSize,0,2*Math.PI,!1),this.ctx.stroke()):this.drawSingleOverlay(this.currentOverlay,!1))}}endOverlay(){this.currentOverlay.idx=this.overlays.length,this.overlays.push(this.currentOverlay),this.currentOverlay=this.initialiseOverlay(),this.createMeasureDialog()}formatOverlay(t,e){let i="",s="",r="";return t.started?r=`<div>${parseInt(t.length,10)}${this.units}</div>`:r="<div></div>",e?s=`<div><i class='delete-overlay bi-trash' id="${t.idx}"></i></div>`:t.started?s=`<div><i class='end-overlay bi-save' id="${t.idx}"></i></div>`:s="<div></div>",i+=`<div>${t.id}</div><div class='overlay-bar' style='--overlay-colour:${t.colour};'></div>`,i+=`${r}${s}`,i}getNextColour(){return this.colourIndex=(this.colourIndex+1)%this.colours.length,this.colours[this.colourIndex]}initialiseOverlay(){const t={};return t.id=String.fromCharCode(this.overlays.length+65),t.colour=this.getNextColour(),t.x=[],t.y=[],t.length=0,t.started=!1,t.idx=void 0,t}mouseDrag(t,e){if(!this.measuring)return!1;if(!this.dragging)for(let i=0;i<this.overlays.length;i+=1)for(let s=0;s<this.overlays[i].x.length;s+=1)this.closeEnough(t.x,t.y,this.overlays[i].x[s],this.overlays[i].y[s])&&(this.dragging=!0,this.dragOverlay=i,this.dragPoint=s);return this.dragging?(this.overlays[this.dragOverlay].x[this.dragPoint]=parseInt(e.x,10),this.overlays[this.dragOverlay].y[this.dragPoint]=parseInt(e.y,10),this.overlays[this.dragOverlay].length=this.calculateLength(this.overlays[this.dragOverlay].x,this.overlays[this.dragOverlay].y)*this.metresPerPixel,this.createMeasureDialog(),!0):!1}mouseUp(t,e){this.measuring&&(this.dragging=!1,this.currentOverlay.started||this.startOverlay(),t===this.currentOverlay.x[this.currentOverlay.x.length-1]&&e===this.currentOverlay.y[this.currentOverlay.x.length-1]?this.endOverlay():(this.currentOverlay.x.push(t),this.currentOverlay.y.push(e),this.currentOverlay.length=this.calculateLength(this.currentOverlay.x,this.currentOverlay.y)*this.metresPerPixel,this.createMeasureDialog(),wt()))}startOverlay(){this.currentOverlay.started=!0,this.createMeasureDialog()}updateOverlays(){this.colourIndex=0;for(let t=0;t<this.overlays.length;t+=1)this.overlays[t].id=String.fromCharCode(t+65),this.overlays[t].idx=t,this.overlays[t].colour=this.getNextColour();this.currentOverlay.id=String.fromCharCode(this.overlays.length+65),this.currentOverlay.idx=this.overlays.length,this.currentOverlay.colour=this.getNextColour()}}let ye=document.getElementById("rg2-map-canvas"),D=ye.getContext("2d");D.displayAngle=0;D.displayScale=1;let un=new Image,jc=new RR(D),dt={dragStart:null,dragged:!0,scaleFactor:1.1,pinched:!1},wd;document.getElementById("rg2-load-progress").classList.add("d-none");document.getElementById("rg2-map-load-progress").classList.add("d-none");function NR(){ye.addEventListener("touchstart",qR,!1),ye.addEventListener("touchmove",zR,!1),ye.addEventListener("touchend",HR,!1),ye.addEventListener("DOMMouseScroll",Pm,!1),ye.addEventListener("wheel",Pm,!1),ye.addEventListener("mousedown",FR,!1),ye.addEventListener("mousemove",$R,!1),ye.addEventListener("mouseup",VR,!1),un.addEventListener("load",()=>UR());let n=document.getElementById("btn-zoom-in");n.addEventListener("click",()=>$a(1)),n=document.getElementById("btn-zoom-out"),n.addEventListener("click",()=>$a(-1)),n=document.getElementById("btn-rotate-left"),n.addEventListener("click",()=>Rm(-1)),n=document.getElementById("btn-rotate-right"),n.addEventListener("click",()=>Rm(1)),n=document.getElementById("btn-reset"),n.addEventListener("click",()=>sl())}function Su(n,t,e,i=!0,s=1){v0((D.displayAngle-n)%(Math.PI*2),t,e,i,s)}function v0(n,t,e,i,s){if(D.displayAngle=(D.displayAngle-n)%(Math.PI*2),D.translate(t,e),D.rotate(n),s!==1&&(D.scale(s,s),D.displayScale=D.displayScale*s),i){const r=Lf();D.translate(r.x-t,r.y-e)}else D.translate(-1*t,-1*e);wt()}function BR(){if(!F.managing()&&window.innerWidth>=F.BIG_SCREEN_BREAK_POINT){D.font="16pt Arial",D.textAlign="center",D.fillStyle=F.BLACK;const n=D.transformedPoint(ye.width/2,ye.height/2);D.fillText("Routegadget 2 Version "+F.RG2VERSION,n.x,n.y)}}function Lf(){const n=document.getElementById("rg2-animation-controls").offsetHeight;return D.transformedPoint(ye.width/2,(ye.height-n)*.85)}function b0(){const n=document.getElementById("rg2-animation-controls").offsetHeight;return D.transformedPoint(ye.width/2,(ye.height-n)*.15)}function vs(){return{height:un.height,width:un.width}}function y0(n){dt.dragStart=D.transformedPoint(dt.lastX,dt.lastY),dt.dragged=!1,dt.whichButton=n.which}function x0(){if(dt.dragStart){const n=D.transformedPoint(dt.lastX,dt.lastY);n.x=Math.round(n.x),n.y=Math.round(n.y);const t={x:Math.round(dt.dragStart.x),y:Math.round(dt.dragStart.y)},e=dt.whichButton;Math.abs(n.x-t.x)+Math.abs(n.y-t.y)>5&&(lP()?jy(t,n,e):yo()===F.TAB_CREATE?eA(t,n,e):jc.mouseDrag(t,n)||D.translate(n.x-dt.dragStart.x,n.y-dt.dragStart.y),dt.dragged=!0,wt())}}function _0(n){const t=yo();if(dt.dragged)t===F.TAB_CREATE?YA():t===F.TAB_DRAW?nP():jc.dragEnded();else if(t===F.TAB_CREATE){const e=Math.round(dt.dragStart.x),i=Math.round(dt.dragStart.y);GA(e,i)}else t===F.TAB_DRAW?hP(Math.round(dt.dragStart.x),Math.round(dt.dragStart.y),n.which):jc.mouseUp(Math.round(dt.dragStart.x),Math.round(dt.dragStart.y));dt.dragStart=null,wt()}function FR(n){return w0(n),y0(n),n.stopPropagation(),n.preventDefault()}function $R(n){return w0(n),x0(),n.stopPropagation(),n.preventDefault()}function VR(n){return _0(n),n.stopPropagation(),n.preventDefault()}function Pm(n){const t=n.wheelDelta?n.wheelDelta/40:n.detail?-n.detail:0;return t&&$a(t),n.stopPropagation(),n.preventDefault()}function HR(n){_0(n),dt.pinched=!1}function zR(n){if(n.touches.length>1?dt.pinched||S0(n):dt.pinched=!1,dt.pinched&&n.touches.length>1){dt.pinchEnd0=D.transformedPoint(n.touches[0].pageX,n.touches[0].pageY),dt.pinchEnd1=D.transformedPoint(n.touches[1].pageX,n.touches[1].pageY);const t=Fe(dt.pinchStart0.x,dt.pinchStart0.y,dt.pinchStart1.x,dt.pinchStart1.y),e=Fe(dt.pinchEnd0.x,dt.pinchEnd0.y,dt.pinchEnd1.x,dt.pinchEnd1.y);t/e>1.1?($a(-1),dt.pinchStart0=dt.pinchEnd0,dt.pinchStart1=dt.pinchEnd1):t/e<.9&&($a(1),dt.pinchStart0=dt.pinchEnd0,dt.pinchStart1=dt.pinchEnd1)}else dt.lastX=n.touches[0].pageX,dt.lastY=n.touches[0].pageY,x0()}function qR(n){n.preventDefault(),n.touches.length>1&&S0(n),dt.lastX=n.touches[0].pageX,dt.lastY=n.touches[0].pageY,y0(n)}function jR(){NR(),YR(D),E0()}function Of(n,t=!1){document.getElementById("rg2-map-load-progress-label").textContent=W("Loading map",""),document.getElementById("rg2-map-load-progress").classList.remove("d-none"),un.onerror=()=>{document.getElementById("rg2-map-load-progress").classList.add("d-none"),bt("Map load error","The map for this event could not be loaded.")},un.src=t?n:n+"?"+Date.now()}function UR(){document.getElementById("rg2-map-load-progress").classList.add("d-none"),sl(),F.managing()&&XA()}function wt(){wd===void 0&&(wd=setTimeout(()=>{wd=void 0,WR()},50))}function WR(){if(D.save(),D.setTransform(1,0,0,1,0,0),D.globalAlpha=F.FULL_INTENSITY,D.fillStyle=F.GREY,D.fillRect(0,0,D.canvas.width,D.canvas.height),D.restore(),un.height>0){D.fillStyle=F.WHITE,D.globalAlpha=F.FULL_INTENSITY,D.fillRect(0,0,un.width,un.height),D.globalAlpha=$t.perCentMapIntensity/100,D.drawImage(un,0,0);const n=yo();n===F.TAB_DRAW?(km(F.DIM),Ye.drawControls(!1),zp(),sP()):n===F.TAB_CREATE?bA():(km(F.DIM),zp(),jc.drawOverlays(),Ye.drawControls(!1),yR())}else BR()}function sl(){let n=1;const t=ye.height/un.height;dt.lastX=ye.width/2,dt.lastY=ye.height/2,dt.zoomSize=1,dt.dragStart=null,dt.dragged=!0,t<1&&(n=t),window.innerWidth>=F.BIG_SCREEN_BREAK_POINT?D.setTransform(n,0,0,n,document.getElementById("rg2-left-info-panel").offsetWidth+80,0):D.setTransform(n,0,0,n,0,0),D.displayAngle=0,D.displayScale=n,wt()}function E0(){dt.scaleFactor=F.DEFAULT_SCALE_FACTOR;const n=document.getElementById("rg2-header-container").offsetHeight;document.getElementById("rg2-container").style.height=window.innerHeight-n+"px",ye.width=window.innerWidth,ye.height=window.innerHeight-n,sl()}function Rm(n){const t=n*(Math.PI/36);D.translate(un.width/2,un.height/2),v0(t,0,0,!1,1),D.translate(-un.width/2,-un.height/2)}function w0(n){dt.lastX=n.pageX-ye.offsetParent.offsetLeft,dt.lastY=n.pageY-ye.offsetParent.offsetTop}function S0(n){dt.pinchStart0=D.transformedPoint(n.touches[0].pageX,n.touches[0].pageY),dt.pinchStart1=D.transformedPoint(n.touches[1].pageX,n.touches[1].pageY),dt.pinched=!0}function YR(n){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");let e=t.createSVGMatrix(),i=[],s=n.save;n.save=function(){return i.push(e.translate(0,0)),s.call(n)};let r=n.restore;n.restore=function(){return e=i.pop(),r.call(n)};let o=n.scale;n.scale=function(g,v){return e=e.scale(g,v),o.call(n,g,v)};let a=n.translate;n.translate=function(g,v){return e=e.translate(g,v),a.call(n,g,v)};let l=n.setTransform;n.setTransform=function(g,v,y,x,E,S){return e.a=g,e.b=v,e.c=y,e.d=x,e.e=E,e.f=S,l.call(n,g,v,y,x,E,S)};let d=t.createSVGPoint();n.transformedPoint=function(g,v){return d.x=g,d.y=v,d.matrixTransform(e.inverse())};let h=n.rotate;n.rotate=function(g){return e=e.rotate(g*180/Math.PI),h.call(n,g)}}function $a(n){if(!F.managing()&&Jy()===null)return;const t=Math.pow(dt.scaleFactor,n),e=dt.zoomSize*t;if(e<F.MAX_ZOOM&&e>F.MIN_ZOOM){dt.zoomSize=e;const i=D.transformedPoint(dt.lastX,dt.lastY);D.translate(i.x,i.y),D.scale(t,t),D.displayScale=D.displayScale*t,D.translate(-i.x,-i.y),wt()}}document.readyState!=="loading"?Nm():document.addEventListener("DOMContentLoaded",Nm);function Nm(){const n=document.querySelector(".rg2-startup");n.addEventListener("transitionend",()=>{n.remove(),rR(),T1(),NM(),b1(),F.managing()&&UA(rg2Config.keksi),jR(),window.onpopstate=XR,window.location.hash&&!F.managing()&&fb(window.location.hash),document.getElementById("rg2-event-title").innerHTML="Routegadget 2",xo()}),n.style.opacity=0}function XR(){if(window.location.hash!==""&&!F.managing()){const n=fb(window.location.hash);Qy(n)&&LP()!==n&&el(n)}}
//# sourceMappingURL=main-B-DRVOxi.js.map
