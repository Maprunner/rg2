var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ph(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function gh(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var ce=1,fe=2,Oe=3,yh=4,jn=5,ba=6378137,Mh=6356752314e-3,Pa=.0066943799901413165,si=484813681109536e-20,S=Math.PI/2,wh=.16666666666666666,xh=.04722222222222222,bh=.022156084656084655,k=1e-10,mt=.017453292519943295,Ft=57.29577951308232,X=Math.PI/4,oi=Math.PI*2,rt=3.14159265359,Pt={};Pt.greenwich=0;Pt.lisbon=-9.131906111111;Pt.paris=2.337229166667;Pt.bogota=-74.080916666667;Pt.madrid=-3.687938888889;Pt.rome=12.452333333333;Pt.bern=7.439583333333;Pt.jakarta=106.807719444444;Pt.ferro=-17.666666666667;Pt.brussels=4.367975;Pt.stockholm=18.058277777778;Pt.athens=23.7163375;Pt.oslo=10.722916666667;const Ph={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var La=/[\s_\-\/\(\)]/g;function ne(e,n){if(e[n])return e[n];for(var s=Object.keys(e),r=n.toLowerCase().replace(La,""),o=-1,l,c;++o<s.length;)if(l=s[o],c=l.toLowerCase().replace(La,""),c===r)return e[l]}function Kn(e){var n={},s=e.split("+").map(function(f){return f.trim()}).filter(function(f){return f}).reduce(function(f,d){var m=d.split("=");return m.push(!0),f[m[0].toLowerCase()]=m[1],f},{}),r,o,l,c={proj:"projName",datum:"datumCode",rf:function(f){n.rf=parseFloat(f)},lat_0:function(f){n.lat0=f*mt},lat_1:function(f){n.lat1=f*mt},lat_2:function(f){n.lat2=f*mt},lat_ts:function(f){n.lat_ts=f*mt},lon_0:function(f){n.long0=f*mt},lon_1:function(f){n.long1=f*mt},lon_2:function(f){n.long2=f*mt},alpha:function(f){n.alpha=parseFloat(f)*mt},gamma:function(f){n.rectified_grid_angle=parseFloat(f)},lonc:function(f){n.longc=f*mt},x_0:function(f){n.x0=parseFloat(f)},y_0:function(f){n.y0=parseFloat(f)},k_0:function(f){n.k0=parseFloat(f)},k:function(f){n.k0=parseFloat(f)},a:function(f){n.a=parseFloat(f)},b:function(f){n.b=parseFloat(f)},r_a:function(){n.R_A=!0},zone:function(f){n.zone=parseInt(f,10)},south:function(){n.utmSouth=!0},towgs84:function(f){n.datum_params=f.split(",").map(function(d){return parseFloat(d)})},to_meter:function(f){n.to_meter=parseFloat(f)},units:function(f){n.units=f;var d=ne(Ph,f);d&&(n.to_meter=d.to_meter)},from_greenwich:function(f){n.from_greenwich=f*mt},pm:function(f){var d=ne(Pt,f);n.from_greenwich=(d||parseFloat(f))*mt},nadgrids:function(f){f==="@null"?n.datumCode="none":n.nadgrids=f},axis:function(f){var d="ewnsud";f.length===3&&d.indexOf(f.substr(0,1))!==-1&&d.indexOf(f.substr(1,1))!==-1&&d.indexOf(f.substr(2,1))!==-1&&(n.axis=f)},approx:function(){n.approx=!0}};for(r in s)o=s[r],r in c?(l=c[r],typeof l=="function"?l(o):n[l]=o):n[r]=o;return typeof n.datumCode=="string"&&n.datumCode!=="WGS84"&&(n.datumCode=n.datumCode.toLowerCase()),n}var hi=1,sr=2,ar=3,Hi=4,rr=5,is=-1,Lh=/\s/,Th=/[A-Za-z]/,Ch=/[A-Za-z84_]/,tn=/[,\]]/,or=/[\d\.E\-\+]/;function Xt(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=hi}Xt.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Hi)for(;Lh.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case hi:return this.neutral(e);case sr:return this.keyword(e);case Hi:return this.quoted(e);case rr:return this.afterquote(e);case ar:return this.number(e);case is:return}};Xt.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Hi;return}if(tn.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};Xt.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=hi;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=hi,this.currentObject=this.stack.pop(),this.currentObject||(this.state=is);return}};Xt.prototype.number=function(e){if(or.test(e)){this.word+=e;return}if(tn.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};Xt.prototype.quoted=function(e){if(e==='"'){this.state=rr;return}this.word+=e};Xt.prototype.keyword=function(e){if(Ch.test(e)){this.word+=e;return}if(e==="["){var n=[];n.push(this.word),this.level++,this.root===null?this.root=n:this.currentObject.push(n),this.stack.push(this.currentObject),this.currentObject=n,this.state=hi;return}if(tn.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};Xt.prototype.neutral=function(e){if(Th.test(e)){this.word=e,this.state=sr;return}if(e==='"'){this.word="",this.state=Hi;return}if(or.test(e)){this.word=e,this.state=ar;return}if(tn.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};Xt.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===is)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Sh(e){var n=new Xt(e);return n.output()}function Ta(e,n,s){Array.isArray(n)&&(s.unshift(n),n=null);var r=n?{}:e,o=s.reduce(function(l,c){return Ce(c,l),l},r);n&&(e[n]=o)}function Ce(e,n){if(!Array.isArray(e)){n[e]=!0;return}var s=e.shift();if(s==="PARAMETER"&&(s=e.shift()),e.length===1){if(Array.isArray(e[0])){n[s]={},Ce(e[0],n[s]);return}n[s]=e[0];return}if(!e.length){n[s]=!0;return}if(s==="TOWGS84"){n[s]=e;return}if(s==="AXIS"){s in n||(n[s]=[]),n[s].push(e);return}Array.isArray(s)||(n[s]={});var r;switch(s){case"UNIT":case"PRIMEM":case"VERT_DATUM":n[s]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&Ce(e[2],n[s]);return;case"SPHEROID":case"ELLIPSOID":n[s]={name:e[0],a:e[1],rf:e[2]},e.length===4&&Ce(e[3],n[s]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],Ta(n,s,e);return;default:for(r=-1;++r<e.length;)if(!Array.isArray(e[r]))return Ce(e,n[s]);return Ta(n,s,e)}}var Eh=.017453292519943295;function kh(e,n){var s=n[0],r=n[1];!(s in e)&&r in e&&(e[s]=e[r],n.length===3&&(e[s]=n[2](e[s])))}function Kt(e){return e*Eh}function Oh(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var n="",s=0,r=e.AXIS.length;s<r;++s){var o=[e.AXIS[s][0].toLowerCase(),e.AXIS[s][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?n+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?n+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?n+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(e.axis=n)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var l=e.GEOGCS;e.type==="GEOGCS"&&(l=e),l&&(l.DATUM?e.datumCode=l.DATUM.name.toLowerCase():e.datumCode=l.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),l.DATUM&&l.DATUM.SPHEROID&&(e.ellps=l.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=l.DATUM.SPHEROID.a,e.rf=parseFloat(l.DATUM.SPHEROID.rf,10)),l.DATUM&&l.DATUM.TOWGS84&&(e.datum_params=l.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function c(m){var g=e.to_meter||1;return m*g}var f=function(m){return kh(e,m)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Kt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Kt],["x0","false_easting",c],["y0","false_northing",c],["long0","central_meridian",Kt],["lat0","latitude_of_origin",Kt],["lat0","standard_parallel_1",Kt],["lat1","standard_parallel_1",Kt],["lat2","standard_parallel_2",Kt],["azimuth","Azimuth"],["alpha","azimuth",Kt],["srsCode","name"]];d.forEach(f),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")&&(e.lat0=Kt(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function hr(e){var n=Sh(e),s=n.shift(),r=n.shift();n.unshift(["name",r]),n.unshift(["type",s]);var o={};return Ce(n,o),Oh(o),o}function gt(e){var n=this;if(arguments.length===2){var s=arguments[1];typeof s=="string"?s.charAt(0)==="+"?gt[e]=Kn(arguments[1]):gt[e]=hr(arguments[1]):gt[e]=s}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(r){Array.isArray(r)?gt.apply(n,r):gt(r)});if(typeof e=="string"){if(e in gt)return gt[e]}else"EPSG"in e?gt["EPSG:"+e.EPSG]=e:"ESRI"in e?gt["ESRI:"+e.ESRI]=e:"IAU2000"in e?gt["IAU2000:"+e.IAU2000]=e:console.log(e);return}}gh(gt);function Ah(e){return typeof e=="string"}function Dh(e){return e in gt}var Nh=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Ih(e){return Nh.some(function(n){return e.indexOf(n)>-1})}var zh=["3857","900913","3785","102113"];function Bh(e){var n=ne(e,"authority");if(n){var s=ne(n,"epsg");return s&&zh.indexOf(s)>-1}}function Rh(e){var n=ne(e,"extension");if(n)return ne(n,"proj4")}function Zh(e){return e[0]==="+"}function Fh(e){if(Ah(e)){if(Dh(e))return gt[e];if(Ih(e)){var n=hr(e);if(Bh(n))return gt["EPSG:3857"];var s=Rh(n);return s?Kn(s):n}if(Zh(e))return Kn(e)}else return e}function Ca(e,n){e=e||{};var s,r;if(!n)return e;for(r in n)s=n[r],s!==void 0&&(e[r]=s);return e}function Wt(e,n,s){var r=e*n;return s/Math.sqrt(1-r*r)}function fi(e){return e<0?-1:1}function D(e){return Math.abs(e)<=rt?e:e-fi(e)*oi}function It(e,n,s){var r=e*s,o=.5*e;return r=Math.pow((1-r)/(1+r),o),Math.tan(.5*(S-n))/r}function li(e,n){for(var s=.5*e,r,o,l=S-2*Math.atan(n),c=0;c<=15;c++)if(r=e*Math.sin(l),o=S-2*Math.atan(n*Math.pow((1-r)/(1+r),s))-l,l+=o,Math.abs(o)<=1e-10)return l;return-9999}function qh(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Wt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Wh(e){var n=e.x,s=e.y;if(s*Ft>90&&s*Ft<-90&&n*Ft>180&&n*Ft<-180)return null;var r,o;if(Math.abs(Math.abs(s)-S)<=k)return null;if(this.sphere)r=this.x0+this.a*this.k0*D(n-this.long0),o=this.y0+this.a*this.k0*Math.log(Math.tan(X+.5*s));else{var l=Math.sin(s),c=It(this.e,s,l);r=this.x0+this.a*this.k0*D(n-this.long0),o=this.y0-this.a*this.k0*Math.log(c)}return e.x=r,e.y=o,e}function Gh(e){var n=e.x-this.x0,s=e.y-this.y0,r,o;if(this.sphere)o=S-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var l=Math.exp(-s/(this.a*this.k0));if(o=li(this.e,l),o===-9999)return null}return r=D(this.long0+n/(this.a*this.k0)),e.x=r,e.y=o,e}var Hh=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const $h={init:qh,forward:Wh,inverse:Gh,names:Hh};function Uh(){}function Sa(e){return e}var Vh=["longlat","identity"];const jh={init:Uh,forward:Sa,inverse:Sa,names:Vh};var Kh=[$h,jh],qi={},$i=[];function lr(e,n){var s=$i.length;return e.names?($i[s]=e,e.names.forEach(function(r){qi[r.toLowerCase()]=s}),this):(console.log(n),!0)}function Yh(e){if(!e)return!1;var n=e.toLowerCase();if(typeof qi[n]<"u"&&$i[qi[n]])return $i[qi[n]]}function Xh(){Kh.forEach(lr)}const Jh={start:Xh,add:lr,get:Yh};var F={};F.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};F.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};F.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};F.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};F.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};F.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};F.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};F.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};F.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};F.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};F.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};F.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};F.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};F.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};F.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};F.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};F.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};F.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};F.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};F.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};F.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};F.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};F.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};F.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};F.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};F.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};F.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};F.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};F.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};F.hough={a:6378270,rf:297,ellipseName:"Hough"};F.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};F.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};F.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};F.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};F.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};F.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};F.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};F.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};F.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};F.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};F.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};F.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Qh=F.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};F.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function tl(e,n,s,r){var o=e*e,l=n*n,c=(o-l)/o,f=0;r?(e*=1-c*(wh+c*(xh+c*bh)),o=e*e,c=0):f=Math.sqrt(c);var d=(o-l)/l;return{es:c,e:f,ep2:d}}function el(e,n,s,r,o){if(!e){var l=ne(F,r);l||(l=Qh),e=l.a,n=l.b,s=l.rf}return s&&!n&&(n=(1-1/s)*e),(s===0||Math.abs(e-n)<k)&&(o=!0,n=e),{a:e,b:n,rf:s,sphere:o}}var ft={};ft.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};ft.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};ft.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};ft.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};ft.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};ft.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};ft.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};ft.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};ft.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};ft.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};ft.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};ft.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};ft.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};ft.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};ft.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};ft.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};ft.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function il(e,n,s,r,o,l,c){var f={};return e===void 0||e==="none"?f.datum_type=jn:f.datum_type=yh,n&&(f.datum_params=n.map(parseFloat),(f.datum_params[0]!==0||f.datum_params[1]!==0||f.datum_params[2]!==0)&&(f.datum_type=ce),f.datum_params.length>3&&(f.datum_params[3]!==0||f.datum_params[4]!==0||f.datum_params[5]!==0||f.datum_params[6]!==0)&&(f.datum_type=fe,f.datum_params[3]*=si,f.datum_params[4]*=si,f.datum_params[5]*=si,f.datum_params[6]=f.datum_params[6]/1e6+1)),c&&(f.datum_type=Oe,f.grids=c),f.a=s,f.b=r,f.es=o,f.ep2=l,f}var ur={};function nl(e,n){var s=new DataView(n),r=rl(s),o=ol(s,r);o.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var l=hl(s,o,r),c={header:o,subgrids:l};return ur[e]=c,c}function sl(e){if(e===void 0)return null;var n=e.split(",");return n.map(al)}function al(e){if(e.length===0)return null;var n=e[0]==="@";return n&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!n,grid:null,isNull:!0}:{name:e,mandatory:!n,grid:ur[e]||null,isNull:!1}}function Se(e){return e/3600*Math.PI/180}function rl(e){var n=e.getInt32(8,!1);return n===11?!1:(n=e.getInt32(8,!0),n!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function ol(e,n){return{nFields:e.getInt32(8,n),nSubgridFields:e.getInt32(24,n),nSubgrids:e.getInt32(40,n),shiftType:Yn(e,56,56+8).trim(),fromSemiMajorAxis:e.getFloat64(120,n),fromSemiMinorAxis:e.getFloat64(136,n),toSemiMajorAxis:e.getFloat64(152,n),toSemiMinorAxis:e.getFloat64(168,n)}}function Yn(e,n,s){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(n,s)))}function hl(e,n,s){for(var r=176,o=[],l=0;l<n.nSubgrids;l++){var c=ul(e,r,s),f=cl(e,r,c,s),d=Math.round(1+(c.upperLongitude-c.lowerLongitude)/c.longitudeInterval),m=Math.round(1+(c.upperLatitude-c.lowerLatitude)/c.latitudeInterval);o.push({ll:[Se(c.lowerLongitude),Se(c.lowerLatitude)],del:[Se(c.longitudeInterval),Se(c.latitudeInterval)],lim:[d,m],count:c.gridNodeCount,cvs:ll(f)})}return o}function ll(e){return e.map(function(n){return[Se(n.longitudeShift),Se(n.latitudeShift)]})}function ul(e,n,s){return{name:Yn(e,n+8,n+16).trim(),parent:Yn(e,n+24,n+24+8).trim(),lowerLatitude:e.getFloat64(n+72,s),upperLatitude:e.getFloat64(n+88,s),lowerLongitude:e.getFloat64(n+104,s),upperLongitude:e.getFloat64(n+120,s),latitudeInterval:e.getFloat64(n+136,s),longitudeInterval:e.getFloat64(n+152,s),gridNodeCount:e.getInt32(n+168,s)}}function cl(e,n,s,r){for(var o=n+176,l=16,c=[],f=0;f<s.gridNodeCount;f++){var d={latitudeShift:e.getFloat32(o+f*l,r),longitudeShift:e.getFloat32(o+f*l+4,r),latitudeAccuracy:e.getFloat32(o+f*l+8,r),longitudeAccuracy:e.getFloat32(o+f*l+12,r)};c.push(d)}return c}function qt(e,n){if(!(this instanceof qt))return new qt(e);n=n||function(m){if(m)throw m};var s=Fh(e);if(typeof s!="object"){n(e);return}var r=qt.projections.get(s.projName);if(!r){n(e);return}if(s.datumCode&&s.datumCode!=="none"){var o=ne(ft,s.datumCode);o&&(s.datum_params=s.datum_params||(o.towgs84?o.towgs84.split(","):null),s.ellps=o.ellipse,s.datumName=o.datumName?o.datumName:s.datumCode)}s.k0=s.k0||1,s.axis=s.axis||"enu",s.ellps=s.ellps||"wgs84",s.lat1=s.lat1||s.lat0;var l=el(s.a,s.b,s.rf,s.ellps,s.sphere),c=tl(l.a,l.b,l.rf,s.R_A),f=sl(s.nadgrids),d=s.datum||il(s.datumCode,s.datum_params,l.a,l.b,c.es,c.ep2,f);Ca(this,s),Ca(this,r),this.a=l.a,this.b=l.b,this.rf=l.rf,this.sphere=l.sphere,this.es=c.es,this.e=c.e,this.ep2=c.ep2,this.datum=d,this.init(),n(null,this)}qt.projections=Jh;qt.projections.start();function fl(e,n){return e.datum_type!==n.datum_type||e.a!==n.a||Math.abs(e.es-n.es)>5e-11?!1:e.datum_type===ce?e.datum_params[0]===n.datum_params[0]&&e.datum_params[1]===n.datum_params[1]&&e.datum_params[2]===n.datum_params[2]:e.datum_type===fe?e.datum_params[0]===n.datum_params[0]&&e.datum_params[1]===n.datum_params[1]&&e.datum_params[2]===n.datum_params[2]&&e.datum_params[3]===n.datum_params[3]&&e.datum_params[4]===n.datum_params[4]&&e.datum_params[5]===n.datum_params[5]&&e.datum_params[6]===n.datum_params[6]:!0}function cr(e,n,s){var r=e.x,o=e.y,l=e.z?e.z:0,c,f,d,m;if(o<-S&&o>-1.001*S)o=-S;else if(o>S&&o<1.001*S)o=S;else{if(o<-S)return{x:-1/0,y:-1/0,z:e.z};if(o>S)return{x:1/0,y:1/0,z:e.z}}return r>Math.PI&&(r-=2*Math.PI),f=Math.sin(o),m=Math.cos(o),d=f*f,c=s/Math.sqrt(1-n*d),{x:(c+l)*m*Math.cos(r),y:(c+l)*m*Math.sin(r),z:(c*(1-n)+l)*f}}function fr(e,n,s,r){var o=1e-12,l=o*o,c=30,f,d,m,g,v,x,b,P,M,C,O,I,N,$=e.x,B=e.y,E=e.z?e.z:0,q,Z,ut;if(f=Math.sqrt($*$+B*B),d=Math.sqrt($*$+B*B+E*E),f/s<o){if(q=0,d/s<o)return Z=S,ut=-r,{x:e.x,y:e.y,z:e.z}}else q=Math.atan2(B,$);m=E/d,g=f/d,v=1/Math.sqrt(1-n*(2-n)*g*g),P=g*(1-n)*v,M=m*v,N=0;do N++,b=s/Math.sqrt(1-n*M*M),ut=f*P+E*M-b*(1-n*M*M),x=n*b/(b+ut),v=1/Math.sqrt(1-x*(2-x)*g*g),C=g*(1-x)*v,O=m*v,I=O*P-C*M,P=C,M=O;while(I*I>l&&N<c);return Z=Math.atan(O/Math.abs(C)),{x:q,y:Z,z:ut}}function dl(e,n,s){if(n===ce)return{x:e.x+s[0],y:e.y+s[1],z:e.z+s[2]};if(n===fe){var r=s[0],o=s[1],l=s[2],c=s[3],f=s[4],d=s[5],m=s[6];return{x:m*(e.x-d*e.y+f*e.z)+r,y:m*(d*e.x+e.y-c*e.z)+o,z:m*(-f*e.x+c*e.y+e.z)+l}}}function _l(e,n,s){if(n===ce)return{x:e.x-s[0],y:e.y-s[1],z:e.z-s[2]};if(n===fe){var r=s[0],o=s[1],l=s[2],c=s[3],f=s[4],d=s[5],m=s[6],g=(e.x-r)/m,v=(e.y-o)/m,x=(e.z-l)/m;return{x:g+d*v-f*x,y:-d*g+v+c*x,z:f*g-c*v+x}}}function Bi(e){return e===ce||e===fe}function ml(e,n,s){if(fl(e,n)||e.datum_type===jn||n.datum_type===jn)return s;var r=e.a,o=e.es;if(e.datum_type===Oe){var l=Ea(e,!1,s);if(l!==0)return;r=ba,o=Pa}var c=n.a,f=n.b,d=n.es;if(n.datum_type===Oe&&(c=ba,f=Mh,d=Pa),o===d&&r===c&&!Bi(e.datum_type)&&!Bi(n.datum_type))return s;if(s=cr(s,o,r),Bi(e.datum_type)&&(s=dl(s,e.datum_type,e.datum_params)),Bi(n.datum_type)&&(s=_l(s,n.datum_type,n.datum_params)),s=fr(s,d,c,f),n.datum_type===Oe){var m=Ea(n,!0,s);if(m!==0)return}return s}function Ea(e,n,s){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var r={x:-s.x,y:s.y},o={x:Number.NaN,y:Number.NaN},l=[],c=0;c<e.grids.length;c++){var f=e.grids[c];if(l.push(f.name),f.isNull){o=r;break}if(f.mandatory,f.grid===null){if(f.mandatory)return console.log("Unable to find mandatory grid '"+f.name+"'"),-1;continue}var d=f.grid.subgrids[0],m=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,g=d.ll[0]-m,v=d.ll[1]-m,x=d.ll[0]+(d.lim[0]-1)*d.del[0]+m,b=d.ll[1]+(d.lim[1]-1)*d.del[1]+m;if(!(v>r.y||g>r.x||b<r.y||x<r.x)&&(o=vl(r,n,d),!isNaN(o.x)))break}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Ft+" "+r.y*Ft+" tried: '"+l+"'"),-1):(s.x=-o.x,s.y=o.y,0)}function vl(e,n,s){var r={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return r;var o={x:e.x,y:e.y};o.x-=s.ll[0],o.y-=s.ll[1],o.x=D(o.x-Math.PI)+Math.PI;var l=ka(o,s);if(n){if(isNaN(l.x))return r;l.x=o.x-l.x,l.y=o.y-l.y;var c=9,f=1e-12,d,m;do{if(m=ka(l,s),isNaN(m.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}d={x:o.x-(m.x+l.x),y:o.y-(m.y+l.y)},l.x+=d.x,l.y+=d.y}while(c--&&Math.abs(d.x)>f&&Math.abs(d.y)>f);if(c<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=D(l.x+s.ll[0]),r.y=l.y+s.ll[1]}else isNaN(l.x)||(r.x=e.x+l.x,r.y=e.y+l.y);return r}function ka(e,n){var s={x:e.x/n.del[0],y:e.y/n.del[1]},r={x:Math.floor(s.x),y:Math.floor(s.y)},o={x:s.x-1*r.x,y:s.y-1*r.y},l={x:Number.NaN,y:Number.NaN},c;if(r.x<0||r.x>=n.lim[0]||r.y<0||r.y>=n.lim[1])return l;c=r.y*n.lim[0]+r.x;var f={x:n.cvs[c][0],y:n.cvs[c][1]};c++;var d={x:n.cvs[c][0],y:n.cvs[c][1]};c+=n.lim[0];var m={x:n.cvs[c][0],y:n.cvs[c][1]};c--;var g={x:n.cvs[c][0],y:n.cvs[c][1]},v=o.x*o.y,x=o.x*(1-o.y),b=(1-o.x)*(1-o.y),P=(1-o.x)*o.y;return l.x=b*f.x+x*d.x+P*g.x+v*m.x,l.y=b*f.y+x*d.y+P*g.y+v*m.y,l}function Oa(e,n,s){var r=s.x,o=s.y,l=s.z||0,c,f,d,m={};for(d=0;d<3;d++)if(!(n&&d===2&&s.z===void 0))switch(d===0?(c=r,"ew".indexOf(e.axis[d])!==-1?f="x":f="y"):d===1?(c=o,"ns".indexOf(e.axis[d])!==-1?f="y":f="x"):(c=l,f="z"),e.axis[d]){case"e":m[f]=c;break;case"w":m[f]=-c;break;case"n":m[f]=c;break;case"s":m[f]=-c;break;case"u":s[f]!==void 0&&(m.z=c);break;case"d":s[f]!==void 0&&(m.z=-c);break;default:return null}return m}function dr(e){var n={x:e[0],y:e[1]};return e.length>2&&(n.z=e[2]),e.length>3&&(n.m=e[3]),n}function pl(e){Aa(e.x),Aa(e.y)}function Aa(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function gl(e,n){return(e.datum.datum_type===ce||e.datum.datum_type===fe||e.datum.datum_type===Oe)&&n.datumCode!=="WGS84"||(n.datum.datum_type===ce||n.datum.datum_type===fe||n.datum.datum_type===Oe)&&e.datumCode!=="WGS84"}function Ui(e,n,s,r){var o;Array.isArray(s)?s=dr(s):s={x:s.x,y:s.y,z:s.z,m:s.m};var l=s.z!==void 0;if(pl(s),e.datum&&n.datum&&gl(e,n)&&(o=new qt("WGS84"),s=Ui(e,o,s,r),e=o),r&&e.axis!=="enu"&&(s=Oa(e,!1,s)),e.projName==="longlat")s={x:s.x*mt,y:s.y*mt,z:s.z||0};else if(e.to_meter&&(s={x:s.x*e.to_meter,y:s.y*e.to_meter,z:s.z||0}),s=e.inverse(s),!s)return;if(e.from_greenwich&&(s.x+=e.from_greenwich),s=ml(e.datum,n.datum,s),!!s)return n.from_greenwich&&(s={x:s.x-n.from_greenwich,y:s.y,z:s.z||0}),n.projName==="longlat"?s={x:s.x*Ft,y:s.y*Ft,z:s.z||0}:(s=n.forward(s),n.to_meter&&(s={x:s.x/n.to_meter,y:s.y/n.to_meter,z:s.z||0})),r&&n.axis!=="enu"?Oa(n,!0,s):(l||delete s.z,s)}var Da=qt("WGS84");function Fn(e,n,s,r){var o,l,c;return Array.isArray(s)?(o=Ui(e,n,s,r)||{x:NaN,y:NaN},s.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof n.name<"u"&&n.name==="geocent"?typeof o.z=="number"?[o.x,o.y,o.z].concat(s.splice(3)):[o.x,o.y,s[2]].concat(s.splice(3)):[o.x,o.y].concat(s.splice(2)):[o.x,o.y]):(l=Ui(e,n,s,r),c=Object.keys(s),c.length===2||c.forEach(function(f){if(typeof e.name<"u"&&e.name==="geocent"||typeof n.name<"u"&&n.name==="geocent"){if(f==="x"||f==="y"||f==="z")return}else if(f==="x"||f==="y")return;l[f]=s[f]}),l)}function Na(e){return e instanceof qt?e:e.oProj?e.oProj:qt(e)}function Ot(e,n,s){e=Na(e);var r=!1,o;return typeof n>"u"?(n=e,e=Da,r=!0):(typeof n.x<"u"||Array.isArray(n))&&(s=n,n=e,e=Da,r=!0),n=Na(n),s?Fn(e,n,s):(o={forward:function(l,c){return Fn(e,n,l,c)},inverse:function(l,c){return Fn(n,e,l,c)}},r&&(o.oProj=n),o)}var Ia=6,_r="AJSAJS",mr="AFAFAF",Ee=65,bt=73,kt=79,ei=86,ii=90;const yl={forward:vr,inverse:Ml,toPoint:pr};function vr(e,n){return n=n||5,bl(wl({lat:e[1],lon:e[0]}),n)}function Ml(e){var n=ns(yr(e.toUpperCase()));return n.lat&&n.lon?[n.lon,n.lat,n.lon,n.lat]:[n.left,n.bottom,n.right,n.top]}function pr(e){var n=ns(yr(e.toUpperCase()));return n.lat&&n.lon?[n.lon,n.lat]:[(n.left+n.right)/2,(n.top+n.bottom)/2]}function qn(e){return e*(Math.PI/180)}function za(e){return 180*(e/Math.PI)}function wl(e){var n=e.lat,s=e.lon,r=6378137,o=.00669438,l=.9996,c,f,d,m,g,v,x,b=qn(n),P=qn(s),M,C;C=Math.floor((s+180)/6)+1,s===180&&(C=60),n>=56&&n<64&&s>=3&&s<12&&(C=32),n>=72&&n<84&&(s>=0&&s<9?C=31:s>=9&&s<21?C=33:s>=21&&s<33?C=35:s>=33&&s<42&&(C=37)),c=(C-1)*6-180+3,M=qn(c),f=o/(1-o),d=r/Math.sqrt(1-o*Math.sin(b)*Math.sin(b)),m=Math.tan(b)*Math.tan(b),g=f*Math.cos(b)*Math.cos(b),v=Math.cos(b)*(P-M),x=r*((1-o/4-3*o*o/64-5*o*o*o/256)*b-(3*o/8+3*o*o/32+45*o*o*o/1024)*Math.sin(2*b)+(15*o*o/256+45*o*o*o/1024)*Math.sin(4*b)-35*o*o*o/3072*Math.sin(6*b));var O=l*d*(v+(1-m+g)*v*v*v/6+(5-18*m+m*m+72*g-58*f)*v*v*v*v*v/120)+5e5,I=l*(x+d*Math.tan(b)*(v*v/2+(5-m+9*g+4*g*g)*v*v*v*v/24+(61-58*m+m*m+600*g-330*f)*v*v*v*v*v*v/720));return n<0&&(I+=1e7),{northing:Math.round(I),easting:Math.round(O),zoneNumber:C,zoneLetter:xl(n)}}function ns(e){var n=e.northing,s=e.easting,r=e.zoneLetter,o=e.zoneNumber;if(o<0||o>60)return null;var l=.9996,c=6378137,f=.00669438,d,m=(1-Math.sqrt(1-f))/(1+Math.sqrt(1-f)),g,v,x,b,P,M,C,O,I,N=s-5e5,$=n;r<"N"&&($-=1e7),C=(o-1)*6-180+3,d=f/(1-f),M=$/l,O=M/(c*(1-f/4-3*f*f/64-5*f*f*f/256)),I=O+(3*m/2-27*m*m*m/32)*Math.sin(2*O)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*O)+151*m*m*m/96*Math.sin(6*O),g=c/Math.sqrt(1-f*Math.sin(I)*Math.sin(I)),v=Math.tan(I)*Math.tan(I),x=d*Math.cos(I)*Math.cos(I),b=c*(1-f)/Math.pow(1-f*Math.sin(I)*Math.sin(I),1.5),P=N/(g*l);var B=I-g*Math.tan(I)/b*(P*P/2-(5+3*v+10*x-4*x*x-9*d)*P*P*P*P/24+(61+90*v+298*x+45*v*v-252*d-3*x*x)*P*P*P*P*P*P/720);B=za(B);var E=(P-(1+2*v+x)*P*P*P/6+(5-2*x+28*v-3*x*x+8*d+24*v*v)*P*P*P*P*P/120)/Math.cos(I);E=C+za(E);var q;if(e.accuracy){var Z=ns({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});q={top:Z.lat,right:Z.lon,bottom:B,left:E}}else q={lat:B,lon:E};return q}function xl(e){var n="Z";return 84>=e&&e>=72?n="X":72>e&&e>=64?n="W":64>e&&e>=56?n="V":56>e&&e>=48?n="U":48>e&&e>=40?n="T":40>e&&e>=32?n="S":32>e&&e>=24?n="R":24>e&&e>=16?n="Q":16>e&&e>=8?n="P":8>e&&e>=0?n="N":0>e&&e>=-8?n="M":-8>e&&e>=-16?n="L":-16>e&&e>=-24?n="K":-24>e&&e>=-32?n="J":-32>e&&e>=-40?n="H":-40>e&&e>=-48?n="G":-48>e&&e>=-56?n="F":-56>e&&e>=-64?n="E":-64>e&&e>=-72?n="D":-72>e&&e>=-80&&(n="C"),n}function bl(e,n){var s="00000"+e.easting,r="00000"+e.northing;return e.zoneNumber+e.zoneLetter+Pl(e.easting,e.northing,e.zoneNumber)+s.substr(s.length-5,n)+r.substr(r.length-5,n)}function Pl(e,n,s){var r=gr(s),o=Math.floor(e/1e5),l=Math.floor(n/1e5)%20;return Ll(o,l,r)}function gr(e){var n=e%Ia;return n===0&&(n=Ia),n}function Ll(e,n,s){var r=s-1,o=_r.charCodeAt(r),l=mr.charCodeAt(r),c=o+e-1,f=l+n,d=!1;c>ii&&(c=c-ii+Ee-1,d=!0),(c===bt||o<bt&&c>bt||(c>bt||o<bt)&&d)&&c++,(c===kt||o<kt&&c>kt||(c>kt||o<kt)&&d)&&(c++,c===bt&&c++),c>ii&&(c=c-ii+Ee-1),f>ei?(f=f-ei+Ee-1,d=!0):d=!1,(f===bt||l<bt&&f>bt||(f>bt||l<bt)&&d)&&f++,(f===kt||l<kt&&f>kt||(f>kt||l<kt)&&d)&&(f++,f===bt&&f++),f>ei&&(f=f-ei+Ee-1);var m=String.fromCharCode(c)+String.fromCharCode(f);return m}function yr(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var n=e.length,s=null,r="",o,l=0;!/[A-Z]/.test(o=e.charAt(l));){if(l>=2)throw"MGRSPoint bad conversion from: "+e;r+=o,l++}var c=parseInt(r,10);if(l===0||l+3>n)throw"MGRSPoint bad conversion from: "+e;var f=e.charAt(l++);if(f<="A"||f==="B"||f==="Y"||f>="Z"||f==="I"||f==="O")throw"MGRSPoint zone letter "+f+" not handled: "+e;s=e.substring(l,l+=2);for(var d=gr(c),m=Tl(s.charAt(0),d),g=Cl(s.charAt(1),d);g<Sl(f);)g+=2e6;var v=n-l;if(v%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var x=v/2,b=0,P=0,M,C,O,I,N;return x>0&&(M=1e5/Math.pow(10,x),C=e.substring(l,l+x),b=parseFloat(C)*M,O=e.substring(l+x),P=parseFloat(O)*M),I=b+m,N=P+g,{easting:I,northing:N,zoneLetter:f,zoneNumber:c,accuracy:M}}function Tl(e,n){for(var s=_r.charCodeAt(n-1),r=1e5,o=!1;s!==e.charCodeAt(0);){if(s++,s===bt&&s++,s===kt&&s++,s>ii){if(o)throw"Bad character: "+e;s=Ee,o=!0}r+=1e5}return r}function Cl(e,n){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var s=mr.charCodeAt(n-1),r=0,o=!1;s!==e.charCodeAt(0);){if(s++,s===bt&&s++,s===kt&&s++,s>ei){if(o)throw"Bad character: "+e;s=Ee,o=!0}r+=1e5}return r}function Sl(e){var n;switch(e){case"C":n=11e5;break;case"D":n=2e6;break;case"E":n=28e5;break;case"F":n=37e5;break;case"G":n=46e5;break;case"H":n=55e5;break;case"J":n=64e5;break;case"K":n=73e5;break;case"L":n=82e5;break;case"M":n=91e5;break;case"N":n=0;break;case"P":n=8e5;break;case"Q":n=17e5;break;case"R":n=26e5;break;case"S":n=35e5;break;case"T":n=44e5;break;case"U":n=53e5;break;case"V":n=62e5;break;case"W":n=7e6;break;case"X":n=79e5;break;default:n=-1}if(n>=0)return n;throw"Invalid zone letter: "+e}function De(e,n,s){if(!(this instanceof De))return new De(e,n,s);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof n>"u"){var r=e.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=e,this.y=n,this.z=s||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}De.fromMGRS=function(e){return new De(pr(e))};De.prototype.toMGRS=function(e){return vr([this.x,this.y],e)};var El=1,kl=.25,Ba=.046875,Ra=.01953125,Za=.01068115234375,Ol=.75,Al=.46875,Dl=.013020833333333334,Nl=.007120768229166667,Il=.3645833333333333,zl=.005696614583333333,Bl=.3076171875;function Mr(e){var n=[];n[0]=El-e*(kl+e*(Ba+e*(Ra+e*Za))),n[1]=e*(Ol-e*(Ba+e*(Ra+e*Za)));var s=e*e;return n[2]=s*(Al-e*(Dl+e*Nl)),s*=e,n[3]=s*(Il-e*zl),n[4]=s*e*Bl,n}function en(e,n,s,r){return s*=n,n*=n,r[0]*e-s*(r[1]+n*(r[2]+n*(r[3]+n*r[4])))}var Rl=20;function wr(e,n,s){for(var r=1/(1-n),o=e,l=Rl;l;--l){var c=Math.sin(o),f=1-n*c*c;if(f=(en(o,c,Math.cos(o),s)-e)*(f*Math.sqrt(f))*r,o-=f,Math.abs(f)<k)return o}return o}function Zl(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Mr(this.es),this.ml0=en(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Fl(e){var n=e.x,s=e.y,r=D(n-this.long0),o,l,c,f=Math.sin(s),d=Math.cos(s);if(this.es){var g=d*r,v=Math.pow(g,2),x=this.ep2*Math.pow(d,2),b=Math.pow(x,2),P=Math.abs(d)>k?Math.tan(s):0,M=Math.pow(P,2),C=Math.pow(M,2);o=1-this.es*Math.pow(f,2),g=g/Math.sqrt(o);var O=en(s,f,d,this.en);l=this.a*(this.k0*g*(1+v/6*(1-M+x+v/20*(5-18*M+C+14*x-58*M*x+v/42*(61+179*C-C*M-479*M)))))+this.x0,c=this.a*(this.k0*(O-this.ml0+f*r*g/2*(1+v/12*(5-M+9*x+4*b+v/30*(61+C-58*M+270*x-330*M*x+v/56*(1385+543*C-C*M-3111*M))))))+this.y0}else{var m=d*Math.sin(r);if(Math.abs(Math.abs(m)-1)<k)return 93;if(l=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,c=d*Math.cos(r)/Math.sqrt(1-Math.pow(m,2)),m=Math.abs(c),m>=1){if(m-1>k)return 93;c=0}else c=Math.acos(c);s<0&&(c=-c),c=this.a*this.k0*(c-this.lat0)+this.y0}return e.x=l,e.y=c,e}function ql(e){var n,s,r,o,l=(e.x-this.x0)*(1/this.a),c=(e.y-this.y0)*(1/this.a);if(this.es)if(n=this.ml0+c/this.k0,s=wr(n,this.es,this.en),Math.abs(s)<S){var v=Math.sin(s),x=Math.cos(s),b=Math.abs(x)>k?Math.tan(s):0,P=this.ep2*Math.pow(x,2),M=Math.pow(P,2),C=Math.pow(b,2),O=Math.pow(C,2);n=1-this.es*Math.pow(v,2);var I=l*Math.sqrt(n)/this.k0,N=Math.pow(I,2);n=n*b,r=s-n*N/(1-this.es)*.5*(1-N/12*(5+3*C-9*P*C+P-4*M-N/30*(61+90*C-252*P*C+45*O+46*P-N/56*(1385+3633*C+4095*O+1574*O*C)))),o=D(this.long0+I*(1-N/6*(1+2*C+P-N/20*(5+28*C+24*O+8*P*C+6*P-N/42*(61+662*C+1320*O+720*O*C))))/x)}else r=S*fi(c),o=0;else{var f=Math.exp(l/this.k0),d=.5*(f-1/f),m=this.lat0+c/this.k0,g=Math.cos(m);n=Math.sqrt((1-Math.pow(g,2))/(1+Math.pow(d,2))),r=Math.asin(n),c<0&&(r=-r),d===0&&g===0?o=0:o=D(Math.atan2(d,g)+this.long0)}return e.x=o,e.y=r,e}var Wl=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Wi={init:Zl,forward:Fl,inverse:ql,names:Wl};function xr(e){var n=Math.exp(e);return n=(n-1/n)/2,n}function Nt(e,n){e=Math.abs(e),n=Math.abs(n);var s=Math.max(e,n),r=Math.min(e,n)/(s||1);return s*Math.sqrt(1+Math.pow(r,2))}function Gl(e){var n=1+e,s=n-1;return s===0?e:e*Math.log(n)/s}function Hl(e){var n=Math.abs(e);return n=Gl(n*(1+n/(Nt(1,n)+1))),e<0?-n:n}function ss(e,n){for(var s=2*Math.cos(2*n),r=e.length-1,o=e[r],l=0,c;--r>=0;)c=-l+s*o+e[r],l=o,o=c;return n+c*Math.sin(2*n)}function $l(e,n){for(var s=2*Math.cos(n),r=e.length-1,o=e[r],l=0,c;--r>=0;)c=-l+s*o+e[r],l=o,o=c;return Math.sin(n)*c}function Ul(e){var n=Math.exp(e);return n=(n+1/n)/2,n}function br(e,n,s){for(var r=Math.sin(n),o=Math.cos(n),l=xr(s),c=Ul(s),f=2*o*c,d=-2*r*l,m=e.length-1,g=e[m],v=0,x=0,b=0,P,M;--m>=0;)P=x,M=v,x=g,v=b,g=-P+f*x-d*v+e[m],b=-M+d*x+f*v;return f=r*c,d=o*l,[f*g-d*b,f*b+d*g]}function Vl(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Wi.init.apply(this),this.forward=Wi.forward,this.inverse=Wi.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),n=e/(2-e),s=n;this.cgb[0]=n*(2+n*(-2/3+n*(-2+n*(116/45+n*(26/45+n*(-2854/675)))))),this.cbg[0]=n*(-2+n*(2/3+n*(4/3+n*(-82/45+n*(32/45+n*(4642/4725)))))),s=s*n,this.cgb[1]=s*(7/3+n*(-8/5+n*(-227/45+n*(2704/315+n*(2323/945))))),this.cbg[1]=s*(5/3+n*(-16/15+n*(-13/9+n*(904/315+n*(-1522/945))))),s=s*n,this.cgb[2]=s*(56/15+n*(-136/35+n*(-1262/105+n*(73814/2835)))),this.cbg[2]=s*(-26/15+n*(34/21+n*(8/5+n*(-12686/2835)))),s=s*n,this.cgb[3]=s*(4279/630+n*(-332/35+n*(-399572/14175))),this.cbg[3]=s*(1237/630+n*(-12/5+n*(-24832/14175))),s=s*n,this.cgb[4]=s*(4174/315+n*(-144838/6237)),this.cbg[4]=s*(-734/315+n*(109598/31185)),s=s*n,this.cgb[5]=s*(601676/22275),this.cbg[5]=s*(444337/155925),s=Math.pow(n,2),this.Qn=this.k0/(1+n)*(1+s*(1/4+s*(1/64+s/256))),this.utg[0]=n*(-.5+n*(2/3+n*(-37/96+n*(1/360+n*(81/512+n*(-96199/604800)))))),this.gtu[0]=n*(.5+n*(-2/3+n*(5/16+n*(41/180+n*(-127/288+n*(7891/37800)))))),this.utg[1]=s*(-1/48+n*(-1/15+n*(437/1440+n*(-46/105+n*(1118711/3870720))))),this.gtu[1]=s*(13/48+n*(-3/5+n*(557/1440+n*(281/630+n*(-1983433/1935360))))),s=s*n,this.utg[2]=s*(-17/480+n*(37/840+n*(209/4480+n*(-5569/90720)))),this.gtu[2]=s*(61/240+n*(-103/140+n*(15061/26880+n*(167603/181440)))),s=s*n,this.utg[3]=s*(-4397/161280+n*(11/504+n*(830251/7257600))),this.gtu[3]=s*(49561/161280+n*(-179/168+n*(6601661/7257600))),s=s*n,this.utg[4]=s*(-4583/161280+n*(108847/3991680)),this.gtu[4]=s*(34729/80640+n*(-3418889/1995840)),s=s*n,this.utg[5]=s*(-20648693/638668800),this.gtu[5]=s*(212378941/319334400);var r=ss(this.cbg,this.lat0);this.Zb=-this.Qn*(r+$l(this.gtu,2*r))}function jl(e){var n=D(e.x-this.long0),s=e.y;s=ss(this.cbg,s);var r=Math.sin(s),o=Math.cos(s),l=Math.sin(n),c=Math.cos(n);s=Math.atan2(r,c*o),n=Math.atan2(l*o,Nt(r,o*c)),n=Hl(Math.tan(n));var f=br(this.gtu,2*s,2*n);s=s+f[0],n=n+f[1];var d,m;return Math.abs(n)<=2.623395162778?(d=this.a*(this.Qn*n)+this.x0,m=this.a*(this.Qn*s+this.Zb)+this.y0):(d=1/0,m=1/0),e.x=d,e.y=m,e}function Kl(e){var n=(e.x-this.x0)*(1/this.a),s=(e.y-this.y0)*(1/this.a);s=(s-this.Zb)/this.Qn,n=n/this.Qn;var r,o;if(Math.abs(n)<=2.623395162778){var l=br(this.utg,2*s,2*n);s=s+l[0],n=n+l[1],n=Math.atan(xr(n));var c=Math.sin(s),f=Math.cos(s),d=Math.sin(n),m=Math.cos(n);s=Math.atan2(c*m,Nt(d,m*f)),n=Math.atan2(d,m*f),r=D(n+this.long0),o=ss(this.cgb,s)}else r=1/0,o=1/0;return e.x=r,e.y=o,e}var Yl=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];const Gi={init:Vl,forward:jl,inverse:Kl,names:Yl};function Xl(e,n){if(e===void 0){if(e=Math.floor((D(n)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var Jl="etmerc";function Ql(){var e=Xl(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*mt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Gi.init.apply(this),this.forward=Gi.forward,this.inverse=Gi.inverse}var tu=["Universal Transverse Mercator System","utm"];const eu={init:Ql,names:tu,dependsOn:Jl};function as(e,n){return Math.pow((1-e)/(1+e),n)}var iu=20;function nu(){var e=Math.sin(this.lat0),n=Math.cos(this.lat0);n*=n,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*n*n/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+X)/(Math.pow(Math.tan(.5*this.lat0+X),this.C)*as(this.e*e,this.ratexp))}function su(e){var n=e.x,s=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*s+X),this.C)*as(this.e*Math.sin(s),this.ratexp))-S,e.x=this.C*n,e}function au(e){for(var n=1e-14,s=e.x/this.C,r=e.y,o=Math.pow(Math.tan(.5*r+X)/this.K,1/this.C),l=iu;l>0&&(r=2*Math.atan(o*as(this.e*Math.sin(e.y),-.5*this.e))-S,!(Math.abs(r-e.y)<n));--l)e.y=r;return l?(e.x=s,e.y=r,e):null}var ru=["gauss"];const rs={init:nu,forward:su,inverse:au,names:ru};function ou(){rs.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function hu(e){var n,s,r,o;return e.x=D(e.x-this.long0),rs.forward.apply(this,[e]),n=Math.sin(e.y),s=Math.cos(e.y),r=Math.cos(e.x),o=this.k0*this.R2/(1+this.sinc0*n+this.cosc0*s*r),e.x=o*s*Math.sin(e.x),e.y=o*(this.cosc0*n-this.sinc0*s*r),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function lu(e){var n,s,r,o,l;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,l=Math.sqrt(e.x*e.x+e.y*e.y)){var c=2*Math.atan2(l,this.R2);n=Math.sin(c),s=Math.cos(c),o=Math.asin(s*this.sinc0+e.y*n*this.cosc0/l),r=Math.atan2(e.x*n,l*this.cosc0*s-e.y*this.sinc0*n)}else o=this.phic0,r=0;return e.x=r,e.y=o,rs.inverse.apply(this,[e]),e.x=D(e.x+this.long0),e}var uu=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const cu={init:ou,forward:hu,inverse:lu,names:uu};function fu(e,n,s){return n*=s,Math.tan(.5*(S+e))*Math.pow((1-n)/(1+n),.5*s)}function du(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=k&&(this.k0=.5*(1+fi(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=k&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=k&&(this.k0=.5*this.cons*Wt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/It(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Wt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-S,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function _u(e){var n=e.x,s=e.y,r=Math.sin(s),o=Math.cos(s),l,c,f,d,m,g,v=D(n-this.long0);return Math.abs(Math.abs(n-this.long0)-Math.PI)<=k&&Math.abs(s+this.lat0)<=k?(e.x=NaN,e.y=NaN,e):this.sphere?(l=2*this.k0/(1+this.sinlat0*r+this.coslat0*o*Math.cos(v)),e.x=this.a*l*o*Math.sin(v)+this.x0,e.y=this.a*l*(this.coslat0*r-this.sinlat0*o*Math.cos(v))+this.y0,e):(c=2*Math.atan(this.ssfn_(s,r,this.e))-S,d=Math.cos(c),f=Math.sin(c),Math.abs(this.coslat0)<=k?(m=It(this.e,s*this.con,this.con*r),g=2*this.a*this.k0*m/this.cons,e.x=this.x0+g*Math.sin(n-this.long0),e.y=this.y0-this.con*g*Math.cos(n-this.long0),e):(Math.abs(this.sinlat0)<k?(l=2*this.a*this.k0/(1+d*Math.cos(v)),e.y=l*f):(l=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*d*Math.cos(v))),e.y=l*(this.cosX0*f-this.sinX0*d*Math.cos(v))+this.y0),e.x=l*d*Math.sin(v)+this.x0,e))}function mu(e){e.x-=this.x0,e.y-=this.y0;var n,s,r,o,l,c=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var f=2*Math.atan(c/(2*this.a*this.k0));return n=this.long0,s=this.lat0,c<=k?(e.x=n,e.y=s,e):(s=Math.asin(Math.cos(f)*this.sinlat0+e.y*Math.sin(f)*this.coslat0/c),Math.abs(this.coslat0)<k?this.lat0>0?n=D(this.long0+Math.atan2(e.x,-1*e.y)):n=D(this.long0+Math.atan2(e.x,e.y)):n=D(this.long0+Math.atan2(e.x*Math.sin(f),c*this.coslat0*Math.cos(f)-e.y*this.sinlat0*Math.sin(f))),e.x=n,e.y=s,e)}else if(Math.abs(this.coslat0)<=k){if(c<=k)return s=this.lat0,n=this.long0,e.x=n,e.y=s,e;e.x*=this.con,e.y*=this.con,r=c*this.cons/(2*this.a*this.k0),s=this.con*li(this.e,r),n=this.con*D(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else o=2*Math.atan(c*this.cosX0/(2*this.a*this.k0*this.ms1)),n=this.long0,c<=k?l=this.X0:(l=Math.asin(Math.cos(o)*this.sinX0+e.y*Math.sin(o)*this.cosX0/c),n=D(this.long0+Math.atan2(e.x*Math.sin(o),c*this.cosX0*Math.cos(o)-e.y*this.sinX0*Math.sin(o)))),s=-1*li(this.e,Math.tan(.5*(S+l)));return e.x=n,e.y=s,e}var vu=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];const pu={init:du,forward:_u,inverse:mu,names:vu,ssfn_:fu};function gu(){var e=this.lat0;this.lambda0=this.long0;var n=Math.sin(e),s=this.a,r=this.rf,o=1/r,l=2*o-Math.pow(o,2),c=this.e=Math.sqrt(l);this.R=this.k0*s*Math.sqrt(1-l)/(1-l*Math.pow(n,2)),this.alpha=Math.sqrt(1+l/(1-l)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(n/this.alpha);var f=Math.log(Math.tan(Math.PI/4+this.b0/2)),d=Math.log(Math.tan(Math.PI/4+e/2)),m=Math.log((1+c*n)/(1-c*n));this.K=f-this.alpha*d+this.alpha*c/2*m}function yu(e){var n=Math.log(Math.tan(Math.PI/4-e.y/2)),s=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),r=-this.alpha*(n+s)+this.K,o=2*(Math.atan(Math.exp(r))-Math.PI/4),l=this.alpha*(e.x-this.lambda0),c=Math.atan(Math.sin(l)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(l))),f=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(l));return e.y=this.R/2*Math.log((1+Math.sin(f))/(1-Math.sin(f)))+this.y0,e.x=this.R*c+this.x0,e}function Mu(e){for(var n=e.x-this.x0,s=e.y-this.y0,r=n/this.R,o=2*(Math.atan(Math.exp(s/this.R))-Math.PI/4),l=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(r)),c=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(o))),f=this.lambda0+c/this.alpha,d=0,m=l,g=-1e3,v=0;Math.abs(m-g)>1e-7;){if(++v>20)return;d=1/this.alpha*(Math.log(Math.tan(Math.PI/4+l/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(m))/2)),g=m,m=2*Math.atan(Math.exp(d))-Math.PI/2}return e.x=f,e.y=m,e}var wu=["somerc"];const xu={init:gu,forward:yu,inverse:Mu,names:wu};var Le=1e-7;function bu(e){var n=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],s=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||n.indexOf(s)!==-1}function Pu(){var e,n,s,r,o,l,c,f,d,m,g=0,v,x=0,b=0,P=0,M=0,C=0,O=0;this.no_off=bu(this),this.no_rot="no_rot"in this;var I=!1;"alpha"in this&&(I=!0);var N=!1;if("rectified_grid_angle"in this&&(N=!0),I&&(O=this.alpha),N&&(g=this.rectified_grid_angle*mt),I||N)x=this.longc;else if(b=this.long1,M=this.lat1,P=this.long2,C=this.lat2,Math.abs(M-C)<=Le||(e=Math.abs(M))<=Le||Math.abs(e-S)<=Le||Math.abs(Math.abs(this.lat0)-S)<=Le||Math.abs(Math.abs(C)-S)<=Le)throw new Error;var $=1-this.es;n=Math.sqrt($),Math.abs(this.lat0)>k?(f=Math.sin(this.lat0),s=Math.cos(this.lat0),e=1-this.es*f*f,this.B=s*s,this.B=Math.sqrt(1+this.es*this.B*this.B/$),this.A=this.B*this.k0*n/e,r=this.B*n/(s*Math.sqrt(e)),o=r*r-1,o<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=r,this.E*=Math.pow(It(this.e,this.lat0,f),this.B)):(this.B=1/n,this.A=this.k0,this.E=r=o=1),I||N?(I?(v=Math.asin(Math.sin(O)/r),N||(g=O)):(v=g,O=Math.asin(r*Math.sin(v))),this.lam0=x-Math.asin(.5*(o-1/o)*Math.tan(v))/this.B):(l=Math.pow(It(this.e,M,Math.sin(M)),this.B),c=Math.pow(It(this.e,C,Math.sin(C)),this.B),o=this.E/l,d=(c-l)/(c+l),m=this.E*this.E,m=(m-c*l)/(m+c*l),e=b-P,e<-Math.pi?P-=oi:e>Math.pi&&(P+=oi),this.lam0=D(.5*(b+P)-Math.atan(m*Math.tan(.5*this.B*(b-P))/d)/this.B),v=Math.atan(2*Math.sin(this.B*D(b-this.lam0))/(o-1/o)),g=O=Math.asin(r*Math.sin(v))),this.singam=Math.sin(v),this.cosgam=Math.cos(v),this.sinrot=Math.sin(g),this.cosrot=Math.cos(g),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(O))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*v,this.v_pole_n=this.ArB*Math.log(Math.tan(X-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(X+o))}function Lu(e){var n={},s,r,o,l,c,f,d,m;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-S)>k){if(c=this.E/Math.pow(It(this.e,e.y,Math.sin(e.y)),this.B),f=1/c,s=.5*(c-f),r=.5*(c+f),l=Math.sin(this.B*e.x),o=(s*this.singam-l*this.cosgam)/r,Math.abs(Math.abs(o)-1)<k)throw new Error;m=.5*this.ArB*Math.log((1-o)/(1+o)),f=Math.cos(this.B*e.x),Math.abs(f)<Le?d=this.A*e.x:d=this.ArB*Math.atan2(s*this.cosgam+l*this.singam,f)}else m=e.y>0?this.v_pole_n:this.v_pole_s,d=this.ArB*e.y;return this.no_rot?(n.x=d,n.y=m):(d-=this.u_0,n.x=m*this.cosrot+d*this.sinrot,n.y=d*this.cosrot-m*this.sinrot),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Tu(e){var n,s,r,o,l,c,f,d={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(s=e.y,n=e.x):(s=e.x*this.cosrot-e.y*this.sinrot,n=e.y*this.cosrot+e.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*s),o=.5*(r-1/r),l=.5*(r+1/r),c=Math.sin(this.BrA*n),f=(c*this.cosgam+o*this.singam)/l,Math.abs(Math.abs(f)-1)<k)d.x=0,d.y=f<0?-S:S;else{if(d.y=this.E/Math.sqrt((1+f)/(1-f)),d.y=li(this.e,Math.pow(d.y,1/this.B)),d.y===1/0)throw new Error;d.x=-this.rB*Math.atan2(o*this.cosgam-c*this.singam,Math.cos(this.BrA*n))}return d.x+=this.lam0,d}var Cu=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const Su={init:Pu,forward:Lu,inverse:Tu,names:Cu};function Eu(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<k)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var n=Math.sin(this.lat1),s=Math.cos(this.lat1),r=Wt(this.e,n,s),o=It(this.e,this.lat1,n),l=Math.sin(this.lat2),c=Math.cos(this.lat2),f=Wt(this.e,l,c),d=It(this.e,this.lat2,l),m=It(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>k?this.ns=Math.log(r/f)/Math.log(o/d):this.ns=n,isNaN(this.ns)&&(this.ns=n),this.f0=r/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(m,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function ku(e){var n=e.x,s=e.y;Math.abs(2*Math.abs(s)-Math.PI)<=k&&(s=fi(s)*(S-2*k));var r=Math.abs(Math.abs(s)-S),o,l;if(r>k)o=It(this.e,s,Math.sin(s)),l=this.a*this.f0*Math.pow(o,this.ns);else{if(r=s*this.ns,r<=0)return null;l=0}var c=this.ns*D(n-this.long0);return e.x=this.k0*(l*Math.sin(c))+this.x0,e.y=this.k0*(this.rh-l*Math.cos(c))+this.y0,e}function Ou(e){var n,s,r,o,l,c=(e.x-this.x0)/this.k0,f=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(n=Math.sqrt(c*c+f*f),s=1):(n=-Math.sqrt(c*c+f*f),s=-1);var d=0;if(n!==0&&(d=Math.atan2(s*c,s*f)),n!==0||this.ns>0){if(s=1/this.ns,r=Math.pow(n/(this.a*this.f0),s),o=li(this.e,r),o===-9999)return null}else o=-S;return l=D(d/this.ns+this.long0),e.x=l,e.y=o,e}var Au=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Du={init:Eu,forward:ku,inverse:Ou,names:Au};function Nu(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Iu(e){var n,s,r,o,l,c,f,d=e.x,m=e.y,g=D(d-this.long0);return n=Math.pow((1+this.e*Math.sin(m))/(1-this.e*Math.sin(m)),this.alfa*this.e/2),s=2*(Math.atan(this.k*Math.pow(Math.tan(m/2+this.s45),this.alfa)/n)-this.s45),r=-g*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(s)+Math.sin(this.ad)*Math.cos(s)*Math.cos(r)),l=Math.asin(Math.cos(s)*Math.sin(r)/Math.cos(o)),c=this.n*l,f=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),e.y=f*Math.cos(c)/1,e.x=f*Math.sin(c)/1,this.czech||(e.y*=-1,e.x*=-1),e}function zu(e){var n,s,r,o,l,c,f,d,m=e.x;e.x=e.y,e.y=m,this.czech||(e.y*=-1,e.x*=-1),c=Math.sqrt(e.x*e.x+e.y*e.y),l=Math.atan2(e.y,e.x),o=l/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/c,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),n=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(o)),s=Math.asin(Math.cos(r)*Math.sin(o)/Math.cos(n)),e.x=this.long0-s/this.alfa,f=n,d=0;var g=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(n/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.e/2))-this.s45),Math.abs(f-e.y)<1e-10&&(d=1),f=e.y,g+=1;while(d===0&&g<15);return g>=15?null:e}var Bu=["Krovak","krovak"];const Ru={init:Nu,forward:Iu,inverse:zu,names:Bu};function yt(e,n,s,r,o){return e*o-n*Math.sin(2*o)+s*Math.sin(4*o)-r*Math.sin(6*o)}function di(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function _i(e){return .375*e*(1+.25*e*(1+.46875*e))}function mi(e){return .05859375*e*e*(1+.75*e)}function vi(e){return e*e*e*(35/3072)}function Ne(e,n,s){var r=n*s;return e/Math.sqrt(1-r*r)}function Be(e){return Math.abs(e)<S?e:e-fi(e)*Math.PI}function Vi(e,n,s,r,o){var l,c;l=e/n;for(var f=0;f<15;f++)if(c=(e-(n*l-s*Math.sin(2*l)+r*Math.sin(4*l)-o*Math.sin(6*l)))/(n-2*s*Math.cos(2*l)+4*r*Math.cos(4*l)-6*o*Math.cos(6*l)),l+=c,Math.abs(c)<=1e-10)return l;return NaN}function Zu(){this.sphere||(this.e0=di(this.es),this.e1=_i(this.es),this.e2=mi(this.es),this.e3=vi(this.es),this.ml0=this.a*yt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Fu(e){var n,s,r=e.x,o=e.y;if(r=D(r-this.long0),this.sphere)n=this.a*Math.asin(Math.cos(o)*Math.sin(r)),s=this.a*(Math.atan2(Math.tan(o),Math.cos(r))-this.lat0);else{var l=Math.sin(o),c=Math.cos(o),f=Ne(this.a,this.e,l),d=Math.tan(o)*Math.tan(o),m=r*Math.cos(o),g=m*m,v=this.es*c*c/(1-this.es),x=this.a*yt(this.e0,this.e1,this.e2,this.e3,o);n=f*m*(1-g*d*(1/6-(8-d+8*v)*g/120)),s=x-this.ml0+f*l/c*g*(.5+(5-d+6*v)*g/24)}return e.x=n+this.x0,e.y=s+this.y0,e}function qu(e){e.x-=this.x0,e.y-=this.y0;var n=e.x/this.a,s=e.y/this.a,r,o;if(this.sphere){var l=s+this.lat0;r=Math.asin(Math.sin(l)*Math.cos(n)),o=Math.atan2(Math.tan(n),Math.cos(l))}else{var c=this.ml0/this.a+s,f=Vi(c,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(f)-S)<=k)return e.x=this.long0,e.y=S,s<0&&(e.y*=-1),e;var d=Ne(this.a,this.e,Math.sin(f)),m=d*d*d/this.a/this.a*(1-this.es),g=Math.pow(Math.tan(f),2),v=n*this.a/d,x=v*v;r=f-d*Math.tan(f)/m*v*v*(.5-(1+3*g)*v*v/24),o=v*(1-x*(g/3+(1+3*g)*g*x/15))/Math.cos(f)}return e.x=D(o+this.long0),e.y=Be(r),e}var Wu=["Cassini","Cassini_Soldner","cass"];const Gu={init:Zu,forward:Fu,inverse:qu,names:Wu};function ee(e,n){var s;return e>1e-7?(s=e*n,(1-e*e)*(n/(1-s*s)-.5/e*Math.log((1-s)/(1+s)))):2*n}var Hu=1,$u=2,Uu=3,Vu=4;function ju(){var e=Math.abs(this.lat0);if(Math.abs(e-S)<k?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<k?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var n;switch(this.qp=ee(this.e,1),this.mmf=.5/(1-this.es),this.apa=nc(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),n=Math.sin(this.lat0),this.sinb1=ee(this.e,n)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*n*n)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Ku(e){var n,s,r,o,l,c,f,d,m,g,v=e.x,x=e.y;if(v=D(v-this.long0),this.sphere){if(l=Math.sin(x),g=Math.cos(x),r=Math.cos(v),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(s=this.mode===this.EQUIT?1+g*r:1+this.sinph0*l+this.cosph0*g*r,s<=k)return null;s=Math.sqrt(2/s),n=s*g*Math.sin(v),s*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*g*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(x+this.lat0)<k)return null;s=X-x*.5,s=2*(this.mode===this.S_POLE?Math.cos(s):Math.sin(s)),n=s*Math.sin(v),s*=r}}else{switch(f=0,d=0,m=0,r=Math.cos(v),o=Math.sin(v),l=Math.sin(x),c=ee(this.e,l),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=c/this.qp,d=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:m=1+this.sinb1*f+this.cosb1*d*r;break;case this.EQUIT:m=1+d*r;break;case this.N_POLE:m=S+x,c=this.qp-c;break;case this.S_POLE:m=x-S,c=this.qp+c;break}if(Math.abs(m)<k)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:m=Math.sqrt(2/m),this.mode===this.OBLIQ?s=this.ymf*m*(this.cosb1*f-this.sinb1*d*r):s=(m=Math.sqrt(2/(1+d*r)))*f*this.ymf,n=this.xmf*m*d*o;break;case this.N_POLE:case this.S_POLE:c>=0?(n=(m=Math.sqrt(c))*o,s=r*(this.mode===this.S_POLE?m:-m)):n=s=0;break}}return e.x=this.a*n+this.x0,e.y=this.a*s+this.y0,e}function Yu(e){e.x-=this.x0,e.y-=this.y0;var n=e.x/this.a,s=e.y/this.a,r,o,l,c,f,d,m;if(this.sphere){var g=0,v,x=0;if(v=Math.sqrt(n*n+s*s),o=v*.5,o>1)return null;switch(o=2*Math.asin(o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(x=Math.sin(o),g=Math.cos(o)),this.mode){case this.EQUIT:o=Math.abs(v)<=k?0:Math.asin(s*x/v),n*=x,s=g*v;break;case this.OBLIQ:o=Math.abs(v)<=k?this.lat0:Math.asin(g*this.sinph0+s*x*this.cosph0/v),n*=x*this.cosph0,s=(g-Math.sin(o)*this.sinph0)*v;break;case this.N_POLE:s=-s,o=S-o;break;case this.S_POLE:o-=S;break}r=s===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(n,s)}else{if(m=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n/=this.dd,s*=this.dd,d=Math.sqrt(n*n+s*s),d<k)return e.x=this.long0,e.y=this.lat0,e;c=2*Math.asin(.5*d/this.rq),l=Math.cos(c),n*=c=Math.sin(c),this.mode===this.OBLIQ?(m=l*this.sinb1+s*c*this.cosb1/d,f=this.qp*m,s=d*this.cosb1*l-s*this.sinb1*c):(m=s*c/d,f=this.qp*m,s=d*l)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),f=n*n+s*s,!f)return e.x=this.long0,e.y=this.lat0,e;m=1-f/this.qp,this.mode===this.S_POLE&&(m=-m)}r=Math.atan2(n,s),o=sc(Math.asin(m),this.apa)}return e.x=D(this.long0+r),e.y=o,e}var Xu=.3333333333333333,Ju=.17222222222222222,Qu=.10257936507936508,tc=.06388888888888888,ec=.0664021164021164,ic=.016415012942191543;function nc(e){var n,s=[];return s[0]=e*Xu,n=e*e,s[0]+=n*Ju,s[1]=n*tc,n*=e,s[0]+=n*Qu,s[1]+=n*ec,s[2]=n*ic,s}function sc(e,n){var s=e+e;return e+n[0]*Math.sin(s)+n[1]*Math.sin(s+s)+n[2]*Math.sin(s+s+s)}var ac=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const rc={init:ju,forward:Ku,inverse:Yu,names:ac,S_POLE:Hu,N_POLE:$u,EQUIT:Uu,OBLIQ:Vu};function se(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function oc(){Math.abs(this.lat1+this.lat2)<k||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Wt(this.e3,this.sin_po,this.cos_po),this.qs1=ee(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Wt(this.e3,this.sin_po,this.cos_po),this.qs2=ee(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ee(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>k?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function hc(e){var n=e.x,s=e.y;this.sin_phi=Math.sin(s),this.cos_phi=Math.cos(s);var r=ee(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,l=this.ns0*D(n-this.long0),c=o*Math.sin(l)+this.x0,f=this.rh-o*Math.cos(l)+this.y0;return e.x=c,e.y=f,e}function lc(e){var n,s,r,o,l,c;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),r=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),r=-1),o=0,n!==0&&(o=Math.atan2(r*e.x,r*e.y)),r=n*this.ns0/this.a,this.sphere?c=Math.asin((this.c-r*r)/(2*this.ns0)):(s=(this.c-r*r)/this.ns0,c=this.phi1z(this.e3,s)),l=D(o/this.ns0+this.long0),e.x=l,e.y=c,e}function uc(e,n){var s,r,o,l,c,f=se(.5*n);if(e<k)return f;for(var d=e*e,m=1;m<=25;m++)if(s=Math.sin(f),r=Math.cos(f),o=e*s,l=1-o*o,c=.5*l*l/r*(n/(1-d)-s/l+.5/e*Math.log((1-o)/(1+o))),f=f+c,Math.abs(c)<=1e-7)return f;return null}var cc=["Albers_Conic_Equal_Area","Albers","aea"];const fc={init:oc,forward:hc,inverse:lc,names:cc,phi1z:uc};function dc(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function _c(e){var n,s,r,o,l,c,f,d,m=e.x,g=e.y;return r=D(m-this.long0),n=Math.sin(g),s=Math.cos(g),o=Math.cos(r),c=this.sin_p14*n+this.cos_p14*s*o,l=1,c>0||Math.abs(c)<=k?(f=this.x0+this.a*l*s*Math.sin(r)/c,d=this.y0+this.a*l*(this.cos_p14*n-this.sin_p14*s*o)/c):(f=this.x0+this.infinity_dist*s*Math.sin(r),d=this.y0+this.infinity_dist*(this.cos_p14*n-this.sin_p14*s*o)),e.x=f,e.y=d,e}function mc(e){var n,s,r,o,l,c;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(n=Math.sqrt(e.x*e.x+e.y*e.y))?(o=Math.atan2(n,this.rc),s=Math.sin(o),r=Math.cos(o),c=se(r*this.sin_p14+e.y*s*this.cos_p14/n),l=Math.atan2(e.x*s,n*this.cos_p14*r-e.y*this.sin_p14*s),l=D(this.long0+l)):(c=this.phic0,l=0),e.x=l,e.y=c,e}var vc=["gnom"];const pc={init:dc,forward:_c,inverse:mc,names:vc};function gc(e,n){var s=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(n)-s)<1e-6)return n<0?-1*S:S;for(var r=Math.asin(.5*n),o,l,c,f,d=0;d<30;d++)if(l=Math.sin(r),c=Math.cos(r),f=e*l,o=Math.pow(1-f*f,2)/(2*c)*(n/(1-e*e)-l/(1-f*f)+.5/e*Math.log((1-f)/(1+f))),r+=o,Math.abs(o)<=1e-10)return r;return NaN}function yc(){this.sphere||(this.k0=Wt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Mc(e){var n=e.x,s=e.y,r,o,l=D(n-this.long0);if(this.sphere)r=this.x0+this.a*l*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var c=ee(this.e,Math.sin(s));r=this.x0+this.a*this.k0*l,o=this.y0+this.a*c*.5/this.k0}return e.x=r,e.y=o,e}function wc(e){e.x-=this.x0,e.y-=this.y0;var n,s;return this.sphere?(n=D(this.long0+e.x/this.a/Math.cos(this.lat_ts)),s=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(s=gc(this.e,2*e.y*this.k0/this.a),n=D(this.long0+e.x/(this.a*this.k0))),e.x=n,e.y=s,e}var xc=["cea"];const bc={init:yc,forward:Mc,inverse:wc,names:xc};function Pc(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Lc(e){var n=e.x,s=e.y,r=D(n-this.long0),o=Be(s-this.lat0);return e.x=this.x0+this.a*r*this.rc,e.y=this.y0+this.a*o,e}function Tc(e){var n=e.x,s=e.y;return e.x=D(this.long0+(n-this.x0)/(this.a*this.rc)),e.y=Be(this.lat0+(s-this.y0)/this.a),e}var Cc=["Equirectangular","Equidistant_Cylindrical","eqc"];const Sc={init:Pc,forward:Lc,inverse:Tc,names:Cc};var Fa=20;function Ec(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=di(this.es),this.e1=_i(this.es),this.e2=mi(this.es),this.e3=vi(this.es),this.ml0=this.a*yt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function kc(e){var n=e.x,s=e.y,r,o,l,c=D(n-this.long0);if(l=c*Math.sin(s),this.sphere)Math.abs(s)<=k?(r=this.a*c,o=-1*this.a*this.lat0):(r=this.a*Math.sin(l)/Math.tan(s),o=this.a*(Be(s-this.lat0)+(1-Math.cos(l))/Math.tan(s)));else if(Math.abs(s)<=k)r=this.a*c,o=-1*this.ml0;else{var f=Ne(this.a,this.e,Math.sin(s))/Math.tan(s);r=f*Math.sin(l),o=this.a*yt(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+f*(1-Math.cos(l))}return e.x=r+this.x0,e.y=o+this.y0,e}function Oc(e){var n,s,r,o,l,c,f,d,m;if(r=e.x-this.x0,o=e.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=k)n=D(r/this.a+this.long0),s=0;else{c=this.lat0+o/this.a,f=r*r/this.a/this.a+c*c,d=c;var g;for(l=Fa;l;--l)if(g=Math.tan(d),m=-1*(c*(d*g+1)-d-.5*(d*d+f)*g)/((d-c)/g-1),d+=m,Math.abs(m)<=k){s=d;break}n=D(this.long0+Math.asin(r*Math.tan(d)/this.a)/Math.sin(s))}else if(Math.abs(o+this.ml0)<=k)s=0,n=D(this.long0+r/this.a);else{c=(this.ml0+o)/this.a,f=r*r/this.a/this.a+c*c,d=c;var v,x,b,P,M;for(l=Fa;l;--l)if(M=this.e*Math.sin(d),v=Math.sqrt(1-M*M)*Math.tan(d),x=this.a*yt(this.e0,this.e1,this.e2,this.e3,d),b=this.e0-2*this.e1*Math.cos(2*d)+4*this.e2*Math.cos(4*d)-6*this.e3*Math.cos(6*d),P=x/this.a,m=(c*(v*P+1)-P-.5*v*(P*P+f))/(this.es*Math.sin(2*d)*(P*P+f-2*c*P)/(4*v)+(c-P)*(v*b-2/Math.sin(2*d))-b),d-=m,Math.abs(m)<=k){s=d;break}v=Math.sqrt(1-this.es*Math.pow(Math.sin(s),2))*Math.tan(s),n=D(this.long0+Math.asin(r*v/this.a)/Math.sin(s))}return e.x=n,e.y=s,e}var Ac=["Polyconic","poly"];const Dc={init:Ec,forward:kc,inverse:Oc,names:Ac};function Nc(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Ic(e){var n,s=e.x,r=e.y,o=r-this.lat0,l=s-this.long0,c=o/si*1e-5,f=l,d=1,m=0;for(n=1;n<=10;n++)d=d*c,m=m+this.A[n]*d;var g=m,v=f,x=1,b=0,P,M,C=0,O=0;for(n=1;n<=6;n++)P=x*g-b*v,M=b*g+x*v,x=P,b=M,C=C+this.B_re[n]*x-this.B_im[n]*b,O=O+this.B_im[n]*x+this.B_re[n]*b;return e.x=O*this.a+this.x0,e.y=C*this.a+this.y0,e}function zc(e){var n,s=e.x,r=e.y,o=s-this.x0,l=r-this.y0,c=l/this.a,f=o/this.a,d=1,m=0,g,v,x=0,b=0;for(n=1;n<=6;n++)g=d*c-m*f,v=m*c+d*f,d=g,m=v,x=x+this.C_re[n]*d-this.C_im[n]*m,b=b+this.C_im[n]*d+this.C_re[n]*m;for(var P=0;P<this.iterations;P++){var M=x,C=b,O,I,N=c,$=f;for(n=2;n<=6;n++)O=M*x-C*b,I=C*x+M*b,M=O,C=I,N=N+(n-1)*(this.B_re[n]*M-this.B_im[n]*C),$=$+(n-1)*(this.B_im[n]*M+this.B_re[n]*C);M=1,C=0;var B=this.B_re[1],E=this.B_im[1];for(n=2;n<=6;n++)O=M*x-C*b,I=C*x+M*b,M=O,C=I,B=B+n*(this.B_re[n]*M-this.B_im[n]*C),E=E+n*(this.B_im[n]*M+this.B_re[n]*C);var q=B*B+E*E;x=(N*B+$*E)/q,b=($*B-N*E)/q}var Z=x,ut=b,Lt=1,st=0;for(n=1;n<=9;n++)Lt=Lt*Z,st=st+this.D[n]*Lt;var dt=this.lat0+st*si*1e5,an=this.long0+ut;return e.x=an,e.y=dt,e}var Bc=["New_Zealand_Map_Grid","nzmg"];const Rc={init:Nc,forward:Ic,inverse:zc,names:Bc};function Zc(){}function Fc(e){var n=e.x,s=e.y,r=D(n-this.long0),o=this.x0+this.a*r,l=this.y0+this.a*Math.log(Math.tan(Math.PI/4+s/2.5))*1.25;return e.x=o,e.y=l,e}function qc(e){e.x-=this.x0,e.y-=this.y0;var n=D(this.long0+e.x/this.a),s=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=n,e.y=s,e}var Wc=["Miller_Cylindrical","mill"];const Gc={init:Zc,forward:Fc,inverse:qc,names:Wc};var Hc=20;function $c(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Mr(this.es)}function Uc(e){var n,s,r=e.x,o=e.y;if(r=D(r-this.long0),this.sphere){if(!this.m)o=this.n!==1?Math.asin(this.n*Math.sin(o)):o;else for(var l=this.n*Math.sin(o),c=Hc;c;--c){var f=(this.m*o+Math.sin(o)-l)/(this.m+Math.cos(o));if(o-=f,Math.abs(f)<k)break}n=this.a*this.C_x*r*(this.m+Math.cos(o)),s=this.a*this.C_y*o}else{var d=Math.sin(o),m=Math.cos(o);s=this.a*en(o,d,m,this.en),n=this.a*r*m/Math.sqrt(1-this.es*d*d)}return e.x=n,e.y=s,e}function Vc(e){var n,s,r,o;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,n=e.y/this.a,this.sphere?(n/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(n))),this.m?n=se((this.m*n+Math.sin(n))/this.n):this.n!==1&&(n=se(Math.sin(n)/this.n)),r=D(r+this.long0),n=Be(n)):(n=wr(e.y/this.a,this.es,this.en),o=Math.abs(n),o<S?(o=Math.sin(n),s=this.long0+e.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(n)),r=D(s)):o-k<S&&(r=this.long0)),e.x=r,e.y=n,e}var jc=["Sinusoidal","sinu"];const Kc={init:$c,forward:Uc,inverse:Vc,names:jc};function Yc(){}function Xc(e){for(var n=e.x,s=e.y,r=D(n-this.long0),o=s,l=Math.PI*Math.sin(s);;){var c=-(o+Math.sin(o)-l)/(1+Math.cos(o));if(o+=c,Math.abs(c)<k)break}o/=2,Math.PI/2-Math.abs(s)<k&&(r=0);var f=.900316316158*this.a*r*Math.cos(o)+this.x0,d=1.4142135623731*this.a*Math.sin(o)+this.y0;return e.x=f,e.y=d,e}function Jc(e){var n,s;e.x-=this.x0,e.y-=this.y0,s=e.y/(1.4142135623731*this.a),Math.abs(s)>.999999999999&&(s=.999999999999),n=Math.asin(s);var r=D(this.long0+e.x/(.900316316158*this.a*Math.cos(n)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),s=(2*n+Math.sin(2*n))/Math.PI,Math.abs(s)>1&&(s=1);var o=Math.asin(s);return e.x=r,e.y=o,e}var Qc=["Mollweide","moll"];const tf={init:Yc,forward:Xc,inverse:Jc,names:Qc};function ef(){Math.abs(this.lat1+this.lat2)<k||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=di(this.es),this.e1=_i(this.es),this.e2=mi(this.es),this.e3=vi(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Wt(this.e,this.sinphi,this.cosphi),this.ml1=yt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<k?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Wt(this.e,this.sinphi,this.cosphi),this.ml2=yt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=yt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function nf(e){var n=e.x,s=e.y,r;if(this.sphere)r=this.a*(this.g-s);else{var o=yt(this.e0,this.e1,this.e2,this.e3,s);r=this.a*(this.g-o)}var l=this.ns*D(n-this.long0),c=this.x0+r*Math.sin(l),f=this.y0+this.rh-r*Math.cos(l);return e.x=c,e.y=f,e}function sf(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var n,s,r,o;this.ns>=0?(s=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(s=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1);var l=0;if(s!==0&&(l=Math.atan2(n*e.x,n*e.y)),this.sphere)return o=D(this.long0+l/this.ns),r=Be(this.g-s/this.a),e.x=o,e.y=r,e;var c=this.g-s/this.a;return r=Vi(c,this.e0,this.e1,this.e2,this.e3),o=D(this.long0+l/this.ns),e.x=o,e.y=r,e}var af=["Equidistant_Conic","eqdc"];const rf={init:ef,forward:nf,inverse:sf,names:af};function of(){this.R=this.a}function hf(e){var n=e.x,s=e.y,r=D(n-this.long0),o,l;Math.abs(s)<=k&&(o=this.x0+this.R*r,l=this.y0);var c=se(2*Math.abs(s/Math.PI));(Math.abs(r)<=k||Math.abs(Math.abs(s)-S)<=k)&&(o=this.x0,s>=0?l=this.y0+Math.PI*this.R*Math.tan(.5*c):l=this.y0+Math.PI*this.R*-Math.tan(.5*c));var f=.5*Math.abs(Math.PI/r-r/Math.PI),d=f*f,m=Math.sin(c),g=Math.cos(c),v=g/(m+g-1),x=v*v,b=v*(2/m-1),P=b*b,M=Math.PI*this.R*(f*(v-P)+Math.sqrt(d*(v-P)*(v-P)-(P+d)*(x-P)))/(P+d);r<0&&(M=-M),o=this.x0+M;var C=d+v;return M=Math.PI*this.R*(b*C-f*Math.sqrt((P+d)*(d+1)-C*C))/(P+d),s>=0?l=this.y0+M:l=this.y0-M,e.x=o,e.y=l,e}function lf(e){var n,s,r,o,l,c,f,d,m,g,v,x,b;return e.x-=this.x0,e.y-=this.y0,v=Math.PI*this.R,r=e.x/v,o=e.y/v,l=r*r+o*o,c=-Math.abs(o)*(1+l),f=c-2*o*o+r*r,d=-2*c+1+2*o*o+l*l,b=o*o/d+(2*f*f*f/d/d/d-9*c*f/d/d)/27,m=(c-f*f/3/d)/d,g=2*Math.sqrt(-m/3),v=3*b/m/g,Math.abs(v)>1&&(v>=0?v=1:v=-1),x=Math.acos(v)/3,e.y>=0?s=(-g*Math.cos(x+Math.PI/3)-f/3/d)*Math.PI:s=-(-g*Math.cos(x+Math.PI/3)-f/3/d)*Math.PI,Math.abs(r)<k?n=this.long0:n=D(this.long0+Math.PI*(l-1+Math.sqrt(1+2*(r*r-o*o)+l*l))/2/r),e.x=n,e.y=s,e}var uf=["Van_der_Grinten_I","VanDerGrinten","vandg"];const cf={init:of,forward:hf,inverse:lf,names:uf};function ff(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function df(e){var n=e.x,s=e.y,r=Math.sin(e.y),o=Math.cos(e.y),l=D(n-this.long0),c,f,d,m,g,v,x,b,P,M,C,O,I,N,$,B,E,q,Z,ut,Lt,st,dt;return this.sphere?Math.abs(this.sin_p12-1)<=k?(e.x=this.x0+this.a*(S-s)*Math.sin(l),e.y=this.y0-this.a*(S-s)*Math.cos(l),e):Math.abs(this.sin_p12+1)<=k?(e.x=this.x0+this.a*(S+s)*Math.sin(l),e.y=this.y0+this.a*(S+s)*Math.cos(l),e):(q=this.sin_p12*r+this.cos_p12*o*Math.cos(l),B=Math.acos(q),E=B?B/Math.sin(B):1,e.x=this.x0+this.a*E*o*Math.sin(l),e.y=this.y0+this.a*E*(this.cos_p12*r-this.sin_p12*o*Math.cos(l)),e):(c=di(this.es),f=_i(this.es),d=mi(this.es),m=vi(this.es),Math.abs(this.sin_p12-1)<=k?(g=this.a*yt(c,f,d,m,S),v=this.a*yt(c,f,d,m,s),e.x=this.x0+(g-v)*Math.sin(l),e.y=this.y0-(g-v)*Math.cos(l),e):Math.abs(this.sin_p12+1)<=k?(g=this.a*yt(c,f,d,m,S),v=this.a*yt(c,f,d,m,s),e.x=this.x0+(g+v)*Math.sin(l),e.y=this.y0+(g+v)*Math.cos(l),e):(x=r/o,b=Ne(this.a,this.e,this.sin_p12),P=Ne(this.a,this.e,r),M=Math.atan((1-this.es)*x+this.es*b*this.sin_p12/(P*o)),C=Math.atan2(Math.sin(l),this.cos_p12*Math.tan(M)-this.sin_p12*Math.cos(l)),C===0?Z=Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):Math.abs(Math.abs(C)-Math.PI)<=k?Z=-Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):Z=Math.asin(Math.sin(l)*Math.cos(M)/Math.sin(C)),O=this.e*this.sin_p12/Math.sqrt(1-this.es),I=this.e*this.cos_p12*Math.cos(C)/Math.sqrt(1-this.es),N=O*I,$=I*I,ut=Z*Z,Lt=ut*Z,st=Lt*Z,dt=st*Z,B=b*Z*(1-ut*$*(1-$)/6+Lt/8*N*(1-2*$)+st/120*($*(4-7*$)-3*O*O*(1-7*$))-dt/48*N),e.x=this.x0+B*Math.sin(C),e.y=this.y0+B*Math.cos(C),e))}function _f(e){e.x-=this.x0,e.y-=this.y0;var n,s,r,o,l,c,f,d,m,g,v,x,b,P,M,C,O,I,N,$,B,E,q,Z;return this.sphere?(n=Math.sqrt(e.x*e.x+e.y*e.y),n>2*S*this.a?void 0:(s=n/this.a,r=Math.sin(s),o=Math.cos(s),l=this.long0,Math.abs(n)<=k?c=this.lat0:(c=se(o*this.sin_p12+e.y*r*this.cos_p12/n),f=Math.abs(this.lat0)-S,Math.abs(f)<=k?this.lat0>=0?l=D(this.long0+Math.atan2(e.x,-e.y)):l=D(this.long0-Math.atan2(-e.x,e.y)):l=D(this.long0+Math.atan2(e.x*r,n*this.cos_p12*o-e.y*this.sin_p12*r))),e.x=l,e.y=c,e)):(d=di(this.es),m=_i(this.es),g=mi(this.es),v=vi(this.es),Math.abs(this.sin_p12-1)<=k?(x=this.a*yt(d,m,g,v,S),n=Math.sqrt(e.x*e.x+e.y*e.y),b=x-n,c=Vi(b/this.a,d,m,g,v),l=D(this.long0+Math.atan2(e.x,-1*e.y)),e.x=l,e.y=c,e):Math.abs(this.sin_p12+1)<=k?(x=this.a*yt(d,m,g,v,S),n=Math.sqrt(e.x*e.x+e.y*e.y),b=n-x,c=Vi(b/this.a,d,m,g,v),l=D(this.long0+Math.atan2(e.x,e.y)),e.x=l,e.y=c,e):(n=Math.sqrt(e.x*e.x+e.y*e.y),C=Math.atan2(e.x,e.y),P=Ne(this.a,this.e,this.sin_p12),O=Math.cos(C),I=this.e*this.cos_p12*O,N=-I*I/(1-this.es),$=3*this.es*(1-N)*this.sin_p12*this.cos_p12*O/(1-this.es),B=n/P,E=B-N*(1+N)*Math.pow(B,3)/6-$*(1+3*N)*Math.pow(B,4)/24,q=1-N*E*E/2-B*E*E*E/6,M=Math.asin(this.sin_p12*Math.cos(E)+this.cos_p12*Math.sin(E)*O),l=D(this.long0+Math.asin(Math.sin(C)*Math.sin(E)/Math.cos(M))),Z=Math.sin(M),c=Math.atan2((Z-this.es*q*this.sin_p12)*Math.tan(M),Z*(1-this.es)),e.x=l,e.y=c,e))}var mf=["Azimuthal_Equidistant","aeqd"];const vf={init:ff,forward:df,inverse:_f,names:mf};function pf(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function gf(e){var n,s,r,o,l,c,f,d,m=e.x,g=e.y;return r=D(m-this.long0),n=Math.sin(g),s=Math.cos(g),o=Math.cos(r),c=this.sin_p14*n+this.cos_p14*s*o,l=1,(c>0||Math.abs(c)<=k)&&(f=this.a*l*s*Math.sin(r),d=this.y0+this.a*l*(this.cos_p14*n-this.sin_p14*s*o)),e.x=f,e.y=d,e}function yf(e){var n,s,r,o,l,c,f;return e.x-=this.x0,e.y-=this.y0,n=Math.sqrt(e.x*e.x+e.y*e.y),s=se(n/this.a),r=Math.sin(s),o=Math.cos(s),c=this.long0,Math.abs(n)<=k?(f=this.lat0,e.x=c,e.y=f,e):(f=se(o*this.sin_p14+e.y*r*this.cos_p14/n),l=Math.abs(this.lat0)-S,Math.abs(l)<=k?(this.lat0>=0?c=D(this.long0+Math.atan2(e.x,-e.y)):c=D(this.long0-Math.atan2(-e.x,e.y)),e.x=c,e.y=f,e):(c=D(this.long0+Math.atan2(e.x*r,n*this.cos_p14*o-e.y*this.sin_p14*r)),e.x=c,e.y=f,e))}var Mf=["ortho"];const wf={init:pf,forward:gf,inverse:yf,names:Mf};var nt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},J={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function xf(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=S-X/2?this.face=nt.TOP:this.lat0<=-(S-X/2)?this.face=nt.BOTTOM:Math.abs(this.long0)<=X?this.face=nt.FRONT:Math.abs(this.long0)<=S+X?this.face=this.long0>0?nt.RIGHT:nt.LEFT:this.face=nt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function bf(e){var n={x:0,y:0},s,r,o,l,c,f,d={value:0};if(e.x-=this.long0,this.es!==0?s=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):s=e.y,r=e.x,this.face===nt.TOP)l=S-s,r>=X&&r<=S+X?(d.value=J.AREA_0,o=r-S):r>S+X||r<=-(S+X)?(d.value=J.AREA_1,o=r>0?r-rt:r+rt):r>-(S+X)&&r<=-X?(d.value=J.AREA_2,o=r+S):(d.value=J.AREA_3,o=r);else if(this.face===nt.BOTTOM)l=S+s,r>=X&&r<=S+X?(d.value=J.AREA_0,o=-r+S):r<X&&r>=-X?(d.value=J.AREA_1,o=-r):r<-X&&r>=-(S+X)?(d.value=J.AREA_2,o=-r-S):(d.value=J.AREA_3,o=r>0?-r+rt:-r-rt);else{var m,g,v,x,b,P,M;this.face===nt.RIGHT?r=Ae(r,+S):this.face===nt.BACK?r=Ae(r,+rt):this.face===nt.LEFT&&(r=Ae(r,-S)),x=Math.sin(s),b=Math.cos(s),P=Math.sin(r),M=Math.cos(r),m=b*M,g=b*P,v=x,this.face===nt.FRONT?(l=Math.acos(m),o=Ri(l,v,g,d)):this.face===nt.RIGHT?(l=Math.acos(g),o=Ri(l,v,-m,d)):this.face===nt.BACK?(l=Math.acos(-m),o=Ri(l,v,-g,d)):this.face===nt.LEFT?(l=Math.acos(-g),o=Ri(l,v,m,d)):(l=o=0,d.value=J.AREA_0)}return f=Math.atan(12/rt*(o+Math.acos(Math.sin(o)*Math.cos(X))-S)),c=Math.sqrt((1-Math.cos(l))/(Math.cos(f)*Math.cos(f))/(1-Math.cos(Math.atan(1/Math.cos(o))))),d.value===J.AREA_1?f+=S:d.value===J.AREA_2?f+=rt:d.value===J.AREA_3&&(f+=1.5*rt),n.x=c*Math.cos(f),n.y=c*Math.sin(f),n.x=n.x*this.a+this.x0,n.y=n.y*this.a+this.y0,e.x=n.x,e.y=n.y,e}function Pf(e){var n={lam:0,phi:0},s,r,o,l,c,f,d,m,g,v={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,r=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),s=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?v.value=J.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(v.value=J.AREA_1,s-=S):e.x<0&&-e.x>=Math.abs(e.y)?(v.value=J.AREA_2,s=s<0?s+rt:s-rt):(v.value=J.AREA_3,s+=S),g=rt/12*Math.tan(s),c=Math.sin(g)/(Math.cos(g)-1/Math.sqrt(2)),f=Math.atan(c),o=Math.cos(s),l=Math.tan(r),d=1-o*o*l*l*(1-Math.cos(Math.atan(1/Math.cos(f)))),d<-1?d=-1:d>1&&(d=1),this.face===nt.TOP)m=Math.acos(d),n.phi=S-m,v.value===J.AREA_0?n.lam=f+S:v.value===J.AREA_1?n.lam=f<0?f+rt:f-rt:v.value===J.AREA_2?n.lam=f-S:n.lam=f;else if(this.face===nt.BOTTOM)m=Math.acos(d),n.phi=m-S,v.value===J.AREA_0?n.lam=-f+S:v.value===J.AREA_1?n.lam=-f:v.value===J.AREA_2?n.lam=-f-S:n.lam=f<0?-f-rt:-f+rt;else{var x,b,P;x=d,g=x*x,g>=1?P=0:P=Math.sqrt(1-g)*Math.sin(f),g+=P*P,g>=1?b=0:b=Math.sqrt(1-g),v.value===J.AREA_1?(g=b,b=-P,P=g):v.value===J.AREA_2?(b=-b,P=-P):v.value===J.AREA_3&&(g=b,b=P,P=-g),this.face===nt.RIGHT?(g=x,x=-b,b=g):this.face===nt.BACK?(x=-x,b=-b):this.face===nt.LEFT&&(g=x,x=b,b=-g),n.phi=Math.acos(-P)-S,n.lam=Math.atan2(b,x),this.face===nt.RIGHT?n.lam=Ae(n.lam,-S):this.face===nt.BACK?n.lam=Ae(n.lam,-rt):this.face===nt.LEFT&&(n.lam=Ae(n.lam,+S))}if(this.es!==0){var M,C,O;M=n.phi<0?1:0,C=Math.tan(n.phi),O=this.b/Math.sqrt(C*C+this.one_minus_f_squared),n.phi=Math.atan(Math.sqrt(this.a*this.a-O*O)/(this.one_minus_f*O)),M&&(n.phi=-n.phi)}return n.lam+=this.long0,e.x=n.lam,e.y=n.phi,e}function Ri(e,n,s,r){var o;return e<k?(r.value=J.AREA_0,o=0):(o=Math.atan2(n,s),Math.abs(o)<=X?r.value=J.AREA_0:o>X&&o<=S+X?(r.value=J.AREA_1,o-=S):o>S+X||o<=-(S+X)?(r.value=J.AREA_2,o=o>=0?o-rt:o+rt):(r.value=J.AREA_3,o+=S)),o}function Ae(e,n){var s=e+n;return s<-rt?s+=oi:s>+rt&&(s-=oi),s}var Lf=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Tf={init:xf,forward:bf,inverse:Pf,names:Lf};var Xn=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ni=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Pr=.8487,Lr=1.3523,Tr=Ft/5,Cf=1/Tr,ke=18,ji=function(e,n){return e[0]+n*(e[1]+n*(e[2]+n*e[3]))},Sf=function(e,n){return e[1]+n*(2*e[2]+n*3*e[3])};function Ef(e,n,s,r){for(var o=n;r;--r){var l=e(o);if(o-=l,Math.abs(l)<s)break}return o}function kf(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Of(e){var n=D(e.x-this.long0),s=Math.abs(e.y),r=Math.floor(s*Tr);r<0?r=0:r>=ke&&(r=ke-1),s=Ft*(s-Cf*r);var o={x:ji(Xn[r],s)*n,y:ji(ni[r],s)};return e.y<0&&(o.y=-o.y),o.x=o.x*this.a*Pr+this.x0,o.y=o.y*this.a*Lr+this.y0,o}function Af(e){var n={x:(e.x-this.x0)/(this.a*Pr),y:Math.abs(e.y-this.y0)/(this.a*Lr)};if(n.y>=1)n.x/=Xn[ke][0],n.y=e.y<0?-S:S;else{var s=Math.floor(n.y*ke);for(s<0?s=0:s>=ke&&(s=ke-1);;)if(ni[s][0]>n.y)--s;else if(ni[s+1][0]<=n.y)++s;else break;var r=ni[s],o=5*(n.y-r[0])/(ni[s+1][0]-r[0]);o=Ef(function(l){return(ji(r,l)-n.y)/Sf(r,l)},o,k,100),n.x/=ji(Xn[s],o),n.y=(5*s+o)*mt,e.y<0&&(n.y=-n.y)}return n.x=D(n.x+this.long0),n}var Df=["Robinson","robin"];const Nf={init:kf,forward:Of,inverse:Af,names:Df};function If(){this.name="geocent"}function zf(e){var n=cr(e,this.es,this.a);return n}function Bf(e){var n=fr(e,this.es,this.a,this.b);return n}var Rf=["Geocentric","geocentric","geocent","Geocent"];const Zf={init:If,forward:zf,inverse:Bf,names:Rf};var vt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Qe={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Ff(){if(Object.keys(Qe).forEach((function(s){if(typeof this[s]>"u")this[s]=Qe[s].def;else{if(Qe[s].num&&isNaN(this[s]))throw new Error("Invalid parameter value, must be numeric "+s+" = "+this[s]);Qe[s].num&&(this[s]=parseFloat(this[s]))}Qe[s].degrees&&(this[s]=this[s]*mt)}).bind(this)),Math.abs(Math.abs(this.lat0)-S)<k?this.mode=this.lat0<0?vt.S_POLE:vt.N_POLE:Math.abs(this.lat0)<k?this.mode=vt.EQUIT:(this.mode=vt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,n=this.azi;this.cg=Math.cos(n),this.sg=Math.sin(n),this.cw=Math.cos(e),this.sw=Math.sin(e)}function qf(e){e.x-=this.long0;var n=Math.sin(e.y),s=Math.cos(e.y),r=Math.cos(e.x),o,l;switch(this.mode){case vt.OBLIQ:l=this.sinph0*n+this.cosph0*s*r;break;case vt.EQUIT:l=s*r;break;case vt.S_POLE:l=-n;break;case vt.N_POLE:l=n;break}switch(l=this.pn1/(this.p-l),o=l*s*Math.sin(e.x),this.mode){case vt.OBLIQ:l*=this.cosph0*n-this.sinph0*s*r;break;case vt.EQUIT:l*=n;break;case vt.N_POLE:l*=-(s*r);break;case vt.S_POLE:l*=s*r;break}var c,f;return c=l*this.cg+o*this.sg,f=1/(c*this.sw*this.h1+this.cw),o=(o*this.cg-l*this.sg)*this.cw*f,l=c*f,e.x=o*this.a,e.y=l*this.a,e}function Wf(e){e.x/=this.a,e.y/=this.a;var n={x:e.x,y:e.y},s,r,o;o=1/(this.pn1-e.y*this.sw),s=this.pn1*e.x*o,r=this.pn1*e.y*this.cw*o,e.x=s*this.cg+r*this.sg,e.y=r*this.cg-s*this.sg;var l=Nt(e.x,e.y);if(Math.abs(l)<k)n.x=0,n.y=e.y;else{var c,f;switch(f=1-l*l*this.pfact,f=(this.p-Math.sqrt(f))/(this.pn1/l+l/this.pn1),c=Math.sqrt(1-f*f),this.mode){case vt.OBLIQ:n.y=Math.asin(c*this.sinph0+e.y*f*this.cosph0/l),e.y=(c-this.sinph0*Math.sin(n.y))*l,e.x*=f*this.cosph0;break;case vt.EQUIT:n.y=Math.asin(e.y*f/l),e.y=c*l,e.x*=f;break;case vt.N_POLE:n.y=Math.asin(c),e.y=-e.y;break;case vt.S_POLE:n.y=-Math.asin(c);break}n.x=Math.atan2(e.x,e.y)}return e.x=n.x+this.long0,e.y=n.y,e}var Gf=["Tilted_Perspective","tpers"];const Hf={init:Ff,forward:qf,inverse:Wf,names:Gf};function $f(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,n=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=n,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Uf(e){var n=e.x,s=e.y,r,o,l,c;if(n=n-this.long0,this.shape==="ellipse"){s=Math.atan(this.radius_p2*Math.tan(s));var f=this.radius_p/Nt(this.radius_p*Math.cos(s),Math.sin(s));if(o=f*Math.cos(n)*Math.cos(s),l=f*Math.sin(n)*Math.cos(s),c=f*Math.sin(s),(this.radius_g-o)*o-l*l-c*c*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;r=this.radius_g-o,this.flip_axis?(e.x=this.radius_g_1*Math.atan(l/Nt(c,r)),e.y=this.radius_g_1*Math.atan(c/r)):(e.x=this.radius_g_1*Math.atan(l/r),e.y=this.radius_g_1*Math.atan(c/Nt(l,r)))}else this.shape==="sphere"&&(r=Math.cos(s),o=Math.cos(n)*r,l=Math.sin(n)*r,c=Math.sin(s),r=this.radius_g-o,this.flip_axis?(e.x=this.radius_g_1*Math.atan(l/Nt(c,r)),e.y=this.radius_g_1*Math.atan(c/r)):(e.x=this.radius_g_1*Math.atan(l/r),e.y=this.radius_g_1*Math.atan(c/Nt(l,r))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function Vf(e){var n=-1,s=0,r=0,o,l,c,f;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(e.y/this.radius_g_1),s=Math.tan(e.x/this.radius_g_1)*Nt(1,r)):(s=Math.tan(e.x/this.radius_g_1),r=Math.tan(e.y/this.radius_g_1)*Nt(1,s));var d=r/this.radius_p;if(o=s*s+d*d+n*n,l=2*this.radius_g*n,c=l*l-4*o*this.C,c<0)return e.x=Number.NaN,e.y=Number.NaN,e;f=(-l-Math.sqrt(c))/(2*o),n=this.radius_g+f*n,s*=f,r*=f,e.x=Math.atan2(s,n),e.y=Math.atan(r*Math.cos(e.x)/n),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(e.y/this.radius_g_1),s=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+r*r)):(s=Math.tan(e.x/this.radius_g_1),r=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+s*s)),o=s*s+r*r+n*n,l=2*this.radius_g*n,c=l*l-4*o*this.C,c<0)return e.x=Number.NaN,e.y=Number.NaN,e;f=(-l-Math.sqrt(c))/(2*o),n=this.radius_g+f*n,s*=f,r*=f,e.x=Math.atan2(s,n),e.y=Math.atan(r*Math.cos(e.x)/n)}return e.x=e.x+this.long0,e}var jf=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Kf={init:$f,forward:Uf,inverse:Vf,names:jf};function Yf(e){e.Proj.projections.add(Wi),e.Proj.projections.add(Gi),e.Proj.projections.add(eu),e.Proj.projections.add(cu),e.Proj.projections.add(pu),e.Proj.projections.add(xu),e.Proj.projections.add(Su),e.Proj.projections.add(Du),e.Proj.projections.add(Ru),e.Proj.projections.add(Gu),e.Proj.projections.add(rc),e.Proj.projections.add(fc),e.Proj.projections.add(pc),e.Proj.projections.add(bc),e.Proj.projections.add(Sc),e.Proj.projections.add(Dc),e.Proj.projections.add(Rc),e.Proj.projections.add(Gc),e.Proj.projections.add(Kc),e.Proj.projections.add(tf),e.Proj.projections.add(rf),e.Proj.projections.add(cf),e.Proj.projections.add(vf),e.Proj.projections.add(wf),e.Proj.projections.add(Tf),e.Proj.projections.add(Nf),e.Proj.projections.add(Zf),e.Proj.projections.add(Hf),e.Proj.projections.add(Kf)}Ot.defaultDatum="WGS84";Ot.Proj=qt;Ot.WGS84=new Ot.Proj("WGS84");Ot.Point=De;Ot.toPoint=dr;Ot.defs=gt;Ot.nadgrid=nl;Ot.transform=Ui;Ot.mgrs=yl;Ot.version="__VERSION__";Yf(Ot);function os(e){return e[e.length-1]}function pi(e,...n){return n.forEach(s=>{e.includes(s)||e.push(s)}),e}function qa(e,n){return e?e.split(n):[]}function hs(e,n,s){const r=n===void 0||e>=n,o=s===void 0||e<=s;return r&&o}function Cr(e,n,s){return e<n?n:e>s?s:e}function Ie(e,n,s={},r=0,o=""){const l=Object.keys(s).reduce((f,d)=>{let m=s[d];return typeof m=="function"&&(m=m(r)),`${f} ${d}="${m}"`},e);o+=`<${l}></${e}>`;const c=r+1;return c<n?Ie(e,n,s,c,o):o}function ls(e){return e.replace(/>\s+/g,">").replace(/\s+</,"<")}function Jn(e){return new Date(e).setHours(0,0,0,0)}function _e(){return new Date().setHours(0,0,0,0)}function ze(...e){switch(e.length){case 0:return _e();case 1:return Jn(e[0])}const n=new Date(0);return n.setFullYear(...e),n.setHours(0,0,0,0)}function ui(e,n){const s=new Date(e);return s.setDate(s.getDate()+n)}function Xf(e,n){return ui(e,n*7)}function Ki(e,n){const s=new Date(e),r=s.getMonth()+n;let o=r%12;o<0&&(o+=12);const l=s.setMonth(r);return s.getMonth()!==o?s.setDate(0):l}function ci(e,n){const s=new Date(e),r=s.getMonth(),o=s.setFullYear(s.getFullYear()+n);return r===1&&s.getMonth()===2?s.setDate(0):o}function Wa(e,n){return(e-n+7)%7}function ue(e,n,s=0){const r=new Date(e).getDay();return ui(e,Wa(n,s)-Wa(r,s))}function Sr(e,n){return Math.round((e-n)/6048e5)+1}function Jf(e){const n=ue(e,4,1),s=ue(new Date(n).setMonth(0,4),4,1);return Sr(n,s)}function Er(e,n){const s=ue(new Date(e).setMonth(0,1),n,n),r=ue(e,n,n),o=Sr(r,s);if(o<53)return o;const l=ue(new Date(e).setDate(32),n,n);return r===l?1:o}function Qf(e){return Er(e,0)}function td(e){return Er(e,6)}function Pe(e,n){const s=new Date(e).getFullYear();return Math.floor(s/n)*n}function ie(e,n,s){if(n!==1&&n!==2)return e;const r=new Date(e);return n===1?s?r.setMonth(r.getMonth()+1,0):r.setDate(1):s?r.setFullYear(r.getFullYear()+1,0,0):r.setMonth(0,1),r.setHours(0,0,0,0)}const Qn=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,ed=/[\s!-/:-@[-`{-~]+/;let Wn={};const Ga={y(e,n){return new Date(e).setFullYear(parseInt(n,10))},m(e,n,s){const r=new Date(e);let o=parseInt(n,10)-1;if(isNaN(o)){if(!n)return NaN;const l=n.toLowerCase(),c=f=>f.toLowerCase().startsWith(l);if(o=s.monthsShort.findIndex(c),o<0&&(o=s.months.findIndex(c)),o<0)return NaN}return r.setMonth(o),r.getMonth()!==kr(o)?r.setDate(0):r.getTime()},d(e,n){return new Date(e).setDate(parseInt(n,10))}},id={d(e){return e.getDate()},dd(e){return Zi(e.getDate(),2)},D(e,n){return n.daysShort[e.getDay()]},DD(e,n){return n.days[e.getDay()]},m(e){return e.getMonth()+1},mm(e){return Zi(e.getMonth()+1,2)},M(e,n){return n.monthsShort[e.getMonth()]},MM(e,n){return n.months[e.getMonth()]},y(e){return e.getFullYear()},yy(e){return Zi(e.getFullYear(),2).slice(-2)},yyyy(e){return Zi(e.getFullYear(),4)}};function kr(e){return e>-1?e%12:kr(e+12)}function Zi(e,n){return e.toString().padStart(n,"0")}function Or(e){if(typeof e!="string")throw new Error("Invalid date format.");if(e in Wn)return Wn[e];const n=e.split(Qn),s=e.match(new RegExp(Qn,"g"));if(n.length===0||!s)throw new Error("Invalid date format.");const r=s.map(l=>id[l]),o=Object.keys(Ga).reduce((l,c)=>(s.find(d=>d[0]!=="D"&&d[0].toLowerCase()===c)&&l.push(c),l),[]);return Wn[e]={parser(l,c){const f=l.split(ed).reduce((d,m,g)=>{if(m.length>0&&s[g]){const v=s[g][0];v==="M"?d.m=m:v!=="D"&&(d[v]=m)}return d},{});return o.reduce((d,m)=>{const g=Ga[m](d,f[m],c);return isNaN(g)?d:g},_e())},formatter(l,c){let f=r.reduce((d,m,g)=>d+=`${n[g]}${m(l,c)}`,"");return f+=os(n)}}}function de(e,n,s){if(e instanceof Date||typeof e=="number"){const r=Jn(e);return isNaN(r)?void 0:r}if(e){if(e==="today")return _e();if(n&&n.toValue){const r=n.toValue(e,n,s);return isNaN(r)?void 0:Jn(r)}return Or(n).parser(e,s)}}function nn(e,n,s){if(isNaN(e)||!e&&e!==0)return"";const r=typeof e=="number"?new Date(e):e;return n.toDisplay?n.toDisplay(r,n,s):Or(n).formatter(r,s)}const nd=document.createRange();function Yt(e){return nd.createContextualFragment(e)}function Ar(e){return e.parentElement||(e.parentNode instanceof ShadowRoot?e.parentNode.host:void 0)}function sn(e){return e.getRootNode().activeElement===e}function ai(e){e.style.display!=="none"&&(e.style.display&&(e.dataset.styleDisplay=e.style.display),e.style.display="none")}function ri(e){e.style.display==="none"&&(e.dataset.styleDisplay?(e.style.display=e.dataset.styleDisplay,delete e.dataset.styleDisplay):e.style.display="")}function Yi(e){e.firstChild&&(e.removeChild(e.firstChild),Yi(e))}function sd(e,n){Yi(e),n instanceof DocumentFragment?e.appendChild(n):typeof n=="string"?e.appendChild(Yt(n)):typeof n.forEach=="function"&&n.forEach(s=>{e.appendChild(s)})}const Xi=new WeakMap,{addEventListener:ad,removeEventListener:rd}=EventTarget.prototype;function ts(e,n){let s=Xi.get(e);s||(s=[],Xi.set(e,s)),n.forEach(r=>{ad.call(...r),s.push(r)})}function od(e){let n=Xi.get(e);n&&(n.forEach(s=>{rd.call(...s)}),Xi.delete(e))}if(!Event.prototype.composedPath){const e=(n,s=[])=>{s.push(n);let r;return n.parentNode?r=n.parentNode:n.host?r=n.host:n.defaultView&&(r=n.defaultView),r?e(r,s):s};Event.prototype.composedPath=function(){return e(this.target)}}function Dr(e,n,s){const[r,...o]=e;if(n(r))return r;if(!(r===s||r.tagName==="HTML"||o.length===0))return Dr(o,n,s)}function Nr(e,n){const s=typeof n=="function"?n:r=>r instanceof Element&&r.matches(n);return Dr(e.composedPath(),s,e.currentTarget)}const ti={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},us={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,clearButton:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,enableOnReadonly:!0,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:"",orientation:"auto",pickLevel:0,prevArrow:"",showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayButton:!1,todayButtonMode:0,todayHighlight:!1,updateOnBlur:!0,weekNumbers:0,weekStart:0},{language:Gn,format:hd,weekStart:ld}=us;function Ha(e,n){return e.length<6&&n>=0&&n<7?pi(e,n):e}function Ir(e,n){switch(e===4?n===6?3:!n+1:e){case 1:return Jf;case 2:return Qf;case 3:return td}}function $a(e,n,s){return n.weekStart=e,n.weekEnd=(e+6)%7,s===4&&(n.getWeekNumber=Ir(4,e)),e}function Ua(e,n,s,r){const o=de(e,n,s);return o!==void 0?o:r}function Hn(e,n,s=3){const r=parseInt(e,10);return r>=0&&r<=s?r:n}function Fi(e,n,s,r=void 0){n in e&&(s in e||(e[s]=r?r(e[n]):e[n]),delete e[n])}function $n(e,n){const s=Object.assign({},e),r={},o=n.constructor.locales,l=!!n.rangeSideIndex;let{datesDisabled:c,format:f,language:d,locale:m,maxDate:g,maxView:v,minDate:x,pickLevel:b,startView:P,weekNumbers:M,weekStart:C}=n.config||{};if(Fi(s,"calendarWeeks","weekNumbers",E=>E?1:0),Fi(s,"clearBtn","clearButton"),Fi(s,"todayBtn","todayButton"),Fi(s,"todayBtnMode","todayButtonMode"),s.language){let E;if(s.language!==d&&(o[s.language]?E=s.language:(E=s.language.split("-")[0],o[E]||(E=!1))),delete s.language,E){d=r.language=E;const q=m||o[Gn];m=Object.assign({format:hd,weekStart:ld},o[Gn]),d!==Gn&&Object.assign(m,o[d]),r.locale=m,f===q.format&&(f=r.format=m.format),C===q.weekStart&&(C=$a(m.weekStart,r,M))}}if(s.format){const E=typeof s.format.toDisplay=="function",q=typeof s.format.toValue=="function",Z=Qn.test(s.format);(E&&q||Z)&&(f=r.format=s.format),delete s.format}let O=b;"pickLevel"in s&&(O=Hn(s.pickLevel,b,2),delete s.pickLevel),O!==b&&(O>b&&("minDate"in s||(s.minDate=x),"maxDate"in s||(s.maxDate=g)),c&&!s.datesDisabled&&(s.datesDisabled=[]),b=r.pickLevel=O);let I=x,N=g;if("minDate"in s){const E=ze(0,0,1);I=s.minDate===null?E:Ua(s.minDate,f,m,I),I!==E&&(I=ie(I,b,!1)),delete s.minDate}if("maxDate"in s&&(N=s.maxDate===null?void 0:Ua(s.maxDate,f,m,N),N!==void 0&&(N=ie(N,b,!0)),delete s.maxDate),N<I?(x=r.minDate=N,g=r.maxDate=I):(x!==I&&(x=r.minDate=I),g!==N&&(g=r.maxDate=N)),s.datesDisabled){const E=s.datesDisabled;if(typeof E=="function")r.datesDisabled=null,r.checkDisabled=(q,Z)=>E(new Date(q),Z,l);else{const q=r.datesDisabled=E.reduce((Z,ut)=>{const Lt=de(ut,f,m);return Lt!==void 0?pi(Z,ie(Lt,b,l)):Z},[]);r.checkDisabled=Z=>q.includes(Z)}delete s.datesDisabled}if("defaultViewDate"in s){const E=de(s.defaultViewDate,f,m);E!==void 0&&(r.defaultViewDate=E),delete s.defaultViewDate}if("weekStart"in s){const E=Number(s.weekStart)%7;isNaN(E)||(C=$a(E,r,M)),delete s.weekStart}if(s.daysOfWeekDisabled&&(r.daysOfWeekDisabled=s.daysOfWeekDisabled.reduce(Ha,[]),delete s.daysOfWeekDisabled),s.daysOfWeekHighlighted&&(r.daysOfWeekHighlighted=s.daysOfWeekHighlighted.reduce(Ha,[]),delete s.daysOfWeekHighlighted),"weekNumbers"in s){let E=s.weekNumbers;if(E){const q=typeof E=="function"?(Z,ut)=>E(new Date(Z),ut):Ir(E=parseInt(E,10),C);q&&(M=r.weekNumbers=E,r.getWeekNumber=q)}else M=r.weekNumbers=0,r.getWeekNumber=null;delete s.weekNumbers}if("maxNumberOfDates"in s){const E=parseInt(s.maxNumberOfDates,10);E>=0&&(r.maxNumberOfDates=E,r.multidate=E!==1),delete s.maxNumberOfDates}s.dateDelimiter&&(r.dateDelimiter=String(s.dateDelimiter),delete s.dateDelimiter);let $=v;"maxView"in s&&($=Hn(s.maxView,v),delete s.maxView),$=b>$?b:$,$!==v&&(v=r.maxView=$);let B=P;if("startView"in s&&(B=Hn(s.startView,B),delete s.startView),B<b?B=b:B>v&&(B=v),B!==P&&(r.startView=B),s.prevArrow){const E=Yt(s.prevArrow);E.childNodes.length>0&&(r.prevArrow=E.childNodes),delete s.prevArrow}if(s.nextArrow){const E=Yt(s.nextArrow);E.childNodes.length>0&&(r.nextArrow=E.childNodes),delete s.nextArrow}if("disableTouchKeyboard"in s&&(r.disableTouchKeyboard="ontouchstart"in document&&!!s.disableTouchKeyboard,delete s.disableTouchKeyboard),s.orientation){const E=s.orientation.toLowerCase().split(/\s+/g);r.orientation={x:E.find(q=>q==="left"||q==="right")||"auto",y:E.find(q=>q==="top"||q==="bottom")||"auto"},delete s.orientation}if("todayButtonMode"in s){switch(s.todayButtonMode){case 0:case 1:r.todayButtonMode=s.todayButtonMode}delete s.todayButtonMode}return Object.entries(s).forEach(([E,q])=>{q!==void 0&&E in us&&(r[E]=q)}),r}const Va={show:{key:"ArrowDown"},hide:null,toggle:{key:"Escape"},prevButton:{key:"ArrowLeft",ctrlOrMetaKey:!0},nextButton:{key:"ArrowRight",ctrlOrMetaKey:!0},viewSwitch:{key:"ArrowUp",ctrlOrMetaKey:!0},clearButton:{key:"Backspace",ctrlOrMetaKey:!0},todayButton:{key:".",ctrlOrMetaKey:!0},exitEditMode:{key:"ArrowDown",ctrlOrMetaKey:!0}};function ud(e){return Object.keys(Va).reduce((n,s)=>{const r=e[s]===void 0?Va[s]:e[s],o=r&&r.key;if(!o||typeof o!="string")return n;const l={key:o,ctrlOrMetaKey:!!(r.ctrlOrMetaKey||r.ctrlKey||r.metaKey)};return o.length>1&&(l.altKey=!!r.altKey,l.shiftKey=!!r.shiftKey),n[s]=l,n},{})}const ja=e=>e.map(n=>`<button type="button" class="%buttonClass% ${n}" tabindex="-1"></button>`).join(""),cd=ls(`<div class="datepicker">
  <div class="datepicker-picker">
    <div class="datepicker-header">
      <div class="datepicker-title"></div>
      <div class="datepicker-controls">
        ${ja(["prev-button prev-btn","view-switch","next-button next-btn"])}
      </div>
    </div>
    <div class="datepicker-main"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls">
        ${ja(["today-button today-btn","clear-button clear-btn"])}
      </div>
    </div>
  </div>
</div>`),fd=ls(`<div class="days">
  <div class="days-of-week">${Ie("span",7,{class:"dow"})}</div>
  <div class="datepicker-grid">${Ie("span",42)}</div>
</div>`),dd=ls(`<div class="week-numbers calendar-weeks">
  <div class="days-of-week"><span class="dow"></span></div>
  <div class="weeks">${Ie("span",6,{class:"week"})}</div>
</div>`);class cs{constructor(n,s){Object.assign(this,s,{picker:n,element:Yt('<div class="datepicker-view"></div>').firstChild,selected:[],isRangeEnd:!!n.datepicker.rangeSideIndex}),this.init(this.picker.datepicker.config)}init(n){"pickLevel"in n&&(this.isMinView=this.id===n.pickLevel),this.setOptions(n),this.updateFocus(),this.updateSelection()}prepareForRender(n,s,r){this.disabled=[];const o=this.picker;o.setViewSwitchLabel(n),o.setPrevButtonDisabled(s),o.setNextButtonDisabled(r)}setDisabled(n,s){s.add("disabled"),pi(this.disabled,n)}performBeforeHook(n,s){let r=this.beforeShow(new Date(s));switch(typeof r){case"boolean":r={enabled:r};break;case"string":r={classes:r}}if(r){const o=n.classList;if(r.enabled===!1&&this.setDisabled(s,o),r.classes){const l=r.classes.split(/\s+/);o.add(...l),l.includes("disabled")&&this.setDisabled(s,o)}r.content&&sd(n,r.content)}}renderCell(n,s,r,o,{selected:l,range:c},f,d=[]){n.textContent=s,this.isMinView&&(n.dataset.date=o);const m=n.classList;if(n.className=`datepicker-cell ${this.cellClass}`,r<this.first?m.add("prev"):r>this.last&&m.add("next"),m.add(...d),(f||this.checkDisabled(o,this.id))&&this.setDisabled(o,m),c){const[g,v]=c;r>g&&r<v&&m.add("range"),r===g&&m.add("range-start"),r===v&&m.add("range-end")}l.includes(r)&&m.add("selected"),r===this.focused&&m.add("focused"),this.beforeShow&&this.performBeforeHook(n,o)}refreshCell(n,s,r,[o,l]){const c=n.classList;c.remove("range","range-start","range-end","selected","focused"),s>o&&s<l&&c.add("range"),s===o&&c.add("range-start"),s===l&&c.add("range-end"),r.includes(s)&&c.add("selected"),s===this.focused&&c.add("focused")}changeFocusedCell(n){this.grid.querySelectorAll(".focused").forEach(s=>{s.classList.remove("focused")}),this.grid.children[n].classList.add("focused")}}class _d extends cs{constructor(n){super(n,{id:0,name:"days",cellClass:"day"})}init(n,s=!0){if(s){const r=Yt(fd).firstChild;this.dow=r.firstChild,this.grid=r.lastChild,this.element.appendChild(r)}super.init(n)}setOptions(n){let s;if("minDate"in n&&(this.minDate=n.minDate),"maxDate"in n&&(this.maxDate=n.maxDate),n.checkDisabled&&(this.checkDisabled=n.checkDisabled),n.daysOfWeekDisabled&&(this.daysOfWeekDisabled=n.daysOfWeekDisabled,s=!0),n.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=n.daysOfWeekHighlighted),"todayHighlight"in n&&(this.todayHighlight=n.todayHighlight),"weekStart"in n&&(this.weekStart=n.weekStart,this.weekEnd=n.weekEnd,s=!0),n.locale){const r=this.locale=n.locale;this.dayNames=r.daysMin,this.switchLabelFormat=r.titleFormat,s=!0}if("beforeShowDay"in n&&(this.beforeShow=typeof n.beforeShowDay=="function"?n.beforeShowDay:void 0),"weekNumbers"in n)if(n.weekNumbers&&!this.weekNumbers){const r=Yt(dd).firstChild;this.weekNumbers={element:r,dow:r.firstChild,weeks:r.lastChild},this.element.insertBefore(r,this.element.firstChild)}else this.weekNumbers&&!n.weekNumbers&&(this.element.removeChild(this.weekNumbers.element),this.weekNumbers=null);"getWeekNumber"in n&&(this.getWeekNumber=n.getWeekNumber),"showDaysOfWeek"in n&&(n.showDaysOfWeek?(ri(this.dow),this.weekNumbers&&ri(this.weekNumbers.dow)):(ai(this.dow),this.weekNumbers&&ai(this.weekNumbers.dow))),s&&Array.from(this.dow.children).forEach((r,o)=>{const l=(this.weekStart+o)%7;r.textContent=this.dayNames[l],r.className=this.daysOfWeekDisabled.includes(l)?"dow disabled":"dow"})}updateFocus(){const n=new Date(this.picker.viewDate),s=n.getFullYear(),r=n.getMonth(),o=ze(s,r,1),l=ue(o,this.weekStart,this.weekStart);this.first=o,this.last=ze(s,r+1,0),this.start=l,this.focused=this.picker.viewDate}updateSelection(){const{dates:n,rangepicker:s}=this.picker.datepicker;this.selected=n,s&&(this.range=s.dates)}render(){if(this.today=this.todayHighlight?_e():void 0,this.prepareForRender(nn(this.focused,this.switchLabelFormat,this.locale),this.first<=this.minDate,this.last>=this.maxDate),this.weekNumbers){const n=this.weekStart,s=ue(this.first,n,n);Array.from(this.weekNumbers.weeks.children).forEach((r,o)=>{const l=Xf(s,o);r.textContent=this.getWeekNumber(l,n),o>3&&r.classList[l>this.last?"add":"remove"]("next")})}Array.from(this.grid.children).forEach((n,s)=>{const r=ui(this.start,s),o=new Date(r),l=o.getDay(),c=[];this.today===r&&c.push("today"),this.daysOfWeekHighlighted.includes(l)&&c.push("highlighted"),this.renderCell(n,o.getDate(),r,r,this,r<this.minDate||r>this.maxDate||this.daysOfWeekDisabled.includes(l),c)})}refresh(){const n=this.range||[];Array.from(this.grid.children).forEach(s=>{this.refreshCell(s,Number(s.dataset.date),this.selected,n)})}refreshFocus(){this.changeFocusedCell(Math.round((this.focused-this.start)/864e5))}}function Ka(e,n){if(!e||!e[0]||!e[1])return;const[[s,r],[o,l]]=e;if(!(s>n||o<n))return[s===n?r:-1,o===n?l:12]}class md extends cs{constructor(n){super(n,{id:1,name:"months",cellClass:"month"})}init(n,s=!0){s&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid"),this.grid.appendChild(Yt(Ie("span",12,{"data-month":r=>r}))),this.first=0,this.last=11),super.init(n)}setOptions(n){if(n.locale&&(this.monthNames=n.locale.monthsShort),"minDate"in n)if(n.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{const s=new Date(n.minDate);this.minYear=s.getFullYear(),this.minMonth=s.getMonth(),this.minDate=s.setDate(1)}if("maxDate"in n)if(n.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{const s=new Date(n.maxDate);this.maxYear=s.getFullYear(),this.maxMonth=s.getMonth(),this.maxDate=ze(this.maxYear,this.maxMonth+1,0)}n.checkDisabled&&(this.checkDisabled=this.isMinView||n.datesDisabled===null?n.checkDisabled:()=>!1),"beforeShowMonth"in n&&(this.beforeShow=typeof n.beforeShowMonth=="function"?n.beforeShowMonth:void 0)}updateFocus(){const n=new Date(this.picker.viewDate);this.year=n.getFullYear(),this.focused=n.getMonth()}updateSelection(){const{dates:n,rangepicker:s}=this.picker.datepicker;this.selected=n.reduce((r,o)=>{const l=new Date(o),c=l.getFullYear(),f=l.getMonth();return r[c]===void 0?r[c]=[f]:pi(r[c],f),r},{}),s&&s.dates&&(this.range=s.dates.map(r=>{const o=new Date(r);return isNaN(o)?void 0:[o.getFullYear(),o.getMonth()]}))}render(){this.prepareForRender(this.year,this.year<=this.minYear,this.year>=this.maxYear);const n=this.selected[this.year]||[],s=this.year<this.minYear||this.year>this.maxYear,r=this.year===this.minYear,o=this.year===this.maxYear,l=Ka(this.range,this.year);Array.from(this.grid.children).forEach((c,f)=>{const d=ie(new Date(this.year,f,1),1,this.isRangeEnd);this.renderCell(c,this.monthNames[f],f,d,{selected:n,range:l},s||r&&f<this.minMonth||o&&f>this.maxMonth)})}refresh(){const n=this.selected[this.year]||[],s=Ka(this.range,this.year)||[];Array.from(this.grid.children).forEach((r,o)=>{this.refreshCell(r,o,n,s)})}refreshFocus(){this.changeFocusedCell(this.focused)}}function vd(e){return[...e].reduce((n,s,r)=>n+=r?s:s.toUpperCase(),"")}class Ya extends cs{constructor(n,s){super(n,s)}init(n,s=!0){s&&(this.navStep=this.step*10,this.beforeShowOption=`beforeShow${vd(this.cellClass)}`,this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid"),this.grid.appendChild(Yt(Ie("span",12)))),super.init(n)}setOptions(n){if("minDate"in n&&(n.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=Pe(n.minDate,this.step),this.minDate=ze(this.minYear,0,1))),"maxDate"in n&&(n.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=Pe(n.maxDate,this.step),this.maxDate=ze(this.maxYear,11,31))),n.checkDisabled&&(this.checkDisabled=this.isMinView||n.datesDisabled===null?n.checkDisabled:()=>!1),this.beforeShowOption in n){const s=n[this.beforeShowOption];this.beforeShow=typeof s=="function"?s:void 0}}updateFocus(){const n=new Date(this.picker.viewDate),s=Pe(n,this.navStep),r=s+9*this.step;this.first=s,this.last=r,this.start=s-this.step,this.focused=Pe(n,this.step)}updateSelection(){const{dates:n,rangepicker:s}=this.picker.datepicker;this.selected=n.reduce((r,o)=>pi(r,Pe(o,this.step)),[]),s&&s.dates&&(this.range=s.dates.map(r=>{if(r!==void 0)return Pe(r,this.step)}))}render(){this.prepareForRender(`${this.first}-${this.last}`,this.first<=this.minYear,this.last>=this.maxYear),Array.from(this.grid.children).forEach((n,s)=>{const r=this.start+s*this.step,o=ie(new Date(r,0,1),2,this.isRangeEnd);n.dataset.year=r,this.renderCell(n,r,r,o,this,r<this.minYear||r>this.maxYear)})}refresh(){const n=this.range||[];Array.from(this.grid.children).forEach(s=>{this.refreshCell(s,Number(s.textContent),this.selected,n)})}refreshFocus(){this.changeFocusedCell(Math.round((this.focused-this.start)/this.step))}}function Te(e,n){const s={bubbles:!0,cancelable:!0,detail:{date:e.getDate(),viewDate:new Date(e.picker.viewDate),viewId:e.picker.currentView.id,datepicker:e}};e.element.dispatchEvent(new CustomEvent(n,s))}function Ji(e,n){const{config:s,picker:r}=e,{currentView:o,viewDate:l}=r;let c;switch(o.id){case 0:c=Ki(l,n);break;case 1:c=ci(l,n);break;default:c=ci(l,n*o.navStep)}c=Cr(c,s.minDate,s.maxDate),r.changeFocus(c).render()}function zr(e){const n=e.picker.currentView.id;n!==e.config.maxView&&e.picker.changeView(n+1).render()}function Br(e){e.setDate({clear:!0})}function Rr(e){const n=_e();e.config.todayButtonMode===1?e.setDate(n,{forceRefresh:!0,viewDate:n}):e.setFocusedDate(n,!0)}function Zr(e){const n=()=>{e.config.updateOnBlur?e.update({revert:!0}):e.refresh("input"),e.hide()},s=e.element;sn(s)?s.addEventListener("blur",n,{once:!0}):n()}function Xa(e,n){const s=e.picker,r=new Date(s.viewDate),o=s.currentView.id,l=o===1?Ki(r,n-r.getMonth()):ci(r,n-r.getFullYear());s.changeFocus(l).changeView(o-1).render()}function pd(e){zr(e)}function gd(e){Ji(e,-1)}function yd(e){Ji(e,1)}function Md(e,n){const s=Nr(n,".datepicker-cell");if(!s||s.classList.contains("disabled"))return;const{id:r,isMinView:o}=e.picker.currentView,l=s.dataset;o?e.setDate(Number(l.date)):r===1?Xa(e,Number(l.month)):Xa(e,Number(l.year))}function wd(e){e.preventDefault()}const Un=["left","top","right","bottom"].reduce((e,n)=>(e[n]=`datepicker-orient-${n}`,e),{}),Ja=e=>e&&`${e}px`;function Qa(e,n){if("title"in n&&(n.title?(e.controls.title.textContent=n.title,ri(e.controls.title)):(e.controls.title.textContent="",ai(e.controls.title))),n.prevArrow){const s=e.controls.prevButton;Yi(s),n.prevArrow.forEach(r=>{s.appendChild(r.cloneNode(!0))})}if(n.nextArrow){const s=e.controls.nextButton;Yi(s),n.nextArrow.forEach(r=>{s.appendChild(r.cloneNode(!0))})}if(n.locale&&(e.controls.todayButton.textContent=n.locale.today,e.controls.clearButton.textContent=n.locale.clear),"todayButton"in n&&(n.todayButton?ri(e.controls.todayButton):ai(e.controls.todayButton)),"minDate"in n||"maxDate"in n){const{minDate:s,maxDate:r}=e.datepicker.config;e.controls.todayButton.disabled=!hs(_e(),s,r)}"clearButton"in n&&(n.clearButton?ri(e.controls.clearButton):ai(e.controls.clearButton))}function tr(e){const{dates:n,config:s,rangeSideIndex:r}=e,o=n.length>0?os(n):ie(s.defaultViewDate,s.pickLevel,r);return Cr(o,s.minDate,s.maxDate)}function er(e,n){!("_oldViewDate"in e)&&n!==e.viewDate&&(e._oldViewDate=e.viewDate),e.viewDate=n;const{id:s,year:r,first:o,last:l}=e.currentView,c=new Date(n).getFullYear();switch(s){case 0:return n<o||n>l;case 1:return c!==r;default:return c<o||c>l}}function Vn(e){return window.getComputedStyle(e).direction}function Fr(e){const n=Ar(e);if(!(n===document.body||!n))return window.getComputedStyle(n).overflow!=="visible"?n:Fr(n)}class xd{constructor(n){const{config:s,inputField:r}=this.datepicker=n,o=cd.replace(/%buttonClass%/g,s.buttonClass),l=this.element=Yt(o).firstChild,[c,f,d]=l.firstChild.children,m=c.firstElementChild,[g,v,x]=c.lastElementChild.children,[b,P]=d.firstChild.children,M={title:m,prevButton:g,viewSwitch:v,nextButton:x,todayButton:b,clearButton:P};this.main=f,this.controls=M;const C=r?"dropdown":"inline";l.classList.add(`datepicker-${C}`),Qa(this,s),this.viewDate=tr(n),ts(n,[[l,"mousedown",wd],[f,"click",Md.bind(null,n)],[M.viewSwitch,"click",pd.bind(null,n)],[M.prevButton,"click",gd.bind(null,n)],[M.nextButton,"click",yd.bind(null,n)],[M.todayButton,"click",Rr.bind(null,n)],[M.clearButton,"click",Br.bind(null,n)]]),this.views=[new _d(this),new md(this),new Ya(this,{id:2,name:"years",cellClass:"year",step:1}),new Ya(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[s.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),s.container?s.container.appendChild(this.element):r.after(this.element)}setOptions(n){Qa(this,n),this.views.forEach(s=>{s.init(n,!1)}),this.currentView.render()}detach(){this.element.remove()}show(){if(this.active)return;const{datepicker:n,element:s}=this,r=n.inputField;if(r){const o=Vn(r);o!==Vn(Ar(s))?s.dir=o:s.dir&&s.removeAttribute("dir"),this.place(),s.classList.add("active"),n.config.disableTouchKeyboard&&r.blur()}else s.classList.add("active");this.active=!0,Te(n,"show")}hide(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active"),this.active=!1,Te(this.datepicker,"hide"))}place(){const{classList:n,style:s}=this.element;s.display="block";const{width:r,height:o}=this.element.getBoundingClientRect(),l=this.element.offsetParent;s.display="";const{config:c,inputField:f}=this.datepicker,{left:d,top:m,right:g,bottom:v,width:x,height:b}=f.getBoundingClientRect();let{x:P,y:M}=c.orientation,C=d,O=m;if(l===document.body||!l)C+=window.scrollX,O+=window.scrollY;else{const Z=l.getBoundingClientRect();C-=Z.left-l.scrollLeft,O-=Z.top-l.scrollTop}const I=Fr(f);let N=0,$=0,{clientWidth:B,clientHeight:E}=document.documentElement;if(I){const Z=I.getBoundingClientRect();Z.top>0&&($=Z.top),Z.left>0&&(N=Z.left),Z.right<B&&(B=Z.right),Z.bottom<E&&(E=Z.bottom)}let q=0;P==="auto"&&(d<N?(P="left",q=N-d):d+r>B?(P="right",B<g&&(q=B-g)):Vn(f)==="rtl"?P=g-r<N?"left":"right":P="left"),P==="right"&&(C+=x-r),C+=q,M==="auto"&&(m-o>$?M=v+o>E?"top":"bottom":M="bottom"),M==="top"?O-=o:O+=b,n.remove(...Object.values(Un)),n.add(Un[P],Un[M]),s.left=Ja(C),s.top=Ja(O)}setViewSwitchLabel(n){this.controls.viewSwitch.textContent=n}setPrevButtonDisabled(n){this.controls.prevButton.disabled=n}setNextButtonDisabled(n){this.controls.nextButton.disabled=n}changeView(n){const s=this.currentView;return n!==s.id&&(this._oldView||(this._oldView=s),this.currentView=this.views[n],this._renderMethod="render"),this}changeFocus(n){return this._renderMethod=er(this,n)?"render":"refreshFocus",this.views.forEach(s=>{s.updateFocus()}),this}update(n=void 0){const s=n===void 0?tr(this.datepicker):n;return this._renderMethod=er(this,s)?"render":"refresh",this.views.forEach(r=>{r.updateFocus(),r.updateSelection()}),this}render(n=!0){const{currentView:s,datepicker:r,_oldView:o}=this,l=new Date(this._oldViewDate),c=n&&this._renderMethod||"render";if(delete this._oldView,delete this._oldViewDate,delete this._renderMethod,s[c](),o&&(this.main.replaceChild(s.element,o.element),Te(r,"changeView")),!isNaN(l)){const f=new Date(this.viewDate);f.getFullYear()!==l.getFullYear()&&Te(r,"changeYear"),f.getMonth()!==l.getMonth()&&Te(r,"changeMonth")}}}function qr(e,n,s,r,o,l){if(hs(e,o,l)){if(r(e)){const c=n(e,s);return qr(c,n,s,r,o,l)}return e}}function bd(e,n,s){const r=e.picker,o=r.currentView,l=o.step||1;let c=r.viewDate,f;switch(o.id){case 0:c=ui(c,s?n*7:n),f=ui;break;case 1:c=Ki(c,s?n*4:n),f=Ki;break;default:c=ci(c,n*(s?4:1)*l),f=ci}c=qr(c,f,n<0?-l:l,d=>o.disabled.includes(d),o.minDate,o.maxDate),c!==void 0&&r.changeFocus(c).render()}function Pd(e,n){const{config:s,picker:r,editMode:o}=e,l=r.active,{key:c,altKey:f,shiftKey:d}=n,m=n.ctrlKey||n.metaKey,g=()=>{n.preventDefault(),n.stopPropagation()};if(c==="Tab"){Zr(e);return}if(c==="Enter"){if(!l)e.update();else if(o)e.exitEditMode({update:!0,autohide:s.autohide});else{const M=r.currentView;M.isMinView?e.setDate(r.viewDate):(r.changeView(M.id-1).render(),g())}return}const v=s.shortcutKeys,x={key:c,ctrlOrMetaKey:m,altKey:f,shiftKey:d},b=Object.keys(v).find(M=>{const C=v[M];return!Object.keys(C).find(O=>C[O]!==x[O])});if(b){let M;if(b==="toggle"?M=b:o?b==="exitEditMode"&&(M=b):l?b==="hide"?M=b:b==="prevButton"?M=[Ji,[e,-1]]:b==="nextButton"?M=[Ji,[e,1]]:b==="viewSwitch"?M=[zr,[e]]:s.clearButton&&b==="clearButton"?M=[Br,[e]]:s.todayButton&&b==="todayButton"&&(M=[Rr,[e]]):b==="show"&&(M=b),M){Array.isArray(M)?M[0].apply(null,M[1]):e[M](),g();return}}if(!l||o)return;const P=(M,C)=>{d||m||f?e.enterEditMode():(bd(e,M,C),n.preventDefault())};c==="ArrowLeft"?P(-1,!1):c==="ArrowRight"?P(1,!1):c==="ArrowUp"?P(-1,!0):c==="ArrowDown"?P(1,!0):(c==="Backspace"||c==="Delete"||c&&c.length===1&&!m)&&e.enterEditMode()}function Ld(e){e.config.showOnFocus&&!e._showing&&e.show()}function Td(e,n){const s=n.target;(e.picker.active||e.config.showOnClick)&&(s._active=sn(s),s._clicking=setTimeout(()=>{delete s._active,delete s._clicking},2e3))}function Cd(e,n){const s=n.target;s._clicking&&(clearTimeout(s._clicking),delete s._clicking,s._active&&e.enterEditMode(),delete s._active,e.config.showOnClick&&e.show())}function Sd(e,n){n.clipboardData.types.includes("text/plain")&&e.enterEditMode()}function Ed(e,n){const{element:s,picker:r}=e;if(!r.active&&!sn(s))return;const o=r.element;Nr(n,l=>l===s||l===o)||Zr(e)}function Wr(e,n){return e.map(s=>nn(s,n.format,n.locale)).join(n.dateDelimiter)}function Gr(e,n,s=!1){if(n.length===0)return s?[]:void 0;const{config:r,dates:o,rangeSideIndex:l}=e,{pickLevel:c,maxNumberOfDates:f}=r;let d=n.reduce((m,g)=>{let v=de(g,r.format,r.locale);return v===void 0||(v=ie(v,c,l),hs(v,r.minDate,r.maxDate)&&!m.includes(v)&&!r.checkDisabled(v,c)&&(c>0||!r.daysOfWeekDisabled.includes(new Date(v).getDay()))&&m.push(v)),m},[]);if(d.length!==0)return r.multidate&&!s&&(d=d.reduce((m,g)=>(o.includes(g)||m.push(g),m),o.filter(m=>!d.includes(m)))),f&&d.length>f?d.slice(f*-1):d}function Qi(e,n=3,s=!0,r=void 0){const{config:o,picker:l,inputField:c}=e;if(n&2){const f=l.active?o.pickLevel:o.startView;l.update(r).changeView(f).render(s)}n&1&&c&&(c.value=Wr(e.dates,o))}function ir(e,n,s){const r=e.config;let{clear:o,render:l,autohide:c,revert:f,forceRefresh:d,viewDate:m}=s;l===void 0&&(l=!0),l?c===void 0&&(c=r.autohide):c=d=!1,m=de(m,r.format,r.locale);const g=Gr(e,n,o);!g&&!f||(g&&g.toString()!==e.dates.toString()?(e.dates=g,Qi(e,l?3:1,!0,m),Te(e,"changeDate")):Qi(e,d?3:1,!0,m),c&&e.hide())}function nr(e,n){return n?s=>nn(s,n,e.config.locale):s=>new Date(s)}class Od{constructor(n,s={},r=void 0){n.datepicker=this,this.element=n,this.dates=[];const o=this.config=Object.assign({buttonClass:s.buttonClass&&String(s.buttonClass)||"button",container:null,defaultViewDate:_e(),maxDate:void 0,minDate:void 0},$n(us,this));let l;if(n.tagName==="INPUT"?(l=this.inputField=n,l.classList.add("datepicker-input"),s.container&&(o.container=s.container instanceof HTMLElement?s.container:document.querySelector(s.container))):o.container=n,r){const g=r.inputs.indexOf(l),v=r.datepickers;if(g<0||g>1||!Array.isArray(v))throw Error("Invalid rangepicker object.");v[g]=this,this.rangepicker=r,this.rangeSideIndex=g}this._options=s,Object.assign(o,$n(s,this)),o.shortcutKeys=ud(s.shortcutKeys||{});const c=qa(n.value||n.dataset.date,o.dateDelimiter);delete n.dataset.date;const f=Gr(this,c);f&&f.length>0&&(this.dates=f),l&&(l.value=Wr(this.dates,o));const d=this.picker=new xd(this),m=[n,"keydown",Pd.bind(null,this)];l?ts(this,[m,[l,"focus",Ld.bind(null,this)],[l,"mousedown",Td.bind(null,this)],[l,"click",Cd.bind(null,this)],[l,"paste",Sd.bind(null,this)],[document,"mousedown",Ed.bind(null,this)],[window,"resize",d.place.bind(d)]]):(ts(this,[m]),this.show())}static formatDate(n,s,r){return nn(n,s,r&&ti[r]||ti.en)}static parseDate(n,s,r){return de(n,s,r&&ti[r]||ti.en)}static get locales(){return ti}get active(){return!!(this.picker&&this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(n){const s=$n(n,this);Object.assign(this._options,n),Object.assign(this.config,s),this.picker.setOptions(s),Qi(this,3)}show(){if(this.inputField){const{config:n,inputField:s}=this;if(s.disabled||s.readOnly&&!n.enableOnReadonly)return;!sn(s)&&!n.disableTouchKeyboard&&(this._showing=!0,s.focus(),delete this._showing)}this.picker.show()}hide(){this.inputField&&(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}toggle(){this.picker.active?this.inputField&&this.picker.hide():this.show()}destroy(){this.hide(),od(this),this.picker.detach();const n=this.element;return n.classList.remove("datepicker-input"),delete n.datepicker,this}getDate(n=void 0){const s=nr(this,n);if(this.config.multidate)return this.dates.map(s);if(this.dates.length>0)return s(this.dates[0])}setDate(...n){const s=[...n],r={},o=os(n);o&&typeof o=="object"&&!Array.isArray(o)&&!(o instanceof Date)&&Object.assign(r,s.pop());const l=Array.isArray(s[0])?s[0]:s;ir(this,l,r)}update(n=void 0){if(!this.inputField)return;const s=Object.assign(n||{},{clear:!0,render:!0,viewDate:void 0}),r=qa(this.inputField.value,this.config.dateDelimiter);ir(this,r,s)}getFocusedDate(n=void 0){return nr(this,n)(this.picker.viewDate)}setFocusedDate(n,s=!1){const{config:r,picker:o,active:l,rangeSideIndex:c}=this,f=r.pickLevel,d=de(n,r.format,r.locale);d!==void 0&&(o.changeFocus(ie(d,f,c)),l&&s&&o.changeView(f),o.render())}refresh(n=void 0,s=!1){n&&typeof n!="string"&&(s=n,n=void 0);let r;n==="picker"?r=2:n==="input"?r=1:r=3,Qi(this,r,!s)}enterEditMode(){const n=this.inputField;!n||n.readOnly||!this.picker.active||this.editMode||(this.editMode=!0,n.classList.add("in-edit"))}exitEditMode(n=void 0){if(!this.inputField||!this.editMode)return;const s=Object.assign({update:!1},n);delete this.editMode,this.inputField.classList.remove("in-edit"),s.update&&this.update(s)}}var es={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(s,r){r(n)})(vh,function(s){var r="1.9.4";function o(t){var i,a,h,u;for(a=1,h=arguments.length;a<h;a++){u=arguments[a];for(i in u)t[i]=u[i]}return t}var l=Object.create||function(){function t(){}return function(i){return t.prototype=i,new t}}();function c(t,i){var a=Array.prototype.slice;if(t.bind)return t.bind.apply(t,a.call(arguments,1));var h=a.call(arguments,2);return function(){return t.apply(i,h.length?h.concat(a.call(arguments)):arguments)}}var f=0;function d(t){return"_leaflet_id"in t||(t._leaflet_id=++f),t._leaflet_id}function m(t,i,a){var h,u,_,p;return p=function(){h=!1,u&&(_.apply(a,u),u=!1)},_=function(){h?u=arguments:(t.apply(a,arguments),setTimeout(p,i),h=!0)},_}function g(t,i,a){var h=i[1],u=i[0],_=h-u;return t===h&&a?t:((t-u)%_+_)%_+u}function v(){return!1}function x(t,i){if(i===!1)return t;var a=Math.pow(10,i===void 0?6:i);return Math.round(t*a)/a}function b(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function P(t){return b(t).split(/\s+/)}function M(t,i){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?l(t.options):{});for(var a in i)t.options[a]=i[a];return t.options}function C(t,i,a){var h=[];for(var u in t)h.push(encodeURIComponent(a?u.toUpperCase():u)+"="+encodeURIComponent(t[u]));return(!i||i.indexOf("?")===-1?"?":"&")+h.join("&")}var O=/\{ *([\w_ -]+) *\}/g;function I(t,i){return t.replace(O,function(a,h){var u=i[h];if(u===void 0)throw new Error("No value provided for variable "+a);return typeof u=="function"&&(u=u(i)),u})}var N=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function $(t,i){for(var a=0;a<t.length;a++)if(t[a]===i)return a;return-1}var B="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function E(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var q=0;function Z(t){var i=+new Date,a=Math.max(0,16-(i-q));return q=i+a,window.setTimeout(t,a)}var ut=window.requestAnimationFrame||E("RequestAnimationFrame")||Z,Lt=window.cancelAnimationFrame||E("CancelAnimationFrame")||E("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function st(t,i,a){if(a&&ut===Z)t.call(i);else return ut.call(window,c(t,i))}function dt(t){t&&Lt.call(window,t)}var an={__proto__:null,extend:o,create:l,bind:c,get lastId(){return f},stamp:d,throttle:m,wrapNum:g,falseFn:v,formatNum:x,trim:b,splitWords:P,setOptions:M,getParamString:C,template:I,isArray:N,indexOf:$,emptyImageUrl:B,requestFn:ut,cancelFn:Lt,requestAnimFrame:st,cancelAnimFrame:dt};function Gt(){}Gt.extend=function(t){var i=function(){M(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},a=i.__super__=this.prototype,h=l(a);h.constructor=i,i.prototype=h;for(var u in this)Object.prototype.hasOwnProperty.call(this,u)&&u!=="prototype"&&u!=="__super__"&&(i[u]=this[u]);return t.statics&&o(i,t.statics),t.includes&&(Hr(t.includes),o.apply(null,[h].concat(t.includes))),o(h,t),delete h.statics,delete h.includes,h.options&&(h.options=a.options?l(a.options):{},o(h.options,t.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){a.callInitHooks&&a.callInitHooks.call(this),this._initHooksCalled=!0;for(var _=0,p=h._initHooks.length;_<p;_++)h._initHooks[_].call(this)}},i},Gt.include=function(t){var i=this.prototype.options;return o(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},Gt.mergeOptions=function(t){return o(this.prototype.options,t),this},Gt.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),a=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(a),this};function Hr(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=N(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Tt={on:function(t,i,a){if(typeof t=="object")for(var h in t)this._on(h,t[h],i);else{t=P(t);for(var u=0,_=t.length;u<_;u++)this._on(t[u],i,a)}return this},off:function(t,i,a){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var h in t)this._off(h,t[h],i);else{t=P(t);for(var u=arguments.length===1,_=0,p=t.length;_<p;_++)u?this._off(t[_]):this._off(t[_],i,a)}return this},_on:function(t,i,a,h){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}if(this._listens(t,i,a)===!1){a===this&&(a=void 0);var u={fn:i,ctx:a};h&&(u.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(u)}},_off:function(t,i,a){var h,u,_;if(this._events&&(h=this._events[t],!!h)){if(arguments.length===1){if(this._firingCount)for(u=0,_=h.length;u<_;u++)h[u].fn=v;delete this._events[t];return}if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}var p=this._listens(t,i,a);if(p!==!1){var y=h[p];this._firingCount&&(y.fn=v,this._events[t]=h=h.slice()),h.splice(p,1)}}},fire:function(t,i,a){if(!this.listens(t,a))return this;var h=o({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var u=this._events[t];if(u){this._firingCount=this._firingCount+1||1;for(var _=0,p=u.length;_<p;_++){var y=u[_],w=y.fn;y.once&&this.off(t,w,y.ctx),w.call(y.ctx||this,h)}this._firingCount--}}return a&&this._propagateEvent(h),this},listens:function(t,i,a,h){typeof t!="string"&&console.warn('"string" type argument expected');var u=i;typeof i!="function"&&(h=!!i,u=void 0,a=void 0);var _=this._events&&this._events[t];if(_&&_.length&&this._listens(t,u,a)!==!1)return!0;if(h){for(var p in this._eventParents)if(this._eventParents[p].listens(t,i,a,h))return!0}return!1},_listens:function(t,i,a){if(!this._events)return!1;var h=this._events[t]||[];if(!i)return!!h.length;a===this&&(a=void 0);for(var u=0,_=h.length;u<_;u++)if(h[u].fn===i&&h[u].ctx===a)return u;return!1},once:function(t,i,a){if(typeof t=="object")for(var h in t)this._on(h,t[h],i,!0);else{t=P(t);for(var u=0,_=t.length;u<_;u++)this._on(t[u],i,a,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[d(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[d(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,o({layer:t.target,propagatedFrom:t.target},t),!0)}};Tt.addEventListener=Tt.on,Tt.removeEventListener=Tt.clearAllEventListeners=Tt.off,Tt.addOneTimeEventListener=Tt.once,Tt.fireEvent=Tt.fire,Tt.hasEventListeners=Tt.listens;var Re=Gt.extend(Tt);function G(t,i,a){this.x=a?Math.round(t):t,this.y=a?Math.round(i):i}var fs=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(t){return this.clone()._add(W(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(W(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new G(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new G(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=fs(this.x),this.y=fs(this.y),this},distanceTo:function(t){t=W(t);var i=t.x-this.x,a=t.y-this.y;return Math.sqrt(i*i+a*a)},equals:function(t){return t=W(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=W(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function W(t,i,a){return t instanceof G?t:N(t)?new G(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new G(t.x,t.y):new G(t,i,a)}function et(t,i){if(t)for(var a=i?[t,i]:t,h=0,u=a.length;h<u;h++)this.extend(a[h])}et.prototype={extend:function(t){var i,a;if(!t)return this;if(t instanceof G||typeof t[0]=="number"||"x"in t)i=a=W(t);else if(t=Mt(t),i=t.min,a=t.max,!i||!a)return this;return!this.min&&!this.max?(this.min=i.clone(),this.max=a.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)),this},getCenter:function(t){return W((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return W(this.min.x,this.max.y)},getTopRight:function(){return W(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,a;return typeof t[0]=="number"||t instanceof G?t=W(t):t=Mt(t),t instanceof et?(i=t.min,a=t.max):i=a=t,i.x>=this.min.x&&a.x<=this.max.x&&i.y>=this.min.y&&a.y<=this.max.y},intersects:function(t){t=Mt(t);var i=this.min,a=this.max,h=t.min,u=t.max,_=u.x>=i.x&&h.x<=a.x,p=u.y>=i.y&&h.y<=a.y;return _&&p},overlaps:function(t){t=Mt(t);var i=this.min,a=this.max,h=t.min,u=t.max,_=u.x>i.x&&h.x<a.x,p=u.y>i.y&&h.y<a.y;return _&&p},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var i=this.min,a=this.max,h=Math.abs(i.x-a.x)*t,u=Math.abs(i.y-a.y)*t;return Mt(W(i.x-h,i.y-u),W(a.x+h,a.y+u))},equals:function(t){return t?(t=Mt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Mt(t,i){return!t||t instanceof et?t:new et(t,i)}function wt(t,i){if(t)for(var a=i?[t,i]:t,h=0,u=a.length;h<u;h++)this.extend(a[h])}wt.prototype={extend:function(t){var i=this._southWest,a=this._northEast,h,u;if(t instanceof Q)h=t,u=t;else if(t instanceof wt){if(h=t._southWest,u=t._northEast,!h||!u)return this}else return t?this.extend(j(t)||ot(t)):this;return!i&&!a?(this._southWest=new Q(h.lat,h.lng),this._northEast=new Q(u.lat,u.lng)):(i.lat=Math.min(h.lat,i.lat),i.lng=Math.min(h.lng,i.lng),a.lat=Math.max(u.lat,a.lat),a.lng=Math.max(u.lng,a.lng)),this},pad:function(t){var i=this._southWest,a=this._northEast,h=Math.abs(i.lat-a.lat)*t,u=Math.abs(i.lng-a.lng)*t;return new wt(new Q(i.lat-h,i.lng-u),new Q(a.lat+h,a.lng+u))},getCenter:function(){return new Q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Q(this.getNorth(),this.getWest())},getSouthEast:function(){return new Q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof Q||"lat"in t?t=j(t):t=ot(t);var i=this._southWest,a=this._northEast,h,u;return t instanceof wt?(h=t.getSouthWest(),u=t.getNorthEast()):h=u=t,h.lat>=i.lat&&u.lat<=a.lat&&h.lng>=i.lng&&u.lng<=a.lng},intersects:function(t){t=ot(t);var i=this._southWest,a=this._northEast,h=t.getSouthWest(),u=t.getNorthEast(),_=u.lat>=i.lat&&h.lat<=a.lat,p=u.lng>=i.lng&&h.lng<=a.lng;return _&&p},overlaps:function(t){t=ot(t);var i=this._southWest,a=this._northEast,h=t.getSouthWest(),u=t.getNorthEast(),_=u.lat>i.lat&&h.lat<a.lat,p=u.lng>i.lng&&h.lng<a.lng;return _&&p},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return t?(t=ot(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ot(t,i){return t instanceof wt?t:new wt(t,i)}function Q(t,i,a){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,a!==void 0&&(this.alt=+a)}Q.prototype={equals:function(t,i){if(!t)return!1;t=j(t);var a=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return a<=(i===void 0?1e-9:i)},toString:function(t){return"LatLng("+x(this.lat,t)+", "+x(this.lng,t)+")"},distanceTo:function(t){return Jt.distance(this,j(t))},wrap:function(){return Jt.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,a=i/Math.cos(Math.PI/180*this.lat);return ot([this.lat-i,this.lng-a],[this.lat+i,this.lng+a])},clone:function(){return new Q(this.lat,this.lng,this.alt)}};function j(t,i,a){return t instanceof Q?t:N(t)&&typeof t[0]!="object"?t.length===3?new Q(t[0],t[1],t[2]):t.length===2?new Q(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new Q(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===void 0?null:new Q(t,i,a)}var Ht={latLngToPoint:function(t,i){var a=this.projection.project(t),h=this.scale(i);return this.transformation._transform(a,h)},pointToLatLng:function(t,i){var a=this.scale(i),h=this.transformation.untransform(t,a);return this.projection.unproject(h)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,a=this.scale(t),h=this.transformation.transform(i.min,a),u=this.transformation.transform(i.max,a);return new et(h,u)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?g(t.lng,this.wrapLng,!0):t.lng,a=this.wrapLat?g(t.lat,this.wrapLat,!0):t.lat,h=t.alt;return new Q(a,i,h)},wrapLatLngBounds:function(t){var i=t.getCenter(),a=this.wrapLatLng(i),h=i.lat-a.lat,u=i.lng-a.lng;if(h===0&&u===0)return t;var _=t.getSouthWest(),p=t.getNorthEast(),y=new Q(_.lat-h,_.lng-u),w=new Q(p.lat-h,p.lng-u);return new wt(y,w)}},Jt=o({},Ht,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var a=Math.PI/180,h=t.lat*a,u=i.lat*a,_=Math.sin((i.lat-t.lat)*a/2),p=Math.sin((i.lng-t.lng)*a/2),y=_*_+Math.cos(h)*Math.cos(u)*p*p,w=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return this.R*w}}),ds=6378137,rn={R:ds,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,a=this.MAX_LATITUDE,h=Math.max(Math.min(a,t.lat),-a),u=Math.sin(h*i);return new G(this.R*t.lng*i,this.R*Math.log((1+u)/(1-u))/2)},unproject:function(t){var i=180/Math.PI;return new Q((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:function(){var t=ds*Math.PI;return new et([-t,-t],[t,t])}()};function on(t,i,a,h){if(N(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=i,this._c=a,this._d=h}on.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new G((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};function Ze(t,i,a,h){return new on(t,i,a,h)}var hn=o({},Jt,{code:"EPSG:3857",projection:rn,transformation:function(){var t=.5/(Math.PI*rn.R);return Ze(t,.5,-t,.5)}()}),$r=o({},hn,{code:"EPSG:900913"});function _s(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ms(t,i){var a="",h,u,_,p,y,w;for(h=0,_=t.length;h<_;h++){for(y=t[h],u=0,p=y.length;u<p;u++)w=y[u],a+=(u?"L":"M")+w.x+" "+w.y;a+=i?z.svg?"z":"x":""}return a||"M0 0"}var ln=document.documentElement.style,gi="ActiveXObject"in window,Ur=gi&&!document.addEventListener,vs="msLaunchUri"in navigator&&!("documentMode"in document),un=zt("webkit"),ps=zt("android"),gs=zt("android 2")||zt("android 3"),Vr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),jr=ps&&zt("Google")&&Vr<537&&!("AudioNode"in window),cn=!!window.opera,ys=!vs&&zt("chrome"),Ms=zt("gecko")&&!un&&!cn&&!gi,Kr=!ys&&zt("safari"),ws=zt("phantom"),xs="OTransition"in ln,Yr=navigator.platform.indexOf("Win")===0,bs=gi&&"transition"in ln,fn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!gs,Ps="MozPerspective"in ln,Xr=!window.L_DISABLE_3D&&(bs||fn||Ps)&&!xs&&!ws,Fe=typeof orientation<"u"||zt("mobile"),Jr=Fe&&un,Qr=Fe&&fn,Ls=!window.PointerEvent&&window.MSPointerEvent,Ts=!!(window.PointerEvent||Ls),Cs="ontouchstart"in window||!!window.TouchEvent,to=!window.L_NO_TOUCH&&(Cs||Ts),eo=Fe&&cn,io=Fe&&Ms,no=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,so=function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",v,i),window.removeEventListener("testPassiveEventSupport",v,i)}catch{}return t}(),ao=function(){return!!document.createElement("canvas").getContext}(),dn=!!(document.createElementNS&&_s("svg").createSVGRect),ro=!!dn&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),oo=!dn&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}}(),ho=navigator.platform.indexOf("Mac")===0,lo=navigator.platform.indexOf("Linux")===0;function zt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var z={ie:gi,ielt9:Ur,edge:vs,webkit:un,android:ps,android23:gs,androidStock:jr,opera:cn,chrome:ys,gecko:Ms,safari:Kr,phantom:ws,opera12:xs,win:Yr,ie3d:bs,webkit3d:fn,gecko3d:Ps,any3d:Xr,mobile:Fe,mobileWebkit:Jr,mobileWebkit3d:Qr,msPointer:Ls,pointer:Ts,touch:to,touchNative:Cs,mobileOpera:eo,mobileGecko:io,retina:no,passiveEvents:so,canvas:ao,svg:dn,vml:oo,inlineSvg:ro,mac:ho,linux:lo},Ss=z.msPointer?"MSPointerDown":"pointerdown",Es=z.msPointer?"MSPointerMove":"pointermove",ks=z.msPointer?"MSPointerUp":"pointerup",Os=z.msPointer?"MSPointerCancel":"pointercancel",_n={touchstart:Ss,touchmove:Es,touchend:ks,touchcancel:Os},As={touchstart:vo,touchmove:yi,touchend:yi,touchcancel:yi},me={},Ds=!1;function uo(t,i,a){return i==="touchstart"&&mo(),As[i]?(a=As[i].bind(this,a),t.addEventListener(_n[i],a,!1),a):(console.warn("wrong event specified:",i),v)}function co(t,i,a){if(!_n[i]){console.warn("wrong event specified:",i);return}t.removeEventListener(_n[i],a,!1)}function fo(t){me[t.pointerId]=t}function _o(t){me[t.pointerId]&&(me[t.pointerId]=t)}function Ns(t){delete me[t.pointerId]}function mo(){Ds||(document.addEventListener(Ss,fo,!0),document.addEventListener(Es,_o,!0),document.addEventListener(ks,Ns,!0),document.addEventListener(Os,Ns,!0),Ds=!0)}function yi(t,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var a in me)i.touches.push(me[a]);i.changedTouches=[i],t(i)}}function vo(t,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&_t(i),yi(t,i)}function po(t){var i={},a,h;for(h in t)a=t[h],i[h]=a&&a.bind?a.bind(t):a;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var go=200;function yo(t,i){t.addEventListener("dblclick",i);var a=0,h;function u(_){if(_.detail!==1){h=_.detail;return}if(!(_.pointerType==="mouse"||_.sourceCapabilities&&!_.sourceCapabilities.firesTouchEvents)){var p=Zs(_);if(!(p.some(function(w){return w instanceof HTMLLabelElement&&w.attributes.for})&&!p.some(function(w){return w instanceof HTMLInputElement||w instanceof HTMLSelectElement}))){var y=Date.now();y-a<=go?(h++,h===2&&i(po(_))):h=1,a=y}}}return t.addEventListener("click",u),{dblclick:i,simDblclick:u}}function Mo(t,i){t.removeEventListener("dblclick",i.dblclick),t.removeEventListener("click",i.simDblclick)}var mn=xi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),qe=xi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Is=qe==="webkitTransition"||qe==="OTransition"?qe+"End":"transitionend";function zs(t){return typeof t=="string"?document.getElementById(t):t}function We(t,i){var a=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!a||a==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(t,null);a=h?h[i]:null}return a==="auto"?null:a}function Y(t,i,a){var h=document.createElement(t);return h.className=i||"",a&&a.appendChild(h),h}function it(t){var i=t.parentNode;i&&i.removeChild(t)}function Mi(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ve(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function pe(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function vn(t,i){if(t.classList!==void 0)return t.classList.contains(i);var a=wi(t);return a.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(a)}function U(t,i){if(t.classList!==void 0)for(var a=P(i),h=0,u=a.length;h<u;h++)t.classList.add(a[h]);else if(!vn(t,i)){var _=wi(t);pn(t,(_?_+" ":"")+i)}}function at(t,i){t.classList!==void 0?t.classList.remove(i):pn(t,b((" "+wi(t)+" ").replace(" "+i+" "," ")))}function pn(t,i){t.className.baseVal===void 0?t.className=i:t.className.baseVal=i}function wi(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Ct(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&wo(t,i)}function wo(t,i){var a=!1,h="DXImageTransform.Microsoft.Alpha";try{a=t.filters.item(h)}catch{if(i===1)return}i=Math.round(i*100),a?(a.Enabled=i!==100,a.Opacity=i):t.style.filter+=" progid:"+h+"(opacity="+i+")"}function xi(t){for(var i=document.documentElement.style,a=0;a<t.length;a++)if(t[a]in i)return t[a];return!1}function ae(t,i,a){var h=i||new G(0,0);t.style[mn]=(z.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(a?" scale("+a+")":"")}function ht(t,i){t._leaflet_pos=i,z.any3d?ae(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function re(t){return t._leaflet_pos||new G(0,0)}var Ge,He,gn;if("onselectstart"in document)Ge=function(){H(window,"selectstart",_t)},He=function(){tt(window,"selectstart",_t)};else{var $e=xi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ge=function(){if($e){var t=document.documentElement.style;gn=t[$e],t[$e]="none"}},He=function(){$e&&(document.documentElement.style[$e]=gn,gn=void 0)}}function yn(){H(window,"dragstart",_t)}function Mn(){tt(window,"dragstart",_t)}var bi,wn;function xn(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Pi(),bi=t,wn=t.style.outlineStyle,t.style.outlineStyle="none",H(window,"keydown",Pi))}function Pi(){bi&&(bi.style.outlineStyle=wn,bi=void 0,wn=void 0,tt(window,"keydown",Pi))}function Bs(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function bn(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var xo={__proto__:null,TRANSFORM:mn,TRANSITION:qe,TRANSITION_END:Is,get:zs,getStyle:We,create:Y,remove:it,empty:Mi,toFront:ve,toBack:pe,hasClass:vn,addClass:U,removeClass:at,setClass:pn,getClass:wi,setOpacity:Ct,testProp:xi,setTransform:ae,setPosition:ht,getPosition:re,get disableTextSelection(){return Ge},get enableTextSelection(){return He},disableImageDrag:yn,enableImageDrag:Mn,preventOutline:xn,restoreOutline:Pi,getSizedParentNode:Bs,getScale:bn};function H(t,i,a,h){if(i&&typeof i=="object")for(var u in i)Ln(t,u,i[u],a);else{i=P(i);for(var _=0,p=i.length;_<p;_++)Ln(t,i[_],a,h)}return this}var Bt="_leaflet_events";function tt(t,i,a,h){if(arguments.length===1)Rs(t),delete t[Bt];else if(i&&typeof i=="object")for(var u in i)Tn(t,u,i[u],a);else if(i=P(i),arguments.length===2)Rs(t,function(y){return $(i,y)!==-1});else for(var _=0,p=i.length;_<p;_++)Tn(t,i[_],a,h);return this}function Rs(t,i){for(var a in t[Bt]){var h=a.split(/\d/)[0];(!i||i(h))&&Tn(t,h,null,null,a)}}var Pn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ln(t,i,a,h){var u=i+d(a)+(h?"_"+d(h):"");if(t[Bt]&&t[Bt][u])return this;var _=function(y){return a.call(h||t,y||window.event)},p=_;!z.touchNative&&z.pointer&&i.indexOf("touch")===0?_=uo(t,i,_):z.touch&&i==="dblclick"?_=yo(t,_):"addEventListener"in t?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?t.addEventListener(Pn[i]||i,_,z.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(_=function(y){y=y||window.event,Sn(t,y)&&p(y)},t.addEventListener(Pn[i],_,!1)):t.addEventListener(i,p,!1):t.attachEvent("on"+i,_),t[Bt]=t[Bt]||{},t[Bt][u]=_}function Tn(t,i,a,h,u){u=u||i+d(a)+(h?"_"+d(h):"");var _=t[Bt]&&t[Bt][u];if(!_)return this;!z.touchNative&&z.pointer&&i.indexOf("touch")===0?co(t,i,_):z.touch&&i==="dblclick"?Mo(t,_):"removeEventListener"in t?t.removeEventListener(Pn[i]||i,_,!1):t.detachEvent("on"+i,_),t[Bt][u]=null}function oe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Cn(t){return Ln(t,"wheel",oe),this}function Ue(t){return H(t,"mousedown touchstart dblclick contextmenu",oe),t._leaflet_disable_click=!0,this}function _t(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function he(t){return _t(t),oe(t),this}function Zs(t){if(t.composedPath)return t.composedPath();for(var i=[],a=t.target;a;)i.push(a),a=a.parentNode;return i}function Fs(t,i){if(!i)return new G(t.clientX,t.clientY);var a=bn(i),h=a.boundingClientRect;return new G((t.clientX-h.left)/a.x-i.clientLeft,(t.clientY-h.top)/a.y-i.clientTop)}var bo=z.linux&&z.chrome?window.devicePixelRatio:z.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function qs(t){return z.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/bo:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Sn(t,i){var a=i.relatedTarget;if(!a)return!0;try{for(;a&&a!==t;)a=a.parentNode}catch{return!1}return a!==t}var Po={__proto__:null,on:H,off:tt,stopPropagation:oe,disableScrollPropagation:Cn,disableClickPropagation:Ue,preventDefault:_t,stop:he,getPropagationPath:Zs,getMousePosition:Fs,getWheelDelta:qs,isExternalTarget:Sn,addListener:H,removeListener:tt},Ws=Re.extend({run:function(t,i,a,h){this.stop(),this._el=t,this._inProgress=!0,this._duration=a||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=re(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=st(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,a=this._duration*1e3;i<a?this._runFrame(this._easeOut(i/a),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var a=this._startPos.add(this._offset.multiplyBy(t));i&&a._round(),ht(this._el,a),this.fire("step")},_complete:function(){dt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),K=Re.extend({options:{crs:hn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=M(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(j(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=qe&&z.any3d&&!z.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),H(this._proxy,Is,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,a){if(i=i===void 0?this._zoom:this._limitZoom(i),t=this._limitCenter(j(t),i,this.options.maxBounds),a=a||{},this._stop(),this._loaded&&!a.reset&&a!==!0){a.animate!==void 0&&(a.zoom=o({animate:a.animate},a.zoom),a.pan=o({animate:a.animate,duration:a.duration},a.pan));var h=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,a.zoom):this._tryAnimatedPan(t,a.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i,a.pan&&a.pan.noMoveStart),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(z.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(z.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,a){var h=this.getZoomScale(i),u=this.getSize().divideBy(2),_=t instanceof G?t:this.latLngToContainerPoint(t),p=_.subtract(u).multiplyBy(1-1/h),y=this.containerPointToLatLng(u.add(p));return this.setView(y,i,{zoom:a})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():ot(t);var a=W(i.paddingTopLeft||i.padding||[0,0]),h=W(i.paddingBottomRight||i.padding||[0,0]),u=this.getBoundsZoom(t,!1,a.add(h));if(u=typeof i.maxZoom=="number"?Math.min(i.maxZoom,u):u,u===1/0)return{center:t.getCenter(),zoom:u};var _=h.subtract(a).divideBy(2),p=this.project(t.getSouthWest(),u),y=this.project(t.getNorthEast(),u),w=this.unproject(p.add(y).divideBy(2).add(_),u);return{center:w,zoom:u}},fitBounds:function(t,i){if(t=ot(t),!t.isValid())throw new Error("Bounds are not valid.");var a=this._getBoundsCenterZoom(t,i);return this.setView(a.center,a.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=W(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ws,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){U(this._mapPane,"leaflet-pan-anim");var a=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,a,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,a){if(a=a||{},a.animate===!1||!z.any3d)return this.setView(t,i,a);this._stop();var h=this.project(this.getCenter()),u=this.project(t),_=this.getSize(),p=this._zoom;t=j(t),i=i===void 0?p:i;var y=Math.max(_.x,_.y),w=y*this.getZoomScale(p,i),T=u.distanceTo(h)||1,A=1.42,R=A*A;function V(lt){var zi=lt?-1:1,fh=lt?w:y,dh=w*w-y*y+zi*R*R*T*T,_h=2*fh*R*T,Zn=dh/_h,xa=Math.sqrt(Zn*Zn+1)-Zn,mh=xa<1e-9?-18:Math.log(xa);return mh}function pt(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function ct(lt){return(Math.exp(lt)+Math.exp(-lt))/2}function Et(lt){return pt(lt)/ct(lt)}var xt=V(0);function be(lt){return y*(ct(xt)/ct(xt+A*lt))}function hh(lt){return y*(ct(xt)*Et(xt+A*lt)-pt(xt))/R}function lh(lt){return 1-Math.pow(1-lt,1.5)}var uh=Date.now(),Ma=(V(1)-xt)/A,ch=a.duration?1e3*a.duration:1e3*Ma*.8;function wa(){var lt=(Date.now()-uh)/ch,zi=lh(lt)*Ma;lt<=1?(this._flyToFrame=st(wa,this),this._move(this.unproject(h.add(u.subtract(h).multiplyBy(hh(zi)/T)),p),this.getScaleZoom(y/be(zi),p),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}return this._moveStart(!0,a.noMoveStart),wa.call(this),this},flyToBounds:function(t,i){var a=this._getBoundsCenterZoom(t,i);return this.flyTo(a.center,a.zoom,i)},setMaxBounds:function(t){return t=ot(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var a=this.getCenter(),h=this._limitCenter(a,this._zoom,ot(t));return a.equals(h)||this.panTo(h,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var a=W(i.paddingTopLeft||i.padding||[0,0]),h=W(i.paddingBottomRight||i.padding||[0,0]),u=this.project(this.getCenter()),_=this.project(t),p=this.getPixelBounds(),y=Mt([p.min.add(a),p.max.subtract(h)]),w=y.getSize();if(!y.contains(_)){this._enforcingBounds=!0;var T=_.subtract(y.getCenter()),A=y.extend(_).getSize().subtract(w);u.x+=T.x<0?-A.x:A.x,u.y+=T.y<0?-A.y:A.y,this.panTo(this.unproject(u),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=o({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var a=this.getSize(),h=i.divideBy(2).round(),u=a.divideBy(2).round(),_=h.subtract(u);return!_.x&&!_.y?this:(t.animate&&t.pan?this.panBy(_):(t.pan&&this._rawPanBy(_),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:a}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=o({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=c(this._handleGeolocationResponse,this),a=c(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,a,t):navigator.geolocation.getCurrentPosition(i,a,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var i=t.code,a=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+a+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var i=t.coords.latitude,a=t.coords.longitude,h=new Q(i,a),u=h.toBounds(t.coords.accuracy*2),_=this._locateOptions;if(_.setView){var p=this.getBoundsZoom(u);this.setView(h,_.maxZoom?Math.min(p,_.maxZoom):p)}var y={latlng:h,bounds:u,timestamp:t.timestamp};for(var w in t.coords)typeof t.coords[w]=="number"&&(y[w]=t.coords[w]);this.fire("locationfound",y)}},addHandler:function(t,i){if(!i)return this;var a=this[t]=new i(this);return this._handlers.push(a),this.options[t]&&a.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),it(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(dt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)it(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var a="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),h=Y("div",a,i||this._mapPane);return t&&(this._panes[t]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),a=this.unproject(t.getTopRight());return new wt(i,a)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,a){t=ot(t),a=W(a||[0,0]);var h=this.getZoom()||0,u=this.getMinZoom(),_=this.getMaxZoom(),p=t.getNorthWest(),y=t.getSouthEast(),w=this.getSize().subtract(a),T=Mt(this.project(y,h),this.project(p,h)).getSize(),A=z.any3d?this.options.zoomSnap:1,R=w.x/T.x,V=w.y/T.y,pt=i?Math.max(R,V):Math.min(R,V);return h=this.getScaleZoom(pt,h),A&&(h=Math.round(h/(A/100))*(A/100),h=i?Math.ceil(h/A)*A:Math.floor(h/A)*A),Math.max(u,Math.min(_,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var a=this._getTopLeftPoint(t,i);return new et(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var a=this.options.crs;return i=i===void 0?this._zoom:i,a.scale(t)/a.scale(i)},getScaleZoom:function(t,i){var a=this.options.crs;i=i===void 0?this._zoom:i;var h=a.zoom(t*a.scale(i));return isNaN(h)?1/0:h},project:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(j(t),i)},unproject:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(W(t),i)},layerPointToLatLng:function(t){var i=W(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(j(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(j(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ot(t))},distance:function(t,i){return this.options.crs.distance(j(t),j(i))},containerPointToLayerPoint:function(t){return W(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return W(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(W(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(t)))},mouseEventToContainerPoint:function(t){return Fs(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=zs(t);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");H(i,"scroll",this._onScroll,this),this._containerId=d(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&z.any3d,U(t,"leaflet-container"+(z.touch?" leaflet-touch":"")+(z.retina?" leaflet-retina":"")+(z.ielt9?" leaflet-oldie":"")+(z.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=We(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&i!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ht(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(U(t.markerPane,"leaflet-zoom-hide"),U(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i,a){ht(this._mapPane,new G(0,0));var h=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var u=this._zoom!==i;this._moveStart(u,a)._move(t,i)._moveEnd(u),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,a,h){i===void 0&&(i=this._zoom);var u=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),h?a&&a.pinch&&this.fire("zoom",a):((u||a&&a.pinch)&&this.fire("zoom",a),this.fire("move",a)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return dt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ht(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[d(this._container)]=this;var i=t?tt:H;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),z.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){dt(this._resizeRequest),this._resizeRequest=st(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var a=[],h,u=i==="mouseout"||i==="mouseover",_=t.target||t.srcElement,p=!1;_;){if(h=this._targets[d(_)],h&&(i==="click"||i==="preclick")&&this._draggableMoved(h)){p=!0;break}if(h&&h.listens(i,!0)&&(u&&!Sn(_,t)||(a.push(h),u))||_===this._container)break;_=_.parentNode}return!a.length&&!p&&!u&&this.listens(i,!0)&&(a=[this]),a},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var i=t.target||t.srcElement;if(!(!this._loaded||i._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(i))){var a=t.type;a==="mousedown"&&xn(i),this._fireDOMEvent(t,a)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,a){if(t.type==="click"){var h=o({},t);h.type="preclick",this._fireDOMEvent(h,h.type,a)}var u=this._findEventTargets(t,i);if(a){for(var _=[],p=0;p<a.length;p++)a[p].listens(i,!0)&&_.push(a[p]);u=_.concat(u)}if(u.length){i==="contextmenu"&&_t(t);var y=u[0],w={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var T=y.getLatLng&&(!y._radius||y._radius<=10);w.containerPoint=T?this.latLngToContainerPoint(y.getLatLng()):this.mouseEventToContainerPoint(t),w.layerPoint=this.containerPointToLayerPoint(w.containerPoint),w.latlng=T?y.getLatLng():this.layerPointToLatLng(w.layerPoint)}for(p=0;p<u.length;p++)if(u[p].fire(i,w,!0),w.originalEvent._stopped||u[p].options.bubblingMouseEvents===!1&&$(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return re(this._mapPane)||new G(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var a=t&&i!==void 0?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return a.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var a=this.getSize()._divideBy(2);return this.project(t,i)._subtract(a)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,a){var h=this._getNewPixelOrigin(a,i);return this.project(t,i)._subtract(h)},_latLngBoundsToNewLayerBounds:function(t,i,a){var h=this._getNewPixelOrigin(a,i);return Mt([this.project(t.getSouthWest(),i)._subtract(h),this.project(t.getNorthWest(),i)._subtract(h),this.project(t.getSouthEast(),i)._subtract(h),this.project(t.getNorthEast(),i)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,a){if(!a)return t;var h=this.project(t,i),u=this.getSize().divideBy(2),_=new et(h.subtract(u),h.add(u)),p=this._getBoundsOffset(_,a,i);return Math.abs(p.x)<=1&&Math.abs(p.y)<=1?t:this.unproject(h.add(p),i)},_limitOffset:function(t,i){if(!i)return t;var a=this.getPixelBounds(),h=new et(a.min.add(t),a.max.add(t));return t.add(this._getBoundsOffset(h,i))},_getBoundsOffset:function(t,i,a){var h=Mt(this.project(i.getNorthEast(),a),this.project(i.getSouthWest(),a)),u=h.min.subtract(t.min),_=h.max.subtract(t.max),p=this._rebound(u.x,-_.x),y=this._rebound(u.y,-_.y);return new G(p,y)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),a=this.getMaxZoom(),h=z.any3d?this.options.zoomSnap:1;return h&&(t=Math.round(t/h)*h),Math.max(i,Math.min(a,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){at(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var a=this._getCenterOffset(t)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(a)?!1:(this.panBy(a,i),!0)},_createAnimProxy:function(){var t=this._proxy=Y("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var a=mn,h=this._proxy.style[a];ae(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),h===this._proxy.style[a]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){it(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();ae(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,a){if(this._animatingZoom)return!0;if(a=a||{},!this._zoomAnimated||a.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(i),u=this._getCenterOffset(t)._divideBy(1-1/h);return a.animate!==!0&&!this.getSize().contains(u)?!1:(st(function(){this._moveStart(!0,a.noMoveStart||!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,a,h){this._mapPane&&(a&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,U(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&at(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Lo(t,i){return new K(t,i)}var At=Gt.extend({options:{position:"topright"},initialize:function(t){M(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),a=this.getPosition(),h=t._controlCorners[a];return U(i,"leaflet-control"),a.indexOf("bottom")!==-1?h.insertBefore(i,h.firstChild):h.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(it(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ve=function(t){return new At(t)};K.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",a=this._controlContainer=Y("div",i+"control-container",this._container);function h(u,_){var p=i+u+" "+i+_;t[u+_]=Y("div",p,a)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)it(this._controlCorners[t]);it(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Gs=At.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,a,h){return a<h?-1:h<a?1:0}},initialize:function(t,i,a){M(this,a),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in t)this._addLayer(t[h],h);for(h in i)this._addLayer(i[h],h,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return At.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(d(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){U(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(U(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):at(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return at(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=Y("div",t),a=this.options.collapsed;i.setAttribute("aria-haspopup",!0),Ue(i),Cn(i);var h=this._section=Y("section",t+"-list");a&&(this._map.on("click",this.collapse,this),H(i,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var u=this._layersLink=Y("a",t+"-toggle",i);u.href="#",u.title="Layers",u.setAttribute("role","button"),H(u,{keydown:function(_){_.keyCode===13&&this._expandSafely()},click:function(_){_t(_),this._expandSafely()}},this),a||this.expand(),this._baseLayersList=Y("div",t+"-base",h),this._separator=Y("div",t+"-separator",h),this._overlaysList=Y("div",t+"-overlays",h),i.appendChild(h)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&d(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,a){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:a}),this.options.sortLayers&&this._layers.sort(c(function(h,u){return this.options.sortFunction(h.layer,u.layer,h.name,u.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Mi(this._baseLayersList),Mi(this._overlaysList),this._layerControlInputs=[];var t,i,a,h,u=0;for(a=0;a<this._layers.length;a++)h=this._layers[a],this._addItem(h),i=i||h.overlay,t=t||!h.overlay,u+=h.overlay?0:1;return this.options.hideSingleBase&&(t=t&&u>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(d(t.target)),a=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;a&&this._map.fire(a,i)},_createRadioElement:function(t,i){var a='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=a,h.firstChild},_addItem:function(t){var i=document.createElement("label"),a=this._map.hasLayer(t.layer),h;t.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=a):h=this._createRadioElement("leaflet-base-layers_"+d(this),a),this._layerControlInputs.push(h),h.layerId=d(t.layer),H(h,"click",this._onInputClick,this);var u=document.createElement("span");u.innerHTML=" "+t.name;var _=document.createElement("span");i.appendChild(_),_.appendChild(h),_.appendChild(u);var p=t.overlay?this._overlaysList:this._baseLayersList;return p.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,i,a,h=[],u=[];this._handlingClick=!0;for(var _=t.length-1;_>=0;_--)i=t[_],a=this._getLayer(i.layerId).layer,i.checked?h.push(a):i.checked||u.push(a);for(_=0;_<u.length;_++)this._map.hasLayer(u[_])&&this._map.removeLayer(u[_]);for(_=0;_<h.length;_++)this._map.hasLayer(h[_])||this._map.addLayer(h[_]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,i,a,h=this._map.getZoom(),u=t.length-1;u>=0;u--)i=t[u],a=this._getLayer(i.layerId).layer,i.disabled=a.options.minZoom!==void 0&&h<a.options.minZoom||a.options.maxZoom!==void 0&&h>a.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,H(t,"click",_t),this.expand();var i=this;setTimeout(function(){tt(t,"click",_t),i._preventClick=!1})}}),To=function(t,i,a){return new Gs(t,i,a)},En=At.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",a=Y("div",i+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,i+"-in",a,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,i+"-out",a,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),a},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,a,h,u){var _=Y("a",a,h);return _.innerHTML=t,_.href="#",_.title=i,_.setAttribute("role","button"),_.setAttribute("aria-label",i),Ue(_),H(_,"click",he),H(_,"click",u,this),H(_,"click",this._refocusOnMap,this),_},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";at(this._zoomInButton,i),at(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(U(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(U(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});K.mergeOptions({zoomControl:!0}),K.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new En,this.addControl(this.zoomControl))});var Co=function(t){return new En(t)},Hs=At.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",a=Y("div",i),h=this.options;return this._addScales(h,i+"-line",a),t.on(h.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),a},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,a){t.metric&&(this._mScale=Y("div",i,a)),t.imperial&&(this._iScale=Y("div",i,a))},_update:function(){var t=this._map,i=t.getSize().y/2,a=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(a)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),a=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,a,i/t)},_updateImperial:function(t){var i=t*3.2808399,a,h,u;i>5280?(a=i/5280,h=this._getRoundNum(a),this._updateScale(this._iScale,h+" mi",h/a)):(u=this._getRoundNum(i),this._updateScale(this._iScale,u+" ft",u/i))},_updateScale:function(t,i,a){t.style.width=Math.round(this.options.maxWidth*a)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),a=t/i;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:1,i*a}}),So=function(t){return new Hs(t)},Eo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',kn=At.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(z.inlineSvg?Eo+" ":"")+"Leaflet</a>"},initialize:function(t){M(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Y("div","leaflet-control-attribution"),Ue(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var a=[];this.options.prefix&&a.push(this.options.prefix),t.length&&a.push(t.join(", ")),this._container.innerHTML=a.join(' <span aria-hidden="true">|</span> ')}}});K.mergeOptions({attributionControl:!0}),K.addInitHook(function(){this.options.attributionControl&&new kn().addTo(this)});var ko=function(t){return new kn(t)};At.Layers=Gs,At.Zoom=En,At.Scale=Hs,At.Attribution=kn,Ve.layers=To,Ve.zoom=Co,Ve.scale=So,Ve.attribution=ko;var Rt=Gt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Rt.addTo=function(t,i){return t.addHandler(i,this),this};var Oo={Events:Tt},$s=z.touch?"touchstart mousedown":"mousedown",Qt=Re.extend({options:{clickTolerance:3},initialize:function(t,i,a,h){M(this,h),this._element=t,this._dragStartTarget=i||t,this._preventOutline=a},enable:function(){this._enabled||(H(this._dragStartTarget,$s,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Qt._dragging===this&&this.finishDrag(!0),tt(this._dragStartTarget,$s,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!vn(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Qt._dragging===this&&this.finishDrag();return}if(!(Qt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Qt._dragging=this,this._preventOutline&&xn(this._element),yn(),Ge(),!this._moving)){this.fire("down");var i=t.touches?t.touches[0]:t,a=Bs(this._element);this._startPoint=new G(i.clientX,i.clientY),this._startPos=re(this._element),this._parentScale=bn(a);var h=t.type==="mousedown";H(document,h?"mousemove":"touchmove",this._onMove,this),H(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var i=t.touches&&t.touches.length===1?t.touches[0]:t,a=new G(i.clientX,i.clientY)._subtract(this._startPoint);!a.x&&!a.y||Math.abs(a.x)+Math.abs(a.y)<this.options.clickTolerance||(a.x/=this._parentScale.x,a.y/=this._parentScale.y,_t(t),this._moved||(this.fire("dragstart"),this._moved=!0,U(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),U(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(a),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ht(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){at(document.body,"leaflet-dragging"),this._lastTarget&&(at(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),tt(document,"mousemove touchmove",this._onMove,this),tt(document,"mouseup touchend touchcancel",this._onUp,this),Mn(),He();var i=this._moved&&this._moving;this._moving=!1,Qt._dragging=!1,i&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Us(t,i,a){var h,u=[1,4,2,8],_,p,y,w,T,A,R,V;for(_=0,A=t.length;_<A;_++)t[_]._code=le(t[_],i);for(y=0;y<4;y++){for(R=u[y],h=[],_=0,A=t.length,p=A-1;_<A;p=_++)w=t[_],T=t[p],w._code&R?T._code&R||(V=Li(T,w,R,i,a),V._code=le(V,i),h.push(V)):(T._code&R&&(V=Li(T,w,R,i,a),V._code=le(V,i),h.push(V)),h.push(w));t=h}return t}function Vs(t,i){var a,h,u,_,p,y,w,T,A;if(!t||t.length===0)throw new Error("latlngs not passed");St(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var R=j([0,0]),V=ot(t),pt=V.getNorthWest().distanceTo(V.getSouthWest())*V.getNorthEast().distanceTo(V.getNorthWest());pt<1700&&(R=On(t));var ct=t.length,Et=[];for(a=0;a<ct;a++){var xt=j(t[a]);Et.push(i.project(j([xt.lat-R.lat,xt.lng-R.lng])))}for(y=w=T=0,a=0,h=ct-1;a<ct;h=a++)u=Et[a],_=Et[h],p=u.y*_.x-_.y*u.x,w+=(u.x+_.x)*p,T+=(u.y+_.y)*p,y+=p*3;y===0?A=Et[0]:A=[w/y,T/y];var be=i.unproject(W(A));return j([be.lat+R.lat,be.lng+R.lng])}function On(t){for(var i=0,a=0,h=0,u=0;u<t.length;u++){var _=j(t[u]);i+=_.lat,a+=_.lng,h++}return j([i/h,a/h])}var Ao={__proto__:null,clipPolygon:Us,polygonCenter:Vs,centroid:On};function js(t,i){if(!i||!t.length)return t.slice();var a=i*i;return t=Io(t,a),t=No(t,a),t}function Ks(t,i,a){return Math.sqrt(je(t,i,a,!0))}function Do(t,i,a){return je(t,i,a)}function No(t,i){var a=t.length,h=typeof Uint8Array!=void 0+""?Uint8Array:Array,u=new h(a);u[0]=u[a-1]=1,An(t,u,i,0,a-1);var _,p=[];for(_=0;_<a;_++)u[_]&&p.push(t[_]);return p}function An(t,i,a,h,u){var _=0,p,y,w;for(y=h+1;y<=u-1;y++)w=je(t[y],t[h],t[u],!0),w>_&&(p=y,_=w);_>a&&(i[p]=1,An(t,i,a,h,p),An(t,i,a,p,u))}function Io(t,i){for(var a=[t[0]],h=1,u=0,_=t.length;h<_;h++)zo(t[h],t[u])>i&&(a.push(t[h]),u=h);return u<_-1&&a.push(t[_-1]),a}var Ys;function Xs(t,i,a,h,u){var _=h?Ys:le(t,a),p=le(i,a),y,w,T;for(Ys=p;;){if(!(_|p))return[t,i];if(_&p)return!1;y=_||p,w=Li(t,i,y,a,u),T=le(w,a),y===_?(t=w,_=T):(i=w,p=T)}}function Li(t,i,a,h,u){var _=i.x-t.x,p=i.y-t.y,y=h.min,w=h.max,T,A;return a&8?(T=t.x+_*(w.y-t.y)/p,A=w.y):a&4?(T=t.x+_*(y.y-t.y)/p,A=y.y):a&2?(T=w.x,A=t.y+p*(w.x-t.x)/_):a&1&&(T=y.x,A=t.y+p*(y.x-t.x)/_),new G(T,A,u)}function le(t,i){var a=0;return t.x<i.min.x?a|=1:t.x>i.max.x&&(a|=2),t.y<i.min.y?a|=4:t.y>i.max.y&&(a|=8),a}function zo(t,i){var a=i.x-t.x,h=i.y-t.y;return a*a+h*h}function je(t,i,a,h){var u=i.x,_=i.y,p=a.x-u,y=a.y-_,w=p*p+y*y,T;return w>0&&(T=((t.x-u)*p+(t.y-_)*y)/w,T>1?(u=a.x,_=a.y):T>0&&(u+=p*T,_+=y*T)),p=t.x-u,y=t.y-_,h?p*p+y*y:new G(u,_)}function St(t){return!N(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Js(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),St(t)}function Qs(t,i){var a,h,u,_,p,y,w,T;if(!t||t.length===0)throw new Error("latlngs not passed");St(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var A=j([0,0]),R=ot(t),V=R.getNorthWest().distanceTo(R.getSouthWest())*R.getNorthEast().distanceTo(R.getNorthWest());V<1700&&(A=On(t));var pt=t.length,ct=[];for(a=0;a<pt;a++){var Et=j(t[a]);ct.push(i.project(j([Et.lat-A.lat,Et.lng-A.lng])))}for(a=0,h=0;a<pt-1;a++)h+=ct[a].distanceTo(ct[a+1])/2;if(h===0)T=ct[0];else for(a=0,_=0;a<pt-1;a++)if(p=ct[a],y=ct[a+1],u=p.distanceTo(y),_+=u,_>h){w=(_-h)/u,T=[y.x-w*(y.x-p.x),y.y-w*(y.y-p.y)];break}var xt=i.unproject(W(T));return j([xt.lat+A.lat,xt.lng+A.lng])}var Bo={__proto__:null,simplify:js,pointToSegmentDistance:Ks,closestPointOnSegment:Do,clipSegment:Xs,_getEdgeIntersection:Li,_getBitCode:le,_sqClosestPointOnSegment:je,isFlat:St,_flat:Js,polylineCenter:Qs},Dn={project:function(t){return new G(t.lng,t.lat)},unproject:function(t){return new Q(t.y,t.x)},bounds:new et([-180,-90],[180,90])},Nn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new et([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,a=this.R,h=t.lat*i,u=this.R_MINOR/a,_=Math.sqrt(1-u*u),p=_*Math.sin(h),y=Math.tan(Math.PI/4-h/2)/Math.pow((1-p)/(1+p),_/2);return h=-a*Math.log(Math.max(y,1e-10)),new G(t.lng*i*a,h)},unproject:function(t){for(var i=180/Math.PI,a=this.R,h=this.R_MINOR/a,u=Math.sqrt(1-h*h),_=Math.exp(-t.y/a),p=Math.PI/2-2*Math.atan(_),y=0,w=.1,T;y<15&&Math.abs(w)>1e-7;y++)T=u*Math.sin(p),T=Math.pow((1-T)/(1+T),u/2),w=Math.PI/2-2*Math.atan(_*T)-p,p+=w;return new Q(p*i,t.x*i/a)}},Ro={__proto__:null,LonLat:Dn,Mercator:Nn,SphericalMercator:rn},Zo=o({},Jt,{code:"EPSG:3395",projection:Nn,transformation:function(){var t=.5/(Math.PI*Nn.R);return Ze(t,.5,-t,.5)}()}),ta=o({},Jt,{code:"EPSG:4326",projection:Dn,transformation:Ze(1/180,1,-1/180,.5)}),Fo=o({},Ht,{projection:Dn,transformation:Ze(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var a=i.lng-t.lng,h=i.lat-t.lat;return Math.sqrt(a*a+h*h)},infinite:!0});Ht.Earth=Jt,Ht.EPSG3395=Zo,Ht.EPSG3857=hn,Ht.EPSG900913=$r,Ht.EPSG4326=ta,Ht.Simple=Fo;var Dt=Re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[d(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[d(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var a=this.getEvents();i.on(a,this),this.once("remove",function(){i.off(a,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});K.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=d(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=d(t);return this._layers[i]?(this._loaded&&t.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return d(t)in this._layers},eachLayer:function(t,i){for(var a in this._layers)t.call(i,this._layers[a]);return this},_addLayers:function(t){t=t?N(t)?t:[t]:[];for(var i=0,a=t.length;i<a;i++)this.addLayer(t[i])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[d(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=d(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,a=this._getZoomSpan();for(var h in this._zoomBoundLayers){var u=this._zoomBoundLayers[h].options;t=u.minZoom===void 0?t:Math.min(t,u.minZoom),i=u.maxZoom===void 0?i:Math.max(i,u.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,a!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ge=Dt.extend({initialize:function(t,i){M(this,i),this._layers={};var a,h;if(t)for(a=0,h=t.length;a<h;a++)this.addLayer(t[a])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){var i=typeof t=="number"?t:this.getLayerId(t);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i=Array.prototype.slice.call(arguments,1),a,h;for(a in this._layers)h=this._layers[a],h[t]&&h[t].apply(h,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var a in this._layers)t.call(i,this._layers[a]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return d(t)}}),qo=function(t,i){return new ge(t,i)},$t=ge.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ge.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ge.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new wt;for(var i in this._layers){var a=this._layers[i];t.extend(a.getBounds?a.getBounds():a.getLatLng())}return t}}),Wo=function(t,i){return new $t(t,i)},ye=Gt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){M(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var a=this._getIconUrl(t);if(!a){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(a,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(h,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(t,i){var a=this.options,h=a[i+"Size"];typeof h=="number"&&(h=[h,h]);var u=W(h),_=W(i==="shadow"&&a.shadowAnchor||a.iconAnchor||u&&u.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(a.className||""),_&&(t.style.marginLeft=-_.x+"px",t.style.marginTop=-_.y+"px"),u&&(t.style.width=u.x+"px",t.style.height=u.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return z.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Go(t){return new ye(t)}var Ke=ye.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ke.imagePath!="string"&&(Ke.imagePath=this._detectIconPath()),(this.options.imagePath||Ke.imagePath)+ye.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var i=function(a,h,u){var _=h.exec(a);return _&&_[u]};return t=i(t,/^url\((['"])?(.+)\1\)$/,2),t&&i(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Y("div","leaflet-default-icon-path",document.body),i=We(t,"background-image")||We(t,"backgroundImage");if(document.body.removeChild(t),i=this._stripUrl(i),i)return i;var a=document.querySelector('link[href$="leaflet.css"]');return a?a.href.substring(0,a.href.length-11-1):""}}),ea=Rt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Qt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),U(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&at(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,a=i._map,h=this._marker.options.autoPanSpeed,u=this._marker.options.autoPanPadding,_=re(i._icon),p=a.getPixelBounds(),y=a.getPixelOrigin(),w=Mt(p.min._subtract(y).add(u),p.max._subtract(y).subtract(u));if(!w.contains(_)){var T=W((Math.max(w.max.x,_.x)-w.max.x)/(p.max.x-w.max.x)-(Math.min(w.min.x,_.x)-w.min.x)/(p.min.x-w.min.x),(Math.max(w.max.y,_.y)-w.max.y)/(p.max.y-w.max.y)-(Math.min(w.min.y,_.y)-w.min.y)/(p.min.y-w.min.y)).multiplyBy(h);a.panBy(T,{animate:!1}),this._draggable._newPos._add(T),this._draggable._startPos._add(T),ht(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=st(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(dt(this._panRequest),this._panRequest=st(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,a=i._shadow,h=re(i._icon),u=i._map.layerPointToLatLng(h);a&&ht(a,h),i._latlng=u,t.latlng=u,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){dt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ti=Dt.extend({options:{icon:new Ke,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){M(this,i),this._latlng=j(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=j(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),a=t.icon.createIcon(this._icon),h=!1;a!==this._icon&&(this._icon&&this._removeIcon(),h=!0,t.title&&(a.title=t.title),a.tagName==="IMG"&&(a.alt=t.alt||"")),U(a,i),t.keyboard&&(a.tabIndex="0",a.setAttribute("role","button")),this._icon=a,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&H(a,"focus",this._panOnFocus,this);var u=t.icon.createShadow(this._shadow),_=!1;u!==this._shadow&&(this._removeShadow(),_=!0),u&&(U(u,i),u.alt=""),this._shadow=u,t.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),u&&_&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&tt(this._icon,"focus",this._panOnFocus,this),it(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&it(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ht(this._icon,t),this._shadow&&ht(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(U(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ea)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ea(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Ct(this._icon,t),this._shadow&&Ct(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var i=this.options.icon.options,a=i.iconSize?W(i.iconSize):W(0,0),h=i.iconAnchor?W(i.iconAnchor):W(0,0);t.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:a.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ho(t,i){return new Ti(t,i)}var te=Dt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return M(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ci=te.extend({options:{fill:!0,radius:10},initialize:function(t,i){M(this,i),this._latlng=j(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=j(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return te.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,a=this._clickTolerance(),h=[t+a,i+a];this._pxBounds=new et(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $o(t,i){return new Ci(t,i)}var In=Ci.extend({initialize:function(t,i,a){if(typeof i=="number"&&(i=o({},a,{radius:i})),M(this,i),this._latlng=j(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new wt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:te.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,a=this._map,h=a.options.crs;if(h.distance===Jt.distance){var u=Math.PI/180,_=this._mRadius/Jt.R/u,p=a.project([i+_,t]),y=a.project([i-_,t]),w=p.add(y).divideBy(2),T=a.unproject(w).lat,A=Math.acos((Math.cos(_*u)-Math.sin(i*u)*Math.sin(T*u))/(Math.cos(i*u)*Math.cos(T*u)))/u;(isNaN(A)||A===0)&&(A=_/Math.cos(Math.PI/180*i)),this._point=w.subtract(a.getPixelOrigin()),this._radius=isNaN(A)?0:w.x-a.project([T,t-A]).x,this._radiusY=w.y-p.y}else{var R=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=a.latLngToLayerPoint(this._latlng),this._radius=this._point.x-a.latLngToLayerPoint(R).x}this._updateBounds()}});function Uo(t,i,a){return new In(t,i,a)}var Ut=te.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){M(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i=1/0,a=null,h=je,u,_,p=0,y=this._parts.length;p<y;p++)for(var w=this._parts[p],T=1,A=w.length;T<A;T++){u=w[T-1],_=w[T];var R=h(t,u,_,!0);R<i&&(i=R,a=h(t,u,_))}return a&&(a.distance=Math.sqrt(i)),a},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Qs(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=j(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new wt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return St(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],a=St(t),h=0,u=t.length;h<u;h++)a?(i[h]=j(t[h]),this._bounds.extend(i[h])):i[h]=this._convertLatLngs(t[h]);return i},_project:function(){var t=new et;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new G(t,t);this._rawPxBounds&&(this._pxBounds=new et([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(t,i,a){var h=t[0]instanceof Q,u=t.length,_,p;if(h){for(p=[],_=0;_<u;_++)p[_]=this._map.latLngToLayerPoint(t[_]),a.extend(p[_]);i.push(p)}else for(_=0;_<u;_++)this._projectLatlngs(t[_],i,a)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,a,h,u,_,p,y,w;for(a=0,u=0,_=this._rings.length;a<_;a++)for(w=this._rings[a],h=0,p=w.length;h<p-1;h++)y=Xs(w[h],w[h+1],t,h,!0),y&&(i[u]=i[u]||[],i[u].push(y[0]),(y[1]!==w[h+1]||h===p-2)&&(i[u].push(y[1]),u++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,a=0,h=t.length;a<h;a++)t[a]=js(t[a],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var a,h,u,_,p,y,w=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(a=0,_=this._parts.length;a<_;a++)for(y=this._parts[a],h=0,p=y.length,u=p-1;h<p;u=h++)if(!(!i&&h===0)&&Ks(t,y[u],y[h])<=w)return!0;return!1}});function Vo(t,i){return new Ut(t,i)}Ut._flat=Js;var Me=Ut.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var i=Ut.prototype._convertLatLngs.call(this,t),a=i.length;return a>=2&&i[0]instanceof Q&&i[0].equals(i[a-1])&&i.pop(),i},_setLatLngs:function(t){Ut.prototype._setLatLngs.call(this,t),St(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return St(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,a=new G(i,i);if(t=new et(t.min.subtract(a),t.max.add(a)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,u=this._rings.length,_;h<u;h++)_=Us(this._rings[h],t,!0),_.length&&this._parts.push(_)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i=!1,a,h,u,_,p,y,w,T;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(_=0,w=this._parts.length;_<w;_++)for(a=this._parts[_],p=0,T=a.length,y=T-1;p<T;y=p++)h=a[p],u=a[y],h.y>t.y!=u.y>t.y&&t.x<(u.x-h.x)*(t.y-h.y)/(u.y-h.y)+h.x&&(i=!i);return i||Ut.prototype._containsPoint.call(this,t,!0)}});function jo(t,i){return new Me(t,i)}var Vt=$t.extend({initialize:function(t,i){M(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i=N(t)?t:t.features,a,h,u;if(i){for(a=0,h=i.length;a<h;a++)u=i[a],(u.geometries||u.geometry||u.features||u.coordinates)&&this.addData(u);return this}var _=this.options;if(_.filter&&!_.filter(t))return this;var p=Si(t,_);return p?(p.feature=Oi(t),p.defaultOptions=p.options,this.resetStyle(p),_.onEachFeature&&_.onEachFeature(t,p),this.addLayer(p)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=o({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&(typeof i=="function"&&(i=i(t.feature)),t.setStyle(i))}});function Si(t,i){var a=t.type==="Feature"?t.geometry:t,h=a?a.coordinates:null,u=[],_=i&&i.pointToLayer,p=i&&i.coordsToLatLng||zn,y,w,T,A;if(!h&&!a)return null;switch(a.type){case"Point":return y=p(h),ia(_,t,y,i);case"MultiPoint":for(T=0,A=h.length;T<A;T++)y=p(h[T]),u.push(ia(_,t,y,i));return new $t(u);case"LineString":case"MultiLineString":return w=Ei(h,a.type==="LineString"?0:1,p),new Ut(w,i);case"Polygon":case"MultiPolygon":return w=Ei(h,a.type==="Polygon"?1:2,p),new Me(w,i);case"GeometryCollection":for(T=0,A=a.geometries.length;T<A;T++){var R=Si({geometry:a.geometries[T],type:"Feature",properties:t.properties},i);R&&u.push(R)}return new $t(u);case"FeatureCollection":for(T=0,A=a.features.length;T<A;T++){var V=Si(a.features[T],i);V&&u.push(V)}return new $t(u);default:throw new Error("Invalid GeoJSON object.")}}function ia(t,i,a,h){return t?t(i,a):new Ti(a,h&&h.markersInheritOptions&&h)}function zn(t){return new Q(t[1],t[0],t[2])}function Ei(t,i,a){for(var h=[],u=0,_=t.length,p;u<_;u++)p=i?Ei(t[u],i-1,a):(a||zn)(t[u]),h.push(p);return h}function Bn(t,i){return t=j(t),t.alt!==void 0?[x(t.lng,i),x(t.lat,i),x(t.alt,i)]:[x(t.lng,i),x(t.lat,i)]}function ki(t,i,a,h){for(var u=[],_=0,p=t.length;_<p;_++)u.push(i?ki(t[_],St(t[_])?0:i-1,a,h):Bn(t[_],h));return!i&&a&&u.length>0&&u.push(u[0].slice()),u}function we(t,i){return t.feature?o({},t.feature,{geometry:i}):Oi(i)}function Oi(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Rn={toGeoJSON:function(t){return we(this,{type:"Point",coordinates:Bn(this.getLatLng(),t)})}};Ti.include(Rn),In.include(Rn),Ci.include(Rn),Ut.include({toGeoJSON:function(t){var i=!St(this._latlngs),a=ki(this._latlngs,i?1:0,!1,t);return we(this,{type:(i?"Multi":"")+"LineString",coordinates:a})}}),Me.include({toGeoJSON:function(t){var i=!St(this._latlngs),a=i&&!St(this._latlngs[0]),h=ki(this._latlngs,a?2:i?1:0,!0,t);return i||(h=[h]),we(this,{type:(a?"Multi":"")+"Polygon",coordinates:h})}}),ge.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(a){i.push(a.toGeoJSON(t).geometry.coordinates)}),we(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(t);var a=i==="GeometryCollection",h=[];return this.eachLayer(function(u){if(u.toGeoJSON){var _=u.toGeoJSON(t);if(a)h.push(_.geometry);else{var p=Oi(_);p.type==="FeatureCollection"?h.push.apply(h,p.features):h.push(p)}}}),a?we(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function na(t,i){return new Vt(t,i)}var Ko=na,Ai=Dt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,a){this._url=t,this._bounds=ot(i),M(this,a)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(U(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){it(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ve(this._image),this},bringToBack:function(){return this._map&&pe(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ot(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",i=this._image=t?this._url:Y("img");if(U(i,"leaflet-image-layer"),this._zoomAnimated&&U(i,"leaflet-zoom-animated"),this.options.className&&U(i,this.options.className),i.onselectstart=v,i.onmousemove=v,i.onload=c(this.fire,this,"load"),i.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),a=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ae(this._image,a,i)},_reset:function(){var t=this._image,i=new et(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),a=i.getSize();ht(t,i.min),t.style.width=a.x+"px",t.style.height=a.y+"px"},_updateOpacity:function(){Ct(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Yo=function(t,i,a){return new Ai(t,i,a)},sa=Ai.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",i=this._image=t?this._url:Y("video");if(U(i,"leaflet-image-layer"),this._zoomAnimated&&U(i,"leaflet-zoom-animated"),this.options.className&&U(i,this.options.className),i.onselectstart=v,i.onmousemove=v,i.onloadeddata=c(this.fire,this,"load"),t){for(var a=i.getElementsByTagName("source"),h=[],u=0;u<a.length;u++)h.push(a[u].src);this._url=a.length>0?h:[i.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var _=0;_<this._url.length;_++){var p=Y("source");p.src=this._url[_],i.appendChild(p)}}});function Xo(t,i,a){return new sa(t,i,a)}var aa=Ai.extend({_initImage:function(){var t=this._image=this._url;U(t,"leaflet-image-layer"),this._zoomAnimated&&U(t,"leaflet-zoom-animated"),this.options.className&&U(t,this.options.className),t.onselectstart=v,t.onmousemove=v}});function Jo(t,i,a){return new aa(t,i,a)}var Zt=Dt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,i){t&&(t instanceof Q||N(t))?(this._latlng=j(t),M(this,i)):(M(this,t),this._source=i),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Ct(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Ct(this._container,1),this.bringToFront(),this.options.interactive&&(U(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Ct(this._container,0),this._removeTimeout=setTimeout(c(it,void 0,this._container),200)):it(this._container),this.options.interactive&&(at(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=j(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ve(this._container),this},bringToBack:function(){return this._map&&pe(this._container),this},_prepareOpen:function(t){var i=this._source;if(!i._map)return!1;if(i instanceof $t){i=null;var a=this._source._layers;for(var h in a)if(a[h]._map){i=a[h];break}if(!i)return!1;this._source=i}if(!t)if(i.getCenter)t=i.getCenter();else if(i.getLatLng)t=i.getLatLng();else if(i.getBounds)t=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=W(this.options.offset),a=this._getAnchor();this._zoomAnimated?ht(this._container,t.add(a)):i=i.add(t).add(a);var h=this._containerBottom=-i.y,u=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=h+"px",this._container.style.left=u+"px"}},_getAnchor:function(){return[0,0]}});K.include({_initOverlay:function(t,i,a,h){var u=i;return u instanceof t||(u=new t(h).setContent(i)),a&&u.setLatLng(a),u}}),Dt.include({_initOverlay:function(t,i,a,h){var u=a;return u instanceof t?(M(u,h),u._source=this):(u=i&&!h?i:new t(h,this),u.setContent(a)),u}});var Di=Zt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Zt.prototype.openOn.call(this,t)},onAdd:function(t){Zt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof te||this._source.on("preclick",oe))},onRemove:function(t){Zt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof te||this._source.off("preclick",oe))},getEvents:function(){var t=Zt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",i=this._container=Y("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),a=this._wrapper=Y("div",t+"-content-wrapper",i);if(this._contentNode=Y("div",t+"-content",a),Ue(i),Cn(this._contentNode),H(i,"contextmenu",oe),this._tipContainer=Y("div",t+"-tip-container",i),this._tip=Y("div",t+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=Y("a",t+"-close-button",i);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',H(h,"click",function(u){_t(u),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var a=t.offsetWidth;a=Math.min(a,this.options.maxWidth),a=Math.max(a,this.options.minWidth),i.width=a+1+"px",i.whiteSpace="",i.height="";var h=t.offsetHeight,u=this.options.maxHeight,_="leaflet-popup-scrolled";u&&h>u?(i.height=u+"px",U(t,_)):at(t,_),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),a=this._getAnchor();ht(this._container,i.add(a))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,i=parseInt(We(this._container,"marginBottom"),10)||0,a=this._container.offsetHeight+i,h=this._containerWidth,u=new G(this._containerLeft,-a-this._containerBottom);u._add(re(this._container));var _=t.layerPointToContainerPoint(u),p=W(this.options.autoPanPadding),y=W(this.options.autoPanPaddingTopLeft||p),w=W(this.options.autoPanPaddingBottomRight||p),T=t.getSize(),A=0,R=0;_.x+h+w.x>T.x&&(A=_.x+h-T.x+w.x),_.x-A-y.x<0&&(A=_.x-y.x),_.y+a+w.y>T.y&&(R=_.y+a-T.y+w.y),_.y-R-y.y<0&&(R=_.y-y.y),(A||R)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([A,R]))}},_getAnchor:function(){return W(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Qo=function(t,i){return new Di(t,i)};K.mergeOptions({closePopupOnClick:!0}),K.include({openPopup:function(t,i,a){return this._initOverlay(Di,t,i,a).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Dt.include({bindPopup:function(t,i){return this._popup=this._initOverlay(Di,this._popup,t,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof $t||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){he(t);var i=t.layer||t.target;if(this._popup._source===i&&!(i instanceof te)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=i,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Ni=Zt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Zt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Zt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Zt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Y("div",i),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,a,h=this._map,u=this._container,_=h.latLngToContainerPoint(h.getCenter()),p=h.layerPointToContainerPoint(t),y=this.options.direction,w=u.offsetWidth,T=u.offsetHeight,A=W(this.options.offset),R=this._getAnchor();y==="top"?(i=w/2,a=T):y==="bottom"?(i=w/2,a=0):y==="center"?(i=w/2,a=T/2):y==="right"?(i=0,a=T/2):y==="left"?(i=w,a=T/2):p.x<_.x?(y="right",i=0,a=T/2):(y="left",i=w+(A.x+R.x)*2,a=T/2),t=t.subtract(W(i,a,!0)).add(A).add(R),at(u,"leaflet-tooltip-right"),at(u,"leaflet-tooltip-left"),at(u,"leaflet-tooltip-top"),at(u,"leaflet-tooltip-bottom"),U(u,"leaflet-tooltip-"+y),ht(u,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Ct(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return W(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),th=function(t,i){return new Ni(t,i)};K.include({openTooltip:function(t,i,a){return this._initOverlay(Ni,t,i,a).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Dt.include({bindTooltip:function(t,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ni,this._tooltip,t,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var i=t?"off":"on",a={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?a.add=this._openTooltip:(a.mouseover=this._openTooltip,a.mouseout=this.closeTooltip,a.click=this._openTooltip,this._map?this._addFocusListeners():a.add=this._addFocusListeners),this._tooltip.options.sticky&&(a.mousemove=this._moveTooltip),this[i](a),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof $t||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&(H(i,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),H(i,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&i.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var i=this;this._map.once("moveend",function(){i._openOnceFlag=!1,i._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var i=t.latlng,a,h;this._tooltip.options.sticky&&t.originalEvent&&(a=this._map.mouseEventToContainerPoint(t.originalEvent),h=this._map.containerPointToLayerPoint(a),i=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(i)}});var ra=ye.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:document.createElement("div"),a=this.options;if(a.html instanceof Element?(Mi(i),i.appendChild(a.html)):i.innerHTML=a.html!==!1?a.html:"",a.bgPos){var h=W(a.bgPos);i.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function eh(t){return new ra(t)}ye.Default=Ke;var Ye=Dt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:z.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){M(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),it(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ve(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pe(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof G?t:new G(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i=this.getPane().children,a=-t(-1/0,1/0),h=0,u=i.length,_;h<u;h++)_=i[h].style.zIndex,i[h]!==this._container&&_&&(a=t(a,+_));isFinite(a)&&(this.options.zIndex=a+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!z.ielt9){Ct(this._container,this.options.opacity);var t=+new Date,i=!1,a=!1;for(var h in this._tiles){var u=this._tiles[h];if(!(!u.current||!u.loaded)){var _=Math.min(1,(t-u.loaded)/200);Ct(u.el,_),_<1?i=!0:(u.active?a=!0:this._onOpaqueTile(u),u.active=!0)}}a&&!this._noPrune&&this._pruneTiles(),i&&(dt(this._fadeFrame),this._fadeFrame=st(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Y("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t!==void 0){for(var a in this._levels)a=Number(a),this._levels[a].el.children.length||a===t?(this._levels[a].el.style.zIndex=i-Math.abs(t-a),this._onUpdateLevel(a)):(it(this._levels[a].el),this._removeTilesAtZoom(a),this._onRemoveLevel(a),delete this._levels[a]);var h=this._levels[t],u=this._map;return h||(h=this._levels[t]={},h.el=Y("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=i,h.origin=u.project(u.unproject(u.getPixelOrigin()),t).round(),h.zoom=t,this._setZoomTransform(h,u.getCenter(),u.getZoom()),v(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var t,i,a=this._map.getZoom();if(a>this.options.maxZoom||a<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var h=i.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)it(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,a,h){var u=Math.floor(t/2),_=Math.floor(i/2),p=a-1,y=new G(+u,+_);y.z=+p;var w=this._tileCoordsToKey(y),T=this._tiles[w];return T&&T.active?(T.retain=!0,!0):(T&&T.loaded&&(T.retain=!0),p>h?this._retainParent(u,_,p,h):!1)},_retainChildren:function(t,i,a,h){for(var u=2*t;u<2*t+2;u++)for(var _=2*i;_<2*i+2;_++){var p=new G(u,_);p.z=a+1;var y=this._tileCoordsToKey(p),w=this._tiles[y];if(w&&w.active){w.retain=!0;continue}else w&&w.loaded&&(w.retain=!0);a+1<h&&this._retainChildren(u,_,a+1,h)}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return i.minNativeZoom!==void 0&&t<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,a,h){var u=Math.round(i);this.options.maxZoom!==void 0&&u>this.options.maxZoom||this.options.minZoom!==void 0&&u<this.options.minZoom?u=void 0:u=this._clampZoom(u);var _=this.options.updateWhenZooming&&u!==this._tileZoom;(!h||_)&&(this._tileZoom=u,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),u!==void 0&&this._update(t),a||this._pruneTiles(),this._noPrune=!!a),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var a in this._levels)this._setZoomTransform(this._levels[a],t,i)},_setZoomTransform:function(t,i,a){var h=this._map.getZoomScale(a,t.zoom),u=t.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(i,a)).round();z.any3d?ae(t.el,u,h):ht(t.el,u)},_resetGrid:function(){var t=this._map,i=t.options.crs,a=this._tileSize=this.getTileSize(),h=this._tileZoom,u=this._map.getPixelWorldBounds(this._tileZoom);u&&(this._globalTileRange=this._pxBoundsToTileRange(u)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],h).x/a.x),Math.ceil(t.project([0,i.wrapLng[1]],h).x/a.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],h).y/a.x),Math.ceil(t.project([i.wrapLat[1],0],h).y/a.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var i=this._map,a=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),h=i.getZoomScale(a,this._tileZoom),u=i.project(t,this._tileZoom).floor(),_=i.getSize().divideBy(h*2);return new et(u.subtract(_),u.add(_))},_update:function(t){var i=this._map;if(i){var a=this._clampZoom(i.getZoom());if(t===void 0&&(t=i.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(t),u=this._pxBoundsToTileRange(h),_=u.getCenter(),p=[],y=this.options.keepBuffer,w=new et(u.getBottomLeft().subtract([y,-y]),u.getTopRight().add([y,-y]));if(!(isFinite(u.min.x)&&isFinite(u.min.y)&&isFinite(u.max.x)&&isFinite(u.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var T in this._tiles){var A=this._tiles[T].coords;(A.z!==this._tileZoom||!w.contains(new G(A.x,A.y)))&&(this._tiles[T].current=!1)}if(Math.abs(a-this._tileZoom)>1){this._setView(t,a);return}for(var R=u.min.y;R<=u.max.y;R++)for(var V=u.min.x;V<=u.max.x;V++){var pt=new G(V,R);if(pt.z=this._tileZoom,!!this._isValidTile(pt)){var ct=this._tiles[this._tileCoordsToKey(pt)];ct?ct.current=!0:p.push(pt)}}if(p.sort(function(xt,be){return xt.distanceTo(_)-be.distanceTo(_)}),p.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Et=document.createDocumentFragment();for(V=0;V<p.length;V++)this._addTile(p[V],Et);this._level.el.appendChild(Et)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var a=this._globalTileRange;if(!i.wrapLng&&(t.x<a.min.x||t.x>a.max.x)||!i.wrapLat&&(t.y<a.min.y||t.y>a.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(t);return ot(this.options.bounds).overlaps(h)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,a=this.getTileSize(),h=t.scaleBy(a),u=h.add(a),_=i.unproject(h,t.z),p=i.unproject(u,t.z);return[_,p]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),a=new wt(i[0],i[1]);return this.options.noWrap||(a=this._map.wrapLatLngBounds(a)),a},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),a=new G(+i[0],+i[1]);return a.z=+i[2],a},_removeTile:function(t){var i=this._tiles[t];i&&(it(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){U(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=v,t.onmousemove=v,z.ielt9&&this.options.opacity<1&&Ct(t,this.options.opacity)},_addTile:function(t,i){var a=this._getTilePos(t),h=this._tileCoordsToKey(t),u=this.createTile(this._wrapCoords(t),c(this._tileReady,this,t));this._initTile(u),this.createTile.length<2&&st(c(this._tileReady,this,t,null,u)),ht(u,a),this._tiles[h]={el:u,coords:t,current:!0},i.appendChild(u),this.fire("tileloadstart",{tile:u,coords:t})},_tileReady:function(t,i,a){i&&this.fire("tileerror",{error:i,tile:a,coords:t});var h=this._tileCoordsToKey(t);a=this._tiles[h],a&&(a.loaded=+new Date,this._map._fadeAnimated?(Ct(a.el,0),dt(this._fadeFrame),this._fadeFrame=st(this._updateOpacity,this)):(a.active=!0,this._pruneTiles()),i||(U(a.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:a.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),z.ielt9||!this._map._fadeAnimated?st(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new G(this._wrapX?g(t.x,this._wrapX):t.x,this._wrapY?g(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new et(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function ih(t){return new Ye(t)}var xe=Ye.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,i){this._url=t,i=M(this,i),i.detectRetina&&z.retina&&i.maxZoom>0?(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom=Math.min(i.maxZoom,i.minZoom+1)):(i.zoomOffset++,i.maxZoom=Math.max(i.minZoom,i.maxZoom-1)),i.minZoom=Math.max(0,i.minZoom)):i.zoomReverse?i.minZoom=Math.min(i.maxZoom,i.minZoom):i.maxZoom=Math.max(i.minZoom,i.maxZoom),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&i===void 0&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var a=document.createElement("img");return H(a,"load",c(this._tileOnLoad,this,i,a)),H(a,"error",c(this._tileOnError,this,i,a)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(a.referrerPolicy=this.options.referrerPolicy),a.alt="",a.src=this.getTileUrl(t),a},getTileUrl:function(t){var i={r:z.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var a=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=a),i["-y"]=a}return I(this._url,o(i,this.options))},_tileOnLoad:function(t,i){z.ielt9?setTimeout(c(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,a){var h=this.options.errorTileUrl;h&&i.getAttribute("src")!==h&&(i.src=h),t(a,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,a=this.options.zoomReverse,h=this.options.zoomOffset;return a&&(t=i-t),t+h},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=v,i.onerror=v,!i.complete)){i.src=B;var a=this._tiles[t].coords;it(i),delete this._tiles[t],this.fire("tileabort",{tile:i,coords:a})}},_removeTile:function(t){var i=this._tiles[t];if(i)return i.el.setAttribute("src",B),Ye.prototype._removeTile.call(this,t)},_tileReady:function(t,i,a){if(!(!this._map||a&&a.getAttribute("src")===B))return Ye.prototype._tileReady.call(this,t,i,a)}});function oa(t,i){return new xe(t,i)}var ha=xe.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var a=o({},this.defaultWmsParams);for(var h in i)h in this.options||(a[h]=i[h]);i=M(this,i);var u=i.detectRetina&&z.retina?2:1,_=this.getTileSize();a.width=_.x*u,a.height=_.y*u,this.wmsParams=a},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,xe.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),a=this._crs,h=Mt(a.project(i[0]),a.project(i[1])),u=h.min,_=h.max,p=(this._wmsVersion>=1.3&&this._crs===ta?[u.y,u.x,_.y,_.x]:[u.x,u.y,_.x,_.y]).join(","),y=xe.prototype.getTileUrl.call(this,t);return y+C(this.wmsParams,y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+p},setParams:function(t,i){return o(this.wmsParams,t),i||this.redraw(),this}});function nh(t,i){return new ha(t,i)}xe.WMS=ha,oa.wms=nh;var jt=Dt.extend({options:{padding:.1},initialize:function(t){M(this,t),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),U(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var a=this._map.getZoomScale(i,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),u=this._map.project(this._center,i),_=h.multiplyBy(-a).add(u).subtract(this._map._getNewPixelOrigin(t,i));z.any3d?ae(this._container,_,a):ht(this._container,_)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),a=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new et(a,a.add(i.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),la=jt.extend({options:{tolerance:0},getEvents:function(){var t=jt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){jt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");H(t,"mousemove",this._onMouseMove,this),H(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),H(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){dt(this._redrawRequest),delete this._ctx,it(this._container),tt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){jt.prototype._update.call(this);var t=this._bounds,i=this._container,a=t.getSize(),h=z.retina?2:1;ht(i,t.min),i.width=h*a.x,i.height=h*a.y,i.style.width=a.x+"px",i.style.height=a.y+"px",z.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){jt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[d(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,a=i.next,h=i.prev;a?a.prev=h:this._drawLast=h,h?h.next=a:this._drawFirst=a,delete t._order,delete this._layers[d(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var i=t.options.dashArray.split(/[, ]+/),a=[],h,u;for(u=0;u<i.length;u++){if(h=Number(i[u]),isNaN(h))return;a.push(h)}t.options._dashArray=a}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||st(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new et,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var a=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,a.x,a.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)t=h.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(this._drawing){var a,h,u,_,p=t._parts,y=p.length,w=this._ctx;if(y){for(w.beginPath(),a=0;a<y;a++){for(h=0,u=p[a].length;h<u;h++)_=p[a][h],w[h?"lineTo":"moveTo"](_.x,_.y);i&&w.closePath()}this._fillStroke(w,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var i=t._point,a=this._ctx,h=Math.max(Math.round(t._radius),1),u=(Math.max(Math.round(t._radiusY),1)||h)/h;u!==1&&(a.save(),a.scale(1,u)),a.beginPath(),a.arc(i.x,i.y/u,h,0,Math.PI*2,!1),u!==1&&a.restore(),this._fillStroke(a,t)}},_fillStroke:function(t,i){var a=i.options;a.fill&&(t.globalAlpha=a.fillOpacity,t.fillStyle=a.fillColor||a.color,t.fill(a.fillRule||"evenodd")),a.stroke&&a.weight!==0&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=a.opacity,t.lineWidth=a.weight,t.strokeStyle=a.color,t.lineCap=a.lineCap,t.lineJoin=a.lineJoin,t.stroke())},_onClick:function(t){for(var i=this._map.mouseEventToLayerPoint(t),a,h,u=this._drawFirst;u;u=u.next)a=u.layer,a.options.interactive&&a._containsPoint(i)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(a))&&(h=a);this._fireEvent(h?[h]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(at(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var a,h,u=this._drawFirst;u;u=u.next)a=u.layer,a.options.interactive&&a._containsPoint(i)&&(h=a);h!==this._hoveredLayer&&(this._handleMouseOut(t),h&&(U(this._container,"leaflet-interactive"),this._fireEvent([h],t,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,a){this._map._fireDOMEvent(i,a||i.type,t)},_bringToFront:function(t){var i=t._order;if(i){var a=i.next,h=i.prev;if(a)a.prev=h;else return;h?h.next=a:a&&(this._drawFirst=a),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t)}},_bringToBack:function(t){var i=t._order;if(i){var a=i.next,h=i.prev;if(h)h.next=a;else return;a?a.prev=h:h&&(this._drawLast=h),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)}}});function ua(t){return z.canvas?new la(t):null}var Xe=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),sh={_initContainer:function(){this._container=Y("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(jt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=Xe("shape");U(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=Xe("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;it(i),t.removeInteractiveTarget(i),delete this._layers[d(t)]},_updateStyle:function(t){var i=t._stroke,a=t._fill,h=t.options,u=t._container;u.stroked=!!h.stroke,u.filled=!!h.fill,h.stroke?(i||(i=t._stroke=Xe("stroke")),u.appendChild(i),i.weight=h.weight+"px",i.color=h.color,i.opacity=h.opacity,h.dashArray?i.dashStyle=N(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=h.lineCap.replace("butt","flat"),i.joinstyle=h.lineJoin):i&&(u.removeChild(i),t._stroke=null),h.fill?(a||(a=t._fill=Xe("fill")),u.appendChild(a),a.color=h.fillColor||h.color,a.opacity=h.fillOpacity):a&&(u.removeChild(a),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),a=Math.round(t._radius),h=Math.round(t._radiusY||a);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+a+","+h+" 0,"+65535*360)},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){ve(t._container)},_bringToBack:function(t){pe(t._container)}},Ii=z.vml?Xe:_s,Je=jt.extend({_initContainer:function(){this._container=Ii("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ii("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){it(this._container),tt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){jt.prototype._update.call(this);var t=this._bounds,i=t.getSize(),a=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,a.setAttribute("width",i.x),a.setAttribute("height",i.y)),ht(a,t.min),a.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=Ii("path");t.options.className&&U(i,t.options.className),t.options.interactive&&U(i,"leaflet-interactive"),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){it(t._path),t.removeInteractiveTarget(t._path),delete this._layers[d(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,a=t.options;i&&(a.stroke?(i.setAttribute("stroke",a.color),i.setAttribute("stroke-opacity",a.opacity),i.setAttribute("stroke-width",a.weight),i.setAttribute("stroke-linecap",a.lineCap),i.setAttribute("stroke-linejoin",a.lineJoin),a.dashArray?i.setAttribute("stroke-dasharray",a.dashArray):i.removeAttribute("stroke-dasharray"),a.dashOffset?i.setAttribute("stroke-dashoffset",a.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),a.fill?(i.setAttribute("fill",a.fillColor||a.color),i.setAttribute("fill-opacity",a.fillOpacity),i.setAttribute("fill-rule",a.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,ms(t._parts,i))},_updateCircle:function(t){var i=t._point,a=Math.max(Math.round(t._radius),1),h=Math.max(Math.round(t._radiusY),1)||a,u="a"+a+","+h+" 0 1,0 ",_=t._empty()?"M0 0":"M"+(i.x-a)+","+i.y+u+a*2+",0 "+u+-a*2+",0 ";this._setPath(t,_)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){ve(t._path)},_bringToBack:function(t){pe(t._path)}});z.vml&&Je.include(sh);function ca(t){return z.svg||z.vml?new Je(t):null}K.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var i=this._paneRenderers[t];return i===void 0&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&ua(t)||ca(t)}});var fa=Me.extend({initialize:function(t,i){Me.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ot(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function ah(t,i){return new fa(t,i)}Je.create=Ii,Je.pointsToPath=ms,Vt.geometryToLayer=Si,Vt.coordsToLatLng=zn,Vt.coordsToLatLngs=Ei,Vt.latLngToCoords=Bn,Vt.latLngsToCoords=ki,Vt.getFeature=we,Vt.asFeature=Oi,K.mergeOptions({boxZoom:!0});var da=Rt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){H(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){tt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){it(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ge(),yn(),this._startPoint=this._map.mouseEventToContainerPoint(t),H(document,{contextmenu:he,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Y("div","leaflet-zoom-box",this._container),U(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new et(this._point,this._startPoint),a=i.getSize();ht(this._box,i.min),this._box.style.width=a.x+"px",this._box.style.height=a.y+"px"},_finish:function(){this._moved&&(it(this._box),at(this._container,"leaflet-crosshair")),He(),Mn(),tt(document,{contextmenu:he,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var i=new wt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});K.addInitHook("addHandler","boxZoom",da),K.mergeOptions({doubleClickZoom:!0});var _a=Rt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,a=i.getZoom(),h=i.options.zoomDelta,u=t.originalEvent.shiftKey?a-h:a+h;i.options.doubleClickZoom==="center"?i.setZoom(u):i.setZoomAround(t.containerPoint,u)}});K.addInitHook("addHandler","doubleClickZoom",_a),K.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ma=Rt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Qt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}U(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){at(this._map._container,"leaflet-grab"),at(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=ot(this._map.options.maxBounds);this._offsetLimit=Mt(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,a=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(a),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),a=this._initialWorldOffset,h=this._draggable._newPos.x,u=(h-i+a)%t+i-a,_=(h+i+a)%t-i-a,p=Math.abs(u+a)<Math.abs(_+a)?u:_;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=p},_onDragEnd:function(t){var i=this._map,a=i.options,h=!a.inertia||t.noInertia||this._times.length<2;if(i.fire("dragend",t),h)i.fire("moveend");else{this._prunePositions(+new Date);var u=this._lastPos.subtract(this._positions[0]),_=(this._lastTime-this._times[0])/1e3,p=a.easeLinearity,y=u.multiplyBy(p/_),w=y.distanceTo([0,0]),T=Math.min(a.inertiaMaxSpeed,w),A=y.multiplyBy(T/w),R=T/(a.inertiaDeceleration*p),V=A.multiplyBy(-R/2).round();!V.x&&!V.y?i.fire("moveend"):(V=i._limitOffset(V,i.options.maxBounds),st(function(){i.panBy(V,{duration:R,easeLinearity:p,noMoveStart:!0,animate:!0})}))}}});K.addInitHook("addHandler","dragging",ma),K.mergeOptions({keyboard:!0,keyboardPanDelta:80});var va=Rt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),H(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),tt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,a=t.scrollTop||i.scrollTop,h=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(h,a)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i=this._panKeys={},a=this.keyCodes,h,u;for(h=0,u=a.left.length;h<u;h++)i[a.left[h]]=[-1*t,0];for(h=0,u=a.right.length;h<u;h++)i[a.right[h]]=[t,0];for(h=0,u=a.down.length;h<u;h++)i[a.down[h]]=[0,t];for(h=0,u=a.up.length;h<u;h++)i[a.up[h]]=[0,-1*t]},_setZoomDelta:function(t){var i=this._zoomKeys={},a=this.keyCodes,h,u;for(h=0,u=a.zoomIn.length;h<u;h++)i[a.zoomIn[h]]=t;for(h=0,u=a.zoomOut.length;h<u;h++)i[a.zoomOut[h]]=-t},_addHooks:function(){H(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){tt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=t.keyCode,a=this._map,h;if(i in this._panKeys){if(!a._panAnim||!a._panAnim._inProgress)if(h=this._panKeys[i],t.shiftKey&&(h=W(h).multiplyBy(3)),a.options.maxBounds&&(h=a._limitOffset(W(h),a.options.maxBounds)),a.options.worldCopyJump){var u=a.wrapLatLng(a.unproject(a.project(a.getCenter()).add(h)));a.panTo(u)}else a.panBy(h)}else if(i in this._zoomKeys)a.setZoom(a.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&a._popup&&a._popup.options.closeOnEscapeKey)a.closePopup();else return;he(t)}}});K.addInitHook("addHandler","keyboard",va),K.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var pa=Rt.extend({addHooks:function(){H(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){tt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=qs(t),a=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var h=Math.max(a-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),h),he(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),a=this._map.options.zoomSnap||0;t._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),u=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,_=a?Math.ceil(u/a)*a:u,p=t._limitZoom(i+(this._delta>0?_:-_))-i;this._delta=0,this._startTime=null,p&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+p):t.setZoomAround(this._lastMousePos,i+p))}});K.addInitHook("addHandler","scrollWheelZoom",pa);var rh=600;K.mergeOptions({tapHold:z.touchNative&&z.safari&&z.mobile,tapTolerance:15});var ga=Rt.extend({addHooks:function(){H(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){tt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var i=t.touches[0];this._startPos=this._newPos=new G(i.clientX,i.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(H(document,"touchend",_t),H(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),rh),H(document,"touchend touchcancel contextmenu",this._cancel,this),H(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){tt(document,"touchend",_t),tt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),tt(document,"touchend touchcancel contextmenu",this._cancel,this),tt(document,"touchmove",this._onMove,this)},_onMove:function(t){var i=t.touches[0];this._newPos=new G(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,i){var a=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});a._simulated=!0,i.target.dispatchEvent(a)}});K.addInitHook("addHandler","tapHold",ga),K.mergeOptions({touchZoom:z.touch,bounceAtZoomLimits:!0});var ya=Rt.extend({addHooks:function(){U(this._map._container,"leaflet-touch-zoom"),H(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){at(this._map._container,"leaflet-touch-zoom"),tt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(!(!t.touches||t.touches.length!==2||i._animatingZoom||this._zooming)){var a=i.mouseEventToContainerPoint(t.touches[0]),h=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(a.add(h)._divideBy(2))),this._startDist=a.distanceTo(h),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),H(document,"touchmove",this._onTouchMove,this),H(document,"touchend touchcancel",this._onTouchEnd,this),_t(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var i=this._map,a=i.mouseEventToContainerPoint(t.touches[0]),h=i.mouseEventToContainerPoint(t.touches[1]),u=a.distanceTo(h)/this._startDist;if(this._zoom=i.getScaleZoom(u,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&u<1||this._zoom>i.getMaxZoom()&&u>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,u===1)return}else{var _=a._add(h)._divideBy(2)._subtract(this._centerPoint);if(u===1&&_.x===0&&_.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(_),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),dt(this._animRequest);var p=c(i._move,i,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=st(p,this,!0),_t(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,dt(this._animRequest),tt(document,"touchmove",this._onTouchMove,this),tt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});K.addInitHook("addHandler","touchZoom",ya),K.BoxZoom=da,K.DoubleClickZoom=_a,K.Drag=ma,K.Keyboard=va,K.ScrollWheelZoom=pa,K.TapHold=ga,K.TouchZoom=ya,s.Bounds=et,s.Browser=z,s.CRS=Ht,s.Canvas=la,s.Circle=In,s.CircleMarker=Ci,s.Class=Gt,s.Control=At,s.DivIcon=ra,s.DivOverlay=Zt,s.DomEvent=Po,s.DomUtil=xo,s.Draggable=Qt,s.Evented=Re,s.FeatureGroup=$t,s.GeoJSON=Vt,s.GridLayer=Ye,s.Handler=Rt,s.Icon=ye,s.ImageOverlay=Ai,s.LatLng=Q,s.LatLngBounds=wt,s.Layer=Dt,s.LayerGroup=ge,s.LineUtil=Bo,s.Map=K,s.Marker=Ti,s.Mixin=Oo,s.Path=te,s.Point=G,s.PolyUtil=Ao,s.Polygon=Me,s.Polyline=Ut,s.Popup=Di,s.PosAnimation=Ws,s.Projection=Ro,s.Rectangle=fa,s.Renderer=jt,s.SVG=Je,s.SVGOverlay=aa,s.TileLayer=xe,s.Tooltip=Ni,s.Transformation=on,s.Util=an,s.VideoOverlay=sa,s.bind=c,s.bounds=Mt,s.canvas=ua,s.circle=Uo,s.circleMarker=$o,s.control=Ve,s.divIcon=eh,s.extend=o,s.featureGroup=Wo,s.geoJSON=na,s.geoJson=Ko,s.gridLayer=ih,s.icon=Go,s.imageOverlay=Yo,s.latLng=j,s.latLngBounds=ot,s.layerGroup=qo,s.map=Lo,s.marker=Ho,s.point=W,s.polygon=jo,s.polyline=Vo,s.popup=Qo,s.rectangle=ah,s.setOptions=M,s.stamp=d,s.svg=ca,s.svgOverlay=Jo,s.tileLayer=oa,s.tooltip=th,s.transformation=Ze,s.version=r,s.videoOverlay=Xo;var oh=window.L;s.noConflict=function(){return window.L=oh,this},window.L=s})})(es,es.exports);var kd=es.exports;const Ad=ph(kd);export{Od as D,Ad as L,vh as c,ph as g,Ot as p};
//# sourceMappingURL=manager-2517acb8.js.map
